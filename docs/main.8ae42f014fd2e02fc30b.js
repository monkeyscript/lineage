(self.webpackChunklineage=self.webpackChunklineage||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},3018:(t,e,n)=>{"use strict";n.d(e,{deG:()=>an,tb:()=>Uu,AFp:()=>Ru,ip1:()=>Du,CZH:()=>Pu,hGG:()=>Dc,z2F:()=>xc,sBO:()=>Pa,Sil:()=>Yu,_Vd:()=>ra,EJc:()=>Bu,SBq:()=>aa,qLn:()=>Sr,vpe:()=>du,gxx:()=>fs,tBr:()=>In,XFs:()=>N,OlP:()=>on,zs3:()=>Cs,ZZ4:()=>ka,aQg:()=>Ca,soG:()=>qu,YKP:()=>za,v3s:()=>Tc,h0i:()=>Ba,PXZ:()=>yc,R0b:()=>Xu,FiY:()=>Cn,Lbi:()=>ju,g9A:()=>Fu,Qsj:()=>la,FYo:()=>ca,JOm:()=>Or,Tiy:()=>da,q3G:()=>yr,tp0:()=>An,EAV:()=>Ic,Rgc:()=>ja,dDg:()=>oc,DyG:()=>un,q4F:()=>pa,GfV:()=>fa,s_b:()=>Ga,ifc:()=>F,eFA:()=>vc,G48:()=>gc,Gpc:()=>g,X6Q:()=>pc,_c5:()=>Oc,VLi:()=>cc,c2e:()=>Vu,zSh:()=>gs,wAp:()=>zo,vHH:()=>v,EiD:()=>gr,mCW:()=>Jn,qzn:()=>qn,JVY:()=>zn,pB0:()=>Hn,eBb:()=>Gn,L6k:()=>$n,LAX:()=>Zn,cg1:()=>Vo,Tjo:()=>Ac,kL8:()=>qo,yhl:()=>Bn,dqk:()=>B,sIi:()=>Fs,CqO:()=>no,QGY:()=>to,F4k:()=>eo,RDi:()=>It,AaK:()=>d,z3N:()=>Vn,qOj:()=>Os,TTD:()=>wt,_Bn:()=>ta,xp6:()=>yi,uIk:()=>Bs,Tol:()=>_o,Gre:()=>Mo,ekj:()=>vo,Suo:()=>ku,Xpm:()=>X,lG2:()=>ot,Yz7:()=>x,cJS:()=>E,oAB:()=>rt,Yjl:()=>at,Y36:()=>Zs,_UZ:()=>Qs,GkF:()=>Js,qZA:()=>Ys,TgZ:()=>Ks,EpF:()=>Xs,n5z:()=>tn,Ikx:()=>Lo,LFG:()=>Tn,$8M:()=>nn,NdJ:()=>ro,CRH:()=>Iu,kcU:()=>ve,O4$:()=>ye,oxw:()=>oo,Hsn:()=>co,F$t:()=>uo,Q6J:()=>Hs,DdM:()=>ou,VKq:()=>au,WLB:()=>uu,kEZ:()=>cu,iGM:()=>Tu,MAs:()=>Gs,evT:()=>Cr,Jf7:()=>Ir,CHM:()=>Gt,oJD:()=>vr,LSH:()=>_r,kYT:()=>it,Udp:()=>yo,YNc:()=>$s,W1O:()=>Nu,_uU:()=>No,Oqu:()=>Do,hij:()=>Po,AsE:()=>Ro,Gf:()=>Su});var r=n(9765),i=n(5319),s=n(7574),o=n(6682),a=n(2441),u=n(1307);function c(){return new r.xQ}function l(t){for(let e in t)if(t[e]===l)return e;throw Error("Could not find renamed property on target object.")}function h(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function d(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(d).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function f(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const p=l({__forward_ref__:l});function g(t){return t.__forward_ref__=g,t.toString=function(){return d(this())},t}function m(t){return y(t)?t():t}function y(t){return"function"==typeof t&&t.hasOwnProperty(p)&&t.__forward_ref__===g}class v extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function _(t){return"string"==typeof t?t:null==t?"":String(t)}function w(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():_(t)}function b(t,e){const n=e?` in ${e}`:"";throw new v("201",`No provider for ${w(t)} found${n}`)}function x(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function E(t){return{providers:t.providers||[],imports:t.imports||[]}}function T(t){return S(t,I)||S(t,A)}function S(t,e){return t.hasOwnProperty(e)?t[e]:null}function k(t){return t&&(t.hasOwnProperty(C)||t.hasOwnProperty(O))?t[C]:null}const I=l({"\u0275prov":l}),C=l({"\u0275inj":l}),A=l({ngInjectableDef:l}),O=l({ngInjectorDef:l});var N=(()=>((N=N||{})[N.Default=0]="Default",N[N.Host=1]="Host",N[N.Self=2]="Self",N[N.SkipSelf=4]="SkipSelf",N[N.Optional=8]="Optional",N))();let D;function P(t){const e=D;return D=t,e}function R(t,e,n){const r=T(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&N.Optional?null:void 0!==e?e:void b(d(t),"Injector")}function M(t){return{toString:t}.toString()}var L=(()=>((L=L||{})[L.OnPush=0]="OnPush",L[L.Default=1]="Default",L))(),F=(()=>((F=F||{})[F.Emulated=0]="Emulated",F[F.None=2]="None",F[F.ShadowDom=3]="ShadowDom",F))();const j="undefined"!=typeof globalThis&&globalThis,U="undefined"!=typeof window&&window,V="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,q="undefined"!=typeof global&&global,B=j||q||U||V,z={},$=[],G=l({"\u0275cmp":l}),Z=l({"\u0275dir":l}),H=l({"\u0275pipe":l}),W=l({"\u0275mod":l}),K=l({"\u0275loc":l}),Y=l({"\u0275fac":l}),Q=l({__NG_ELEMENT_ID__:l});let J=0;function X(t){return M(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===L.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||$,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||F.Emulated,id:"c",styles:t.styles||$,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,s=t.pipes;return n.id+=J++,n.inputs=st(t.inputs,e),n.outputs=st(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(tt):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(et):null,n})}function tt(t){return ut(t)||function(t){return t[Z]||null}(t)}function et(t){return function(t){return t[H]||null}(t)}const nt={};function rt(t){return M(()=>{const e={type:t.type,bootstrap:t.bootstrap||$,declarations:t.declarations||$,imports:t.imports||$,exports:t.exports||$,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(nt[t.id]=t.type),e})}function it(t,e){return M(()=>{const n=ct(t,!0);n.declarations=e.declarations||$,n.imports=e.imports||$,n.exports=e.exports||$})}function st(t,e){if(null==t)return z;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const ot=X;function at(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ut(t){return t[G]||null}function ct(t,e){const n=t[W]||null;if(!n&&!0===e)throw new Error(`Type ${d(t)} does not have '\u0275mod' property.`);return n}const lt=20,ht=10;function dt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ft(t){return Array.isArray(t)&&!0===t[1]}function pt(t){return 0!=(8&t.flags)}function gt(t){return 2==(2&t.flags)}function mt(t){return 1==(1&t.flags)}function yt(t){return null!==t.template}function vt(t,e){return t.hasOwnProperty(Y)?t[Y]:null}class _t{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function wt(){return bt}function bt(t){return t.type.prototype.ngOnChanges&&(t.setInput=Et),xt}function xt(){const t=Tt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===z)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Et(t,e,n,r){const i=Tt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:z,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],u=o[a];s[a]=new _t(u&&u.currentValue,e,o===z),t[r]=e}function Tt(t){return t.__ngSimpleChanges__||null}wt.ngInherit=!0;const St="http://www.w3.org/2000/svg";let kt;function It(t){kt=t}function Ct(){return void 0!==kt?kt:"undefined"!=typeof document?document:void 0}function At(t){return!!t.listen}const Ot={createRenderer:(t,e)=>Ct()};function Nt(t){for(;Array.isArray(t);)t=t[0];return t}function Dt(t,e){return Nt(e[t])}function Pt(t,e){return Nt(e[t.index])}function Rt(t,e){return t.data[e]}function Mt(t,e){const n=e[t];return dt(n)?n:n[0]}function Lt(t){return 4==(4&t[2])}function Ft(t){return 128==(128&t[2])}function jt(t,e){return null==e?null:t[e]}function Ut(t){t[18]=0}function Vt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const qt={lFrame:le(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Bt(){return qt.bindingsEnabled}function zt(){return qt.lFrame.lView}function $t(){return qt.lFrame.tView}function Gt(t){return qt.lFrame.contextLView=t,t[8]}function Zt(){let t=Ht();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ht(){return qt.lFrame.currentTNode}function Wt(t,e){const n=qt.lFrame;n.currentTNode=t,n.isParent=e}function Kt(){return qt.lFrame.isParent}function Yt(){qt.lFrame.isParent=!1}function Qt(){return qt.isInCheckNoChangesMode}function Jt(t){qt.isInCheckNoChangesMode=t}function Xt(){const t=qt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function te(){return qt.lFrame.bindingIndex++}function ee(t){const e=qt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function ne(t,e){const n=qt.lFrame;n.bindingIndex=n.bindingRootIndex=t,re(e)}function re(t){qt.lFrame.currentDirectiveIndex=t}function ie(){return qt.lFrame.currentQueryIndex}function se(t){qt.lFrame.currentQueryIndex=t}function oe(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ae(t,e,n){if(n&N.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&N.Host||(r=oe(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=qt.lFrame=ce();return r.currentTNode=e,r.lView=t,!0}function ue(t){const e=ce(),n=t[1];qt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ce(){const t=qt.lFrame,e=null===t?null:t.child;return null===e?le(t):e}function le(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function he(){const t=qt.lFrame;return qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const de=he;function fe(){const t=he();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function pe(){return qt.lFrame.selectedIndex}function ge(t){qt.lFrame.selectedIndex=t}function me(){const t=qt.lFrame;return Rt(t.tView,t.selectedIndex)}function ye(){qt.lFrame.currentNamespace=St}function ve(){qt.lFrame.currentNamespace=null}function _e(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function we(t,e,n){Ee(t,e,3,n)}function be(t,e,n,r){(3&t[2])===n&&Ee(t,e,n,r)}function xe(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Ee(t,e,n,r){const i=null!=r?r:-1,s=e.length-1;let o=0;for(let a=void 0!==r?65535&t[18]:0;a<s;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=r&&o>=r)break}else e[a]<0&&(t[18]+=65536),(o<i||-1==i)&&(Te(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Te(t,e,n,r){const i=n[r]<0,s=n[r+1],o=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const Se=-1;class ke{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ie(t,e,n){const r=At(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,o):e.setAttributeNS(o,a,u)}else{const o=s,a=n[++i];Ae(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function Ce(t){return 3===t||4===t||6===t}function Ae(t){return 64===t.charCodeAt(0)}function Oe(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ne(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ne(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function De(t){return t!==Se}function Pe(t){return 32767&t}function Re(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Me=!0;function Le(t){const e=Me;return Me=t,e}let Fe=0;function je(t,e){const n=Ve(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ue(r.data,t),Ue(e,null),Ue(r.blueprint,null));const i=qe(t,e),s=t.injectorIndex;if(De(i)){const t=Pe(i),n=Re(i,e),r=n[1].data;for(let i=0;i<8;i++)e[s+i]=n[t+i]|r[t+i]}return e[s+8]=i,s}function Ue(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ve(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function qe(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Se;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Se}function Be(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Q)&&(r=n[Q]),null==r&&(r=n[Q]=Fe++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function ze(t,e,n){if(n&N.Optional)return t;b(e,"NodeInjector")}function $e(t,e,n,r){if(n&N.Optional&&void 0===r&&(r=null),0==(n&(N.Self|N.Host))){const i=t[9],s=P(void 0);try{return i?i.get(e,r,n&N.Optional):R(e,r,n&N.Optional)}finally{P(s)}}return ze(r,e,n)}function Ge(t,e,n,r=N.Default,i){if(null!==t){const s=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Q)?t[Q]:void 0;return"number"==typeof e?e>=0?255&e:He:e}(n);if("function"==typeof s){if(!ae(e,t,r))return r&N.Host?ze(i,n,r):$e(e,n,r,i);try{const t=s(r);if(null!=t||r&N.Optional)return t;b(n)}finally{de()}}else if("number"==typeof s){let i=null,o=Ve(t,e),a=Se,u=r&N.Host?e[16][6]:null;for((-1===o||r&N.SkipSelf)&&(a=-1===o?qe(t,e):e[o+8],a!==Se&&Je(r,!1)?(i=e[1],o=Pe(a),e=Re(a,e)):o=-1);-1!==o;){const t=e[1];if(Qe(s,o,t.data)){const t=We(o,e,n,i,r,u);if(t!==Ze)return t}a=e[o+8],a!==Se&&Je(r,e[1].data[o+8]===u)&&Qe(s,o,e)?(i=t,o=Pe(a),e=Re(a,e)):o=-1}}}return $e(e,n,r,i)}const Ze={};function He(){return new Xe(Zt(),zt())}function We(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],u=Ke(a,o,n,null==r?gt(a)&&Me:r!=o&&0!=(3&a.type),i&N.Host&&s===a);return null!==u?Ye(e,o,u,a):Ze}function Ke(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,c=s>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=o[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=o[u];if(t&&yt(t)&&t.type===n)return u}return null}function Ye(t,e,n,r){let i=t[n];const s=e.data;if(i instanceof ke){const o=i;o.resolving&&function(t,e){throw new v("200",`Circular dependency in DI detected for ${t}`)}(w(s[n]));const a=Le(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?P(o.injectImpl):null;ae(t,r,N.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const r=bt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==u&&P(u),Le(a),o.resolving=!1,de()}}return i}function Qe(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Je(t,e){return!(t&N.Self||t&N.Host&&e)}class Xe{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ge(this._tNode,this._lView,t,void 0,e)}}function tn(t){return M(()=>{const e=t.prototype.constructor,n=e[Y]||en(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Y]||en(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function en(t){return y(t)?()=>{const e=en(m(t));return e&&e()}:vt(t)}function nn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ce(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Zt(),t)}const rn="__parameters__";function sn(t,e,n){return M(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(rn)?t[rn]:Object.defineProperty(t,rn,{value:[]})[rn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class on{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=x({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const an=new on("AnalyzeForEntryComponents"),un=Function;function cn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),cn(r,e)):e!==t&&e.push(r)}return e}function ln(t,e){t.forEach(t=>Array.isArray(t)?ln(t,e):e(t))}function hn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function dn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function fn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function pn(t,e,n){let r=mn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function gn(t,e){const n=mn(t,e);if(n>=0)return t[1|n]}function mn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=t[n<<1];if(e===s)return n<<1;s>e?i=n:r=n+1}return~(i<<1)}(t,e)}const yn={},vn=/\n/gm,_n="__source",wn=l({provide:String,useValue:l});let bn;function xn(t){const e=bn;return bn=t,e}function En(t,e=N.Default){if(void 0===bn)throw new Error("inject() must be called from an injection context");return null===bn?R(t,void 0,e):bn.get(t,e&N.Optional?null:void 0,e)}function Tn(t,e=N.Default){return(D||En)(m(t),e)}function Sn(t){const e=[];for(let n=0;n<t.length;n++){const r=m(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=N.Default;for(let e=0;e<r.length;e++){const i=r[e],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?t=i.token:n|=s:t=i}e.push(Tn(t,n))}else e.push(Tn(r))}return e}function kn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const In=kn(sn("Inject",t=>({token:t})),-1),Cn=kn(sn("Optional"),8),An=kn(sn("SkipSelf"),4);let On,Nn;function Dn(t){var e;return(null===(e=function(){if(void 0===On&&(On=null,B.trustedTypes))try{On=B.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return On}())||void 0===e?void 0:e.createHTML(t))||t}function Pn(t){var e;return(null===(e=function(){if(void 0===Nn&&(Nn=null,B.trustedTypes))try{Nn=B.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Nn}())||void 0===e?void 0:e.createHTML(t))||t}class Rn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Mn extends Rn{getTypeName(){return"HTML"}}class Ln extends Rn{getTypeName(){return"Style"}}class Fn extends Rn{getTypeName(){return"Script"}}class jn extends Rn{getTypeName(){return"URL"}}class Un extends Rn{getTypeName(){return"ResourceURL"}}function Vn(t){return t instanceof Rn?t.changingThisBreaksApplicationSecurity:t}function qn(t,e){const n=Bn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Bn(t){return t instanceof Rn&&t.getTypeName()||null}function zn(t){return new Mn(t)}function $n(t){return new Ln(t)}function Gn(t){return new Fn(t)}function Zn(t){return new jn(t)}function Hn(t){return new Un(t)}class Wn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Dn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Kn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Dn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Dn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Yn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Qn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Jn(t){return(t=String(t)).match(Yn)||t.match(Qn)?t:"unsafe:"+t}function Xn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function tr(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const er=Xn("area,br,col,hr,img,wbr"),nr=Xn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),rr=Xn("rp,rt"),ir=tr(rr,nr),sr=tr(er,tr(nr,Xn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),tr(rr,Xn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ir),or=Xn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ar=Xn("srcset"),ur=tr(or,ar,Xn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Xn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),cr=Xn("script,style,template");class lr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!sr.hasOwnProperty(e))return this.sanitizedSomething=!0,!cr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,s=e.toLowerCase();if(!ur.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=t.value;or[s]&&(o=Jn(o)),ar[s]&&(r=o,o=(r=String(r)).split(",").map(t=>Jn(t.trim())).join(", ")),this.buf.push(" ",e,'="',fr(o),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();sr.hasOwnProperty(e)&&!er.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(fr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const hr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,dr=/([^\#-~ |!])/g;function fr(t){return t.replace(/&/g,"&amp;").replace(hr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(dr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let pr;function gr(t,e){let n=null;try{pr=pr||function(t){const e=new Kn(t);return function(){try{return!!(new window.DOMParser).parseFromString(Dn(""),"text/html")}catch(t){return!1}}()?new Wn(e):e}(t);let r=e?String(e):"";n=pr.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=pr.getInertBodyElement(r)}while(r!==s);return Dn((new lr).sanitizeChildren(mr(n)||n))}finally{if(n){const t=mr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function mr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var yr=(()=>((yr=yr||{})[yr.NONE=0]="NONE",yr[yr.HTML=1]="HTML",yr[yr.STYLE=2]="STYLE",yr[yr.SCRIPT=3]="SCRIPT",yr[yr.URL=4]="URL",yr[yr.RESOURCE_URL=5]="RESOURCE_URL",yr))();function vr(t){const e=wr();return e?Pn(e.sanitize(yr.HTML,t)||""):qn(t,"HTML")?Pn(Vn(t)):gr(Ct(),_(t))}function _r(t){const e=wr();return e?e.sanitize(yr.URL,t)||"":qn(t,"URL")?Vn(t):Jn(_(t))}function wr(){const t=zt();return t&&t[12]}function br(t,e){t.__ngContext__=e}function xr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Er(t){return t.ngOriginalError}function Tr(t,...e){t.error(...e)}class Sr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t&&t.ngErrorLogger||Tr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?function(t){return t.ngDebugContext}(t)||this._findContext(Er(t)):null}_findOriginalError(t){let e=t&&Er(t);for(;e&&Er(e);)e=Er(e);return e||null}}const kr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(B))();function Ir(t){return t.ownerDocument.defaultView}function Cr(t){return t.ownerDocument}function Ar(t){return t instanceof Function?t():t}var Or=(()=>((Or=Or||{})[Or.Important=1]="Important",Or[Or.DashCase=2]="DashCase",Or))();function Nr(t,e){return(void 0)(t,e)}function Dr(t){const e=t[3];return ft(e)?e[3]:e}function Pr(t){return Mr(t[13])}function Rr(t){return Mr(t[4])}function Mr(t){for(;null!==t&&!ft(t);)t=t[4];return t}function Lr(t,e,n,r,i){if(null!=r){let s,o=!1;ft(r)?s=r:dt(r)&&(o=!0,r=r[0]);const a=Nt(r);0===t&&null!==n?null==i?$r(e,n,a):zr(e,n,a,i||null,!0):1===t&&null!==n?zr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Zr(t,e);r&&function(t,e,n,r){At(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,r,i){const s=n[7];s!==Nt(n)&&Lr(e,t,r,s,i);for(let o=ht;o<n.length;o++){const i=n[o];ti(i[1],i,t,e,r,s)}}(e,t,s,n,i)}}function Fr(t,e,n){return At(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function jr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Vt(i,-1)),n.splice(r,1)}function Ur(t,e){if(t.length<=ht)return;const n=ht+e,r=t[n];if(r){const s=r[17];null!==s&&s!==t&&jr(s,r),e>0&&(t[n-1][4]=r[4]);const o=dn(t,ht+e);ti(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Vr(t,e){if(!(256&e[2])){const n=e[11];At(n)&&n.destroyNode&&ti(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return qr(t[1],t);for(;e;){let n=null;if(dt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)dt(e)&&qr(e[1],e),e=e[3];null===e&&(e=t),dt(e)&&qr(e[1],e),n=e&&e[4]}e=n}}(e)}}function qr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof ke)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const t=n[s+1],o="function"==typeof t?t(e):Nt(e[t]),a=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?o.removeEventListener(n[s],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const t=r[i=n[s+1]];n[s].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&At(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ft(e[3])){n!==e[3]&&jr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Br(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===F.None||e===F.Emulated)return null}return Pt(r,n)}(t,e.parent,n)}function zr(t,e,n,r,i){At(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function $r(t,e,n){At(t)?t.appendChild(e,n):e.appendChild(n)}function Gr(t,e,n,r,i){null!==r?zr(t,e,n,r,i):$r(t,e,n)}function Zr(t,e){return At(t)?t.parentNode(e):e.parentNode}function Hr(t,e,n){return Wr(t,e,n)}let Wr=function(t,e,n){return 40&t.type?Pt(t,n):null};function Kr(t,e,n,r){const i=Br(t,r,e),s=e[11],o=Hr(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Gr(s,i,n[a],o,!1);else Gr(s,i,n,o,!1)}function Yr(t,e){if(null!==e){const n=e.type;if(3&n)return Pt(e,t);if(4&n)return Jr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Yr(t,n);{const n=t[e.index];return ft(n)?Jr(-1,n):Nt(n)}}if(32&n)return Nr(e,t)()||Nt(t[e.index]);{const n=Qr(t,e);return null!==n?Array.isArray(n)?n[0]:Yr(Dr(t[16]),n):Yr(t,e.next)}}return null}function Qr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Jr(t,e){const n=ht+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Yr(t,r)}return e[7]}function Xr(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&br(Nt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Xr(t,e,n.child,r,i,s,!1),Lr(e,t,i,a,s);else if(32&u){const o=Nr(n,r);let u;for(;u=o();)Lr(e,t,i,u,s);Lr(e,t,i,a,s)}else 16&u?ei(t,e,r,n,i,s):Lr(e,t,i,a,s);n=o?n.projectionNext:n.next}}function ti(t,e,n,r,i,s){Xr(n,r,t.firstChild,e,i,s,!1)}function ei(t,e,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Lr(e,t,i,a[u],s);else Xr(t,e,a,o[3],i,s,!0)}function ni(t,e,n){At(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function ri(t,e,n){At(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function ii(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const si="ng-template";function oi(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==ii(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function ai(t){return 4===t.type&&t.value!==si}function ui(t,e,n){return e===(4!==t.type||n?t.value:si)}function ci(t,e,n){let r=4;const i=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(Ce(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!ui(t,u,n)||""===u&&1===e.length){if(li(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!oi(t.attrs,c,n)){if(li(r))return!1;o=!0}continue}const l=hi(8&r?"class":u,i,ai(t),n);if(-1===l){if(li(r))return!1;o=!0;continue}if(""!==c){let t;t=l>s?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==ii(e,c,0)||2&r&&c!==t){if(li(r))return!1;o=!0}}}}else{if(!o&&!li(r)&&!li(u))return!1;if(o&&li(u))continue;o=!1,r=u|1&r}}return li(r)||o}function li(t){return 0==(1&t)}function hi(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function di(t,e,n=!1){for(let r=0;r<e.length;r++)if(ci(t,e[r],n))return!0;return!1}function fi(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function pi(t,e){return t?":not("+e.trim()+")":e}function gi(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const e=t[++n];i+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||li(o)||(e+=pi(s,i),i=""),r=o,s=s||!li(r);n++}return""!==i&&(e+=pi(s,i)),e}const mi={};function yi(t){vi($t(),zt(),pe()+t,Qt())}function vi(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&we(e,r,n)}else{const r=t.preOrderHooks;null!==r&&be(e,r,0,n)}ge(n)}function _i(t,e){return t<<17|e<<2}function wi(t){return t>>17&32767}function bi(t){return 2|t}function xi(t){return(131068&t)>>2}function Ei(t,e){return-131069&t|e<<2}function Ti(t){return 1|t}function Si(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=t.data[s];se(i),n.contentQueries(2,e[s],s)}}}function ki(t,e,n,r,i,s,o,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ut(l),l[3]=l[15]=t,l[8]=n,l[10]=o||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=s,l[16]=2==e.type?t[16]:l,l}function Ii(t,e,n,r,i){let s=t.data[e];if(null===s)s=function(t,e,n,r,i){const s=Ht(),o=Kt(),a=t.data[e]=function(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(t,e,n,r,i),qt.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const t=function(){const t=qt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===t?-1:t.injectorIndex}return Wt(s,!0),s}function Ci(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Ai(t,e,n){ue(e);try{const r=t.viewQuery;null!==r&&ss(1,r,n);const i=t.template;null!==i&&Di(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Si(t,e),t.staticViewQueries&&ss(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)ts(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,fe()}}function Oi(t,e,n,r){const i=e[2];if(256==(256&i))return;ue(e);const s=Qt();try{Ut(e),qt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Di(t,e,n,2,r);const o=3==(3&i);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&we(e,n,null)}else{const n=t.preOrderHooks;null!==n&&be(e,n,0,null),xe(e,0)}if(function(t){for(let e=Pr(t);null!==e;e=Rr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Vt(r,1),n[2]|=1024}}}(e),function(t){for(let e=Pr(t);null!==e;e=Rr(e))for(let t=ht;t<e.length;t++){const n=e[t],r=n[1];Ft(n)&&Oi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Si(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&we(e,n)}else{const n=t.contentHooks;null!==n&&be(e,n,1),xe(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ge(~r);else{const i=r,s=n[++t],o=n[++t];ne(s,i),o(2,e[i])}}}finally{ge(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Ji(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&ss(2,u,r),!s)if(o){const n=t.viewCheckHooks;null!==n&&we(e,n)}else{const n=t.viewHooks;null!==n&&be(e,n,2),xe(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Vt(e[3],-1))}finally{fe()}}function Ni(t,e,n,r){const i=e[10],s=!Qt(),o=Lt(e);try{s&&!o&&i.begin&&i.begin(),o&&Ai(t,e,r),Oi(t,e,n,r)}finally{s&&!o&&i.end&&i.end()}}function Di(t,e,n,r,i){const s=pe(),o=2&r;try{ge(-1),o&&e.length>lt&&vi(t,e,lt,Qt()),n(r,i)}finally{ge(s)}}function Pi(t,e,n){if(pt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Ri(t,e,n){Bt()&&(function(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||je(n,e),br(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const r=t.data[a],s=yt(r);s&&Wi(e,n,r);const u=Ye(e,t,a,n);br(u,e),null!==o&&Ki(0,a-i,u,r,0,o),s&&(Mt(n.index,e)[8]=u)}}(t,e,n,Pt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=qt.lFrame.currentDirectiveIndex;try{ge(s);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];re(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||zi(r,i)}}finally{ge(-1),re(o)}}(t,e,n))}function Mi(t,e,n=Pt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function Li(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Fi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Fi(t,e,n,r,i,s,o,a,u,c){const l=lt+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:mi);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function ji(t,e,n,r){const i=as(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&us(t).push(r,i.length-1))}function Ui(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Vi(t,e,n,r,i,s,o,a){const u=Pt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(ls(t,n,c,r,i),gt(e)&&function(t,e){const n=Mt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,e.value||"",r):i,At(s)?s.setProperty(u,r,i):Ae(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function qi(t,e,n,r){let i=!1;if(Bt()){const s=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];di(n,o.selectors,!1)&&(i||(i=[]),Be(je(n,e),t,o.type),yt(o)?($i(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){i=!0,Zi(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Ci(t,e,s.length,null);for(let i=0;i<s.length;i++){const c=s[i];n.mergedAttrs=Oe(n.mergedAttrs,c.hostAttrs),Hi(t,n,e,u,c),Gi(u,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,s=[];let o=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||ai(e)?null:Yi(n,i);s.push(c),o=Ui(n,u,o),a=Ui(t.outputs,u,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=a}(t,n)}o&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new v("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,o)}return n.mergedAttrs=Oe(n.mergedAttrs,n.attrs),i}function Bi(t,e,n,r,i,s){const o=s.hostBindings;if(o){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const s=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function zi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function $i(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Gi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;yt(e)&&(n[""]=t)}}function Zi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Hi(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=vt(i.type)),o=new ke(s,yt(i),null);t.blueprint[r]=o,n[r]=o,Bi(t,e,0,r,Ci(t,n,i.hostVars,mi),i)}function Wi(t,e,n){const r=Pt(e,t),i=Li(n),s=t[10],o=es(t,ki(t,i,null,n.onPush?64:16,r,e,s,s.createRenderer(r,n),null,null));t[e.index]=o}function Ki(t,e,n,r,i,s){const o=s[e];if(null!==o){const t=r.setInput;for(let e=0;e<o.length;){const i=o[e++],s=o[e++],a=o[e++];null!==t?r.setInput(n,a,i,s):n[s]=a}}}function Yi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Qi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Ji(t,e){const n=Mt(e,t);if(Ft(n)){const t=n[1];80&n[2]?Oi(t,n,t.template,n[8]):n[5]>0&&Xi(n)}}function Xi(t){for(let n=Pr(t);null!==n;n=Rr(n))for(let t=ht;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Oi(t,e,t.template,e[8])}else e[5]>0&&Xi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Mt(e[n],t);Ft(r)&&r[5]>0&&Xi(r)}}function ts(t,e){const n=Mt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Ai(r,n,n[8])}function es(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function ns(t){for(;t;){t[2]|=64;const e=Dr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function rs(t,e,n){const r=e[10];r.begin&&r.begin();try{Oi(t,e,t.template,n)}catch(i){throw cs(e,i),i}finally{r.end&&r.end()}}function is(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=xr(n),i=r[1];Ni(i,r,i.template,n)}}(t[8])}function ss(t,e,n){se(0),e(t,n)}const os=(()=>Promise.resolve(null))();function as(t){return t[7]||(t[7]=[])}function us(t){return t.cleanup||(t.cleanup=[])}function cs(t,e){const n=t[9],r=n?n.get(Sr,null):null;r&&r.handleError(e)}function ls(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=e[o],c=t.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function hs(t,e,n){const r=Dt(e,t);!function(t,e,n){At(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function ds(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?s=t:1==s?i=f(i,t):2==s&&(r=f(r,t+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const fs=new on("INJECTOR",-1);class ps{get(t,e=yn){if(e===yn){const e=new Error(`NullInjectorError: No provider for ${d(t)}!`);throw e.name="NullInjectorError",e}return e}}const gs=new on("Set Injector scope."),ms={},ys={};let vs;function _s(){return void 0===vs&&(vs=new ps),vs}function ws(t,e=null,n=null,r){return new bs(t,n,e||_s(),r)}class bs{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&ln(e,n=>this.processProvider(n,t,e)),ln([t],t=>this.processInjectorType(t,[],i)),this.records.set(fs,Ts(void 0,this));const s=this.records.get(gs);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof t?null:d(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=yn,n=N.Default){this.assertNotDestroyed();const r=xn(this),i=P(void 0);try{if(!(n&N.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(s=t)||"object"==typeof s&&s instanceof on)&&T(t);e=n&&this.injectableDefInScope(n)?Ts(xs(t),ms):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&N.Self?_s():this.parent).get(t,e=n&N.Optional&&e===yn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(d(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[_n]&&i.unshift(e[_n]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=d(e);if(Array.isArray(e))i=e.map(d).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):d(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(vn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{P(i),xn(r)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(d(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=m(t)))return!1;let r=k(t);const i=null==r&&t.ngModule||void 0,s=void 0===i?t:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=k(i)),null==r)return!1;if(null!=r.imports&&!o){let t;n.push(s);try{ln(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];ln(r,t=>this.processProvider(t,n,r||$))}}this.injectorDefTypes.add(s);const a=vt(s)||(()=>new s);this.records.set(s,Ts(a,ms));const u=r.providers;if(null!=u&&!o){const e=t;ln(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=ks(t=m(t))?t:m(t&&t.provide);const i=function(t,e,n){return Ss(t)?Ts(void 0,t.useValue):Ts(Es(t),ms)}(t);if(ks(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Ts(void 0,ms,!0),e.factory=()=>Sn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===ms&&(e.value=ys,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=m(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function xs(t){const e=T(t),n=null!==e?e.factory:vt(t);if(null!==n)return n;if(t instanceof on)throw new Error(`Token ${d(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=fn(e,"?");throw new Error(`Can't resolve all parameters for ${d(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[I]||t[A]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Es(t,e,n){let r;if(ks(t)){const e=m(t);return vt(e)||xs(e)}if(Ss(t))r=()=>m(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Sn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Tn(m(t.useExisting));else{const e=m(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return vt(e)||xs(e);r=()=>new e(...Sn(t.deps))}var i;return r}function Ts(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Ss(t){return null!==t&&"object"==typeof t&&wn in t}function ks(t){return"function"==typeof t}const Is=function(t,e,n){return function(t,e=null,n=null,r){const i=ws(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};class Cs{static create(t,e){return Array.isArray(t)?Is(t,e,""):Is(t.providers,t.parent,t.name||"")}}function As(t,e){_e(xr(t)[1],Zt())}function Os(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(yt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Ns(t.inputs),e.declaredInputs=Ns(t.declaredInputs),e.outputs=Ns(t.outputs);const n=i.hostBindings;n&&Rs(t,n);const s=i.viewQuery,o=i.contentQueries;if(s&&Ds(t,s),o&&Ps(t,o),h(t.inputs,i.inputs),h(t.declaredInputs,i.declaredInputs),h(t.outputs,i.outputs),yt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Os&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Oe(i.hostAttrs,n=Oe(n,i.hostAttrs))}}(r)}function Ns(t){return t===z?{}:t===$?[]:t}function Ds(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Ps(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Rs(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}Cs.THROW_IF_NOT_FOUND=yn,Cs.NULL=new ps,Cs.\u0275prov=x({token:Cs,providedIn:"any",factory:()=>Tn(fs)}),Cs.__NG_ELEMENT_ID__=-1;let Ms=null;function Ls(){if(!Ms){const t=B.Symbol;if(t&&t.iterator)Ms=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ms=n)}}}return Ms}function Fs(t){return!!js(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ls()in t)}function js(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Us(t,e,n){return t[e]=n}function Vs(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function qs(t,e,n,r){const i=Vs(t,e,n);return Vs(t,e+1,r)||i}function Bs(t,e,n,r){const i=zt();return Vs(i,te(),e)&&($t(),function(t,e,n,r,i,s){const o=Pt(t,e);!function(t,e,n,r,i,s,o){if(null==s)At(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==o?_(s):o(s,r||"",i);At(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],o,s,t.value,n,r,i)}(me(),i,t,e,n,r)),Bs}function zs(t,e,n,r){return Vs(t,te(),n)?e+_(n)+r:mi}function $s(t,e,n,r,i,s,o,a){const u=zt(),c=$t(),l=t+lt,h=c.firstCreatePass?function(t,e,n,r,i,s,o,a,u){const c=e.consts,l=Ii(e,t,4,o||null,jt(c,a));qi(e,n,l,jt(c,u)),_e(e,l);const h=l.tViews=Fi(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,s,o):c.data[l];Wt(h,!1);const d=u[11].createComment("");Kr(c,u,d,h),br(d,u),es(u,u[l]=Qi(d,u,d,h)),mt(h)&&Ri(c,u,h),null!=o&&Mi(u,h,a)}function Gs(t){return function(t,e){return t[e]}(qt.lFrame.contextLView,lt+t)}function Zs(t,e=N.Default){const n=zt();return null===n?Tn(t,e):Ge(Zt(),n,m(t),e)}function Hs(t,e,n){const r=zt();return Vs(r,te(),e)&&Vi($t(),me(),r,t,e,r[11],n,!1),Hs}function Ws(t,e,n,r,i){const s=i?"class":"style";ls(t,n,e.inputs[s],s,r)}function Ks(t,e,n,r){const i=zt(),s=$t(),o=lt+t,a=i[11],u=i[o]=Fr(a,e,qt.lFrame.currentNamespace),c=s.firstCreatePass?function(t,e,n,r,i,s,o){const a=e.consts,u=Ii(e,t,2,i,jt(a,s));return qi(e,n,u,jt(a,o)),null!==u.attrs&&ds(u,u.attrs,!1),null!==u.mergedAttrs&&ds(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,0,e,n,r):s.data[o];Wt(c,!0);const l=c.mergedAttrs;null!==l&&Ie(a,u,l);const h=c.classes;null!==h&&ri(a,u,h);const d=c.styles;null!==d&&ni(a,u,d),64!=(64&c.flags)&&Kr(s,i,u,c),0===qt.lFrame.elementDepthCount&&br(u,i),qt.lFrame.elementDepthCount++,mt(c)&&(Ri(s,i,c),Pi(s,c,i)),null!==r&&Mi(i,c)}function Ys(){let t=Zt();Kt()?Yt():(t=t.parent,Wt(t,!1));const e=t;qt.lFrame.elementDepthCount--;const n=$t();n.firstCreatePass&&(_e(n,t),pt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Ws(n,e,zt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Ws(n,e,zt(),e.stylesWithoutHost,!1)}function Qs(t,e,n,r){Ks(t,e,n,r),Ys()}function Js(t,e,n){(function(t,e,n){const r=zt(),i=$t(),s=t+lt,o=i.firstCreatePass?function(t,e,n,r,i){const s=e.consts,o=jt(s,r),a=Ii(e,t,8,"ng-container",o);return null!==o&&ds(a,o,!0),qi(e,n,a,jt(s,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,i,r,e,n):i.data[s];Wt(o,!0);const a=r[s]=r[11].createComment("");Kr(i,r,a,o),br(a,r),mt(o)&&(Ri(i,r,o),Pi(i,o,r)),null!=n&&Mi(r,o)})(t,e,n),function(){let t=Zt();const e=$t();Kt()?Yt():(t=t.parent,Wt(t,!1)),e.firstCreatePass&&(_e(e,t),pt(t)&&e.queries.elementEnd(t))}()}function Xs(){return zt()}function to(t){return!!t&&"function"==typeof t.then}function eo(t){return!!t&&"function"==typeof t.subscribe}const no=eo;function ro(t,e,n,r){const i=zt(),s=$t(),o=Zt();return function(t,e,n,r,i,s,o,a){const u=mt(r),c=t.firstCreatePass&&us(t),l=as(e);let h=!0;if(3&r.type||a){const d=Pt(r,e),f=a?a(d):d,p=l.length,g=a?t=>a(Nt(t[r.index])):r.index;if(At(n)){let o=null;if(!a&&u&&(o=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const t=i[s];if(t===n&&i[s+1]===r){const t=e[7],n=i[s+2];return t.length>n?t[n]:null}"string"==typeof t&&(s+=2)}return null}(t,e,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=so(r,e,0,s,!1);const t=n.listen(f,i,s);l.push(s,t),c&&c.push(i,g,p,p+1)}}else s=so(r,e,0,s,!0),f.addEventListener(i,s,o),l.push(s),c&&c.push(i,g,p,o)}else s=so(r,e,0,s,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(s),o=l.length;l.push(s,t),c&&c.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,t,e,!!n,r),ro}function io(t,e,n,r){try{return!1!==n(r)}catch(i){return cs(t,i),!1}}function so(t,e,n,r,i){return function n(s){if(s===Function)return r;const o=2&t.flags?Mt(t.index,e):e;0==(32&e[2])&&ns(o);let a=io(e,0,r,s),u=n.__ngNextListenerFn__;for(;u;)a=io(e,0,u,s)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function oo(t=1){return function(t){return(qt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,qt.lFrame.contextLView))[8]}(t)}function ao(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?di(t,s,!0):fi(r,s))return i}else n=i}return n}function uo(t){const e=zt()[16][6];if(!e.projection){const n=e.projection=fn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?ao(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function co(t,e=0,n){const r=zt(),i=$t(),s=Ii(i,lt+t,16,null,n||null);null===s.projection&&(s.projection=e),Yt(),64!=(64&s.flags)&&function(t,e,n){ei(e[11],0,e,n,Br(t,n,e),Hr(n.parent||e[6],n,e))}(i,r,s)}function lo(t,e,n,r,i){const s=t[n+1],o=null===e;let a=r?wi(s):xi(s),u=!1;for(;0!==a&&(!1===u||o);){const n=t[a+1];ho(t[a],e)&&(u=!0,t[a+1]=r?Ti(n):bi(n)),a=r?wi(n):xi(n)}u&&(t[n+1]=r?bi(s):Ti(s))}function ho(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&mn(t,e)>=0}const fo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function po(t){return t.substring(fo.key,fo.keyEnd)}function go(t,e){const n=fo.textEnd;return n===e?-1:(e=fo.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,fo.key=e,n),mo(t,e,n))}function mo(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function yo(t,e,n){return bo(t,e,n,!1),yo}function vo(t,e){return bo(t,e,null,!0),vo}function _o(t){xo(pn,wo,t,!0)}function wo(t,e){for(let n=function(t){return function(t){fo.key=0,fo.keyEnd=0,fo.value=0,fo.valueEnd=0,fo.textEnd=t.length}(t),go(t,mo(t,0,fo.textEnd))}(e);n>=0;n=go(e,n))pn(t,po(e),!0)}function bo(t,e,n,r){const i=zt(),s=$t(),o=ee(2);s.firstUpdatePass&&To(s,t,o,r),e!==mi&&Vs(i,o,e)&&Io(s,s.data[pe()],i,i[11],t,i[o+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=d(Vn(t)))),t}(e,n),r,o)}function xo(t,e,n,r){const i=$t(),s=ee(2);i.firstUpdatePass&&To(i,null,s,r);const o=zt();if(n!==mi&&Vs(o,s,n)){const a=i.data[pe()];if(Oo(a,r)&&!Eo(i,s)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=f(t,n||"")),Ws(i,a,o,n,r)}else!function(t,e,n,r,i,s,o,a){i===mi&&(i=$);let u=0,c=0,l=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==l||null!==h;){const d=u<i.length?i[u+1]:void 0,f=c<s.length?s[c+1]:void 0;let p,g=null;l===h?(u+=2,c+=2,d!==f&&(g=h,p=f)):null===h||null!==l&&l<h?(u+=2,g=l):(c+=2,g=h,p=f),null!==g&&Io(t,e,n,r,g,p,o,a),l=u<i.length?i[u]:null,h=c<s.length?s[c]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function(t,e,n){if(null==n||""===n)return $;const r=[],i=Vn(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,s)}}function Eo(t,e){return e>=t.expandoStartIndex}function To(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[pe()],o=Eo(t,n);Oo(s,r)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=qt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=ko(n=So(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=So(i,t,e,n,r),null===s){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==xi(r))return t[wi(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=So(null,t,e,n[1],r),n=ko(n,e.attrs,r),function(t,e,n,r){t[wi(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else s=function(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=ko(r,t[s].hostAttrs,n);return ko(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=wi(o),u=xi(o);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||mn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=wi(t[a+1]);t[r+1]=_i(e,a),0!==e&&(t[e+1]=Ei(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=_i(a,0),0!==a&&(t[a+1]=Ei(t[a+1],r)),a=r;else t[r+1]=_i(u,0),0===a?a=r:t[u+1]=Ei(t[u+1],r),u=r;l&&(t[r+1]=bi(t[r+1])),lo(t,c,r,!0),lo(t,c,r,!1),function(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&mn(s,e)>=0&&(n[r+1]=Ti(n[r+1]))}(e,c,t,r,s),o=_i(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}function So(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=ko(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function ko(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),pn(t,o,!!n||e[++s]))}return void 0===t?null:t}function Io(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Ao(1==(1&c)?Co(u,e,n,i,xi(c),o):void 0)||(Ao(s)||2==(2&c)&&(s=Co(u,null,n,i,a,o)),function(t,e,n,r,i){const s=At(t);if(e)i?s?t.addClass(n,r):n.classList.add(r):s?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Or.DashCase;if(null==i)s?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const o="string"==typeof i&&i.endsWith("!important");o&&(i=i.slice(0,-10),e|=Or.Important),s?t.setStyle(n,r,i,e):n.style.setProperty(r,i,o?"important":"")}}}(r,o,Dt(pe(),n),i,s))}function Co(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const e=t[i],s=Array.isArray(e),u=s?e[1]:e,c=null===u;let l=n[i+1];l===mi&&(l=c?$:void 0);let h=c?gn(l,r):u===r?l:void 0;if(s&&!Ao(h)&&(h=gn(e,r)),Ao(h)&&(a=h,o))return a;const d=t[i+1];i=o?wi(d):xi(d)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(a=gn(t,r))}return a}function Ao(t){return void 0!==t}function Oo(t,e){return 0!=(t.flags&(e?16:32))}function No(t,e=""){const n=zt(),r=$t(),i=t+lt,s=r.firstCreatePass?Ii(r,i,1,e,null):r.data[i],o=n[i]=function(t,e){return At(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Kr(r,n,o,s),Wt(s,!1)}function Do(t){return Po("",t,""),Do}function Po(t,e,n){const r=zt(),i=zs(r,t,e,n);return i!==mi&&hs(r,pe(),i),Po}function Ro(t,e,n,r,i){const s=zt(),o=function(t,e,n,r,i,s){const o=qs(t,qt.lFrame.bindingIndex,n,i);return ee(2),o?e+_(n)+r+_(i)+s:mi}(s,t,e,n,r,i);return o!==mi&&hs(s,pe(),o),Ro}function Mo(t,e,n){xo(pn,wo,zs(zt(),t,e,n),!0)}function Lo(t,e,n){const r=zt();return Vs(r,te(),e)&&Vi($t(),me(),r,t,e,r[11],n,!0),Lo}const Fo=void 0;var jo=["en",[["a","p"],["AM","PM"],Fo],[["AM","PM"],Fo,Fo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Fo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Fo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Fo,"{1} 'at' {0}",Fo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Uo={};function Vo(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Bo(e);if(n)return n;const r=e.split("-")[0];if(n=Bo(r),n)return n;if("en"===r)return jo;throw new Error(`Missing locale data for the locale "${t}".`)}function qo(t){return Vo(t)[zo.PluralCase]}function Bo(t){return t in Uo||(Uo[t]=B.ng&&B.ng.common&&B.ng.common.locales&&B.ng.common.locales[t]),Uo[t]}var zo=(()=>((zo=zo||{})[zo.LocaleId=0]="LocaleId",zo[zo.DayPeriodsFormat=1]="DayPeriodsFormat",zo[zo.DayPeriodsStandalone=2]="DayPeriodsStandalone",zo[zo.DaysFormat=3]="DaysFormat",zo[zo.DaysStandalone=4]="DaysStandalone",zo[zo.MonthsFormat=5]="MonthsFormat",zo[zo.MonthsStandalone=6]="MonthsStandalone",zo[zo.Eras=7]="Eras",zo[zo.FirstDayOfWeek=8]="FirstDayOfWeek",zo[zo.WeekendRange=9]="WeekendRange",zo[zo.DateFormat=10]="DateFormat",zo[zo.TimeFormat=11]="TimeFormat",zo[zo.DateTimeFormat=12]="DateTimeFormat",zo[zo.NumberSymbols=13]="NumberSymbols",zo[zo.NumberFormats=14]="NumberFormats",zo[zo.CurrencyCode=15]="CurrencyCode",zo[zo.CurrencySymbol=16]="CurrencySymbol",zo[zo.CurrencyName=17]="CurrencyName",zo[zo.Currencies=18]="Currencies",zo[zo.Directionality=19]="Directionality",zo[zo.PluralCase=20]="PluralCase",zo[zo.ExtraData=21]="ExtraData",zo))();const $o="en-US";let Go=$o;function Zo(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Go=t.toLowerCase().replace(/_/g,"-"))}function Ho(t,e,n,r,i){if(t=m(t),Array.isArray(t))for(let s=0;s<t.length;s++)Ho(t[s],e,n,r,i);else{const s=$t(),o=zt();let a=ks(t)?t:m(t.provide),u=Es(t);const c=Zt(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(ks(t)||!t.multi){const r=new ke(u,i,Zs),f=Yo(a,e,i?l:l+d,h);-1===f?(Be(je(c,o),s,a),Wo(s,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),o.push(r)):(n[f]=r,o[f]=r)}else{const f=Yo(a,e,l+d,h),p=Yo(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){Be(je(c,o),s,a);const l=function(t,e,n,r,i){const s=new ke(t,n,Zs);return s.multi=[],s.index=e,s.componentProviders=0,Ko(s,i,r&&!n),s}(i?Jo:Qo,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),Wo(s,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),o.push(l)}else Wo(s,t,f>-1?f:p,Ko(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function Wo(t,e,n,r){const i=ks(e);if(i||e.useClass){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const o=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[r,s]):o[t+1].push(r,s)}else o.push(n,s)}}}function Ko(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Yo(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Qo(t,e,n,r){return Xo(this.multi,[])}function Jo(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Ye(n,n[1],this.providerFactory.index,r);s=e.slice(0,t),Xo(i,s);for(let n=t;n<e.length;n++)s.push(e[n])}else s=[],Xo(i,s);return s}function Xo(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ta(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=$t();if(r.firstCreatePass){const i=yt(t);Ho(n,r.data,r.blueprint,i,!0),Ho(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class ea{}class na{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${d(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}class ra{}function ia(...t){}function sa(t,e){return new aa(Pt(t,e))}ra.NULL=new na;const oa=function(){return sa(Zt(),zt())};let aa=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=oa,t})();function ua(t){return t instanceof aa?t.nativeElement:t}class ca{}let la=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ha(),t})();const ha=function(){const t=zt(),e=Mt(Zt().index,t);return function(t){return t[11]}(dt(e)?e:t)};let da=(()=>{class t{}return t.\u0275prov=x({token:t,providedIn:"root",factory:()=>null}),t})();class fa{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const pa=new fa("12.1.5");class ga{constructor(){}supports(t){return Fs(t)}create(t){return new ya(t)}}const ma=(t,e)=>e;class ya{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ma}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const s=!n||e&&e.currentIndex<ba(n,r,i)?e:n,o=ba(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{i||(i=[]);const t=o-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;e<=s&&s<t&&(i[n]=r+1)}i[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Fs(t))throw new Error(`Error trying to diff '${d(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),s=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ls()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),s=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new va(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new wa),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new wa),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class va{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _a{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class wa{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new _a,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ba(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class xa{constructor(){}supports(t){return t instanceof Map||js(t)}create(){return new Ea}}class Ea{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||js(t)))throw new Error(`Error trying to diff '${d(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ta(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ta{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Sa(){return new ka([new ga])}let ka=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Sa()),deps:[[t,new An,new Cn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=x({token:t,providedIn:"root",factory:Sa}),t})();function Ia(){return new Ca([new xa])}let Ca=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ia()),deps:[[t,new An,new Cn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=x({token:t,providedIn:"root",factory:Ia}),t})();function Aa(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(Nt(s)),ft(s))for(let t=ht;t<s.length;t++){const e=s[t],n=e[1].firstChild;null!==n&&Aa(e[1],e,n,r)}const o=n.type;if(8&o)Aa(t,e,n.child,r);else if(32&o){const t=Nr(n,e);let i;for(;i=t();)r.push(i)}else if(16&o){const t=Qr(e,n);if(Array.isArray(t))r.push(...t);else{const n=Dr(e[16]);Aa(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Oa{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Aa(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ft(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Ur(t,n),dn(e,n))}this._attachedToViewContainer=!1}Vr(this._lView[1],this._lView)}onDestroy(t){ji(this._lView[1],this._lView,null,t)}markForCheck(){ns(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){rs(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Jt(!0);try{rs(t,e,n)}finally{Jt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,ti(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Na extends Oa{constructor(t){super(t),this._view=t}detectChanges(){is(this._view)}checkNoChanges(){!function(t){Jt(!0);try{is(t)}finally{Jt(!1)}}(this._view)}get context(){return null}}const Da=function(t){return function(t,e,n){if(gt(t)&&!n){const n=Mt(t.index,e);return new Oa(n,n)}return 47&t.type?new Oa(e[16],e):null}(Zt(),zt(),16==(16&t))};let Pa=(()=>{class t{}return t.__NG_ELEMENT_ID__=Da,t})();const Ra=[new xa],Ma=new ka([new ga]),La=new Ca(Ra),Fa=function(){return qa(Zt(),zt())};let ja=(()=>{class t{}return t.__NG_ELEMENT_ID__=Fa,t})();const Ua=ja,Va=class extends Ua{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ki(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Ai(e,n,t),new Oa(n)}};function qa(t,e){return 4&t.type?new Va(e,t,sa(t,e)):null}class Ba{}class za{}const $a=function(){return Ya(Zt(),zt())};let Ga=(()=>{class t{}return t.__NG_ELEMENT_ID__=$a,t})();const Za=Ga,Ha=class extends Za{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return sa(this._hostTNode,this._hostLView)}get injector(){return new Xe(this._hostTNode,this._hostLView)}get parentInjector(){const t=qe(this._hostTNode,this._hostLView);if(De(t)){const e=Re(t,this._hostLView),n=Pe(t);return new Xe(e[1].data[n+8],e)}return new Xe(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Wa(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ht}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const s=n||this.parentInjector;if(!i&&null==t.ngModule&&s){const t=s.get(Ba,null);t&&(i=t)}const o=t.create(s,r,void 0,i);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,r=n[1];if(ft(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Ha(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),s=this._lContainer;!function(t,e,n,r){const i=ht+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-ht?(e[4]=n[i],hn(n,ht+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,s,i);const o=Jr(i,s),a=n[11],u=Zr(a,s[7]);return null!==u&&function(t,e,n,r,i,s){r[0]=i,r[6]=e,ti(t,r,n,1,i,s)}(r,s[6],a,n,u,o),t.attachToViewContainerRef(),hn(Ka(s),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Wa(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Ur(this._lContainer,e);n&&(dn(Ka(this._lContainer),e),Vr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Ur(this._lContainer,e);return n&&null!=dn(Ka(this._lContainer),e)?new Oa(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Wa(t){return t[8]}function Ka(t){return t[8]||(t[8]=[])}function Ya(t,e){let n;const r=e[t.index];if(ft(r))n=r;else{let i;if(8&t.type)i=Nt(r);else{const n=e[11];i=n.createComment("");const r=Pt(t,e);zr(n,Zr(n,r),i,function(t,e){return At(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Qi(r,e,i,t),es(e,n)}return new Ha(n,t,e)}const Qa={};class Ja extends ra{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ut(t);return new eu(e,this.ngModule)}}function Xa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const tu=new on("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>kr});class eu extends ea{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(gi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Xa(this.componentDef.inputs)}get outputs(){return Xa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const s=t.get(n,Qa,i);return s!==Qa||r===Qa?s:e.get(n,r,i)}}}(t,r.injector):t,s=i.get(ca,Ot),o=i.get(da,null),a=s.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(At(t))return t.selectRootElement(e,n===F.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Fr(s.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?St:"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:kr,clean:os,playerHandler:null,flags:0},d=Fi(0,null,null,1,0,null,null,null,null,null),f=ki(null,d,h,l,null,null,s,a,o,i);let p,g;ue(f);try{const t=function(t,e,n,r,i,s){const o=n[1];n[20]=t;const a=Ii(o,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(ds(a,u,!0),null!==t&&(Ie(i,t,u),null!==a.classes&&ri(i,t,a.classes),null!==a.styles&&ni(i,t,a.styles)));const c=r.createRenderer(t,e),l=ki(n,Li(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return o.firstCreatePass&&(Be(je(a,n),o,e.type),$i(o,a),Zi(a,n.length,1)),es(n,l),n[20]=l}(c,this.componentDef,f,s,a);if(c)if(n)Ie(a,c,["ng-version",pa.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!li(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Ie(a,c,t),e&&e.length>0&&ri(a,c,e.join(" "))}if(g=Rt(d,lt),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const s=n[1],o=function(t,e,n){const r=Zt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Hi(t,r,e,Ci(t,e,1,null),n));const i=Ye(e,t,r.directiveStart,r);br(i,e);const s=Pt(r,e);return s&&br(s,e),i}(s,n,e);if(r.components.push(o),t[8]=o,i&&i.forEach(t=>t(o,e)),e.contentQueries){const t=Zt();e.contentQueries(1,o,t.directiveStart)}const a=Zt();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ge(a.index),Bi(n[1],a,0,a.directiveStart,a.directiveEnd,e),zi(e,o)),o}(t,this.componentDef,f,h,[As]),Ai(d,f,null)}finally{fe()}return new nu(this.componentType,p,sa(g,f),f,g)}}class nu extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Na(r),this.componentType=t}get injector(){return new Xe(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const ru=new Map;class iu extends Ba{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ja(this);const n=ct(t),r=t[K]||null;r&&Zo(r),this._bootstrapComponents=Ar(n.bootstrap),this._r3Injector=ws(t,e,[{provide:Ba,useValue:this},{provide:ra,useValue:this.componentFactoryResolver}],d(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Cs.THROW_IF_NOT_FOUND,n=N.Default){return t===Cs||t===Ba||t===fs?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class su extends za{constructor(t){super(),this.moduleType=t,null!==ct(t)&&function(t){const e=new Set;!function t(n){const r=ct(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${d(e)} vs ${d(e.name)}`)}(i,ru.get(i),n),ru.set(i,n));const s=Ar(r.imports);for(const o of s)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new iu(this.moduleType,t)}}function ou(t,e,n){const r=Xt()+t,i=zt();return i[r]===mi?Us(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function au(t,e,n,r){return function(t,e,n,r,i,s){const o=e+n;return Vs(t,o,i)?Us(t,o+1,s?r.call(s,i):r(i)):lu(t,o+1)}(zt(),Xt(),t,e,n,r)}function uu(t,e,n,r,i){return function(t,e,n,r,i,s,o){const a=e+n;return qs(t,a,i,s)?Us(t,a+2,o?r.call(o,i,s):r(i,s)):lu(t,a+2)}(zt(),Xt(),t,e,n,r,i)}function cu(t,e,n,r,i,s){return function(t,e,n,r,i,s,o,a){const u=e+n;return function(t,e,n,r,i){const s=qs(t,e,n,r);return Vs(t,e+2,i)||s}(t,u,i,s,o)?Us(t,u+3,a?r.call(a,i,s,o):r(i,s,o)):lu(t,u+3)}(zt(),Xt(),t,e,n,r,i,s)}function lu(t,e){const n=t[e];return n===mi?void 0:n}function hu(t){return e=>{setTimeout(t,void 0,e)}}const du=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,s,o;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(s=e.error)||void 0===s?void 0:s.bind(e),c=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}this.__isAsync&&(u=hu(u),a&&(a=hu(a)),c&&(c=hu(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function fu(){return this._results[Ls()]()}class pu{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Ls(),n=pu.prototype;n[e]||(n[e]=fu)}get changes(){return this._changes||(this._changes=new du)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=cn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class gu{constructor(t){this.queryList=t,this.matches=null}clone(){return new gu(this.queryList)}setDirty(){this.queryList.setDirty()}}class mu{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new mu(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Ou(t,e).matches&&this.queries[e].setDirty()}}class yu{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class vu{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new vu(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class _u{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new _u(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,wu(e,i)),this.matchTNodeWithReadOption(t,e,Ke(e,t,i,!1,!1))}else n===ja?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ke(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===aa||r===Ga||r===ja&&4&e.type)this.addMatch(e.index,-2);else{const n=Ke(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function wu(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function bu(t,e,n,r){return-1===n?function(t,e){return 11&t.type?sa(t,e):4&t.type?qa(t,e):null}(e,t):-2===n?function(t,e,n){return n===aa?sa(e,t):n===ja?qa(e,t):n===Ga?Ya(e,t):void 0}(t,e,r):Ye(t,t[1],n,e)}function xu(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,s=n.matches,o=[];for(let t=0;t<s.length;t+=2){const i=s[t];o.push(i<0?null:bu(e,r[i],s[t+1],n.metadata.read))}i.matches=o}return i.matches}function Eu(t,e,n,r){const i=t.queries.getByIndex(n),s=i.matches;if(null!==s){const o=xu(t,e,i,n);for(let t=0;t<s.length;t+=2){const n=s[t];if(n>0)r.push(o[t/2]);else{const i=s[t+1],o=e[-n];for(let t=ht;t<o.length;t++){const e=o[t];e[17]===e[3]&&Eu(e[1],e,i,r)}if(null!==o[9]){const t=o[9];for(let e=0;e<t.length;e++){const n=t[e];Eu(n[1],n,i,r)}}}}}return r}function Tu(t){const e=zt(),n=$t(),r=ie();se(r+1);const i=Ou(n,r);if(t.dirty&&Lt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const s=i.crossesNgTemplate?Eu(n,e,r,[]):xu(n,e,i,r);t.reset(s,ua),t.notifyOnChanges()}return!0}return!1}function Su(t,e,n){const r=$t();r.firstCreatePass&&(Au(r,new yu(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Cu(r,zt(),e)}function ku(t,e,n,r){const i=$t();if(i.firstCreatePass){const s=Zt();Au(i,new yu(e,n,r),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}Cu(i,zt(),n)}function Iu(){return t=zt(),e=ie(),t[19].queries[e].queryList;var t,e}function Cu(t,e,n){const r=new pu(4==(4&n));ji(t,e,r,r.destroy),null===e[19]&&(e[19]=new mu),e[19].queries.push(new gu(r))}function Au(t,e,n){null===t.queries&&(t.queries=new vu),t.queries.track(new _u(e,n))}function Ou(t,e){return t.queries.getByIndex(e)}function Nu(t,e){return qa(t,e)}const Du=new on("Application Initializer");let Pu=(()=>{class t{constructor(t){this.appInits=t,this.resolve=ia,this.reject=ia,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(to(e))t.push(e);else if(no(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Tn(Du,8))},t.\u0275prov=x({token:t,factory:t.\u0275fac}),t})();const Ru=new on("AppId"),Mu={provide:Ru,useFactory:function(){return`${Lu()}${Lu()}${Lu()}`},deps:[]};function Lu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Fu=new on("Platform Initializer"),ju=new on("Platform ID"),Uu=new on("appBootstrapListener");let Vu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=x({token:t,factory:t.\u0275fac}),t})();const qu=new on("LocaleId"),Bu=new on("DefaultCurrencyCode");class zu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const $u=function(t){return new su(t)},Gu=$u,Zu=function(t){return Promise.resolve($u(t))},Hu=function(t){const e=$u(t),n=Ar(ct(t).declarations).reduce((t,e)=>{const n=ut(e);return n&&t.push(new eu(n)),t},[]);return new zu(e,n)},Wu=Hu,Ku=function(t){return Promise.resolve(Hu(t))};let Yu=(()=>{class t{constructor(){this.compileModuleSync=Gu,this.compileModuleAsync=Zu,this.compileModuleAndAllComponentsSync=Wu,this.compileModuleAndAllComponentsAsync=Ku}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=x({token:t,factory:t.\u0275fac}),t})();const Qu=(()=>Promise.resolve(0))();function Ju(t){"undefined"==typeof Zone?Qu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Xu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new du(!1),this.onMicrotaskEmpty=new du(!1),this.onStable=new du(!1),this.onError=new du(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=B.requestAnimationFrame,e=B.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(B,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,nc(t),t.isCheckStableRunning=!0,ec(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),nc(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return rc(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),ic(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return rc(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),ic(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,nc(t),ec(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Xu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,t,tc,ia,ia);try{return i.runTask(s,e,n)}finally{i.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const tc={};function ec(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function nc(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function rc(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ic(t){t._nesting--,ec(t)}class sc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new du,this.onMicrotaskEmpty=new du,this.onStable=new du,this.onError=new du}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let oc=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xu.assertNotInAngularZone(),Ju(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ju(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Tn(Xu))},t.\u0275prov=x({token:t,factory:t.\u0275fac}),t})(),ac=(()=>{class t{constructor(){this._applications=new Map,hc.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return hc.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=x({token:t,factory:t.\u0275fac}),t})();class uc{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function cc(t){hc=t}let lc,hc=new uc,dc=!0,fc=!1;function pc(){return fc=!0,dc}function gc(){if(fc)throw new Error("Cannot enable prod mode after platform setup.");dc=!1}const mc=new on("AllowMultipleToken");class yc{constructor(t,e){this.name=t,this.token=e}}function vc(t,e,n=[]){const r=`Platform: ${e}`,i=new on(r);return(e=[])=>{let s=_c();if(!s||s.injector.get(mc,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:gs,useValue:"platform"});!function(t){if(lc&&!lc.destroyed&&!lc.injector.get(mc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");lc=t.get(wc);const e=t.get(Fu,null);e&&e.forEach(t=>t())}(Cs.create({providers:t,name:r}))}return function(t){const e=_c();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function _c(){return lc&&!lc.destroyed?lc:null}let wc=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new sc:("zone.js"===t?void 0:t)||new Xu({enableLongStackTrace:pc(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Xu,useValue:n}];return n.run(()=>{const e=Cs.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),s=i.injector.get(Sr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{s.handleError(t)}});i.onDestroy(()=>{Ec(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return to(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(s,n,()=>{const t=i.injector.get(Pu);return t.runInitializers(),t.donePromise.then(()=>(Zo(i.injector.get(qu,$o)||$o),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=bc({},e);return function(t,e,n){const r=new su(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(xc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${d(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Tn(Cs))},t.\u0275prov=x({token:t,factory:t.\u0275fac}),t})();function bc(t,e){return Array.isArray(e)?e.reduce(bc,t):Object.assign(Object.assign({},t),e)}let xc=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new s.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),h=new s.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Xu.assertNotInAngularZone(),Ju(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Xu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(l,h.pipe(t=>{return(0,u.x)()((e=c,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,a.N);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof ea?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Ba),i=n.create(Cs.NULL,[],e||n.selector,r),s=i.location.nativeElement,o=i.injector.get(oc,null),a=o&&i.injector.get(ac);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),Ec(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ec(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Uu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Tn(Xu),Tn(Cs),Tn(Sr),Tn(ra),Tn(Pu))},t.\u0275prov=x({token:t,factory:t.\u0275fac}),t})();function Ec(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Tc{}class Sc{}const kc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Ic=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||kc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(8255)(e).then(t=>t[r]).then(t=>Cc(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Cc(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Tn(Yu),Tn(Sc,8))},t.\u0275prov=x({token:t,factory:t.\u0275fac}),t})();function Cc(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Ac=function(t){return null},Oc=vc(null,"core",[{provide:ju,useValue:"unknown"},{provide:wc,deps:[Cs]},{provide:ac,deps:[]},{provide:Vu,deps:[]}]),Nc=[{provide:xc,useClass:xc,deps:[Xu,Cs,Sr,ra,Pu]},{provide:tu,deps:[Xu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Pu,useClass:Pu,deps:[[new Cn,Du]]},{provide:Yu,useClass:Yu,deps:[]},Mu,{provide:ka,useFactory:function(){return Ma},deps:[]},{provide:Ca,useFactory:function(){return La},deps:[]},{provide:qu,useFactory:function(t){return Zo(t=t||"undefined"!=typeof $localize&&$localize.locale||$o),t},deps:[[new In(qu),new Cn,new An]]},{provide:Bu,useValue:"USD"}];let Dc=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(Tn(xc))},t.\u0275mod=rt({type:t}),t.\u0275inj=E({providers:Nc}),t})()},8939:(t,e,n)=>{"use strict";n.d(e,{hO:()=>g,xv:()=>h,Dh:()=>l,GT:()=>u,cc:()=>m,on:()=>d,pX:()=>a});var r=n(3018),i=n(7841),s=n(4459);t=n.hmd(t);const o=["ngOnDestroy"],a=(t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{var i;if(t[s])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(s,t[s]),t[s];if(o.indexOf(s)>-1)return()=>{};const a=e.toPromise().then(t=>{const e=t&&t[s];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>a[e],apply:(t,e,n)=>a.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(s,n,i),i})})})}),u=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})};class c{constructor(t){return t}}const l=new r.OlP("angularfire2.app.options"),h=new r.OlP("angularfire2.app.name");function d(e,n,r){const s="object"==typeof r&&r||{};s.name=s.name||"string"==typeof r&&r||"[DEFAULT]";const o=i.Z.apps.filter(t=>t&&t.name===s.name)[0]||n.runOutsideAngular(()=>i.Z.initializeApp(e,s));try{JSON.stringify(e)!==JSON.stringify(o.options)&&f("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(a){}return new c(o)}const f=(t,...e)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[t](...e)},p={provide:c,useFactory:d,deps:[l,r.R0b,[new r.FiY,h]]};let g=(()=>{class t{constructor(t){i.Z.registerVersion("angularfire",s.q4.full,"core"),i.Z.registerVersion("angularfire",s.q4.full,"app-compat"),i.Z.registerVersion("angular",r.q4F.full,t.toString())}static initializeApp(e,n){return{ngModule:t,providers:[{provide:l,useValue:e},{provide:h,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.Lbi))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[p]}),t})();function m(t,e,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(e=>e[0]===t)||[];if(s)return function(t,e){try{return t.toString()===e.toString()}catch(n){return t===e}}(i,o)||(v("error",`${e} was already initialized on the ${n} Firebase App with different settings.${y?" You may need to reload as Firebase is not HMR aware.":""}`),v("warn",{is:i,was:o})),s;{const e=r();return globalThis.\u0275AngularfireInstanceCache.push([t,e,i]),e}}const y=!!t.hot,v=(t,...e)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4459:(t,e,n)=>{"use strict";n.d(e,{q4:()=>Pn,iC:()=>$n,HU:()=>Bn,vb:()=>jn,JM:()=>Fn});var r=n(3018),i=n(2329),s=n(6304),o=n(279),a=n(3854),u=n(8604),c=n(9306),l=n(6676);const h="@firebase/installations",d="0.5.4",f="w:0.5.4",p="FIS_v2",g=new a.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function m(t){return t instanceof a.ZR&&t.code.includes("request-failed")}function y({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function v(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function _(t,e){return w.apply(this,arguments)}function w(){return(w=(0,s.Z)(function*(t,e){const n=(yield e.json()).error;return g.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})})).apply(this,arguments)}function b({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function x(t,{refreshToken:e}){const n=b(t);return n.append("Authorization",function(t){return`FIS_v2 ${t}`}(e)),n}function E(t){return T.apply(this,arguments)}function T(){return(T=(0,s.Z)(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function S(t,e){return k.apply(this,arguments)}function k(){return(k=(0,s.Z)(function*(t,{fid:e}){const n=y(t),r={method:"POST",headers:b(t),body:JSON.stringify({fid:e,authVersion:p,appId:t.appId,sdkVersion:f})},i=yield E(()=>fetch(n,r));if(i.ok){const t=yield i.json();return{fid:t.fid||e,registrationStatus:2,refreshToken:t.refreshToken,authToken:v(t.authToken)}}throw yield _("Create Installation",i)})).apply(this,arguments)}function I(t){return new Promise(e=>{setTimeout(e,t)})}const C=/^[cdef][\w-]{21}$/;function A(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){return(e=t,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return C.test(e)?e:""}catch(t){return""}}function O(t){return`${t.appName}!${t.appId}`}const N=new Map;function D(t,e){const n=O(t);P(n,e),function(t,e){const n=(!R&&"BroadcastChannel"in self&&(R=new BroadcastChannel("[Firebase] FID Change"),R.onmessage=t=>{P(t.data.key,t.data.fid)}),R);n&&n.postMessage({key:t,fid:e}),0===N.size&&R&&(R.close(),R=null)}(n,e)}function P(t,e){const n=N.get(t);if(n)for(const r of n)r(e)}let R=null;const M="firebase-installations-store";let L=null;function F(){return L||(L=(0,l.openDb)("firebase-installations-database",1,t=>{switch(t.oldVersion){case 0:t.createObjectStore(M)}})),L}function j(t,e){return U.apply(this,arguments)}function U(){return(U=(0,s.Z)(function*(t,e){const n=O(t),r=(yield F()).transaction(M,"readwrite"),i=r.objectStore(M),s=yield i.get(n);return yield i.put(e,n),yield r.complete,s&&s.fid===e.fid||D(t,e.fid),e})).apply(this,arguments)}function V(t){return q.apply(this,arguments)}function q(){return(q=(0,s.Z)(function*(t){const e=O(t),n=(yield F()).transaction(M,"readwrite");yield n.objectStore(M).delete(e),yield n.complete})).apply(this,arguments)}function B(t,e){return z.apply(this,arguments)}function z(){return(z=(0,s.Z)(function*(t,e){const n=O(t),r=(yield F()).transaction(M,"readwrite"),i=r.objectStore(M),s=yield i.get(n),o=e(s);return void 0===o?yield i.delete(n):yield i.put(o,n),yield r.complete,!o||s&&s.fid===o.fid||D(t,o.fid),o})).apply(this,arguments)}function $(t){return G.apply(this,arguments)}function G(){return(G=(0,s.Z)(function*(t){let e;const n=yield B(t,n=>{const r=Z(n),i=H(t,r);return e=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})).apply(this,arguments)}function Z(t){return J(t||{fid:A(),registrationStatus:0})}function H(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(g.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(t,e){return W.apply(this,arguments)}(t,n)}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:K(t)}:{installationEntry:e}}function W(){return(W=(0,s.Z)(function*(t,e){try{return j(t,yield S(t,e))}catch(n){throw m(n)&&409===n.customData.serverCode?yield V(t):yield j(t,{fid:e.fid,registrationStatus:0}),n}})).apply(this,arguments)}function K(t){return Y.apply(this,arguments)}function Y(){return(Y=(0,s.Z)(function*(t){let e=yield Q(t);for(;1===e.registrationStatus;)yield I(100),e=yield Q(t);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:n}=yield $(t);return n||e}return e})).apply(this,arguments)}function Q(t){return B(t,t=>{if(!t)throw g.create("installation-not-found");return J(t)})}function J(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function X(t,e){return tt.apply(this,arguments)}function tt(){return(tt=(0,s.Z)(function*({appConfig:t,platformLoggerProvider:e},n){const r=et(t,n),i=x(t,n),s=e.getImmediate({optional:!0});s&&i.append("x-firebase-client",s.getPlatformInfoString());const o={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:f}})},a=yield E(()=>fetch(r,o));if(a.ok)return v(yield a.json());throw yield _("Generate Auth Token",a)})).apply(this,arguments)}function et(t,{fid:e}){return`${y(t)}/${e}/authTokens:generate`}function nt(t){return rt.apply(this,arguments)}function rt(){return(rt=(0,s.Z)(function*(t,e=!1){let n;const r=yield B(t.appConfig,r=>{if(!ct(r))throw g.create("not-registered");const i=r.authToken;if(!e&&lt(i))return r;if(1===i.requestStatus)return n=it(t,e),r;{if(!navigator.onLine)throw g.create("app-offline");const e=ht(r);return n=at(t,e),e}});return n?yield n:r.authToken})).apply(this,arguments)}function it(t,e){return st.apply(this,arguments)}function st(){return(st=(0,s.Z)(function*(t,e){let n=yield ot(t.appConfig);for(;1===n.authToken.requestStatus;)yield I(100),n=yield ot(t.appConfig);const r=n.authToken;return 0===r.requestStatus?nt(t,e):r})).apply(this,arguments)}function ot(t){return B(t,t=>{if(!ct(t))throw g.create("not-registered");return 1===(e=t.authToken).requestStatus&&e.requestTime+1e4<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var e})}function at(t,e){return ut.apply(this,arguments)}function ut(){return(ut=(0,s.Z)(function*(t,e){try{const n=yield X(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield j(t.appConfig,r),n}catch(n){if(!m(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield j(t.appConfig,n)}else yield V(t.appConfig);throw n}})).apply(this,arguments)}function ct(t){return void 0!==t&&2===t.registrationStatus}function lt(t){return 2===t.requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(t)}function ht(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function dt(){return(dt=(0,s.Z)(function*(t){const e=t,{installationEntry:n,registrationPromise:r}=yield $(e.appConfig);return r?r.catch(console.error):nt(e).catch(console.error),n.fid})).apply(this,arguments)}function ft(){return(ft=(0,s.Z)(function*(t,e=!1){const n=t;return yield pt(n.appConfig),(yield nt(n,e)).token})).apply(this,arguments)}function pt(t){return gt.apply(this,arguments)}function gt(){return(gt=(0,s.Z)(function*(t){const{registrationPromise:e}=yield $(t);e&&(yield e)})).apply(this,arguments)}function mt(t){return g.create("missing-app-config-values",{valueName:t})}const yt="installations";(0,o._registerComponent)(new u.wA(yt,t=>{const e=t.getProvider("app").getImmediate();return{app:e,appConfig:function(t){if(!t||!t.options)throw mt("App Configuration");if(!t.name)throw mt("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw mt(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:(0,o._getProvider)(e,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,o._registerComponent)(new u.wA("installations-internal",t=>{const e=t.getProvider("app").getImmediate(),n=(0,o._getProvider)(e,yt).getImmediate();return{getId:()=>function(t){return dt.apply(this,arguments)}(n),getToken:t=>function(t){return ft.apply(this,arguments)}(n,t)}},"PRIVATE")),(0,o.registerVersion)(h,d),(0,o.registerVersion)(h,d,"esm2017");const vt="@firebase/remote-config",_t="0.3.3",wt=new a.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class bt{constructor(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}isCachedDataFresh(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const n=Date.now()-e,r=n<=t;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${t}. Is cache hit: ${r}.`),r}fetch(t){var e=this;return(0,s.Z)(function*(){const[n,r]=yield Promise.all([e.storage.getLastSuccessfulFetchTimestampMillis(),e.storage.getLastSuccessfulFetchResponse()]);if(r&&e.isCachedDataFresh(t.cacheMaxAgeMillis,n))return r;t.eTag=r&&r.eTag;const i=yield e.client.fetch(t),s=[e.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===i.status&&s.push(e.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})()}}function xt(t=navigator){return t.languages&&t.languages[0]||t.language}class Et{constructor(t,e,n,r,i,s){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=s}fetch(t){var e=this;return(0,s.Z)(function*(){const[n,r]=yield Promise.all([e.firebaseInstallations.getId(),e.firebaseInstallations.getToken()]),i=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${e.projectId}/namespaces/${e.namespace}:fetch?key=${e.apiKey}`,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},o={sdk_version:e.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:e.appId,language_code:xt()},a={method:"POST",headers:s,body:JSON.stringify(o)},u=fetch(i,a),c=new Promise((e,n)=>{t.signal.addEventListener(()=>{const t=new Error("The operation was aborted.");t.name="AbortError",n(t)})});let l;try{yield Promise.race([u,c]),l=yield u}catch(g){let t="fetch-client-network";throw"AbortError"===g.name&&(t="fetch-timeout"),wt.create(t,{originalErrorMessage:g.message})}let h=l.status;const d=l.headers.get("ETag")||void 0;let f,p;if(200===l.status){let t;try{t=yield l.json()}catch(g){throw wt.create("fetch-client-parse",{originalErrorMessage:g.message})}f=t.entries,p=t.state}if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(f={}),304!==h&&200!==h)throw wt.create("fetch-status",{httpStatus:h});return{status:h,eTag:d,config:f}})()}}class Tt{constructor(t,e){this.client=t,this.storage=e}fetch(t){var e=this;return(0,s.Z)(function*(){const n=(yield e.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return e.attemptFetch(t,n)})()}attemptFetch(t,{throttleEndTimeMillis:e,backoffCount:n}){var r=this;return(0,s.Z)(function*(){yield function(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(wt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(t.signal,e);try{const e=yield r.client.fetch(t);return yield r.storage.deleteThrottleMetadata(),e}catch(i){if(!function(t){if(!(t instanceof a.ZR&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i))throw i;const e={throttleEndTimeMillis:Date.now()+(0,a.$s)(n),backoffCount:n+1};return yield r.storage.setThrottleMetadata(e),r.attemptFetch(t,e)}})()}}class St{constructor(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function kt(t,e){const n=t.target.error||void 0;return wt.create(e,{originalErrorMessage:n&&n.message})}const It="app_namespace_store";class Ct{constructor(t,e,n,r=function(){return new Promise((t,e)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=t=>{e(kt(t,"storage-open"))},n.onsuccess=e=>{t(e.target.result)},n.onupgradeneeded=t=>{const e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(It,{keyPath:"compositeKey"})}}}catch(n){e(wt.create("storage-open",{originalErrorMessage:n}))}})}()){this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(t){return this.set("last_fetch_status",t)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(t){return this.set("last_successful_fetch_timestamp_millis",t)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(t){return this.set("last_successful_fetch_response",t)}getActiveConfig(){return this.get("active_config")}setActiveConfig(t){return this.set("active_config",t)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(t){return this.set("active_config_etag",t)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(t){return this.set("throttle_metadata",t)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(t){var e=this;return(0,s.Z)(function*(){const n=yield e.openDbPromise;return new Promise((r,i)=>{const s=n.transaction([It],"readonly").objectStore(It),o=e.createCompositeKey(t);try{const t=s.get(o);t.onerror=t=>{i(kt(t,"storage-get"))},t.onsuccess=t=>{const e=t.target.result;r(e?e.value:void 0)}}catch(a){i(wt.create("storage-get",{originalErrorMessage:a&&a.message}))}})})()}set(t,e){var n=this;return(0,s.Z)(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const o=r.transaction([It],"readwrite").objectStore(It),a=n.createCompositeKey(t);try{const t=o.put({compositeKey:a,value:e});t.onerror=t=>{s(kt(t,"storage-set"))},t.onsuccess=()=>{i()}}catch(u){s(wt.create("storage-set",{originalErrorMessage:u&&u.message}))}})})()}delete(t){var e=this;return(0,s.Z)(function*(){const n=yield e.openDbPromise;return new Promise((r,i)=>{const s=n.transaction([It],"readwrite").objectStore(It),o=e.createCompositeKey(t);try{const t=s.delete(o);t.onerror=t=>{i(kt(t,"storage-delete"))},t.onsuccess=()=>{r()}}catch(a){i(wt.create("storage-delete",{originalErrorMessage:a&&a.message}))}})})()}createCompositeKey(t){return[this.appId,this.appName,this.namespace,t].join()}}class At{constructor(t){this.storage=t}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var t=this;return(0,s.Z)(function*(){const e=t.storage.getLastFetchStatus(),n=t.storage.getLastSuccessfulFetchTimestampMillis(),r=t.storage.getActiveConfig(),i=yield e;i&&(t.lastFetchStatus=i);const s=yield n;s&&(t.lastSuccessfulFetchTimestampMillis=s);const o=yield r;o&&(t.activeConfig=o)})()}setLastFetchStatus(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)}setLastSuccessfulFetchTimestampMillis(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)}setActiveConfig(t){return this.activeConfig=t,this.storage.setActiveConfig(t)}}function Ot(){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,s.Z)(function*(){if(!(0,a.hl)())return!1;try{return yield(0,a.eu)()}catch(t){return!1}})).apply(this,arguments)}(0,o._registerComponent)(new u.wA("remote-config",function(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw wt.create("registration-window");if(!(0,a.hl)())throw wt.create("indexed-db-unavailable");const{projectId:i,apiKey:s,appId:u}=n.options;if(!i)throw wt.create("registration-project-id");if(!s)throw wt.create("registration-api-key");if(!u)throw wt.create("registration-app-id");const l=new Ct(u,n.name,e=e||"firebase"),h=new At(l),d=new c.Yd(vt);d.logLevel=c.in.ERROR;const f=new Et(r,o.SDK_VERSION,e,i,s,u),p=new Tt(f,l),g=new bt(p,l,h,d),m=new St(n,g,h,l,d);return function(t){const e=(0,a.m9)(t);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(m),m},"PUBLIC").setMultipleInstances(!0)),(0,o.registerVersion)(vt,_t),(0,o.registerVersion)(vt,_t,"esm2017");const Dt="/firebase-messaging-sw.js",Pt="/firebase-cloud-messaging-push-scope",Rt="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";var Mt=(()=>(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(Mt||(Mt={})),Mt))();function Lt(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ft(t){const e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}const jt="fcm_token_details_db",Ut="fcm_token_object_Store";function Vt(t){return qt.apply(this,arguments)}function qt(){return(qt=(0,s.Z)(function*(t){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(t=>t.name).includes(jt))return null;let e=null;return(yield(0,l.openDb)(jt,5,function(){var n=(0,s.Z)(function*(n){var r;if(n.oldVersion<2)return;if(!n.objectStoreNames.contains(Ut))return;const i=n.transaction.objectStore(Ut),s=yield i.index("fcmSenderId").get(t);if(yield i.clear(),s)if(2===n.oldVersion){const t=s;if(!t.auth||!t.p256dh||!t.endpoint)return;e={token:t.fcmToken,createTime:null!==(r=t.createTime)&&void 0!==r?r:Date.now(),subscriptionOptions:{auth:t.auth,p256dh:t.p256dh,endpoint:t.endpoint,swScope:t.swScope,vapidKey:"string"==typeof t.vapidKey?t.vapidKey:Lt(t.vapidKey)}}}else if(3===n.oldVersion){const t=s;e={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:Lt(t.auth),p256dh:Lt(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:Lt(t.vapidKey)}}}else if(4===n.oldVersion){const t=s;e={token:t.fcmToken,createTime:t.createTime,subscriptionOptions:{auth:Lt(t.auth),p256dh:Lt(t.p256dh),endpoint:t.endpoint,swScope:t.swScope,vapidKey:Lt(t.vapidKey)}}}});return function(t){return n.apply(this,arguments)}}())).close(),yield(0,l.deleteDb)(jt),yield(0,l.deleteDb)("fcm_vapid_details_db"),yield(0,l.deleteDb)("undefined"),Bt(e)?e:null})).apply(this,arguments)}function Bt(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const zt="firebase-messaging-store";let $t=null;function Gt(){return $t||($t=(0,l.openDb)("firebase-messaging-database",1,t=>{switch(t.oldVersion){case 0:t.createObjectStore(zt)}})),$t}function Zt(t){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,s.Z)(function*(t){const e=Jt(t),n=yield Gt(),r=yield n.transaction(zt).objectStore(zt).get(e);if(r)return r;{const e=yield Vt(t.appConfig.senderId);if(e)return yield Wt(t,e),e}})).apply(this,arguments)}function Wt(t,e){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,s.Z)(function*(t,e){const n=Jt(t),r=(yield Gt()).transaction(zt,"readwrite");return yield r.objectStore(zt).put(e,n),yield r.complete,e})).apply(this,arguments)}function Yt(t){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,s.Z)(function*(t){const e=Jt(t),n=(yield Gt()).transaction(zt,"readwrite");yield n.objectStore(zt).delete(e),yield n.complete})).apply(this,arguments)}function Jt({appConfig:t}){return t.appId}const Xt=new a.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function te(t,e){return ee.apply(this,arguments)}function ee(){return(ee=(0,s.Z)(function*(t,e){const n=yield ae(t),r=ce(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{const e=yield fetch(oe(t.appConfig),i);s=yield e.json()}catch(o){throw Xt.create("token-subscribe-failed",{errorInfo:o})}if(s.error)throw Xt.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw Xt.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function ne(t,e){return re.apply(this,arguments)}function re(){return(re=(0,s.Z)(function*(t,e){const n=yield ae(t),r=ce(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{const n=yield fetch(`${oe(t.appConfig)}/${e.token}`,i);s=yield n.json()}catch(o){throw Xt.create("token-update-failed",{errorInfo:o})}if(s.error)throw Xt.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw Xt.create("token-update-no-token");return s.token})).apply(this,arguments)}function ie(t,e){return se.apply(this,arguments)}function se(){return(se=(0,s.Z)(function*(t,e){const n={method:"DELETE",headers:yield ae(t)};try{const r=yield fetch(`${oe(t.appConfig)}/${e}`,n),i=yield r.json();if(i.error)throw Xt.create("token-unsubscribe-failed",{errorInfo:i.error.message})}catch(r){throw Xt.create("token-unsubscribe-failed",{errorInfo:r})}})).apply(this,arguments)}function oe({projectId:t}){return`https://fcmregistrations.googleapis.com/v1/projects/${t}/registrations`}function ae(t){return ue.apply(this,arguments)}function ue(){return(ue=(0,s.Z)(function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function ce({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==Rt&&(i.web.applicationPubKey=r),i}const le=6048e5;function he(t){return de.apply(this,arguments)}function de(){return(de=(0,s.Z)(function*(t){const e=yield _e(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Lt(e.getKey("auth")),p256dh:Lt(e.getKey("p256dh"))},r=yield Zt(t.firebaseDependencies);if(r){if(be(r.subscriptionOptions,n))return Date.now()>=r.createTime+le?ge(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield ie(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return ye(t.firebaseDependencies,n)}return ye(t.firebaseDependencies,n)})).apply(this,arguments)}function fe(t){return pe.apply(this,arguments)}function pe(){return(pe=(0,s.Z)(function*(t){const e=yield Zt(t.firebaseDependencies);e&&(yield ie(t.firebaseDependencies,e.token),yield Yt(t.firebaseDependencies));const n=yield t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()})).apply(this,arguments)}function ge(t,e){return me.apply(this,arguments)}function me(){return(me=(0,s.Z)(function*(t,e){try{const n=yield ne(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield Wt(t.firebaseDependencies,r),n}catch(n){throw yield fe(t),n}})).apply(this,arguments)}function ye(t,e){return ve.apply(this,arguments)}function ve(){return(ve=(0,s.Z)(function*(t,e){const n={token:yield te(t,e),createTime:Date.now(),subscriptionOptions:e};return yield Wt(t,n),n.token})).apply(this,arguments)}function _e(t,e){return we.apply(this,arguments)}function we(){return(we=(0,s.Z)(function*(t,e){return(yield t.pushManager.getSubscription())||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ft(e)})})).apply(this,arguments)}function be(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}function xe(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcm_message_id};return function(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i)}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(!e.fcmOptions)return;t.fcmOptions={};const n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);const r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}(e,t),e}function Ee(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}function Te(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function Se(t){return Xt.create("missing-app-config-values",{valueName:t})}Te("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Te("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ke{constructor(t,e,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(t){if(!t||!t.options)throw Se("App Configuration Object");if(!t.name)throw Se("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw Se(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:r,installations:e,analyticsProvider:n}}_delete(){return Promise.resolve()}}function Ie(t){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,s.Z)(function*(t){try{t.swRegistration=yield navigator.serviceWorker.register(Dt,{scope:Pt}),t.swRegistration.update().catch(()=>{})}catch(e){throw Xt.create("failed-service-worker-registration",{browserErrorMessage:e.message})}})).apply(this,arguments)}function Ae(t,e){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,s.Z)(function*(t,e){if(e||t.swRegistration||(yield Ie(t)),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Xt.create("invalid-sw-registration");t.swRegistration=e}})).apply(this,arguments)}function Ne(t,e){return De.apply(this,arguments)}function De(){return(De=(0,s.Z)(function*(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=Rt)})).apply(this,arguments)}function Pe(){return(Pe=(0,s.Z)(function*(t,e){if(!navigator)throw Xt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Xt.create("permission-blocked");return yield Ne(t,null==e?void 0:e.vapidKey),yield Ae(t,null==e?void 0:e.serviceWorkerRegistration),he(t)})).apply(this,arguments)}function Re(t,e,n){return Me.apply(this,arguments)}function Me(){return(Me=(0,s.Z)(function*(t,e,n){const r=Le(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n["google.c.a.c_id"],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Le(t){switch(t){case Mt.NOTIFICATION_CLICKED:return"notification_open";case Mt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Fe(){return(Fe=(0,s.Z)(function*(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Mt.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(xe(n)):t.onMessageHandler.next(xe(n)));const r=n.data;Ee(r)&&"1"===r["google.c.a.e"]&&(yield Re(t,n.messageType,r))})).apply(this,arguments)}const je="@firebase/messaging",Ue="0.9.4";function Ve(){return qe.apply(this,arguments)}function qe(){return(qe=(0,s.Z)(function*(){return"undefined"!=typeof window&&(0,a.hl)()&&(yield(0,a.eu)())&&(0,a.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,o._registerComponent)(new u.wA("messaging",t=>{const e=new ke(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function(t,e){return Fe.apply(this,arguments)}(e,t)),e},"PUBLIC")),(0,o._registerComponent)(new u.wA("messaging-internal",t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:t=>function(t,e){return Pe.apply(this,arguments)}(e,t)}},"PRIVATE")),(0,o.registerVersion)(je,Ue),(0,o.registerVersion)(je,Ue,"esm2017");const Be="analytics",ze="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$e="https://www.googletagmanager.com/gtag/js",Ge=new c.Yd("@firebase/analytics");function Ze(t){return Promise.all(t.map(t=>t.catch(t=>t)))}function He(t,e){const n=document.createElement("script");n.src=`${$e}?l=${t}&id=${e}`,n.async=!0,document.head.appendChild(n)}function We(t,e,n,r,i,s){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,s.Z)(function*(t,e,n,r,i,s){const o=r[i];try{if(o)yield e[o];else{const t=(yield Ze(n)).find(t=>t.measurementId===i);t&&(yield e[t.appId])}}catch(a){Ge.error(a)}t("config",i,s)})).apply(this,arguments)}function Ye(t,e,n,r,i){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,s.Z)(function*(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let t=i.send_to;Array.isArray(t)||(t=[t]);const r=yield Ze(n);for(const n of t){const t=r.find(t=>t.measurementId===n),i=t&&e[t.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){Ge.error(s)}})).apply(this,arguments)}function Je(){const t=window.document.getElementsByTagName("script");for(const e of Object.values(t))if(e.src&&e.src.includes($e))return e;return null}const Xe=new a.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),tn=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function en(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function nn(t){return rn.apply(this,arguments)}function rn(){return(rn=(0,s.Z)(function*(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:en(r)},s=ze.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let t="";try{const n=yield o.json();(null===(e=n.error)||void 0===e?void 0:e.message)&&(t=n.error.message)}catch(a){}throw Xe.create("config-fetch-failed",{httpStatus:o.status,responseMessage:t})}return o.json()})).apply(this,arguments)}function sn(t){return on.apply(this,arguments)}function on(){return(on=(0,s.Z)(function*(t,e=tn,n){const{appId:r,apiKey:i,measurementId:o}=t.options;if(!r)throw Xe.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Xe.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new hn;return setTimeout((0,s.Z)(function*(){u.abort()}),void 0!==n?n:6e4),an({appId:r,apiKey:i,measurementId:o},a,u,e)})).apply(this,arguments)}function an(t,e,n){return un.apply(this,arguments)}function un(){return(un=(0,s.Z)(function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=tn){const{appId:s,measurementId:o}=t;try{yield cn(r,e)}catch(u){if(o)return Ge.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u.message}]`),{appId:s,measurementId:o};throw u}try{const e=yield nn(t);return i.deleteThrottleMetadata(s),e}catch(u){if(!ln(u)){if(i.deleteThrottleMetadata(s),o)return Ge.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u.message}]`),{appId:s,measurementId:o};throw u}const e=503===Number(u.customData.httpStatus)?(0,a.$s)(n,i.intervalMillis,30):(0,a.$s)(n,i.intervalMillis),c={throttleEndTimeMillis:Date.now()+e,backoffCount:n+1};return i.setThrottleMetadata(s,c),Ge.debug(`Calling attemptFetch again in ${e} millis`),an(t,c,r,i)}})).apply(this,arguments)}function cn(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Xe.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function ln(t){if(!(t instanceof a.ZR&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}class hn{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}function dn(){return fn.apply(this,arguments)}function fn(){return(fn=(0,s.Z)(function*(){if(!(0,a.hl)())return Ge.warn(Xe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,a.eu)()}catch(t){return Ge.warn(Xe.create("indexeddb-unavailable",{errorInfo:t}).message),!1}return!0})).apply(this,arguments)}function pn(){return(pn=(0,s.Z)(function*(t,e,n,r,i,s,o){var a;const u=sn(t);u.then(e=>{n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Ge.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(t=>Ge.error(t)),e.push(u);const c=dn().then(t=>t?r.getId():void 0),[l,h]=yield Promise.all([u,c]);Je()||He(s,l.measurementId),i("js",new Date);const d=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),i("config",l.measurementId,d),l.measurementId})).apply(this,arguments)}class gn{constructor(t){this.app=t}_delete(){return delete mn[this.app.options.appId],Promise.resolve()}}let mn={},yn=[];const vn={};let _n,wn,bn="dataLayer",xn=!1;function En(){return(En=(0,s.Z)(function*(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const i=yield e;t("event",n,Object.assign(Object.assign({},r),{send_to:i}))}})).apply(this,arguments)}function Tn(){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,s.Z)(function*(){if((0,a.ru)())return!1;if(!(0,a.zI)())return!1;if(!(0,a.hl)())return!1;try{return yield(0,a.eu)()}catch(t){return!1}})).apply(this,arguments)}const kn="@firebase/analytics",In="0.7.4";(0,o._registerComponent)(new u.wA(Be,(t,{options:e})=>function(t,e,n){!function(){const t=[];if((0,a.ru)()&&t.push("This is a browser extension environment."),(0,a.zI)()||t.push("Cookies are not available."),t.length>0){const e=t.map((t,e)=>`(${e+1}) ${t}`).join(" "),n=Xe.create("invalid-analytics-context",{errorInfo:e});Ge.warn(n.message)}}();const r=t.options.appId;if(!r)throw Xe.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Xe.create("no-api-key");Ge.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=mn[r])throw Xe.create("already-exists",{id:r});if(!xn){!function(t){let e=[];Array.isArray(window.dataLayer)?e=window.dataLayer:window.dataLayer=e}();const{wrappedGtag:t,gtagCore:e}=function(t,e,n,r,i){let o=function(...t){window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(o=window.gtag),window.gtag=function(t,e,n,r){function i(){return(i=(0,s.Z)(function*(i,s,o){try{"event"===i?yield Ye(t,e,n,s,o):"config"===i?yield We(t,e,n,r,s,o):t("set",s)}catch(a){Ge.error(a)}})).apply(this,arguments)}return function(t,e,n){return i.apply(this,arguments)}}(o,t,e,n),{gtagCore:o,wrappedGtag:window.gtag}}(mn,yn,vn);wn=t,_n=e,xn=!0}return mn[r]=function(t,e,n,r,i,s,o){return pn.apply(this,arguments)}(t,yn,vn,e,_n,bn,n),new gn(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e),"PUBLIC")),(0,o._registerComponent)(new u.wA("analytics-internal",function(t){try{const e=t.getProvider(Be).getImmediate();return{logEvent:(t,n,r)=>function(t,e,n,r){t=(0,a.m9)(t),function(t,e,n,r,i){return En.apply(this,arguments)}(wn,mn[t.app.options.appId],e,n,r).catch(t=>Ge.error(t))}(e,t,n,r)}}catch(e){throw Xe.create("interop-component-reg-failed",{reason:e})}},"PRIVATE")),(0,o.registerVersion)(kn,In),(0,o.registerVersion)(kn,In,"esm2017");var Cn=n(7771),An=n(3637),On=n(3342),Nn=n(3101),Dn=n(309);const Pn=new r.GfV("7.2.0"),Rn="__angularfire_symbol__analyticsIsSupported",Mn="__angularfire_symbol__remoteConfigIsSupported",Ln="__angularfire_symbol__messagingIsSupported";function Fn(t,e,n){if(e){if(1===e.length)return e[0];const t=e.filter(t=>t.app===n);if(1===t.length)return t[0]}return n.container.getProvider(t).getImmediate({optional:!0})}globalThis[Rn]||(globalThis[Rn]=Tn().then(t=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=t)),globalThis[Ln]||(globalThis[Ln]=Ve().then(t=>globalThis.__angularfire_symbol__messagingIsSupportedValue=t)),globalThis[Mn]||(globalThis[Mn]=Ot().then(t=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=t));const jn=(t,e)=>{const n=e?[e]:(0,i.C6)(),r=[];return n.forEach(e=>{e.container.getProvider(t).instances.forEach(t=>{r.includes(t)||r.push(t)})}),r};function Un(){}class Vn{constructor(t,e=Cn.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class qn{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Un,{},Un,Un)),e.pipe((0,On.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Bn=(()=>{class t{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Vn(Zone.current)),this.insideAngular=t.run(()=>new Vn(Zone.current,An.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function zn(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function $n(t){return zn(),(e=zn(),function(t){return(t=t.lift(new qn(e.ngZone))).pipe((0,Nn.R)(e.outsideAngular),(0,Dn.QV)(e.insideAngular))})(t);var e}},156:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var r=n(3854),i=n(8604),s=n(279),o=n(9306);class a{constructor(t,e){this._delegate=t,this.firebase=e,(0,s._addComponent)(t,new i.wA("app-compat",()=>this,"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(t=>{this._delegate.checkDestroyed(),t()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,s.deleteApp)(this._delegate)))}_getService(t,e=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})}_removeServiceInstance(t,e=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(t).clearInstance(e)}_addComponent(t){(0,s._addComponent)(this._delegate,t)}_addOrOverwriteComponent(t){(0,s._addOrOverwriteComponent)(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const u=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),c=function t(){const e=function(t){const e={},n={__esModule:!0,initializeApp:function(i,o={}){const a=s.initializeApp(i,o);if((0,r.r3)(e,a.name))return e[a.name];const u=new t(a,n);return e[a.name]=u,u},app:i,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:function(e){const o=e.name,a=o.replace("-compat","");if(s._registerComponent(e)&&"PUBLIC"===e.type){const s=(t=i())=>{if("function"!=typeof t[a])throw u.create("invalid-app-argument",{appName:o});return t[a]()};void 0!==e.serviceProps&&(0,r.ZB)(s,e.serviceProps),n[a]=s,t.prototype[a]=function(...t){return this._getService.bind(this,o).apply(this,e.multipleInstances?t:[])}}return"PUBLIC"===e.type?n[a]:null},removeApp:function(t){delete e[t]},useAsService:function(t,e){return"serverAuth"===e?null:e},modularAPIs:s}};function i(t){if(!(0,r.r3)(e,t=t||s._DEFAULT_ENTRY_NAME))throw u.create("no-app",{appName:t});return e[t]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(e).map(t=>e[t])}}),i.App=t,n}(a);return e.INTERNAL=Object.assign(Object.assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,r.ZB)(e,t)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),e}(),l=new o.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){l.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&l.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const h=c;(0,s.registerVersion)("@firebase/app-compat","0.1.12",void 0)},279:(t,e,n)=>{"use strict";n.r(e),n.d(e,{FirebaseError:()=>o.ZR,SDK_VERSION:()=>E,_DEFAULT_ENTRY_NAME:()=>h,_addComponent:()=>g,_addOrOverwriteComponent:()=>m,_apps:()=>f,_clearComponents:()=>w,_components:()=>p,_getProvider:()=>v,_registerComponent:()=>y,_removeServiceInstance:()=>_,deleteApp:()=>I,getApp:()=>S,getApps:()=>k,initializeApp:()=>T,onLog:()=>O,registerVersion:()=>A,setLogLevel:()=>N});var r=n(6304),i=n(8604),s=n(9306),o=n(3854);class a{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function(t){const e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null}).filter(t=>t).join(" ")}}const u="@firebase/app",c="0.7.11",l=new s.Yd("@firebase/app"),h="[DEFAULT]",d={[u]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},f=new Map,p=new Map;function g(t,e){try{t.container.addComponent(e)}catch(n){l.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function m(t,e){t.container.addOrOverwriteComponent(e)}function y(t){const e=t.name;if(p.has(e))return l.debug(`There were multiple attempts to register component ${e}.`),!1;p.set(e,t);for(const n of f.values())g(n,t);return!0}function v(t,e){return t.container.getProvider(e)}function _(t,e,n=h){v(t,e).clearInstance(n)}function w(){p.clear()}const b=new o.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class x{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw b.create("app-deleted",{appName:this._name})}}const E="9.6.1";function T(t,e={}){"object"!=typeof e&&(e={name:e});const n=Object.assign({name:h,automaticDataCollectionEnabled:!1},e),r=n.name;if("string"!=typeof r||!r)throw b.create("bad-app-name",{appName:String(r)});const s=f.get(r);if(s){if((0,o.vZ)(t,s.options)&&(0,o.vZ)(n,s.config))return s;throw b.create("duplicate-app",{appName:r})}const a=new i.H0(r);for(const i of p.values())a.addComponent(i);const u=new x(t,n,a);return f.set(r,u),u}function S(t=h){const e=f.get(t);if(!e)throw b.create("no-app",{appName:t});return e}function k(){return Array.from(f.values())}function I(t){return C.apply(this,arguments)}function C(){return(C=(0,r.Z)(function*(t){const e=t.name;f.has(e)&&(f.delete(e),yield Promise.all(t.container.getProviders().map(t=>t.delete())),t.isDeleted=!0)})).apply(this,arguments)}function A(t,e,n){var r;let s=null!==(r=d[t])&&void 0!==r?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const t=[`Unable to register library "${s}" with version "${e}":`];return o&&t.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&t.push("and"),a&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void l.warn(t.join(" "))}y(new i.wA(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function O(t,e){if(null!==t&&"function"!=typeof t)throw b.create("invalid-log-argument");(0,s.Am)(t,e)}function N(t){(0,s.Ub)(t)}y(new i.wA("platform-logger",t=>new a(t),"PRIVATE")),A(u,c,""),A(u,c,"esm2017"),A("fire-js","")},8604:(t,e,n)=>{"use strict";n.d(e,{wA:()=>s,H0:()=>u});var r=n(6304),i=n(3854);class s{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const o="[DEFAULT]";class a{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new i.BH;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:o})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:r});n.resolve(t)}catch(e){}}}}clearInstance(t="[DEFAULT]"){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){var t=this;return(0,r.Z)(function*(){const e=Array.from(t.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(t="[DEFAULT]"){return this.instances.has(t)}getOptions(t="[DEFAULT]"){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[i,s]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(i)&&s.resolve(r);return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&t(s,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const i of n)try{i(t,e)}catch(r){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===o?void 0:r),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(i){}var r;return n||null}normalizeInstanceIdentifier(t="[DEFAULT]"){return this.component?this.component.multipleInstances?t:o:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class u{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new a(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}},9306:(t,e,n)=>{"use strict";n.d(e,{in:()=>i,Yd:()=>c,Ub:()=>l,Am:()=>h});const r=[];var i=(()=>(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(i||(i={})),i))();const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},u=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=a[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class c{constructor(t){this.name=t,this._logLevel=o,this._logHandler=u,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in i))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?s[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}function l(t){r.forEach(e=>{e.setLogLevel(t)})}function h(t,e){for(const n of r){let r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:(e,n,...s)=>{const o=s.map(t=>{if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(t=>t).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:i[n].toLowerCase(),message:o,args:s,type:e.name})}}}},3854:(t,e,n)=>{"use strict";n.d(e,{BH:()=>u,LL:()=>T,ZR:()=>E,zI:()=>x,US:()=>i,tV:()=>o,$s:()=>L,r3:()=>k,Sg:()=>c,ne:()=>P,vZ:()=>C,ZB:()=>a,pd:()=>D,m9:()=>F,z$:()=>l,jU:()=>f,ru:()=>p,d:()=>m,xb:()=>I,w1:()=>y,hl:()=>w,uI:()=>h,UG:()=>d,b$:()=>g,G6:()=>_,Mn:()=>v,xO:()=>O,zd:()=>N,eu:()=>b});const r=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const e=t[i],s=i+1<t.length,o=s?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0;let c=(15&o)<<2|u>>6,l=63&u;a||(l=64,s||(c=64)),r.push(n[e>>2],n[(3&e)<<4|o>>4],n[c],n[l])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(r(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const e=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0;++i;const o=i<t.length?n[t.charAt(i)]:64;++i;const a=i<t.length?n[t.charAt(i)]:64;if(++i,null==e||null==s||null==o||null==a)throw Error();r.push(e<<2|s>>4),64!==o&&(r.push(s<<4&240|o>>2),64!==a&&r.push(o<<6&192|a))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},s=function(t){return function(t){const e=r(t);return i.encodeByteArray(e,!0)}(t).replace(/\./g,"")},o=function(t){try{return i.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function a(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=a(t[n],e[n]));return t}class u{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"==typeof t&&(this.promise.catch(()=>{}),1===t.length?t(e):t(e,n))}}}function c(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[s(JSON.stringify({alg:"none",type:"JWT"})),s(JSON.stringify(o)),""].join(".")}function l(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function h(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l())}function d(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function f(){return"object"==typeof self&&self.self===self}function p(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function g(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function m(){return l().indexOf("Electron/")>=0}function y(){const t=l();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function v(){return l().indexOf("MSAppHost/")>=0}function _(){return!d()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function w(){return"object"==typeof indexedDB}function b(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}})}function x(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class E extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,E.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,T.prototype.create)}}class T{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],s=i?function(t,e){return t.replace(S,(t,n)=>{const r=e[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error";return new E(r,`${this.serviceName}: ${s} (${r}).`,n)}}const S=/\{\$([^}]+)}/g;function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function I(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function C(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const n=t[i],s=e[i];if(A(n)&&A(s)){if(!C(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function A(t){return null!==t&&"object"==typeof t}function O(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function N(t){const e={};return t.replace(/^\?/,"").split("&").forEach(t=>{if(t){const[n,r]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(r)}}),e}function D(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function P(t,e){const n=new R(t,e);return n.subscribe.bind(n)}class R{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(t=>{this.error(t)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,n){let r;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");r=function(t,e){if("object"!=typeof t||null===t)return!1;for(const n of["next","error","complete"])if(n in t&&"function"==typeof t[n])return!0;return!1}(t)?t:{next:t,error:e,complete:n},void 0===r.next&&(r.next=M),void 0===r.error&&(r.error=M),void 0===r.complete&&(r.complete=M);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(t){}}),this.observers.push(r),i}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(n){"undefined"!=typeof console&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function M(){}function L(t,e=1e3,n=2){const r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function F(t){return t&&t._delegate?t._delegate:t}},218:(t,e,n)=>{t.exports={graphlib:n(7759),layout:n(8090),debug:n(1544),util:{time:n(1824).time,notime:n(1824).notime},version:n(6854)}},6467:(t,e,n)=>{"use strict";var r=n(2712),i=n(3199);t.exports={run:function(t){var e="greedy"===t.graph().acyclicer?i(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},i={};return r.forEach(t.nodes(),function s(o){r.has(i,o)||(i[o]=!0,n[o]=!0,r.forEach(t.outEdges(o),function(t){r.has(n,t.w)?e.push(t):s(t.w)}),delete n[o])}),e}(t);r.forEach(e,function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,r.uniqueId("rev"))})},undo:function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}}},9752:(t,e,n)=>{var r=n(2712),i=n(1824);function s(t,e,n,r,s,o){var a=s[e][o-1],u=i.addDummyNode(t,"border",{width:0,height:0,rank:o,borderType:e},n);s[e][o]=u,t.setParent(u,r),a&&t.setEdge(a,u,{weight:1})}t.exports=function(t){r.forEach(t.children(),function e(n){var i=t.children(n),o=t.node(n);if(i.length&&r.forEach(i,e),r.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var a=o.minRank,u=o.maxRank+1;a<u;++a)s(t,"borderLeft","_bl",n,o,a),s(t,"borderRight","_br",n,o,a)}})}},6232:(t,e,n)=>{"use strict";var r=n(2712);function i(t){r.forEach(t.nodes(),function(e){s(t.node(e))}),r.forEach(t.edges(),function(e){s(t.edge(e))})}function s(t){var e=t.width;t.width=t.height,t.height=e}function o(t){t.y=-t.y}function a(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||i(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){r.forEach(t.nodes(),function(e){o(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.forEach(n.points,o),r.has(n,"y")&&o(n)})}(t),"lr"!==e&&"rl"!==e||(function(t){r.forEach(t.nodes(),function(e){a(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.forEach(n.points,a),r.has(n,"x")&&a(n)})}(t),i(t))}}},8190:t=>{function e(){var t={};t._next=t._prev=t,this._sentinel=t}function n(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function r(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=e,e.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return n(e),e},e.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&n(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},e.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,r)),n=n._prev;return"["+t.join(", ")+"]"}},1544:(t,e,n)=>{var r=n(2712),i=n(1824),s=n(7759).Graph;t.exports={debugOrdering:function(t){var e=i.buildLayerMatrix(t),n=new s({compound:!0,multigraph:!0}).setGraph({});return r.forEach(t.nodes(),function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)}),r.forEach(t.edges(),function(t){n.setEdge(t.v,t.w,{},t.name)}),r.forEach(e,function(t,e){n.setNode("layer"+e,{rank:"same"}),r.reduce(t,function(t,e){return n.setEdge(t,e,{style:"invis"}),e})}),n}}},7759:(t,e,n)=>{var r;try{r=n(30)}catch(i){}r||(r=window.graphlib),t.exports=r},3199:(t,e,n)=>{var r=n(2712),i=n(7759).Graph,s=n(8190);t.exports=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new i,o=0,a=0;r.forEach(t.nodes(),function(t){n.setNode(t,{v:t,in:0,out:0})}),r.forEach(t.edges(),function(t){var r=n.edge(t.v,t.w)||0,i=e(t);n.setEdge(t.v,t.w,r+i),a=Math.max(a,n.node(t.v).out+=i),o=Math.max(o,n.node(t.w).in+=i)});var c=r.range(a+o+3).map(function(){return new s}),l=o+1;return r.forEach(n.nodes(),function(t){u(c,l,n.node(t))}),{graph:n,buckets:c,zeroIdx:l}}(t,e||o),c=function(t,e,n){for(var r,i=[],s=e[e.length-1],o=e[0];t.nodeCount();){for(;r=o.dequeue();)a(t,e,n,r);for(;r=s.dequeue();)a(t,e,n,r);if(t.nodeCount())for(var u=e.length-2;u>0;--u)if(r=e[u].dequeue()){i=i.concat(a(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(c,function(e){return t.outEdges(e.v,e.w)}),!0)};var o=r.constant(1);function a(t,e,n,i,s){var o=s?[]:void 0;return r.forEach(t.inEdges(i.v),function(r){var i=t.edge(r),a=t.node(r.v);s&&o.push({v:r.v,w:r.w}),a.out-=i,u(e,n,a)}),r.forEach(t.outEdges(i.v),function(r){var i=t.edge(r),s=t.node(r.w);s.in-=i,u(e,n,s)}),t.removeNode(i.v),o}function u(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},8090:(t,e,n)=>{"use strict";var r=n(2712),i=n(6467),s=n(8284),o=n(2445),a=n(1824).normalizeRanks,u=n(2375),c=n(1824).removeEmptyRanks,l=n(5970),h=n(9752),d=n(6232),f=n(1989),p=n(6685),g=n(1824),m=n(7759).Graph;t.exports=function(t,e){var n=e&&e.debugTiming?g.time:g.notime;n("layout",function(){var e=n("  buildLayoutGraph",function(){return function(t){var e=new m({multigraph:!0,compound:!0}),n=k(t.graph());return e.setGraph(r.merge({},v,S(n,y),r.pick(n,_))),r.forEach(t.nodes(),function(n){var i=k(t.node(n));e.setNode(n,r.defaults(S(i,w),b)),e.setParent(n,t.parent(n))}),r.forEach(t.edges(),function(n){var i=k(t.edge(n));e.setEdge(n,r.merge({},E,S(i,x),r.pick(i,T)))}),e}(t)});n("  runLayout",function(){!function(t,e){e("    makeSpaceForEdgeLabels",function(){!function(t){var e=t.graph();e.ranksep/=2,r.forEach(t.edges(),function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}(t)}),e("    removeSelfEdges",function(){!function(t){r.forEach(t.edges(),function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}(t)}),e("    acyclic",function(){i.run(t)}),e("    nestingGraph.run",function(){l.run(t)}),e("    rank",function(){o(g.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){!function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i=t.node(e.w);g.addDummyNode(t,"edge-proxy",{rank:(i.rank-r.rank)/2+r.rank,e:e},"_ep")}})}(t)}),e("    removeEmptyRanks",function(){c(t)}),e("    nestingGraph.cleanup",function(){l.cleanup(t)}),e("    normalizeRanks",function(){a(t)}),e("    assignRankMinMax",function(){!function(t){var e=0;r.forEach(t.nodes(),function(n){var i=t.node(n);i.borderTop&&(i.minRank=t.node(i.borderTop).rank,i.maxRank=t.node(i.borderBottom).rank,e=r.max(e,i.maxRank))}),t.graph().maxRank=e}(t)}),e("    removeEdgeLabelProxies",function(){!function(t){r.forEach(t.nodes(),function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}(t)}),e("    normalize.run",function(){s.run(t)}),e("    parentDummyChains",function(){u(t)}),e("    addBorderSegments",function(){h(t)}),e("    order",function(){f(t)}),e("    insertSelfEdges",function(){!function(t){var e=g.buildLayerMatrix(t);r.forEach(e,function(e){var n=0;r.forEach(e,function(e,i){var s=t.node(e);s.order=i+n,r.forEach(s.selfEdges,function(e){g.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:s.rank,order:i+ ++n,e:e.e,label:e.label},"_se")}),delete s.selfEdges})})}(t)}),e("    adjustCoordinateSystem",function(){d.adjust(t)}),e("    position",function(){p(t)}),e("    positionSelfEdges",function(){!function(t){r.forEach(t.nodes(),function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,s=r.y,o=n.x-i,a=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*o/3,y:s-a},{x:i+5*o/6,y:s-a},{x:i+o,y:s},{x:i+5*o/6,y:s+a},{x:i+2*o/3,y:s+a}],n.label.x=n.x,n.label.y=n.y}})}(t)}),e("    removeBorderNodes",function(){!function(t){r.forEach(t.nodes(),function(e){if(t.children(e).length){var n=t.node(e),i=t.node(n.borderTop),s=t.node(n.borderBottom),o=t.node(r.last(n.borderLeft)),a=t.node(r.last(n.borderRight));n.width=Math.abs(a.x-o.x),n.height=Math.abs(s.y-i.y),n.x=o.x+n.width/2,n.y=i.y+n.height/2}}),r.forEach(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}(t)}),e("    normalize.undo",function(){s.undo(t)}),e("    fixupEdgeLabelCoords",function(){!function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}(t)}),e("    undoCoordinateSystem",function(){d.undo(t)}),e("    translateGraph",function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,i=Number.POSITIVE_INFINITY,s=0,o=t.graph(),a=o.marginx||0,u=o.marginy||0;function c(t){var r=t.x,o=t.y,a=t.width,u=t.height;e=Math.min(e,r-a/2),n=Math.max(n,r+a/2),i=Math.min(i,o-u/2),s=Math.max(s,o+u/2)}r.forEach(t.nodes(),function(e){c(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.has(n,"x")&&c(n)}),e-=a,i-=u,r.forEach(t.nodes(),function(n){var r=t.node(n);r.x-=e,r.y-=i}),r.forEach(t.edges(),function(n){var s=t.edge(n);r.forEach(s.points,function(t){t.x-=e,t.y-=i}),r.has(s,"x")&&(s.x-=e),r.has(s,"y")&&(s.y-=i)}),o.width=n-e+a,o.height=s-i+u}(t)}),e("    assignNodeIntersects",function(){!function(t){r.forEach(t.edges(),function(e){var n,r,i=t.edge(e),s=t.node(e.v),o=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=o,r=s),i.points.unshift(g.intersectRect(s,n)),i.points.push(g.intersectRect(o,r))})}(t)}),e("    reversePoints",function(){!function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}(t)}),e("    acyclic.undo",function(){i.undo(t)})}(e,n)}),n("  updateInputGraph",function(){!function(t,e){r.forEach(t.nodes(),function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))}),r.forEach(t.edges(),function(n){var i=t.edge(n),s=e.edge(n);i.points=s.points,r.has(s,"x")&&(i.x=s.x,i.y=s.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)})})};var y=["nodesep","edgesep","ranksep","marginx","marginy"],v={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},_=["acyclicer","ranker","rankdir","align"],w=["width","height"],b={width:0,height:0},x=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},T=["labelpos"];function S(t,e){return r.mapValues(r.pick(t,e),Number)}function k(t){var e={};return r.forEach(t,function(t,n){e[n.toLowerCase()]=t}),e}},2712:(t,e,n)=>{var r;try{r={cloneDeep:n(7524),constant:n(5654),defaults:n(6726),each:n(3718),filter:n(3834),find:n(8990),flatten:n(4694),forEach:n(4733),forIn:n(8577),has:n(2335),isUndefined:n(9569),last:n(7842),map:n(9718),mapValues:n(182),max:n(1334),merge:n(3912),min:n(1518),minBy:n(5353),now:n(765),pick:n(1133),range:n(1221),reduce:n(6101),sortBy:n(280),uniqueId:n(5927),values:n(3348),zipObject:n(1507)}}catch(i){}r||(r=window._),t.exports=r},5970:(t,e,n)=>{var r=n(2712),i=n(1824);function s(t,e,n,o,a,u,c){var l=t.children(c);if(l.length){var h=i.addBorderNode(t,"_bt"),d=i.addBorderNode(t,"_bb"),f=t.node(c);t.setParent(h,c),f.borderTop=h,t.setParent(d,c),f.borderBottom=d,r.forEach(l,function(r){s(t,e,n,o,a,u,r);var i=t.node(r),l=i.borderTop?i.borderTop:r,f=i.borderBottom?i.borderBottom:r,p=i.borderTop?o:2*o,g=l!==f?1:a-u[c]+1;t.setEdge(h,l,{weight:p,minlen:g,nestingEdge:!0}),t.setEdge(f,d,{weight:p,minlen:g,nestingEdge:!0})}),t.parent(c)||t.setEdge(e,h,{weight:0,minlen:a+u[c]})}else c!==e&&t.setEdge(e,c,{weight:0,minlen:n})}t.exports={run:function(t){var e=i.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};function n(i,s){var o=t.children(i);o&&o.length&&r.forEach(o,function(t){n(t,s+1)}),e[i]=s}return r.forEach(t.children(),function(t){n(t,1)}),e}(t),o=r.max(r.values(n))-1,a=2*o+1;t.graph().nestingRoot=e,r.forEach(t.edges(),function(e){t.edge(e).minlen*=a});var u=function(t){return r.reduce(t.edges(),function(e,n){return e+t.edge(n).weight},0)}(t)+1;r.forEach(t.children(),function(r){s(t,e,a,u,o,n,r)}),t.graph().nodeRankFactor=a},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,r.forEach(t.edges(),function(e){t.edge(e).nestingEdge&&t.removeEdge(e)})}}},8284:(t,e,n)=>{"use strict";var r=n(2712),i=n(1824);t.exports={run:function(t){t.graph().dummyChains=[],r.forEach(t.edges(),function(e){!function(t,e){var n,r,s,o=e.v,a=t.node(o).rank,u=e.w,c=t.node(u).rank,l=e.name,h=t.edge(e),d=h.labelRank;if(c!==a+1){for(t.removeEdge(e),s=0,++a;a<c;++s,++a)h.points=[],n=i.addDummyNode(t,"edge",r={width:0,height:0,edgeLabel:h,edgeObj:e,rank:a},"_d"),a===d&&(r.width=h.width,r.height=h.height,r.dummy="edge-label",r.labelpos=h.labelpos),t.setEdge(o,n,{weight:h.weight},l),0===s&&t.graph().dummyChains.push(n),o=n;t.setEdge(o,u,{weight:h.weight},l)}}(t,e)})},undo:function(t){r.forEach(t.graph().dummyChains,function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),r=t.node(e=n)})}}},6600:(t,e,n)=>{var r=n(2712);t.exports=function(t,e,n){var i,s={};r.forEach(n,function(n){for(var r,o,a=t.parent(n);a;){if((r=t.parent(a))?(o=s[r],s[r]=a):(o=i,i=a),o&&o!==a)return void e.setEdge(o,a);a=r}})}},8372:(t,e,n)=>{var r=n(2712);t.exports=function(t,e){return r.map(e,function(e){var n=t.inEdges(e);if(n.length){var i=r.reduce(n,function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}},{sum:0,weight:0});return{v:e,barycenter:i.sum/i.weight,weight:i.weight}}return{v:e}})}},1273:(t,e,n)=>{var r=n(2712),i=n(7759).Graph;t.exports=function(t,e,n){var s=function(t){for(var e;t.hasNode(e=r.uniqueId("_root")););return e}(t),o=new i({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(e){return t.node(e)});return r.forEach(t.nodes(),function(i){var a=t.node(i),u=t.parent(i);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(o.setNode(i),o.setParent(i,u||s),r.forEach(t[n](i),function(e){var n=e.v===i?e.w:e.v,s=o.edge(n,i),a=r.isUndefined(s)?0:s.weight;o.setEdge(n,i,{weight:t.edge(e).weight+a})}),r.has(a,"minRank")&&o.setNode(i,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))}),o}},7021:(t,e,n)=>{"use strict";var r=n(2712);function i(t,e,n){for(var i=r.zipObject(n,r.map(n,function(t,e){return e})),s=r.flatten(r.map(e,function(e){return r.sortBy(r.map(t.outEdges(e),function(e){return{pos:i[e.w],weight:t.edge(e).weight}}),"pos")}),!0),o=1;o<n.length;)o<<=1;var a=2*o-1;o-=1;var u=r.map(new Array(a),function(){return 0}),c=0;return r.forEach(s.forEach(function(t){var e=t.pos+o;u[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=u[e+1]),u[e=e-1>>1]+=t.weight;c+=t.weight*n})),c}t.exports=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=i(t,e[r-1],e[r]);return n}},1989:(t,e,n)=>{"use strict";var r=n(2712),i=n(4189),s=n(7021),o=n(9939),a=n(1273),u=n(6600),c=n(7759).Graph,l=n(1824);function h(t,e,n){return r.map(e,function(e){return a(t,e,n)})}function d(t,e){var n=new c;r.forEach(t,function(t){var i=t.graph().root,s=o(t,i,n,e);r.forEach(s.vs,function(e,n){t.node(e).order=n}),u(t,n,s.vs)})}function f(t,e){r.forEach(e,function(e){r.forEach(e,function(e,n){t.node(e).order=n})})}t.exports=function(t){var e=l.maxRank(t),n=h(t,r.range(1,e+1),"inEdges"),o=h(t,r.range(e-1,-1,-1),"outEdges"),a=i(t);f(t,a);for(var u,c=Number.POSITIVE_INFINITY,p=0,g=0;g<4;++p,++g){d(p%2?n:o,p%4>=2),a=l.buildLayerMatrix(t);var m=s(t,a);m<c&&(g=0,u=r.cloneDeep(a),c=m)}f(t,u)}},4189:(t,e,n)=>{"use strict";var r=n(2712);t.exports=function(t){var e={},n=r.filter(t.nodes(),function(e){return!t.children(e).length}),i=r.max(r.map(n,function(e){return t.node(e).rank})),s=r.map(r.range(i+1),function(){return[]}),o=r.sortBy(n,function(e){return t.node(e).rank});return r.forEach(o,function n(i){if(!r.has(e,i)){e[i]=!0;var o=t.node(i);s[o.rank].push(i),r.forEach(t.successors(i),n)}}),s}},965:(t,e,n)=>{"use strict";var r=n(2712);t.exports=function(t,e){var n={};return r.forEach(t,function(t,e){var i=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};r.isUndefined(t.barycenter)||(i.barycenter=t.barycenter,i.weight=t.weight)}),r.forEach(e.edges(),function(t){var e=n[t.v],i=n[t.w];r.isUndefined(e)||r.isUndefined(i)||(i.indegree++,e.out.push(n[t.w]))}),function(t){var e=[];function n(t){return function(e){var n,i,s,o;e.merged||(r.isUndefined(e.barycenter)||r.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&(s=0,o=0,(n=t).weight&&(s+=n.barycenter*n.weight,o+=n.weight),(i=e).weight&&(s+=i.barycenter*i.weight,o+=i.weight),n.vs=i.vs.concat(n.vs),n.barycenter=s/o,n.weight=o,n.i=Math.min(i.i,n.i),i.merged=!0)}}function i(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var s=t.pop();e.push(s),r.forEach(s.in.reverse(),n(s)),r.forEach(s.out,i(s))}return r.map(r.filter(e,function(t){return!t.merged}),function(t){return r.pick(t,["vs","i","barycenter","weight"])})}(r.filter(n,function(t){return!t.indegree}))}},9939:(t,e,n)=>{var r=n(2712),i=n(8372),s=n(965),o=n(5291);t.exports=function t(e,n,a,u){var c=e.children(n),l=e.node(n),h=l?l.borderLeft:void 0,d=l?l.borderRight:void 0,f={};h&&(c=r.filter(c,function(t){return t!==h&&t!==d}));var p=i(e,c);r.forEach(p,function(n){if(e.children(n.v).length){var i=t(e,n.v,a,u);f[n.v]=i,r.has(i,"barycenter")&&(o=i,r.isUndefined((s=n).barycenter)?(s.barycenter=o.barycenter,s.weight=o.weight):(s.barycenter=(s.barycenter*s.weight+o.barycenter*o.weight)/(s.weight+o.weight),s.weight+=o.weight))}var s,o});var g=s(p,a);!function(t,e){r.forEach(t,function(t){t.vs=r.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)})}(g,f);var m=o(g,u);if(h&&(m.vs=r.flatten([h,m.vs,d],!0),e.predecessors(h).length)){var y=e.node(e.predecessors(h)[0]),v=e.node(e.predecessors(d)[0]);r.has(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+y.order+v.order)/(m.weight+2),m.weight+=2}return m}},5291:(t,e,n)=>{var r=n(2712),i=n(1824);function s(t,e,n){for(var i;e.length&&(i=r.last(e)).i<=n;)e.pop(),t.push(i.vs),n++;return n}t.exports=function(t,e){var n,o=i.partition(t,function(t){return r.has(t,"barycenter")}),a=o.lhs,u=r.sortBy(o.rhs,function(t){return-t.i}),c=[],l=0,h=0,d=0;a.sort((n=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:n?e.i-t.i:t.i-e.i})),d=s(c,u,d),r.forEach(a,function(t){d+=t.vs.length,c.push(t.vs),l+=t.barycenter*t.weight,h+=t.weight,d=s(c,u,d)});var f={vs:r.flatten(c,!0)};return h&&(f.barycenter=l/h,f.weight=h),f}},2375:(t,e,n)=>{var r=n(2712);t.exports=function(t){var e=function(t){var e={},n=0;return r.forEach(t.children(),function i(s){var o=n;r.forEach(t.children(s),i),e[s]={low:o,lim:n++}}),e}(t);r.forEach(t.graph().dummyChains,function(n){for(var r=t.node(n),i=r.edgeObj,s=function(t,e,n,r){var i,s,o=[],a=[],u=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),o.push(i)}while(i&&(e[i].low>u||c>e[i].lim));for(s=i,i=r;(i=t.parent(i))!==s;)a.push(i);return{path:o.concat(a.reverse()),lca:s}}(t,e,i.v,i.w),o=s.path,a=s.lca,u=0,c=o[u],l=!0;n!==i.w;){if(r=t.node(n),l){for(;(c=o[u])!==a&&t.node(c).maxRank<r.rank;)u++;c===a&&(l=!1)}if(!l){for(;u<o.length-1&&t.node(c=o[u+1]).minRank<=r.rank;)u++;c=o[u]}t.setParent(n,c),n=t.successors(n)[0]}})}},1331:(t,e,n)=>{"use strict";var r=n(2712),i=n(7759).Graph,s=n(1824);function o(t,e){var n={};return r.reduce(e,function(e,i){var s=0,o=0,a=e.length,c=r.last(i);return r.forEach(i,function(e,l){var h=function(t,e){if(t.node(e).dummy)return r.find(t.predecessors(e),function(e){return t.node(e).dummy})}(t,e),d=h?t.node(h).order:a;(h||e===c)&&(r.forEach(i.slice(o,l+1),function(e){r.forEach(t.predecessors(e),function(r){var i=t.node(r),o=i.order;!(o<s||d<o)||i.dummy&&t.node(e).dummy||u(n,r,e)})}),o=l+1,s=d)}),i}),n}function a(t,e){var n={};function i(e,i,s,o,a){var c;r.forEach(r.range(i,s),function(i){t.node(c=e[i]).dummy&&r.forEach(t.predecessors(c),function(e){var r=t.node(e);r.dummy&&(r.order<o||r.order>a)&&u(n,e,c)})})}return r.reduce(e,function(e,n){var s,o=-1,a=0;return r.forEach(n,function(r,u){if("border"===t.node(r).dummy){var c=t.predecessors(r);c.length&&(s=t.node(c[0]).order,i(n,a,u,o,s),a=u,o=s)}i(n,a,n.length,s,e.length)}),n}),n}function u(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function c(t,e,n){if(e>n){var i=e;e=n,n=i}return r.has(t[e],n)}function l(t,e,n,i){var s={},o={},a={};return r.forEach(e,function(t){r.forEach(t,function(t,e){s[t]=t,o[t]=t,a[t]=e})}),r.forEach(e,function(t){var e=-1;r.forEach(t,function(t){var u=i(t);if(u.length)for(var l=((u=r.sortBy(u,function(t){return a[t]})).length-1)/2,h=Math.floor(l),d=Math.ceil(l);h<=d;++h){var f=u[h];o[t]===t&&e<a[f]&&!c(n,t,f)&&(o[f]=t,o[t]=s[t]=s[f],e=a[f])}})}),{root:s,align:o}}function h(t,e,n,s,o){var a={},u=function(t,e,n,s){var o=new i,a=t.graph(),u=function(t,e,n){return function(i,s,o){var a,u=i.node(s),c=i.node(o),l=0;if(l+=u.width/2,r.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":a=-u.width/2;break;case"r":a=u.width/2}if(a&&(l+=n?a:-a),a=0,l+=(u.dummy?e:t)/2,l+=(c.dummy?e:t)/2,l+=c.width/2,r.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":a=c.width/2;break;case"r":a=-c.width/2}return a&&(l+=n?a:-a),a=0,l}}(a.nodesep,a.edgesep,s);return r.forEach(e,function(e){var i;r.forEach(e,function(e){var r=n[e];if(o.setNode(r),i){var s=n[i],a=o.edge(s,r);o.setEdge(s,r,Math.max(u(t,e,i),a||0))}i=e})}),o}(t,e,n,o),c=o?"borderLeft":"borderRight";function l(t,e){for(var n=u.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return l(function(t){a[t]=u.inEdges(t).reduce(function(t,e){return Math.max(t,a[e.v]+u.edge(e))},0)},u.predecessors.bind(u)),l(function(e){var n=u.outEdges(e).reduce(function(t,e){return Math.min(t,a[e.w]-u.edge(e))},Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(a[e]=Math.max(a[e],n))},u.successors.bind(u)),r.forEach(s,function(t){a[t]=a[n[t]]}),a}function d(t,e){return r.minBy(r.values(e),function(e){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return r.forIn(e,function(e,r){var s=function(t,e){return t.node(e).width}(t,r)/2;n=Math.max(e+s,n),i=Math.min(e-s,i)}),n-i})}function f(t,e){var n=r.values(e),i=r.min(n),s=r.max(n);r.forEach(["u","d"],function(n){r.forEach(["l","r"],function(o){var a,u=n+o,c=t[u];if(c!==e){var l=r.values(c);(a="l"===o?i-r.min(l):s-r.max(l))&&(t[u]=r.mapValues(c,function(t){return t+a}))}})})}function p(t,e){return r.mapValues(t.ul,function(n,i){if(e)return t[e.toLowerCase()][i];var s=r.sortBy(r.map(t,i));return(s[1]+s[2])/2})}t.exports={positionX:function(t){var e,n=s.buildLayerMatrix(t),i=r.merge(o(t,n),a(t,n)),u={};r.forEach(["u","d"],function(s){e="u"===s?n:r.values(n).reverse(),r.forEach(["l","r"],function(n){"r"===n&&(e=r.map(e,function(t){return r.values(t).reverse()}));var o=("u"===s?t.predecessors:t.successors).bind(t),a=l(0,e,i,o),c=h(t,e,a.root,a.align,"r"===n);"r"===n&&(c=r.mapValues(c,function(t){return-t})),u[s+n]=c})});var c=d(t,u);return f(u,c),p(u,t.graph().align)},findType1Conflicts:o,findType2Conflicts:a,addConflict:u,hasConflict:c,verticalAlignment:l,horizontalCompaction:h,alignCoordinates:f,findSmallestWidthAlignment:d,balance:p}},6685:(t,e,n)=>{"use strict";var r=n(2712),i=n(1824),s=n(1331).positionX;t.exports=function(t){(function(t){var e=i.buildLayerMatrix(t),n=t.graph().ranksep,s=0;r.forEach(e,function(e){var i=r.max(r.map(e,function(e){return t.node(e).height}));r.forEach(e,function(e){t.node(e).y=s+i/2}),s+=i+n})})(t=i.asNonCompoundGraph(t)),r.forEach(s(t),function(e,n){t.node(n).x=e})}},5936:(t,e,n)=>{"use strict";var r=n(2712),i=n(7759).Graph,s=n(1618).slack;function o(t,e){return r.forEach(t.nodes(),function n(i){r.forEach(e.nodeEdges(i),function(r){var o=r.v,a=i===o?r.w:o;t.hasNode(a)||s(e,r)||(t.setNode(a,{}),t.setEdge(i,a,{}),n(a))})}),t.nodeCount()}function a(t,e){return r.minBy(e.edges(),function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return s(e,n)})}function u(t,e,n){r.forEach(t.nodes(),function(t){e.node(t).rank+=n})}t.exports=function(t){var e,n,r=new i({directed:!1}),c=t.nodes()[0],l=t.nodeCount();for(r.setNode(c,{});o(r,t)<l;)e=a(r,t),n=r.hasNode(e.v)?s(t,e):-s(t,e),u(r,t,n);return r}},2445:(t,e,n)=>{"use strict";var r=n(1618).longestPath,i=n(5936),s=n(1844);t.exports=function(t){switch(t.graph().ranker){case"network-simplex":a(t);break;case"tight-tree":!function(t){r(t),i(t)}(t);break;case"longest-path":o(t);break;default:a(t)}};var o=r;function a(t){s(t)}},1844:(t,e,n)=>{"use strict";var r=n(2712),i=n(5936),s=n(1618).slack,o=n(1618).longestPath,a=n(7759).alg.preorder,u=n(7759).alg.postorder,c=n(1824).simplify;function l(t){t=c(t),o(t);var e,n=i(t);for(f(n),h(n,t);e=g(n);)y(n,t,e,m(n,t,e))}function h(t,e){var n=u(t,t.nodes());n=n.slice(0,n.length-1),r.forEach(n,function(n){!function(t,e,n){var r=t.node(n);t.edge(n,r.parent).cutvalue=d(t,e,n)}(t,e,n)})}function d(t,e,n){var i=t.node(n).parent,s=!0,o=e.edge(n,i),a=0;return o||(s=!1,o=e.edge(i,n)),a=o.weight,r.forEach(e.nodeEdges(n),function(r){var o=r.v===n,u=o?r.w:r.v;if(u!==i){var c=o===s,l=e.edge(r).weight;if(a+=c?l:-l,t.hasEdge(n,u)){var h=t.edge(n,u).cutvalue;a+=c?-h:h}}}),a}function f(t,e){arguments.length<2&&(e=t.nodes()[0]),p(t,{},1,e)}function p(t,e,n,i,s){var o=n,a=t.node(i);return e[i]=!0,r.forEach(t.neighbors(i),function(s){r.has(e,s)||(n=p(t,e,n,s,i))}),a.low=o,a.lim=n++,s?a.parent=s:delete a.parent,n}function g(t){return r.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function m(t,e,n){var i=n.v,o=n.w;e.hasEdge(i,o)||(i=n.w,o=n.v);var a=t.node(i),u=t.node(o),c=a,l=!1;a.lim>u.lim&&(c=u,l=!0);var h=r.filter(e.edges(),function(e){return l===v(0,t.node(e.v),c)&&l!==v(0,t.node(e.w),c)});return r.minBy(h,function(t){return s(e,t)})}function y(t,e,n,i){t.removeEdge(n.v,n.w),t.setEdge(i.v,i.w,{}),f(t),h(t,e),function(t,e){var n=r.find(t.nodes(),function(t){return!e.node(t).parent}),i=a(t,n);i=i.slice(1),r.forEach(i,function(n){var r=t.node(n).parent,i=e.edge(n,r),s=!1;i||(i=e.edge(r,n),s=!0),e.node(n).rank=e.node(r).rank+(s?i.minlen:-i.minlen)})}(t,e)}function v(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}t.exports=l,l.initLowLimValues=f,l.initCutValues=h,l.calcCutValue=d,l.leaveEdge=g,l.enterEdge=m,l.exchangeEdges=y},1618:(t,e,n)=>{"use strict";var r=n(2712);t.exports={longestPath:function(t){var e={};r.forEach(t.sources(),function n(i){var s=t.node(i);if(r.has(e,i))return s.rank;e[i]=!0;var o=r.min(r.map(t.outEdges(i),function(e){return n(e.w)-t.edge(e).minlen}));return o!==Number.POSITIVE_INFINITY&&null!=o||(o=0),s.rank=o})},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},1824:(t,e,n)=>{"use strict";var r=n(2712),i=n(7759).Graph;function s(t,e,n,i){var s;do{s=r.uniqueId(i)}while(t.hasNode(s));return n.dummy=e,t.setNode(s,n),s}function o(t){return r.max(r.map(t.nodes(),function(e){var n=t.node(e).rank;if(!r.isUndefined(n))return n}))}t.exports={addDummyNode:s,simplify:function(t){var e=(new i).setGraph(t.graph());return r.forEach(t.nodes(),function(n){e.setNode(n,t.node(n))}),r.forEach(t.edges(),function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e},asNonCompoundGraph:function(t){var e=new i({multigraph:t.isMultigraph()}).setGraph(t.graph());return r.forEach(t.nodes(),function(n){t.children(n).length||e.setNode(n,t.node(n))}),r.forEach(t.edges(),function(n){e.setEdge(n,t.edge(n))}),e},successorWeights:function(t){var e=r.map(t.nodes(),function(e){var n={};return r.forEach(t.outEdges(e),function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight}),n});return r.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=r.map(t.nodes(),function(e){var n={};return r.forEach(t.inEdges(e),function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight}),n});return r.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,i=t.x,s=t.y,o=e.x-i,a=e.y-s,u=t.width/2,c=t.height/2;if(!o&&!a)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(a)*u>Math.abs(o)*c?(a<0&&(c=-c),n=c*o/a,r=c):(o<0&&(u=-u),n=u,r=u*a/o),{x:i+n,y:s+r}},buildLayerMatrix:function(t){var e=r.map(r.range(o(t)+1),function(){return[]});return r.forEach(t.nodes(),function(n){var i=t.node(n),s=i.rank;r.isUndefined(s)||(e[s][i.order]=n)}),e},normalizeRanks:function(t){var e=r.min(r.map(t.nodes(),function(e){return t.node(e).rank}));r.forEach(t.nodes(),function(n){var i=t.node(n);r.has(i,"rank")&&(i.rank-=e)})},removeEmptyRanks:function(t){var e=r.min(r.map(t.nodes(),function(e){return t.node(e).rank})),n=[];r.forEach(t.nodes(),function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)});var i=0,s=t.graph().nodeRankFactor;r.forEach(n,function(e,n){r.isUndefined(e)&&n%s!=0?--i:i&&r.forEach(e,function(e){t.node(e).rank+=i})})},addBorderNode:function(t,e,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),s(t,"border",i,e)},maxRank:o,partition:function(t,e){var n={lhs:[],rhs:[]};return r.forEach(t,function(t){e(t)?n.lhs.push(t):n.rhs.push(t)}),n},time:function(t,e){var n=r.now();try{return e()}finally{console.log(t+" time: "+(r.now()-n)+"ms")}},notime:function(t,e){return e()}}},6854:t=>{t.exports="0.8.5"},2329:(t,e,n)=>{"use strict";n.d(e,{Mq:()=>r.getApp,C6:()=>r.getApps});var r=n(279);(0,r.registerVersion)("firebase","9.6.1","app")},7841:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(156);r.Z.registerVersion("firebase","9.6.1","app-compat")},6094:(t,e,n)=>{"use strict";n.r(e);var r=n(6304),i=n(156),s=n(3854),o=n(279),a=n(4762),u=n(9306),c=n(8604);const l=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},h=new s.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),d=new u.Yd("@firebase/auth");function f(t,...e){d.logLevel<=u.in.ERROR&&d.error(`Auth (${o.SDK_VERSION}): ${t}`,...e)}function p(t,...e){throw v(t,...e)}function g(t,...e){return v(t,...e)}function m(t,e,n){const r=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),{[e]:n});return new s.LL("auth","Firebase",r).create(e,{appName:t.name})}function y(t,e,n){if(!(e instanceof n))throw n.name!==e.constructor.name&&p(t,"argument-error"),m(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function v(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return h.create(t,...e)}function _(t,e,...n){if(!t)throw v(e,...n)}function w(t){const e="INTERNAL ASSERTION FAILED: "+t;throw f(e),new Error(e)}function b(t,e){t||w(e)}const x=new Map;function E(t){b(t instanceof Function,"Expected a class definition");let e=x.get(t);return e?(b(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,x.set(t,e),e)}function T(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function S(){return"http:"===k()||"https:"===k()}function k(){var t;return"undefined"!=typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class I{constructor(t,e){this.shortDelay=t,this.longDelay=e,b(e>t,"Short delay should be less than long delay!"),this.isMobile=(0,s.uI)()||(0,s.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(S()||(0,s.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function C(t,e){b(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class A{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void w("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void w("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void w("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const O={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},N=new I(3e4,6e4);function D(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function P(t,e,n,r){return R.apply(this,arguments)}function R(){return(R=(0,r.Z)(function*(t,e,n,i,o={}){return M(t,o,(0,r.Z)(function*(){let r={},o={};i&&("GET"===e?o=i:r={body:JSON.stringify(i)});const a=(0,s.xO)(Object.assign({key:t.config.apiKey},o)).slice(1),u=yield t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),A.fetch()(U(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},r))}))})).apply(this,arguments)}function M(t,e,n){return L.apply(this,arguments)}function L(){return(L=(0,r.Z)(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},O),e);try{const e=new V(t),i=yield Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=yield i.json();if("needConfirmation"in s)throw q(t,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const e=i.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw q(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw q(t,"email-already-in-use",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw m(t,a,o);p(t,a)}}catch(i){if(i instanceof s.ZR)throw i;p(t,"network-request-failed")}})).apply(this,arguments)}function F(t,e,n,r){return j.apply(this,arguments)}function j(){return(j=(0,r.Z)(function*(t,e,n,r,i={}){const s=yield P(t,e,n,r,i);return"mfaPendingCredential"in s&&p(t,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function U(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?C(t.config,i):`${t.config.apiScheme}://${i}`}class V{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((t,e)=>{this.timer=setTimeout(()=>e(g(this.auth,"timeout")),N.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function q(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=g(t,e,r);return i.customData._tokenResponse=n,i}function B(){return(B=(0,r.Z)(function*(t,e){return P(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function z(t,e){return $.apply(this,arguments)}function $(){return($=(0,r.Z)(function*(t,e){return P(t,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function G(t,e){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)(function*(t,e){return P(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function H(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}function W(){return(W=(0,r.Z)(function*(t,e=!1){const n=(0,s.m9)(t),r=yield n.getIdToken(e),i=Y(r);_(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:H(K(i.auth_time)),issuedAtTime:H(K(i.iat)),expirationTime:H(K(i.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}})).apply(this,arguments)}function K(t){return 1e3*Number(t)}function Y(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return f("JWT malformed, contained fewer than 3 sections"),null;try{const t=(0,s.tV)(n);return t?JSON.parse(t):(f("Failed to decode base64 JWT payload"),null)}catch(i){return f("Caught error parsing JWT payload as JSON",i),null}}function Q(t,e){return J.apply(this,arguments)}function J(){return(J=(0,r.Z)(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof s.ZR&&X(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}function X({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}class tt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=(null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0)-Date.now()-3e5;return Math.max(0,t)}}schedule(t=!1){var e=this;if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout((0,r.Z)(function*(){yield e.iteration()}),n)}iteration(){var t=this;return(0,r.Z)(function*(){try{yield t.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&t.schedule(!0))}t.schedule()})()}}class et{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=H(this.lastLoginAt),this.creationTime=H(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function nt(t){return rt.apply(this,arguments)}function rt(){return(rt=(0,r.Z)(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield Q(t,G(n,{idToken:r}));_(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?ot(s.providerUserInfo):[],a=st(t.providerData,o),u=!!t.isAnonymous&&!(t.email&&s.passwordHash||(null==a?void 0:a.length)),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new et(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,c)})).apply(this,arguments)}function it(){return(it=(0,r.Z)(function*(t){const e=(0,s.m9)(t);yield nt(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function st(t,e){return[...t.filter(t=>!e.some(e=>e.providerId===t.providerId)),...e]}function ot(t){return t.map(t=>{var{providerId:e}=t,n=(0,a._T)(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function at(){return(at=(0,r.Z)(function*(t,e){const n=yield M(t,{},(0,r.Z)(function*(){const n=(0,s.xO)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=U(t,r,"/v1/token",`key=${i}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",A.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class ut{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){_(t.idToken,"internal-error"),_(void 0!==t.idToken,"internal-error"),_(void 0!==t.refreshToken,"internal-error");const e="expiresIn"in t&&void 0!==t.expiresIn?Number(t.expiresIn):function(t){const e=Y(t);return _(e,"internal-error"),_(void 0!==e.exp,"internal-error"),_(void 0!==e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}getToken(t,e=!1){var n=this;return(0,r.Z)(function*(){return _(!n.accessToken||n.refreshToken,t,"user-token-expired"),e||!n.accessToken||n.isExpired?n.refreshToken?(yield n.refresh(t,n.refreshToken),n.accessToken):null:n.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(t,e){var n=this;return(0,r.Z)(function*(){const{accessToken:r,refreshToken:i,expiresIn:s}=yield function(t,e){return at.apply(this,arguments)}(t,e);n.updateTokensAndExpiration(r,i,Number(s))})()}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:r,expirationTime:i}=e,s=new ut;return n&&(_("string"==typeof n,"internal-error",{appName:t}),s.refreshToken=n),r&&(_("string"==typeof r,"internal-error",{appName:t}),s.accessToken=r),i&&(_("number"==typeof i,"internal-error",{appName:t}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ut,this.toJSON())}_performRefresh(){return w("not implemented")}}function ct(t,e){_("string"==typeof t||void 0===t,"internal-error",{appName:e})}class lt{constructor(t){var{uid:e,auth:n,stsTokenManager:r}=t,i=(0,a._T)(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new tt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.metadata=new et(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(t){var e=this;return(0,r.Z)(function*(){const n=yield Q(e,e.stsTokenManager.getToken(e.auth,t));return _(n,e.auth,"internal-error"),e.accessToken!==n&&(e.accessToken=n,yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)),n})()}getIdTokenResult(t){return function(t){return W.apply(this,arguments)}(this,t)}reload(){return function(t){return it.apply(this,arguments)}(this)}_assign(t){this!==t&&(_(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(t=>Object.assign({},t)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new lt(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){_(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,e=!1){var n=this;return(0,r.Z)(function*(){let r=!1;t.idToken&&t.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(t),r=!0),e&&(yield nt(n)),yield n.auth._persistUserIfCurrent(n),r&&n.auth._notifyListenersIfCurrent(n)})()}delete(){var t=this;return(0,r.Z)(function*(){const e=yield t.getIdToken();return yield Q(t,function(t,e){return B.apply(this,arguments)}(t.auth,{idToken:e})),t.stsTokenManager.clearRefreshToken(),t.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,r,i,s,o,a,u,c;const l=null!==(n=e.displayName)&&void 0!==n?n:void 0,h=null!==(r=e.email)&&void 0!==r?r:void 0,d=null!==(i=e.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=e.photoURL)&&void 0!==s?s:void 0,p=null!==(o=e.tenantId)&&void 0!==o?o:void 0,g=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,m=null!==(u=e.createdAt)&&void 0!==u?u:void 0,y=null!==(c=e.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:x,stsTokenManager:E}=e;_(v&&E,t,"internal-error");const T=ut.fromJSON(this.name,E);_("string"==typeof v,t,"internal-error"),ct(l,t.name),ct(h,t.name),_("boolean"==typeof w,t,"internal-error"),_("boolean"==typeof b,t,"internal-error"),ct(d,t.name),ct(f,t.name),ct(p,t.name),ct(g,t.name),ct(m,t.name),ct(y,t.name);const S=new lt({uid:v,auth:t,email:h,emailVerified:w,displayName:l,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:T,createdAt:m,lastLoginAt:y});return x&&Array.isArray(x)&&(S.providerData=x.map(t=>Object.assign({},t))),g&&(S._redirectEventId=g),S}static _fromIdTokenResponse(t,e,n=!1){return(0,r.Z)(function*(){const r=new ut;r.updateFromServerResponse(e);const i=new lt({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:n});return yield nt(i),i})()}}const ht=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,r.Z)(function*(){return!0})()}_set(t,e){var n=this;return(0,r.Z)(function*(){n.storage[t]=e})()}_get(t){var e=this;return(0,r.Z)(function*(){const n=e.storage[t];return void 0===n?null:n})()}_remove(t){var e=this;return(0,r.Z)(function*(){delete e.storage[t]})()}_addListener(t,e){}_removeListener(t,e){}}return t.type="NONE",t})();function dt(t,e,n){return`firebase:${t}:${e}:${n}`}class ft{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=dt(this.userKey,r.apiKey,i),this.fullPersistenceKey=dt("persistence",r.apiKey,i),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){var t=this;return(0,r.Z)(function*(){const e=yield t.persistence._get(t.fullUserKey);return e?lt._fromJSON(t.auth,e):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){var e=this;return(0,r.Z)(function*(){if(e.persistence===t)return;const n=yield e.getCurrentUser();return yield e.removeCurrentUser(),e.persistence=t,n?e.setCurrentUser(n):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,e,n="authUser"){return(0,r.Z)(function*(){if(!e.length)return new ft(E(ht),t,n);const i=(yield Promise.all(e.map(function(){var t=(0,r.Z)(function*(t){if(yield t._isAvailable())return t});return function(e){return t.apply(this,arguments)}}()))).filter(t=>t);let s=i[0]||E(ht);const o=dt(n,t.config.apiKey,t.name);let a=null;for(const n of e)try{const e=yield n._get(o);if(e){const r=lt._fromJSON(t,e);n!==s&&(a=r),s=n;break}}catch(c){}const u=i.filter(t=>t._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(e.map(function(){var t=(0,r.Z)(function*(t){if(t!==s)try{yield t._remove(o)}catch(c){}});return function(e){return t.apply(this,arguments)}}())),new ft(s,t,n)):new ft(s,t,n)})()}}function pt(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vt(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gt(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wt(e))return"Blackberry";if(bt(e))return"Webos";if(mt(e))return"Safari";if((e.includes("chrome/")||yt(e))&&!e.includes("edge/"))return"Chrome";if(_t(e))return"Android";{const e=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==e?void 0:e.length))return e[1]}return"Other"}function gt(t=(0,s.z$)()){return/firefox\//i.test(t)}function mt(t=(0,s.z$)()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yt(t=(0,s.z$)()){return/crios\//i.test(t)}function vt(t=(0,s.z$)()){return/iemobile/i.test(t)}function _t(t=(0,s.z$)()){return/android/i.test(t)}function wt(t=(0,s.z$)()){return/blackberry/i.test(t)}function bt(t=(0,s.z$)()){return/webos/i.test(t)}function xt(t=(0,s.z$)()){return/iphone|ipad|ipod/i.test(t)}function Et(t=(0,s.z$)()){return xt(t)||_t(t)||bt(t)||wt(t)||/windows phone/i.test(t)||vt(t)}function Tt(t,e=[]){let n;switch(t){case"Browser":n=pt((0,s.z$)());break;case"Worker":n=`${pt((0,s.z$)())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${o.SDK_VERSION}/${r}`}class St{constructor(t,e){this.app=t,this.config=e,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new It(this),this.idTokenSubscription=new It(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=e.sdkClientVersion}_initializeWithPersistence(t,e){var n=this;return e&&(this._popupRedirectResolver=E(e)),this._initializationPromise=this.queue((0,r.Z)(function*(){var r,i;if(!n._deleted&&(n.persistenceManager=yield ft.create(n,t),!n._deleted)){if(null===(r=n._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{yield n._popupRedirectResolver._initialize(n)}catch(s){}yield n.initializeCurrentUser(e),n.lastNotifiedUid=(null===(i=n.currentUser)||void 0===i?void 0:i.uid)||null,n._deleted||(n._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var t=this;return(0,r.Z)(function*(){if(t._deleted)return;const e=yield t.assertedPersistence.getCurrentUser();return t.currentUser||e?t.currentUser&&e&&t.currentUser.uid===e.uid?(t._currentUser._assign(e),void(yield t.currentUser.getIdToken())):void(yield t._updateCurrentUser(e)):void 0})()}initializeCurrentUser(t){var e=this;return(0,r.Z)(function*(){var n;let r=yield e.assertedPersistence.getCurrentUser();if(t&&e.config.authDomain){yield e.getOrInitRedirectPersistenceManager();const i=null===(n=e.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null==r?void 0:r._redirectEventId,o=yield e.tryRedirectSignIn(t);i&&i!==s||!(null==o?void 0:o.user)||(r=o.user)}return r?r._redirectEventId?(_(e._popupRedirectResolver,e,"argument-error"),yield e.getOrInitRedirectPersistenceManager(),e.redirectUser&&e.redirectUser._redirectEventId===r._redirectEventId?e.directlySetCurrentUser(r):e.reloadAndSetCurrentUserOrClear(r)):e.reloadAndSetCurrentUserOrClear(r):e.directlySetCurrentUser(null)})()}tryRedirectSignIn(t){var e=this;return(0,r.Z)(function*(){let n=null;try{n=yield e._popupRedirectResolver._completeRedirectFn(e,t,!0)}catch(r){yield e._setRedirectUser(null)}return n})()}reloadAndSetCurrentUserOrClear(t){var e=this;return(0,r.Z)(function*(){try{yield nt(t)}catch(n){if("auth/network-request-failed"!==n.code)return e.directlySetCurrentUser(null)}return e.directlySetCurrentUser(t)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var t=this;return(0,r.Z)(function*(){t._deleted=!0})()}updateCurrentUser(t){var e=this;return(0,r.Z)(function*(){const n=t?(0,s.m9)(t):null;return n&&_(n.auth.config.apiKey===e.config.apiKey,e,"invalid-user-token"),e._updateCurrentUser(n&&n._clone(e))})()}_updateCurrentUser(t){var e=this;return(0,r.Z)(function*(){if(!e._deleted)return t&&_(e.tenantId===t.tenantId,e,"tenant-id-mismatch"),e.queue((0,r.Z)(function*(){yield e.directlySetCurrentUser(t),e.notifyAuthListeners()}))})()}signOut(){var t=this;return(0,r.Z)(function*(){return(t.redirectPersistenceManager||t._popupRedirectResolver)&&(yield t._setRedirectUser(null)),t._updateCurrentUser(null)})()}setPersistence(t){var e=this;return this.queue((0,r.Z)(function*(){yield e.assertedPersistence.setPersistence(E(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new s.LL("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}_setRedirectUser(t,e){var n=this;return(0,r.Z)(function*(){const r=yield n.getOrInitRedirectPersistenceManager(e);return null===t?r.removeCurrentUser():r.setCurrentUser(t)})()}getOrInitRedirectPersistenceManager(t){var e=this;return(0,r.Z)(function*(){if(!e.redirectPersistenceManager){const n=t&&E(t)||e._popupRedirectResolver;_(n,e,"argument-error"),e.redirectPersistenceManager=yield ft.create(e,[E(n._redirectPersistence)],"redirectUser"),e.redirectUser=yield e.redirectPersistenceManager.getCurrentUser()}return e.redirectPersistenceManager})()}_redirectUserForId(t){var e=this;return(0,r.Z)(function*(){var n,i;return e._isInitialized&&(yield e.queue((0,r.Z)(function*(){}))),(null===(n=e._currentUser)||void 0===n?void 0:n._redirectEventId)===t?e._currentUser:(null===(i=e.redirectUser)||void 0===i?void 0:i._redirectEventId)===t?e.redirectUser:null})()}_persistUserIfCurrent(t){var e=this;return(0,r.Z)(function*(){if(t===e.currentUser)return e.queue((0,r.Z)(function*(){return e.directlySetCurrentUser(t)}))})()}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,r){if(this._deleted)return()=>{};const i="function"==typeof e?e:e.next.bind(e),s=this._isInitialized?Promise.resolve():this._initializationPromise;return _(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof e?t.addObserver(e,n,r):t.addObserver(e)}directlySetCurrentUser(t){var e=this;return(0,r.Z)(function*(){e.currentUser&&e.currentUser!==t&&(e._currentUser._stopProactiveRefresh(),t&&e.isProactiveRefreshEnabled&&t._startProactiveRefresh()),e.currentUser=t,t?yield e.assertedPersistence.setCurrentUser(t):yield e.assertedPersistence.removeCurrentUser()})()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return _(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Tt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var t=this;return(0,r.Z)(function*(){const e={"X-Client-Version":t.clientVersion};return t.app.options.appId&&(e["X-Firebase-gmpid"]=t.app.options.appId),e})()}}function kt(t){return(0,s.m9)(t)}class It{constructor(t){this.auth=t,this.observer=null,this.addObserver=(0,s.ne)(t=>this.observer=t)}get next(){return _(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ct(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function At(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class Ot{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return w("not implemented")}_getIdTokenResponse(t){return w("not implemented")}_linkToIdToken(t,e){return w("not implemented")}_getReauthenticationResolver(t){return w("not implemented")}}function Nt(t,e){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,r.Z)(function*(t,e){return P(t,"POST","/v1/accounts:resetPassword",D(t,e))})).apply(this,arguments)}function Pt(t,e){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,r.Z)(function*(t,e){return P(t,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function Mt(t,e){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,r.Z)(function*(t,e){return P(t,"POST","/v1/accounts:update",D(t,e))})).apply(this,arguments)}function Ft(){return(Ft=(0,r.Z)(function*(t,e){return F(t,"POST","/v1/accounts:signInWithPassword",D(t,e))})).apply(this,arguments)}function jt(t,e){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,r.Z)(function*(t,e){return P(t,"POST","/v1/accounts:sendOobCode",D(t,e))})).apply(this,arguments)}function Vt(t,e){return qt.apply(this,arguments)}function qt(){return(qt=(0,r.Z)(function*(t,e){return jt(t,e)})).apply(this,arguments)}function Bt(t,e){return zt.apply(this,arguments)}function zt(){return(zt=(0,r.Z)(function*(t,e){return jt(t,e)})).apply(this,arguments)}function $t(t,e){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,r.Z)(function*(t,e){return jt(t,e)})).apply(this,arguments)}function Zt(t,e){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,r.Z)(function*(t,e){return jt(t,e)})).apply(this,arguments)}function Wt(){return(Wt=(0,r.Z)(function*(t,e){return F(t,"POST","/v1/accounts:signInWithEmailLink",D(t,e))})).apply(this,arguments)}function Kt(){return(Kt=(0,r.Z)(function*(t,e){return F(t,"POST","/v1/accounts:signInWithEmailLink",D(t,e))})).apply(this,arguments)}class Yt extends Ot{constructor(t,e,n,r=null){super("password",n),this._email=t,this._password=e,this._tenantId=r}static _fromEmailAndPassword(t,e){return new Yt(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new Yt(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t;if((null==e?void 0:e.email)&&(null==e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}_getIdTokenResponse(t){var e=this;return(0,r.Z)(function*(){switch(e.signInMethod){case"password":return function(t,e){return Ft.apply(this,arguments)}(t,{returnSecureToken:!0,email:e._email,password:e._password});case"emailLink":return function(t,e){return Wt.apply(this,arguments)}(t,{email:e._email,oobCode:e._password});default:p(t,"internal-error")}})()}_linkToIdToken(t,e){var n=this;return(0,r.Z)(function*(){switch(n.signInMethod){case"password":return Pt(t,{idToken:e,returnSecureToken:!0,email:n._email,password:n._password});case"emailLink":return function(t,e){return Kt.apply(this,arguments)}(t,{idToken:e,email:n._email,oobCode:n._password});default:p(t,"internal-error")}})()}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}function Qt(t,e){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,r.Z)(function*(t,e){return F(t,"POST","/v1/accounts:signInWithIdp",D(t,e))})).apply(this,arguments)}class Xt extends Ot{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Xt(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):p("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:r}=e,i=(0,a._T)(e,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Xt(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(t){return Qt(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Qt(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Qt(t,e)}buildRequest(){const t={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=(0,s.xO)(e)}return t}}function te(t,e){return ee.apply(this,arguments)}function ee(){return(ee=(0,r.Z)(function*(t,e){return P(t,"POST","/v1/accounts:sendVerificationCode",D(t,e))})).apply(this,arguments)}function ne(){return(ne=(0,r.Z)(function*(t,e){return F(t,"POST","/v1/accounts:signInWithPhoneNumber",D(t,e))})).apply(this,arguments)}function re(){return(re=(0,r.Z)(function*(t,e){const n=yield F(t,"POST","/v1/accounts:signInWithPhoneNumber",D(t,e));if(n.temporaryProof)throw q(t,"account-exists-with-different-credential",n);return n})).apply(this,arguments)}const ie={USER_NOT_FOUND:"user-not-found"};function se(){return(se=(0,r.Z)(function*(t,e){return F(t,"POST","/v1/accounts:signInWithPhoneNumber",D(t,Object.assign(Object.assign({},e),{operation:"REAUTH"})),ie)})).apply(this,arguments)}class oe extends Ot{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new oe({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new oe({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return function(t,e){return ne.apply(this,arguments)}(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return function(t,e){return re.apply(this,arguments)}(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return function(t,e){return se.apply(this,arguments)}(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:r}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:r}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"==typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:r,temporaryProof:i}=t;return n||e||r||i?new oe({verificationId:e,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class ae{constructor(t){var e,n,r,i,o,a;const u=(0,s.zd)((0,s.pd)(t)),c=null!==(e=u.apiKey)&&void 0!==e?e:null,l=null!==(n=u.oobCode)&&void 0!==n?n:null,h=function(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=u.mode)&&void 0!==r?r:null);_(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(i=u.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=u.tenantId)&&void 0!==a?a:null}static parseLink(t){const e=function(t){const e=(0,s.zd)((0,s.pd)(t)).link,n=e?(0,s.zd)((0,s.pd)(e)).deep_link_id:null,r=(0,s.zd)((0,s.pd)(t)).deep_link_id;return(r?(0,s.zd)((0,s.pd)(r)).link:null)||r||n||e||t}(t);try{return new ae(e)}catch(n){return null}}}let ue=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(t,e){return Yt._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=ae.parseLink(e);return _(n,"argument-error"),Yt._fromEmailAndCode(t,n.code,n.tenantId)}}return t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink",t})();class ce{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class le extends ce{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class he extends le{static credentialFromJSON(t){const e="string"==typeof t?JSON.parse(t):t;return _("providerId"in e&&"signInMethod"in e,"argument-error"),Xt._fromParams(e)}credential(t){return this._credential(Object.assign(Object.assign({},t),{nonce:t.rawNonce}))}_credential(t){return _(t.idToken||t.accessToken,"argument-error"),Xt._fromParams(Object.assign(Object.assign({},t),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(t){return he.oauthCredentialFromTaggedObject(t)}static credentialFromError(t){return he.oauthCredentialFromTaggedObject(t.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=t;if(!(n||r||e||i))return null;if(!o)return null;try{return new he(o)._credential({idToken:e,accessToken:n,nonce:s,pendingToken:i})}catch(a){return null}}}let de=(()=>{class t extends le{constructor(){super("facebook.com")}static credential(e){return Xt._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return t.credentialFromTaggedObject(e)}static credentialFromError(e){return t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return t.credential(e.oauthAccessToken)}catch(n){return null}}}return t.FACEBOOK_SIGN_IN_METHOD="facebook.com",t.PROVIDER_ID="facebook.com",t})(),fe=(()=>{class t extends le{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xt._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return t.credentialFromTaggedObject(e)}static credentialFromError(e){return t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return t.credential(n,r)}catch(i){return null}}}return t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com",t})(),pe=(()=>{class t extends le{constructor(){super("github.com")}static credential(e){return Xt._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return t.credentialFromTaggedObject(e)}static credentialFromError(e){return t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return t.credential(e.oauthAccessToken)}catch(n){return null}}}return t.GITHUB_SIGN_IN_METHOD="github.com",t.PROVIDER_ID="github.com",t})();class ge extends Ot{constructor(t,e){super(t,t),this.pendingToken=e}_getIdTokenResponse(t){return Qt(t,this.buildRequest())}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Qt(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Qt(t,e)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(t){const e="string"==typeof t?JSON.parse(t):t,{providerId:n,signInMethod:r,pendingToken:i}=e;return n&&r&&i&&n===r?new ge(n,i):null}static _create(t,e){return new ge(t,e)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class me extends ce{constructor(t){_(t.startsWith("saml."),"argument-error"),super(t)}static credentialFromResult(t){return me.samlCredentialFromTaggedObject(t)}static credentialFromError(t){return me.samlCredentialFromTaggedObject(t.customData||{})}static credentialFromJSON(t){const e=ge.fromJSON(t);return _(e,"argument-error"),e}static samlCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{pendingToken:e,providerId:n}=t;if(!e||!n)return null;try{return ge._create(n,e)}catch(r){return null}}}let ye=(()=>{class t extends le{constructor(){super("twitter.com")}static credential(e,n){return Xt._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return t.credentialFromTaggedObject(e)}static credentialFromError(e){return t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return t.credential(n,r)}catch(i){return null}}}return t.TWITTER_SIGN_IN_METHOD="twitter.com",t.PROVIDER_ID="twitter.com",t})();function ve(t,e){return _e.apply(this,arguments)}function _e(){return(_e=(0,r.Z)(function*(t,e){return F(t,"POST","/v1/accounts:signUp",D(t,e))})).apply(this,arguments)}class we{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,e,n,i=!1){return(0,r.Z)(function*(){const r=yield lt._fromIdTokenResponse(t,n,i),s=be(n);return new we({user:r,providerId:s,_tokenResponse:n,operationType:e})})()}static _forOperation(t,e,n){return(0,r.Z)(function*(){yield t._updateTokensIfNecessary(n,!0);const r=be(n);return new we({user:t,providerId:r,_tokenResponse:n,operationType:e})})()}}function be(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}function xe(){return(xe=(0,r.Z)(function*(t){var e;const n=kt(t);if(yield n._initializationPromise,null===(e=n.currentUser)||void 0===e?void 0:e.isAnonymous)return new we({user:n.currentUser,providerId:null,operationType:"signIn"});const r=yield ve(n,{returnSecureToken:!0}),i=yield we._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class Ee extends s.ZR{constructor(t,e,n,r){var i;super(e.code,e.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ee.prototype),this.customData={appName:t.name,tenantId:null!==(i=t.tenantId)&&void 0!==i?i:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,r){return new Ee(t,e,n,r)}}function Te(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Ee._fromErrorAndOperation(t,n,e,r);throw n})}function Se(t){return new Set(t.map(({providerId:t})=>t).filter(t=>!!t))}function ke(){return(ke=(0,r.Z)(function*(t,e){const n=(0,s.m9)(t);yield Ae(!0,n,e);const{providerUserInfo:r}=yield z(n.auth,{idToken:yield n.getIdToken(),deleteProvider:[e]}),i=Se(r||[]);return n.providerData=n.providerData.filter(t=>i.has(t.providerId)),i.has("phone")||(n.phoneNumber=null),yield n.auth._persistUserIfCurrent(n),n})).apply(this,arguments)}function Ie(t,e){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,r.Z)(function*(t,e,n=!1){const r=yield Q(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return we._forOperation(t,"link",r)})).apply(this,arguments)}function Ae(t,e,n){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,r.Z)(function*(t,e,n){yield nt(e);const r=!1===t?"provider-already-linked":"no-such-provider";_(Se(e.providerData).has(n)===t,e.auth,r)})).apply(this,arguments)}function Ne(t,e){return De.apply(this,arguments)}function De(){return(De=(0,r.Z)(function*(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=yield Q(t,Te(r,i,e,t),n);_(s.idToken,r,"internal-error");const o=Y(s.idToken);_(o,r,"internal-error");const{sub:a}=o;return _(t.uid===a,r,"user-mismatch"),we._forOperation(t,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&p(r,"user-mismatch"),s}})).apply(this,arguments)}function Pe(t,e){return Re.apply(this,arguments)}function Re(){return(Re=(0,r.Z)(function*(t,e,n=!1){const r="signIn",i=yield Te(t,r,e),s=yield we._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})).apply(this,arguments)}function Me(t,e){return Le.apply(this,arguments)}function Le(){return(Le=(0,r.Z)(function*(t,e){return Pe(kt(t),e)})).apply(this,arguments)}function Fe(t,e){return je.apply(this,arguments)}function je(){return(je=(0,r.Z)(function*(t,e){const n=(0,s.m9)(t);return yield Ae(!1,n,e.providerId),Ie(n,e)})).apply(this,arguments)}function Ue(t,e){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,r.Z)(function*(t,e){return Ne((0,s.m9)(t),e)})).apply(this,arguments)}function qe(t,e){return Be.apply(this,arguments)}function Be(){return(Be=(0,r.Z)(function*(t,e){return F(t,"POST","/v1/accounts:signInWithCustomToken",D(t,e))})).apply(this,arguments)}function ze(){return(ze=(0,r.Z)(function*(t,e){const n=kt(t),r=yield qe(n,{token:e,returnSecureToken:!0}),i=yield we._fromIdTokenResponse(n,"signIn",r);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class $e{constructor(t,e){this.factorId=t,this.uid=e.mfaEnrollmentId,this.enrollmentTime=new Date(e.enrolledAt).toUTCString(),this.displayName=e.displayName}static _fromServerResponse(t,e){return"phoneInfo"in e?Ge._fromServerResponse(t,e):p(t,"internal-error")}}class Ge extends $e{constructor(t){super("phone",t),this.phoneNumber=t.phoneInfo}static _fromServerResponse(t,e){return new Ge(e)}}function Ze(t,e,n){var r;_((null===(r=n.url)||void 0===r?void 0:r.length)>0,t,"invalid-continue-uri"),_(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(_(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(_(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}function He(){return(He=(0,r.Z)(function*(t,e,n){const r=(0,s.m9)(t),i={requestType:"PASSWORD_RESET",email:e};n&&Ze(r,i,n),yield Bt(r,i)})).apply(this,arguments)}function We(){return(We=(0,r.Z)(function*(t,e,n){yield Nt((0,s.m9)(t),{oobCode:e,newPassword:n})})).apply(this,arguments)}function Ke(){return(Ke=(0,r.Z)(function*(t,e){yield Mt((0,s.m9)(t),{oobCode:e})})).apply(this,arguments)}function Ye(t,e){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,r.Z)(function*(t,e){const n=(0,s.m9)(t),r=yield Nt(n,{oobCode:e}),i=r.requestType;switch(_(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":_(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":_(r.mfaInfo,n,"internal-error");default:_(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=$e._fromServerResponse(kt(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}})).apply(this,arguments)}function Je(){return(Je=(0,r.Z)(function*(t,e){const{data:n}=yield Ye((0,s.m9)(t),e);return n.email})).apply(this,arguments)}function Xe(){return(Xe=(0,r.Z)(function*(t,e,n){const r=kt(t),i=yield ve(r,{returnSecureToken:!0,email:e,password:n}),s=yield we._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(s.user),s})).apply(this,arguments)}function tn(){return(tn=(0,r.Z)(function*(t,e,n){const r=(0,s.m9)(t),i={requestType:"EMAIL_SIGNIN",email:e};_(n.handleCodeInApp,r,"argument-error"),n&&Ze(r,i,n),yield $t(r,i)})).apply(this,arguments)}function en(){return(en=(0,r.Z)(function*(t,e,n){const r=(0,s.m9)(t),i=ue.credentialWithLink(e,n||T());return _(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Me(r,i)})).apply(this,arguments)}function nn(t,e){return rn.apply(this,arguments)}function rn(){return(rn=(0,r.Z)(function*(t,e){return P(t,"POST","/v1/accounts:createAuthUri",D(t,e))})).apply(this,arguments)}function sn(){return(sn=(0,r.Z)(function*(t,e){const n={identifier:e,continueUri:S()?T():"http://localhost"},{signinMethods:r}=yield nn((0,s.m9)(t),n);return r||[]})).apply(this,arguments)}function on(){return(on=(0,r.Z)(function*(t,e){const n=(0,s.m9)(t),r={requestType:"VERIFY_EMAIL",idToken:yield t.getIdToken()};e&&Ze(n.auth,r,e);const{email:i}=yield Vt(n.auth,r);i!==t.email&&(yield t.reload())})).apply(this,arguments)}function an(){return(an=(0,r.Z)(function*(t,e,n){const r=(0,s.m9)(t),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield t.getIdToken(),newEmail:e};n&&Ze(r.auth,i,n);const{email:o}=yield Zt(r.auth,i);o!==t.email&&(yield t.reload())})).apply(this,arguments)}function un(t,e){return cn.apply(this,arguments)}function cn(){return(cn=(0,r.Z)(function*(t,e){return P(t,"POST","/v1/accounts:update",e)})).apply(this,arguments)}function ln(){return(ln=(0,r.Z)(function*(t,{displayName:e,photoURL:n}){if(void 0===e&&void 0===n)return;const r=(0,s.m9)(t),i={idToken:yield r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=yield Q(r,un(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:t})=>"password"===t);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),yield r._updateTokensIfNecessary(o)})).apply(this,arguments)}function hn(t,e,n){return dn.apply(this,arguments)}function dn(){return(dn=(0,r.Z)(function*(t,e,n){const{auth:r}=t,i={idToken:yield t.getIdToken(),returnSecureToken:!0};e&&(i.email=e),n&&(i.password=n);const s=yield Q(t,Pt(r,i));yield t._updateTokensIfNecessary(s,!0)})).apply(this,arguments)}class fn{constructor(t,e,n={}){this.isNewUser=t,this.providerId=e,this.profile=n}}class pn extends fn{constructor(t,e,n,r){super(t,e,n),this.username=r}}class gn extends fn{constructor(t,e){super(t,"facebook.com",e)}}class mn extends pn{constructor(t,e){super(t,"github.com",e,"string"==typeof(null==e?void 0:e.login)?null==e?void 0:e.login:null)}}class yn extends fn{constructor(t,e){super(t,"google.com",e)}}class vn extends pn{constructor(t,e,n){super(t,"twitter.com",e,n)}}function _n(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||"identitytoolkit#SignupNewUserResponse"===t.kind;if(!r&&(null==t?void 0:t.idToken)){const r=null===(n=null===(e=Y(t.idToken))||void 0===e?void 0:e.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new fn(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new gn(s,i);case"github.com":return new mn(s,i);case"google.com":return new yn(s,i);case"twitter.com":return new vn(s,i,t.screenName||null);case"custom":case"anonymous":return new fn(s,null);default:return new fn(s,r,i)}}(n)}class wn{constructor(t,e){this.type=t,this.credential=e}static _fromIdtoken(t){return new wn("enroll",t)}static _fromMfaPendingCredential(t){return new wn("signin",t)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(t){var e,n;if(null==t?void 0:t.multiFactorSession){if(null===(e=t.multiFactorSession)||void 0===e?void 0:e.pendingCredential)return wn._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.idToken)return wn._fromIdtoken(t.multiFactorSession.idToken)}return null}}class bn{constructor(t,e,n){this.session=t,this.hints=e,this.signInResolver=n}static _fromError(t,e){const n=kt(t),i=e.customData._serverResponse,s=(i.mfaInfo||[]).map(t=>$e._fromServerResponse(n,t));_(i.mfaPendingCredential,n,"internal-error");const o=wn._fromMfaPendingCredential(i.mfaPendingCredential);return new bn(o,s,function(){var t=(0,r.Z)(function*(t){const r=yield t._process(n,o);delete i.mfaInfo,delete i.mfaPendingCredential;const s=Object.assign(Object.assign({},i),{idToken:r.idToken,refreshToken:r.refreshToken});switch(e.operationType){case"signIn":const t=yield we._fromIdTokenResponse(n,e.operationType,s);return yield n._updateCurrentUser(t.user),t;case"reauthenticate":return _(e.user,n,"internal-error"),we._forOperation(e.user,e.operationType,s);default:p(n,"internal-error")}});return function(e){return t.apply(this,arguments)}}())}resolveSignIn(t){var e=this;return(0,r.Z)(function*(){return e.signInResolver(t)})()}}function xn(t,e){return P(t,"POST","/v2/accounts/mfaEnrollment:start",D(t,e))}class En{constructor(t){this.user=t,this.enrolledFactors=[],t._onReload(e=>{e.mfaInfo&&(this.enrolledFactors=e.mfaInfo.map(e=>$e._fromServerResponse(t.auth,e)))})}static _fromUser(t){return new En(t)}getSession(){var t=this;return(0,r.Z)(function*(){return wn._fromIdtoken(yield t.user.getIdToken())})()}enroll(t,e){var n=this;return(0,r.Z)(function*(){const r=t,i=yield n.getSession(),s=yield Q(n.user,r._process(n.user.auth,i,e));return yield n.user._updateTokensIfNecessary(s),n.user.reload()})()}unenroll(t){var e=this;return(0,r.Z)(function*(){const n="string"==typeof t?t:t.uid,r=yield e.user.getIdToken(),i=yield Q(e.user,(s=e.user.auth,o={idToken:r,mfaEnrollmentId:n},P(s,"POST","/v2/accounts/mfaEnrollment:withdraw",D(s,o))));var s,o;e.enrolledFactors=e.enrolledFactors.filter(({uid:t})=>t!==n),yield e.user._updateTokensIfNecessary(i);try{yield e.user.reload()}catch(a){if("auth/user-token-expired"!==a.code)throw a}})()}}const Tn=new WeakMap,Sn="__sak";class kn{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Sn,"1"),this.storage.removeItem(Sn),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const In=(()=>{class t extends kn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const t=(0,s.z$)();return mt(t)||xt(t)}()&&function(){try{return!(!window||window===window.top)}catch(t){return!1}}(),this.fallbackToPolling=Et(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),r=this.localCache[e];n!==r&&t(e,r,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys((t,e,n)=>{this.notifyListeners(t,n)});const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(t.newValue!==r)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const r=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},i=this.storage.getItem(n);(0,s.w1)()&&10===document.documentMode&&i!==t.newValue&&t.newValue!==t.oldValue?setTimeout(r,10):r()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const r of Array.from(n))r(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,e){var n=()=>super._set,i=this;return(0,r.Z)(function*(){yield n().call(i,t,e),i.localCache[t]=JSON.stringify(e)})()}_get(t){var e=()=>super._get,n=this;return(0,r.Z)(function*(){const r=yield e().call(n,t);return n.localCache[t]=JSON.stringify(r),r})()}_remove(t){var e=()=>super._remove,n=this;return(0,r.Z)(function*(){yield e().call(n,t),delete n.localCache[t]})()}}return t.type="LOCAL",t})(),Cn=(()=>{class t extends kn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}return t.type="SESSION",t})();let An=(()=>{class t{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(t=>t.isListeningto(e));if(n)return n;const r=new t(e);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){var e=this;return(0,r.Z)(function*(){const n=t,{eventId:i,eventType:s,data:o}=n.data,a=e.handlersMap[s];if(!(null==a?void 0:a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const u=Array.from(a).map(function(){var t=(0,r.Z)(function*(t){return t(n.origin,o)});return function(e){return t.apply(this,arguments)}}()),c=yield function(t){return Promise.all(t.map(function(){var t=(0,r.Z)(function*(t){try{return{fulfilled:!0,value:yield t}}catch(e){return{fulfilled:!1,reason:e}}});return function(e){return t.apply(this,arguments)}}()))}(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:c})})()}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function On(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}class Nn{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,e,n=50){var i=this;return(0,r.Z)(function*(){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const c=On("",20);r.port1.start();const l=setTimeout(()=>{u(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(t){const e=t;if(e.data.eventId===c)switch(e.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(e.data.response);break;default:clearTimeout(l),clearTimeout(s),u(new Error("invalid_response"))}}},i.handlers.add(o),r.port1.addEventListener("message",o.onMessage),i.target.postMessage({eventType:t,eventId:c,data:e},[r.port2])}).finally(()=>{o&&i.removeMessageHandler(o)})})()}}function Dn(){return window}function Pn(){return void 0!==Dn().WorkerGlobalScope&&"function"==typeof Dn().importScripts}function Rn(){return(Rn=(0,r.Z)(function*(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(t){return null}})).apply(this,arguments)}const Mn="firebaseLocalStorageDb",Ln="firebaseLocalStorage",Fn="fbase_key";class jn{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Un(t,e){return t.transaction([Ln],e?"readwrite":"readonly").objectStore(Ln)}function Vn(){const t=indexedDB.open(Mn,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const e=t.result;try{e.createObjectStore(Ln,{keyPath:Fn})}catch(r){n(r)}}),t.addEventListener("success",(0,r.Z)(function*(){const n=t.result;n.objectStoreNames.contains(Ln)?e(n):(n.close(),yield function(){const t=indexedDB.deleteDatabase(Mn);return new jn(t).toPromise()}(),e(yield Vn()))}))})}function qn(t,e,n){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,r.Z)(function*(t,e,n){const r=Un(t,!0).put({[Fn]:e,value:n});return new jn(r).toPromise()})).apply(this,arguments)}function zn(){return(zn=(0,r.Z)(function*(t,e){const n=Un(t,!1).get(e),r=yield new jn(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function $n(t,e){const n=Un(t,!0).delete(e);return new jn(n).toPromise()}const Gn=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return(0,r.Z)(function*(){return t.db||(t.db=yield Vn()),t.db})()}_withRetries(t){var e=this;return(0,r.Z)(function*(){let n=0;for(;;)try{const n=yield e._openDb();return yield t(n)}catch(r){if(n++>3)throw r;e.db&&(e.db.close(),e.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return(0,r.Z)(function*(){return Pn()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return(0,r.Z)(function*(){t.receiver=An._getInstance(Pn()?self:null),t.receiver._subscribe("keyChanged",function(){var e=(0,r.Z)(function*(e,n){return{keyProcessed:(yield t._poll()).includes(n.key)}});return function(t,n){return e.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var t=(0,r.Z)(function*(t,e){return["keyChanged"]});return function(e,n){return t.apply(this,arguments)}}())})()}initializeSender(){var t=this;return(0,r.Z)(function*(){var e,n;if(t.activeServiceWorker=yield function(){return Rn.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new Nn(t.activeServiceWorker);const r=yield t.sender._send("ping",{},800);r&&(null===(e=r[0])||void 0===e?void 0:e.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var e=this;return(0,r.Z)(function*(){var n;if(e.sender&&e.activeServiceWorker&&((null===(n=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===n?void 0:n.controller)||null)===e.activeServiceWorker)try{yield e.sender._send("keyChanged",{key:t},e.serviceWorkerReceiverAvailable?800:50)}catch(n){}})()}_isAvailable(){return(0,r.Z)(function*(){try{if(!indexedDB)return!1;const t=yield Vn();return yield qn(t,Sn,"1"),yield $n(t,Sn),!0}catch(t){}return!1})()}_withPendingWrite(t){var e=this;return(0,r.Z)(function*(){e.pendingWrites++;try{yield t()}finally{e.pendingWrites--}})()}_set(t,e){var n=this;return(0,r.Z)(function*(){return n._withPendingWrite((0,r.Z)(function*(){return yield n._withRetries(n=>qn(n,t,e)),n.localCache[t]=e,n.notifyServiceWorker(t)}))})()}_get(t){var e=this;return(0,r.Z)(function*(){const n=yield e._withRetries(e=>function(t,e){return zn.apply(this,arguments)}(e,t));return e.localCache[t]=n,n})()}_remove(t){var e=this;return(0,r.Z)(function*(){return e._withPendingWrite((0,r.Z)(function*(){return yield e._withRetries(e=>$n(e,t)),delete e.localCache[t],e.notifyServiceWorker(t)}))})()}_poll(){var t=this;return(0,r.Z)(function*(){const e=yield t._withRetries(t=>{const e=Un(t,!1).getAll();return new jn(e).toPromise()});if(!e)return[];if(0!==t.pendingWrites)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(t.localCache[i])!==JSON.stringify(s)&&(t.notifyListeners(i,s),n.push(i));for(const i of Object.keys(t.localCache))t.localCache[i]&&!r.has(i)&&(t.notifyListeners(i,null),n.push(i));return n})()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const r of Array.from(n))r(e)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval((0,r.Z)(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();function Zn(t,e){return P(t,"POST","/v2/accounts/mfaSignIn:start",D(t,e))}function Hn(){return(Hn=(0,r.Z)(function*(t){return(yield P(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Wn(t){return new Promise((e,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",t),r.onload=e,r.onerror=t=>{const e=g("internal-error");e.customData=t,n(e)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)})}function Kn(t){return`__${t}${Math.floor(1e6*Math.random())}`}const Yn=1e12;class Qn{constructor(t){this.auth=t,this.counter=Yn,this._widgets=new Map}render(t,e){const n=this.counter;return this._widgets.set(n,new Jn(t,this.auth.name,e||{})),this.counter++,n}reset(t){var e;const n=t||Yn;null===(e=this._widgets.get(n))||void 0===e||e.delete(),this._widgets.delete(n)}getResponse(t){var e;return(null===(e=this._widgets.get(t||Yn))||void 0===e?void 0:e.getResponse())||""}execute(t){var e=this;return(0,r.Z)(function*(){var n;return null===(n=e._widgets.get(t||Yn))||void 0===n||n.execute(),""})()}}class Jn{constructor(t,e,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof t?document.getElementById(t):t;_(r,"argument-error",{appName:e}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<50;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}();const{callback:t,"expired-callback":e}=this.params;if(t)try{t(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,e)try{e()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Xn=Kn("rcb"),tr=new I(3e4,6e4);class er{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Dn().grecaptcha}load(t,e=""){return _(function(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}(e),t,"argument-error"),this.shouldResolveImmediately(e)?Promise.resolve(Dn().grecaptcha):new Promise((n,r)=>{const i=Dn().setTimeout(()=>{r(g(t,"network-request-failed"))},tr.get());Dn()[Xn]=()=>{Dn().clearTimeout(i),delete Dn()[Xn];const s=Dn().grecaptcha;if(!s)return void r(g(t,"internal-error"));const o=s.render;s.render=(t,e)=>{const n=o(t,e);return this.counter++,n},this.hostLanguage=e,n(s)},Wn(`https://www.google.com/recaptcha/api.js??${(0,s.xO)({onload:Xn,render:"explicit",hl:e})}`).catch(()=>{clearTimeout(i),r(g(t,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(t){return!!Dn().grecaptcha&&(t===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nr{load(t){return(0,r.Z)(function*(){return new Qn(t)})()}clearedOneInstance(){}}const rr="recaptcha",ir={theme:"light",type:"image"};class sr{constructor(t,e=Object.assign({},ir),n){this.parameters=e,this.type=rr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=kt(n),this.isInvisible="invisible"===this.parameters.size,_("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof t?document.getElementById(t):t;_(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nr:new er,this.validateStartingState()}verify(){var t=this;return(0,r.Z)(function*(){t.assertNotDestroyed();const e=yield t.render(),n=t.getAssertedRecaptcha();return n.getResponse(e)||new Promise(r=>{const i=e=>{e&&(t.tokenChangeListeners.delete(i),r(e))};t.tokenChangeListeners.add(i),t.isInvisible&&n.execute(e)})})()}render(){try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(t=>{throw this.renderPromise=null,t})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(t=>{this.container.removeChild(t)})}validateStartingState(){_(!this.parameters.sitekey,this.auth,"argument-error"),_(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(t){return e=>{if(this.tokenChangeListeners.forEach(t=>t(e)),"function"==typeof t)t(e);else if("string"==typeof t){const n=Dn()[t];"function"==typeof n&&n(e)}}}assertNotDestroyed(){_(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var t=this;return(0,r.Z)(function*(){if(yield t.init(),!t.widgetId){let e=t.container;if(!t.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}t.widgetId=t.getAssertedRecaptcha().render(e,t.parameters)}return t.widgetId})()}init(){var t=this;return(0,r.Z)(function*(){_(S()&&!Pn(),t.auth,"internal-error"),yield function(){let t=null;return new Promise(e=>{"complete"!==document.readyState?(t=()=>e(),window.addEventListener("load",t)):e()}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}(),t.recaptcha=yield t._recaptchaLoader.load(t.auth,t.auth.languageCode||void 0);const e=yield function(t){return Hn.apply(this,arguments)}(t.auth);_(e,t.auth,"internal-error"),t.parameters.sitekey=e})()}getAssertedRecaptcha(){return _(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class or{constructor(t,e){this.verificationId=t,this.onConfirmation=e}confirm(t){const e=oe._fromVerification(this.verificationId,t);return this.onConfirmation(e)}}function ar(){return(ar=(0,r.Z)(function*(t,e,n){const r=kt(t),i=yield lr(r,e,(0,s.m9)(n));return new or(i,t=>Me(r,t))})).apply(this,arguments)}function ur(){return(ur=(0,r.Z)(function*(t,e,n){const r=(0,s.m9)(t);yield Ae(!1,r,"phone");const i=yield lr(r.auth,e,(0,s.m9)(n));return new or(i,t=>Fe(r,t))})).apply(this,arguments)}function cr(){return(cr=(0,r.Z)(function*(t,e,n){const r=(0,s.m9)(t),i=yield lr(r.auth,e,(0,s.m9)(n));return new or(i,t=>Ue(r,t))})).apply(this,arguments)}function lr(t,e,n){return hr.apply(this,arguments)}function hr(){return(hr=(0,r.Z)(function*(t,e,n){var r;const i=yield n.verify();try{let s;if(_("string"==typeof i,t,"argument-error"),_(n.type===rr,t,"argument-error"),s="string"==typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s)return _("enroll"===e.type,t,"internal-error"),(yield xn(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{_("signin"===e.type,t,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;return _(n,t,"missing-multi-factor-info"),(yield Zn(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=yield te(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return e}}finally{n._reset()}})).apply(this,arguments)}function dr(){return(dr=(0,r.Z)(function*(t,e){yield Ie((0,s.m9)(t),e)})).apply(this,arguments)}let fr=(()=>{class t{constructor(e){this.providerId=t.PROVIDER_ID,this.auth=kt(e)}verifyPhoneNumber(t,e){return lr(this.auth,t,(0,s.m9)(e))}static credential(t,e){return oe._fromVerification(t,e)}static credentialFromResult(e){return t.credentialFromTaggedObject(e)}static credentialFromError(e){return t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?oe._fromTokenResponse(e,n):null}}return t.PROVIDER_ID="phone",t.PHONE_SIGN_IN_METHOD="phone",t})();function pr(t,e){return e?E(e):(_(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class gr extends Ot{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Qt(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Qt(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Qt(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function mr(t){return Pe(t.auth,new gr(t),t.bypassAuthState)}function yr(t){const{auth:e,user:n}=t;return _(n,e,"internal-error"),Ne(n,new gr(t),t.bypassAuthState)}function vr(t){return _r.apply(this,arguments)}function _r(){return(_r=(0,r.Z)(function*(t){const{auth:e,user:n}=t;return _(n,e,"internal-error"),Ie(n,new gr(t),t.bypassAuthState)})).apply(this,arguments)}class wr{constructor(t,e,n,r,i=!1){this.auth=t,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){var t=this;return new Promise(function(){var e=(0,r.Z)(function*(e,n){t.pendingPromise={resolve:e,reject:n};try{t.eventManager=yield t.resolver._initialize(t.auth),yield t.onExecution(),t.eventManager.registerConsumer(t)}catch(r){t.reject(r)}});return function(t,n){return e.apply(this,arguments)}}())}onAuthEvent(t){var e=this;return(0,r.Z)(function*(){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o)return void e.reject(o);const u={auth:e.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:e.user,bypassAuthState:e.bypassAuthState};try{e.resolve(yield e.getIdpTask(a)(u))}catch(c){e.reject(c)}})()}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return mr;case"linkViaPopup":case"linkViaRedirect":return vr;case"reauthViaPopup":case"reauthViaRedirect":return yr;default:p(this.auth,"internal-error")}}resolve(t){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const br=new I(2e3,1e4);function xr(){return(xr=(0,r.Z)(function*(t,e,n){const r=kt(t);y(t,e,ce);const i=pr(r,n);return new Sr(r,"signInViaPopup",e,i).executeNotNull()})).apply(this,arguments)}function Er(){return(Er=(0,r.Z)(function*(t,e,n){const r=(0,s.m9)(t);y(r.auth,e,ce);const i=pr(r.auth,n);return new Sr(r.auth,"reauthViaPopup",e,i,r).executeNotNull()})).apply(this,arguments)}function Tr(){return(Tr=(0,r.Z)(function*(t,e,n){const r=(0,s.m9)(t);y(r.auth,e,ce);const i=pr(r.auth,n);return new Sr(r.auth,"linkViaPopup",e,i,r).executeNotNull()})).apply(this,arguments)}let Sr=(()=>{class t extends wr{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){var t=this;return(0,r.Z)(function*(){const e=yield t.execute();return _(e,t.auth,"internal-error"),e})()}onExecution(){var t=this;return(0,r.Z)(function*(){b(1===t.filter.length,"Popup operations only handle one event");const e=On();t.authWindow=yield t.resolver._openPopup(t.auth,t.provider,t.filter[0],e),t.authWindow.associatedEvent=e,t.resolver._originValidation(t.auth).catch(e=>{t.reject(e)}),t.resolver._isIframeWebStorageSupported(t.auth,e=>{e||t.reject(g(t.auth,"web-storage-unsupported"))}),t.pollUserCancellation()})()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(g(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;this.pollId=(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(g(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(t,br.get())};t()}}return t.currentPopupAction=null,t})();const kr=new Map;class Ir extends wr{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}execute(){var t=()=>super.execute,e=this;return(0,r.Z)(function*(){let n=kr.get(e.auth._key());if(!n){try{const r=(yield function(t,e){return Cr.apply(this,arguments)}(e.resolver,e.auth))?yield t().call(e):null;n=()=>Promise.resolve(r)}catch(r){n=()=>Promise.reject(r)}kr.set(e.auth._key(),n)}return e.bypassAuthState||kr.set(e.auth._key(),()=>Promise.resolve(null)),n()})()}onAuthEvent(t){var e=()=>super.onAuthEvent,n=this;return(0,r.Z)(function*(){if("signInViaRedirect"===t.type)return e().call(n,t);if("unknown"!==t.type){if(t.eventId){const r=yield n.auth._redirectUserForId(t.eventId);if(r)return n.user=r,e().call(n,t);n.resolve(null)}}else n.resolve(null)})()}onExecution(){return(0,r.Z)(function*(){})()}cleanUp(){}}function Cr(){return(Cr=(0,r.Z)(function*(t,e){const n=Dr(e),r=Nr(t);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function Ar(t,e){return Or.apply(this,arguments)}function Or(){return(Or=(0,r.Z)(function*(t,e){return Nr(t)._set(Dr(e),"true")})).apply(this,arguments)}function Nr(t){return E(t._redirectPersistence)}function Dr(t){return dt("pendingRedirect",t.config.apiKey,t.name)}function Pr(){return(Pr=(0,r.Z)(function*(t,e,n){const r=kt(t);y(t,e,ce);const i=pr(r,n);return yield Ar(i,r),i._openRedirect(r,e,"signInViaRedirect")})).apply(this,arguments)}function Rr(){return(Rr=(0,r.Z)(function*(t,e,n){const r=(0,s.m9)(t);y(r.auth,e,ce);const i=pr(r.auth,n);yield Ar(i,r.auth);const o=yield Ur(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",o)})).apply(this,arguments)}function Mr(){return(Mr=(0,r.Z)(function*(t,e,n){const r=(0,s.m9)(t);y(r.auth,e,ce);const i=pr(r.auth,n);yield Ae(!1,r,e.providerId),yield Ar(i,r.auth);const o=yield Ur(r);return i._openRedirect(r.auth,e,"linkViaRedirect",o)})).apply(this,arguments)}function Lr(){return(Lr=(0,r.Z)(function*(t,e){return yield kt(t)._initializationPromise,Fr(t,e,!1)})).apply(this,arguments)}function Fr(t,e){return jr.apply(this,arguments)}function jr(){return(jr=(0,r.Z)(function*(t,e,n=!1){const r=kt(t),i=pr(r,e),s=new Ir(r,i,n),o=yield s.execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})).apply(this,arguments)}function Ur(t){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,r.Z)(function*(t){const e=On(`${t.uid}:::`);return t._redirectEventId=e,yield t.auth._setRedirectUser(t),yield t.auth._persistUserIfCurrent(t),e})).apply(this,arguments)}class qr{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!function(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zr(t);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!zr(t)){const r=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(g(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Br(t))}saveEventToCache(t){this.cachedEventUids.add(Br(t)),this.lastProcessedEventTime=Date.now()}}function Br(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(t=>t).join("-")}function zr({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null==e?void 0:e.code)}function $r(t){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,r.Z)(function*(t,e={}){return P(t,"GET","/v1/projects",e)})).apply(this,arguments)}const Zr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hr=/^https?/;function Wr(){return(Wr=(0,r.Z)(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield $r(t);for(const r of e)try{if(Kr(r))return}catch(n){}p(t,"unauthorized-domain")})).apply(this,arguments)}function Kr(t){const e=T(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return""===i.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Hr.test(n))return!1;if(Zr.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Yr=new I(3e4,6e4);function Qr(){const t=Dn().___jsl;if(null==t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}let Jr=null;function Xr(t){return Jr=Jr||function(t){return new Promise((e,n)=>{var r,i,s;function o(){Qr(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qr(),n(g(t,"network-request-failed"))},timeout:Yr.get()})}if(null===(i=null===(r=Dn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=Dn().gapi)||void 0===s?void 0:s.load)){const e=Kn("iframefcb");return Dn()[e]=()=>{gapi.load?o():n(g(t,"network-request-failed"))},Wn(`https://apis.google.com/js/api.js?onload=${e}`).catch(t=>n(t))}o()}}).catch(t=>{throw Jr=null,t})}(t),Jr}const ti=new I(5e3,15e3),ei={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ni=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ri(t){const e=t.config;_(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?C(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:t.name,v:o.SDK_VERSION},i=ni.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${(0,s.xO)(r).slice(1)}`}function ii(){return(ii=(0,r.Z)(function*(t){const e=yield Xr(t),n=Dn().gapi;return _(n,t,"internal-error"),e.open({where:document.body,url:ri(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ei,dontclear:!0},e=>new Promise(function(){var n=(0,r.Z)(function*(n,r){yield e.restyle({setHideOnLeave:!1});const i=g(t,"network-request-failed"),s=Dn().setTimeout(()=>{r(i)},ti.get());function o(){Dn().clearTimeout(s),n(e)}e.ping(o).then(o,()=>{r(i)})});return function(t,e){return n.apply(this,arguments)}}()))})).apply(this,arguments)}const si={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class oi{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function ai(t,e,n,r,i,a){_(t.config.authDomain,t,"auth-domain-config-required"),_(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:o.SDK_VERSION,eventId:i};if(e instanceof ce){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",(0,s.xb)(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(a||{}))u[t]=e}if(e instanceof le){const t=e.getScopes().filter(t=>""!==t);t.length>0&&(u.scopes=t.join(","))}t.tenantId&&(u.tid=t.tenantId);const c=u;for(const s of Object.keys(c))void 0===c[s]&&delete c[s];return`${function({config:t}){return t.emulator?C(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${(0,s.xO)(c).slice(1)}`}const ui="webStorageSupport";class ci extends class{constructor(t){this.factorId=t}_process(t,e,n){switch(e.type){case"enroll":return this._finalizeEnroll(t,e.credential,n);case"signin":return this._finalizeSignIn(t,e.credential);default:return w("unexpected MultiFactorSessionType")}}}{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new ci(t)}_finalizeEnroll(t,e,n){return function(t,e){return P(t,"POST","/v2/accounts/mfaEnrollment:finalize",D(t,e))}(t,{idToken:e,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(t,e){return function(t,e){return P(t,"POST","/v2/accounts/mfaSignIn:finalize",D(t,e))}(t,{mfaPendingCredential:e,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let li=(()=>{class t{constructor(){}static assertion(t){return ci._fromCredential(t)}}return t.FACTOR_ID="phone",t})();var hi,di="@firebase/auth",fi="0.19.4";class pi{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}getToken(t){var e=this;return(0,r.Z)(function*(){return e.assertAuthConfigured(),yield e.auth._initializationPromise,e.auth.currentUser?{accessToken:yield e.auth.currentUser.getIdToken(t)}:null})()}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(e=>{var n;t((null===(n=e)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){_(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function gi(){return window}function mi(){return(mi=(0,r.Z)(function*(t,e,n){var r;const{BuildInfo:i}=gi();b(e.sessionId,"AuthEvent did not contain a session ID");const s=yield _i(e.sessionId),o={};return xt()?o.ibi=i.packageName:_t()?o.apn=i.packageName:p(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,ai(t,n,e.type,void 0,null!==(r=e.eventId)&&void 0!==r?r:void 0,o)})).apply(this,arguments)}function yi(){return(yi=(0,r.Z)(function*(t){const{BuildInfo:e}=gi(),n={};xt()?n.iosBundleId=e.packageName:_t()?n.androidPackageName=e.packageName:p(t,"operation-not-supported-in-this-environment"),yield $r(t,n)})).apply(this,arguments)}function vi(){return(vi=(0,r.Z)(function*(t,e,n){const{cordova:r}=gi();let i=()=>{};try{yield new Promise((s,o)=>{let a=null;function u(){var t;s();const e=null===(t=r.plugins.browsertab)||void 0===t?void 0:t.close;"function"==typeof e&&e(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(g(t,"redirect-cancelled-by-user"))},2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}e.addPassiveListener(u),document.addEventListener("resume",c,!1),_t()&&document.addEventListener("visibilitychange",l,!1),i=()=>{e.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),a&&window.clearTimeout(a)}})}finally{i()}})).apply(this,arguments)}function _i(t){return wi.apply(this,arguments)}function wi(){return(wi=(0,r.Z)(function*(t){const e=bi(t),n=yield crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(t=>t.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function bi(t){if(b(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}hi="Browser",(0,o._registerComponent)(new c.wA("auth",(t,{options:e})=>{const n=t.getProvider("app").getImmediate(),{apiKey:r,authDomain:i}=n.options;return(t=>{_(r&&!r.includes(":"),"invalid-api-key",{appName:t.name}),_(!(null==i?void 0:i.includes(":")),"argument-error",{appName:t.name});const n={apiKey:r,authDomain:i,clientPlatform:hi,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Tt(hi)},s=new St(t,n);return function(t,e){const n=(null==e?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(E);(null==e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,null==e?void 0:e.popupRedirectResolver)}(s,e),s})(n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider("auth-internal").initialize()})),(0,o._registerComponent)(new c.wA("auth-internal",t=>{return e=kt(t.getProvider("auth").getImmediate()),new pi(e);var e},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,o.registerVersion)(di,fi,void 0),(0,o.registerVersion)(di,fi,"esm2017");class xi extends qr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(t=>{this.resolveInialized=t})}addPassiveListener(t){this.passiveListeners.add(t)}removePassiveListener(t){this.passiveListeners.delete(t)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(t){return this.resolveInialized(),this.passiveListeners.forEach(e=>e(t)),super.onEvent(t)}initialized(){var t=this;return(0,r.Z)(function*(){yield t.initPromise})()}}function Ei(t){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,r.Z)(function*(t){const e=yield ki()._get(Ii(t));return e&&(yield ki()._remove(Ii(t))),e})).apply(this,arguments)}function Si(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*e.length);t.push(e.charAt(n))}return t.join("")}function ki(){return E(In)}function Ii(t){return dt("authEvent",t.config.apiKey,t.name)}function Ci(t){if(!(null==t?void 0:t.includes("?")))return{};const[e,...n]=t.split("?");return(0,s.zd)(n.join("?"))}function Ai(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:g("no-auth-event")}}function Oi(){var t;return(null===(t=null===self||void 0===self?void 0:self.location)||void 0===t?void 0:t.protocol)||null}function Ni(t=(0,s.z$)()){return!("file:"!==Oi()&&"ionic:"!==Oi()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Di(){try{const t=self.localStorage,e=On();if(t)return t.setItem(e,"1"),t.removeItem(e),!function(t=(0,s.z$)()){return(0,s.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(t=(0,s.z$)()){return/Edge\/\d+/.test(t)}(t)}()||(0,s.hl)()}catch(t){return Pi()&&(0,s.hl)()}return!1}function Pi(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ri(){return("http:"===Oi()||"https:"===Oi()||(0,s.ru)()||Ni())&&!((0,s.b$)()||(0,s.UG)())&&Di()&&!Pi()}function Mi(){return Ni()&&"undefined"!=typeof document}function Li(){return(Li=(0,r.Z)(function*(){return!!Mi()&&new Promise(t=>{const e=setTimeout(()=>{t(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})})})).apply(this,arguments)}const Fi={LOCAL:"local",NONE:"none",SESSION:"session"},ji=_,Ui="persistence";function Vi(t){return qi.apply(this,arguments)}function qi(){return(qi=(0,r.Z)(function*(t){yield t._initializationPromise;const e=Bi(),n=dt(Ui,t.config.apiKey,t.name);(null==e?void 0:e.sessionStorage)&&e.sessionStorage.setItem(n,t._getPersistence())})).apply(this,arguments)}function Bi(){return"undefined"!=typeof window?window:null}const zi=_;class $i{constructor(){this.browserResolver=E(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cn,this._completeRedirectFn=Fr}_openPopup(t,e,n,i){var o=this;return(0,r.Z)(function*(){var r;b(null===(r=o.eventManagers[t._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");const a=ai(t,e,n,T(),i);return function(t,e,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},si),{width:r.toString(),height:i.toString(),top:o,left:a}),l=(0,s.z$)().toLowerCase();n&&(u=yt(l)?"_blank":n),gt(l)&&(e=e||"http://localhost",c.scrollbars="yes");const h=Object.entries(c).reduce((t,[e,n])=>`${t}${e}=${n},`,"");if(function(t=(0,s.z$)()){var e;return xt(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==u)return function(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",u),new oi(null);const d=window.open(e||"",u,h);_(d,t,"popup-blocked");try{d.focus()}catch(f){}return new oi(d)}(t,a,On())})()}_openRedirect(t,e,n,i){var s=this;return(0,r.Z)(function*(){var r;return yield s._originValidation(t),r=ai(t,e,n,T(),i),Dn().location.href=r,new Promise(()=>{})})()}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(b(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch(()=>{delete this.eventManagers[e]}),n}initAndGetManager(t){var e=this;return(0,r.Z)(function*(){const n=yield function(t){return ii.apply(this,arguments)}(t),r=new qr(t);return n.register("authEvent",e=>(_(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),e.eventManagers[t._key()]={manager:r},e.iframes[t._key()]=n,r})()}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(ui,{type:ui},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&e(!!i),p(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=function(t){return Wr.apply(this,arguments)}(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Et()||mt()||xt()}}),this.cordovaResolver=E(class{constructor(){this._redirectPersistence=Cn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fr}_initialize(t){var e=this;return(0,r.Z)(function*(){const n=t._key();let r=e.eventManagers.get(n);return r||(r=new xi(t),e.eventManagers.set(n,r),e.attachCallbackListeners(t,r)),r})()}_openPopup(t){p(t,"operation-not-supported-in-this-environment")}_openRedirect(t,e,n,i){var o=this;return(0,r.Z)(function*(){!function(t){var e,n,r,i,s,o,a,u,c,l;const h=gi();_("function"==typeof(null===(e=null==h?void 0:h.universalLinks)||void 0===e?void 0:e.subscribe),t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),_(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),_("function"==typeof(null===(s=null===(i=null===(r=null==h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_("function"==typeof(null===(u=null===(a=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===u?void 0:u.isAvailable),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_("function"==typeof(null===(l=null===(c=null==h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(t);const r=yield o._initialize(t);yield r.initialized(),r.resetRedirect(),kr.clear(),yield o._originValidation(t);const a=function(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:Si(),postBody:null,tenantId:t.tenantId,error:g(t,"no-auth-event")}}(t,n,i);yield function(t,e){return ki()._set(Ii(t),e)}(t,a);const u=yield function(t,e,n){return mi.apply(this,arguments)}(t,a,e),c=yield function(t){const{cordova:e}=gi();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,function(t=(0,s.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}()?"_blank":"_system","location=yes"),n(i)})})}(u);return function(t,e,n){return vi.apply(this,arguments)}(t,r,c)})()}_isIframeWebStorageSupported(t,e){throw new Error("Method not implemented.")}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=function(t){return yi.apply(this,arguments)}(t)),this.originValidationPromises[e]}attachCallbackListeners(t,e){const{universalLinks:n,handleOpenURL:i,BuildInfo:s}=gi(),o=setTimeout((0,r.Z)(function*(){yield Ei(t),e.onEvent(Ai())}),500),a=function(){var n=(0,r.Z)(function*(n){clearTimeout(o);const r=yield Ei(t);let i=null;r&&(null==n?void 0:n.url)&&(i=function(t,e){var n,r;const i=function(t){const e=Ci(t),n=e.link?decodeURIComponent(e.link):void 0,r=Ci(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Ci(i).link||i||r||n||t}(e);if(i.includes("/__/auth/callback")){const e=Ci(i),s=e.firebaseError?function(t){try{return JSON.parse(t)}catch(e){return null}}(decodeURIComponent(e.firebaseError)):null,o=null===(r=null===(n=null==s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?g(o):null;return a?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}(r,n.url)),e.onEvent(i||Ai())});return function(t){return n.apply(this,arguments)}}();void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,a);const u=i,c=`${s.packageName.toLowerCase()}://`;gi().handleOpenURL=function(){var t=(0,r.Z)(function*(t){if(t.toLowerCase().startsWith(c)&&a({url:t}),"function"==typeof u)try{u(t)}catch(e){console.error(e)}});return function(e){return t.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Cn,this._completeRedirectFn=Fr}_initialize(t){var e=this;return(0,r.Z)(function*(){return yield e.selectUnderlyingResolver(),e.assertedUnderlyingResolver._initialize(t)})()}_openPopup(t,e,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openPopup(t,e,n,i)})()}_openRedirect(t,e,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openRedirect(t,e,n,i)})()}_isIframeWebStorageSupported(t,e){this.assertedUnderlyingResolver._isIframeWebStorageSupported(t,e)}_originValidation(t){return this.assertedUnderlyingResolver._originValidation(t)}get _shouldInitProactively(){return Mi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return zi(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var t=this;return(0,r.Z)(function*(){if(t.underlyingResolver)return;const e=yield function(){return Li.apply(this,arguments)}();t.underlyingResolver=e?t.cordovaResolver:t.browserResolver})()}}function Gi(t){return t.unwrap()}function Zi(t){const{_tokenResponse:e}=t instanceof s.ZR?t.customData:t;if(!e)return null;if(!(t instanceof s.ZR)&&"temporaryProof"in e&&"phoneNumber"in e)return fr.credentialFromResult(t);const n=e.providerId;if(!n||"password"===n)return null;let r;switch(n){case"google.com":r=fe;break;case"facebook.com":r=de;break;case"github.com":r=pe;break;case"twitter.com":r=ye;break;default:const{oauthIdToken:t,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=e;return i||s||t||o?o?n.startsWith("saml.")?ge._create(n,o):Xt._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:t,accessToken:i}):new he(n).credential({idToken:t,accessToken:i,rawNonce:a}):null}return t instanceof s.ZR?r.credentialFromError(t):r.credentialFromResult(t)}function Hi(t,e){return e.catch(e=>{throw e instanceof s.ZR&&function(t,e){var n;const r=null===(n=e.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===e.code)e.resolver=new Yi(t,function(t,e){var n;const r=(0,s.m9)(t),i=e;return _(e.customData.operationType,r,"argument-error"),_(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),bn._fromError(r,i)}(t,e));else if(r){const t=Zi(e),n=e;t&&(n.credential=t,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}(t,e),e}).then(t=>{const e=t.user;return{operationType:t.operationType,credential:(n=t,Zi(n)),additionalUserInfo:_n(t),user:Qi.getOrCreate(e)};var n})}function Wi(t,e){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,r.Z)(function*(t,e){const n=yield e;return{verificationId:n.verificationId,confirm:e=>Hi(t,n.confirm(e))}})).apply(this,arguments)}class Yi{constructor(t,e){this.resolver=e,this.auth=t.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(t){return Hi(Gi(this.auth),this.resolver.resolveSignIn(t))}}class Qi{constructor(t){this._delegate=t,this.multiFactor=function(t){const e=(0,s.m9)(t);return Tn.has(e)||Tn.set(e,En._fromUser(e)),Tn.get(e)}(t)}static getOrCreate(t){return Qi.USER_MAP.has(t)||Qi.USER_MAP.set(t,new Qi(t)),Qi.USER_MAP.get(t)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(t){return this._delegate.getIdTokenResult(t)}getIdToken(t){return this._delegate.getIdToken(t)}linkAndRetrieveDataWithCredential(t){return this.linkWithCredential(t)}linkWithCredential(t){var e=this;return(0,r.Z)(function*(){return Hi(e.auth,Fe(e._delegate,t))})()}linkWithPhoneNumber(t,e){var n=this;return(0,r.Z)(function*(){return Wi(n.auth,function(t,e,n){return ur.apply(this,arguments)}(n._delegate,t,e))})()}linkWithPopup(t){var e=this;return(0,r.Z)(function*(){return Hi(e.auth,function(t,e,n){return Tr.apply(this,arguments)}(e._delegate,t,$i))})()}linkWithRedirect(t){var e=this;return(0,r.Z)(function*(){return yield Vi(kt(e.auth)),function(t,e,n){return function(t,e,n){return Mr.apply(this,arguments)}(t,e,n)}(e._delegate,t,$i)})()}reauthenticateAndRetrieveDataWithCredential(t){return this.reauthenticateWithCredential(t)}reauthenticateWithCredential(t){var e=this;return(0,r.Z)(function*(){return Hi(e.auth,Ue(e._delegate,t))})()}reauthenticateWithPhoneNumber(t,e){return Wi(this.auth,function(t,e,n){return cr.apply(this,arguments)}(this._delegate,t,e))}reauthenticateWithPopup(t){return Hi(this.auth,function(t,e,n){return Er.apply(this,arguments)}(this._delegate,t,$i))}reauthenticateWithRedirect(t){var e=this;return(0,r.Z)(function*(){return yield Vi(kt(e.auth)),function(t,e,n){return function(t,e,n){return Rr.apply(this,arguments)}(t,e,n)}(e._delegate,t,$i)})()}sendEmailVerification(t){return function(t,e){return on.apply(this,arguments)}(this._delegate,t)}unlink(t){var e=this;return(0,r.Z)(function*(){return yield function(t,e){return ke.apply(this,arguments)}(e._delegate,t),e})()}updateEmail(t){return function(t,e){return hn((0,s.m9)(t),e,null)}(this._delegate,t)}updatePassword(t){return function(t,e){return hn((0,s.m9)(t),null,e)}(this._delegate,t)}updatePhoneNumber(t){return function(t,e){return dr.apply(this,arguments)}(this._delegate,t)}updateProfile(t){return function(t,e){return ln.apply(this,arguments)}(this._delegate,t)}verifyBeforeUpdateEmail(t,e){return function(t,e,n){return an.apply(this,arguments)}(this._delegate,t,e)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Qi.USER_MAP=new WeakMap;const Ji=_;let Xi=(()=>{class t{constructor(t,e){if(this.app=t,e.isInitialized())return this._delegate=e.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=t.options;Ji(n,"invalid-api-key",{appName:t.name});let r=[ht];if("undefined"!=typeof window){r=function(t,e){const n=Bi();if(!(null==n?void 0:n.sessionStorage))return[];const r=dt(Ui,t,e);switch(n.sessionStorage.getItem(r)){case Fi.NONE:return[ht];case Fi.LOCAL:return[Gn,Cn];case Fi.SESSION:return[Cn];default:return[]}}(n,t.name);for(const t of[Gn,In,Cn])r.includes(t)||r.push(t)}Ji(n,"invalid-api-key",{appName:t.name});const i="undefined"!=typeof window?$i:void 0;this._delegate=e.initialize({options:{persistence:r,popupRedirectResolver:i}}),this._delegate._updateErrorMap(l),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Qi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(t){this._delegate.languageCode=t}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(t){this._delegate.tenantId=t}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(t,e){!function(t,e,n){const r=kt(t);_(r._canInitEmulator,r,"emulator-config-failed"),_(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=Ct(e),{host:o,port:a}=function(t){const e=Ct(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const t=i[1];return{host:t,port:At(r.substr(t.length+1))}}{const[t,e]=r.split(":");return{host:t,port:At(e)}}}(e);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(this._delegate,t,e)}applyActionCode(t){return function(t,e){return Ke.apply(this,arguments)}(this._delegate,t)}checkActionCode(t){return Ye(this._delegate,t)}confirmPasswordReset(t,e){return function(t,e,n){return We.apply(this,arguments)}(this._delegate,t,e)}createUserWithEmailAndPassword(t,e){var n=this;return(0,r.Z)(function*(){return Hi(n._delegate,function(t,e,n){return Xe.apply(this,arguments)}(n._delegate,t,e))})()}fetchProvidersForEmail(t){return this.fetchSignInMethodsForEmail(t)}fetchSignInMethodsForEmail(t){return function(t,e){return sn.apply(this,arguments)}(this._delegate,t)}isSignInWithEmailLink(t){return function(t,e){const n=ae.parseLink(e);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(0,t)}getRedirectResult(){var t=this;return(0,r.Z)(function*(){Ji(Ri(),t._delegate,"operation-not-supported-in-this-environment");const e=yield function(t,e){return Lr.apply(this,arguments)}(t._delegate,$i);return e?Hi(t._delegate,Promise.resolve(e)):{credential:null,user:null}})()}addFrameworkForLogging(t){!function(t,e){kt(t)._logFramework(e)}(this._delegate,t)}onAuthStateChanged(t,e,n){const{next:r,error:i,complete:s}=ts(t,e,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(t,e,n){const{next:r,error:i,complete:s}=ts(t,e,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(t,e){return function(t,e,n){return tn.apply(this,arguments)}(this._delegate,t,e)}sendPasswordResetEmail(t,e){return function(t,e,n){return He.apply(this,arguments)}(this._delegate,t,e||void 0)}setPersistence(t){var e=this;return(0,r.Z)(function*(){let n;switch(function(t,e){ji(Object.values(Fi).includes(e),t,"invalid-persistence-type"),(0,s.b$)()?ji(e!==Fi.SESSION,t,"unsupported-persistence-type"):(0,s.UG)()?ji(e===Fi.NONE,t,"unsupported-persistence-type"):Pi()?ji(e===Fi.NONE||e===Fi.LOCAL&&(0,s.hl)(),t,"unsupported-persistence-type"):ji(e===Fi.NONE||Di(),t,"unsupported-persistence-type")}(e._delegate,t),t){case Fi.SESSION:n=Cn;break;case Fi.LOCAL:n=(yield E(Gn)._isAvailable())?Gn:In;break;case Fi.NONE:n=ht;break;default:return p("argument-error",{appName:e._delegate.name})}return e._delegate.setPersistence(n)})()}signInAndRetrieveDataWithCredential(t){return this.signInWithCredential(t)}signInAnonymously(){return Hi(this._delegate,function(t){return xe.apply(this,arguments)}(this._delegate))}signInWithCredential(t){return Hi(this._delegate,Me(this._delegate,t))}signInWithCustomToken(t){return Hi(this._delegate,function(t,e){return ze.apply(this,arguments)}(this._delegate,t))}signInWithEmailAndPassword(t,e){return Hi(this._delegate,function(t,e,n){return Me((0,s.m9)(t),ue.credential(e,n))}(this._delegate,t,e))}signInWithEmailLink(t,e){return Hi(this._delegate,function(t,e,n){return en.apply(this,arguments)}(this._delegate,t,e))}signInWithPhoneNumber(t,e){return Wi(this._delegate,function(t,e,n){return ar.apply(this,arguments)}(this._delegate,t,e))}signInWithPopup(t){var e=this;return(0,r.Z)(function*(){return Ji(Ri(),e._delegate,"operation-not-supported-in-this-environment"),Hi(e._delegate,function(t,e,n){return xr.apply(this,arguments)}(e._delegate,t,$i))})()}signInWithRedirect(t){var e=this;return(0,r.Z)(function*(){return Ji(Ri(),e._delegate,"operation-not-supported-in-this-environment"),yield Vi(e._delegate),function(t,e,n){return function(t,e,n){return Pr.apply(this,arguments)}(t,e,n)}(e._delegate,t,$i)})()}updateCurrentUser(t){return this._delegate.updateCurrentUser(t)}verifyPasswordResetCode(t){return function(t,e){return Je.apply(this,arguments)}(this._delegate,t)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return t.Persistence=Fi,t})();function ts(t,e,n){let r=t;"function"!=typeof t&&({next:r,error:e,complete:n}=t);const i=r;return{next:t=>i(t&&Qi.getOrCreate(t)),error:e,complete:n}}class es{constructor(){this.providerId="phone",this._delegate=new fr(Gi(i.Z.auth()))}static credential(t,e){return fr.credential(t,e)}verifyPhoneNumber(t,e){return this._delegate.verifyPhoneNumber(t,e)}unwrap(){return this._delegate}}es.PHONE_SIGN_IN_METHOD=fr.PHONE_SIGN_IN_METHOD,es.PROVIDER_ID=fr.PROVIDER_ID;const ns=_;var rs;(rs=i.Z).INTERNAL.registerComponent(new c.wA("auth-compat",t=>{const e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("auth");return new Xi(e,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ue,FacebookAuthProvider:de,GithubAuthProvider:pe,GoogleAuthProvider:fe,OAuthProvider:he,SAMLAuthProvider:me,PhoneAuthProvider:es,PhoneMultiFactorGenerator:li,RecaptchaVerifier:class{constructor(t,e,n=i.Z.app()){var r;ns(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new sr(t,e,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:ye,Auth:Xi,AuthCredential:Ot,Error:s.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),rs.registerVersion("@firebase/auth-compat","0.2.4")},30:(t,e,n)=>{var r=n(8057);t.exports={Graph:r.Graph,json:n(1852),alg:n(9761),version:r.version}},9174:(t,e,n)=>{var r=n(4269);t.exports=function(t){var e,n={},i=[];function s(i){r.has(n,i)||(n[i]=!0,e.push(i),r.each(t.successors(i),s),r.each(t.predecessors(i),s))}return r.each(t.nodes(),function(t){e=[],s(t),e.length&&i.push(e)}),i}},9831:(t,e,n)=>{var r=n(4269);function i(t,e,n,s,o,a){r.has(s,e)||(s[e]=!0,n||a.push(e),r.each(o(e),function(e){i(t,e,n,s,o,a)}),n&&a.push(e))}t.exports=function(t,e,n){r.isArray(e)||(e=[e]);var s=(t.isDirected()?t.successors:t.neighbors).bind(t),o=[],a={};return r.each(e,function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);i(t,e,"post"===n,a,s,o)}),o}},2568:(t,e,n)=>{var r=n(8406),i=n(4269);t.exports=function(t,e,n){return i.transform(t.nodes(),function(i,s){i[s]=r(t,s,e,n)},{})}},8406:(t,e,n)=>{var r=n(4269),i=n(2643);t.exports=function(t,e,n,r){return function(t,e,n,r){var s,o,a={},u=new i,c=function(t){var e=t.v!==s?t.v:t.w,r=a[e],i=n(t),c=o.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+i);c<r.distance&&(r.distance=c,r.predecessor=s,u.decrease(e,c))};for(t.nodes().forEach(function(t){var n=t===e?0:Number.POSITIVE_INFINITY;a[t]={distance:n},u.add(t,n)});u.size()>0&&(s=u.removeMin(),(o=a[s]).distance!==Number.POSITIVE_INFINITY);)r(s).forEach(c);return a}(t,String(e),n||s,r||function(e){return t.outEdges(e)})};var s=r.constant(1)},2777:(t,e,n)=>{var r=n(4269),i=n(468);t.exports=function(t){return r.filter(i(t),function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})}},6926:(t,e,n)=>{var r=n(4269);t.exports=function(t,e,n){return function(t,e,n){var r={},i=t.nodes();return i.forEach(function(t){r[t]={},r[t][t]={distance:0},i.forEach(function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})}),n(t).forEach(function(n){var i=n.v===t?n.w:n.v,s=e(n);r[t][i]={distance:s,predecessor:t}})}),i.forEach(function(t){var e=r[t];i.forEach(function(n){var s=r[n];i.forEach(function(n){var r=e[n],i=s[n],o=s[t].distance+r.distance;o<i.distance&&(i.distance=o,i.predecessor=r.predecessor)})})}),r}(t,e||i,n||function(e){return t.outEdges(e)})};var i=r.constant(1)},9761:(t,e,n)=>{t.exports={components:n(9174),dijkstra:n(8406),dijkstraAll:n(2568),findCycles:n(2777),floydWarshall:n(6926),isAcyclic:n(9160),postorder:n(2487),preorder:n(2223),prim:n(644),tarjan:n(468),topsort:n(6501)}},9160:(t,e,n)=>{var r=n(6501);t.exports=function(t){try{r(t)}catch(e){if(e instanceof r.CycleException)return!1;throw e}return!0}},2487:(t,e,n)=>{var r=n(9831);t.exports=function(t,e){return r(t,e,"post")}},2223:(t,e,n)=>{var r=n(9831);t.exports=function(t,e){return r(t,e,"pre")}},644:(t,e,n)=>{var r=n(4269),i=n(7051),s=n(2643);t.exports=function(t,e){var n,o=new i,a={},u=new s;function c(t){var r=t.v===n?t.w:t.v,i=u.priority(r);if(void 0!==i){var s=e(t);s<i&&(a[r]=n,u.decrease(r,s))}}if(0===t.nodeCount())return o;r.each(t.nodes(),function(t){u.add(t,Number.POSITIVE_INFINITY),o.setNode(t)}),u.decrease(t.nodes()[0],0);for(var l=!1;u.size()>0;){if(n=u.removeMin(),r.has(a,n))o.setEdge(n,a[n]);else{if(l)throw new Error("Input graph is not connected: "+t);l=!0}t.nodeEdges(n).forEach(c)}return o}},468:(t,e,n)=>{var r=n(4269);t.exports=function(t){var e=0,n=[],i={},s=[];function o(a){var u=i[a]={onStack:!0,lowlink:e,index:e++};if(n.push(a),t.successors(a).forEach(function(t){r.has(i,t)?i[t].onStack&&(u.lowlink=Math.min(u.lowlink,i[t].index)):(o(t),u.lowlink=Math.min(u.lowlink,i[t].lowlink))}),u.lowlink===u.index){var c,l=[];do{c=n.pop(),i[c].onStack=!1,l.push(c)}while(a!==c);s.push(l)}}return t.nodes().forEach(function(t){r.has(i,t)||o(t)}),s}},6501:(t,e,n)=>{var r=n(4269);function i(t){var e={},n={},i=[];if(r.each(t.sinks(),function o(a){if(r.has(n,a))throw new s;r.has(e,a)||(n[a]=!0,e[a]=!0,r.each(t.predecessors(a),o),delete n[a],i.push(a))}),r.size(e)!==t.nodeCount())throw new s;return i}function s(){}t.exports=i,i.CycleException=s,s.prototype=new Error},2643:(t,e,n)=>{var r=n(4269);function i(){this._arr=[],this._keyIndices={}}t.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map(function(t){return t.key})},i.prototype.has=function(t){return r.has(this._keyIndices,t)},i.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!r.has(n,t)){var i=this._arr,s=i.length;return n[t]=s,i.push({key:t,priority:e}),this._decrease(s),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},i.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},i.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},i.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},i.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],s=n[e];n[t]=s,n[e]=i,r[s.key]=t,r[i.key]=e}},7051:(t,e,n)=>{"use strict";var r=n(4269);t.exports=s;var i="\0";function s(t){this._isDirected=!r.has(t,"directed")||t.directed,this._isMultigraph=!!r.has(t,"multigraph")&&t.multigraph,this._isCompound=!!r.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function o(t,e){t[e]?t[e]++:t[e]=1}function a(t,e){--t[e]||delete t[e]}function u(t,e,n,i){var s=""+e,o=""+n;if(!t&&s>o){var a=s;s=o,o=a}return s+"\x01"+o+"\x01"+(r.isUndefined(i)?"\0":i)}function c(t,e,n,r){var i=""+e,s=""+n;if(!t&&i>s){var o=i;i=s,s=o}var a={v:i,w:s};return r&&(a.name=r),a}function l(t,e){return u(t,e.v,e.w,e.name)}s.prototype._nodeCount=0,s.prototype._edgeCount=0,s.prototype.isDirected=function(){return this._isDirected},s.prototype.isMultigraph=function(){return this._isMultigraph},s.prototype.isCompound=function(){return this._isCompound},s.prototype.setGraph=function(t){return this._label=t,this},s.prototype.graph=function(){return this._label},s.prototype.setDefaultNodeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultNodeLabelFn=t,this},s.prototype.nodeCount=function(){return this._nodeCount},s.prototype.nodes=function(){return r.keys(this._nodes)},s.prototype.sources=function(){var t=this;return r.filter(this.nodes(),function(e){return r.isEmpty(t._in[e])})},s.prototype.sinks=function(){var t=this;return r.filter(this.nodes(),function(e){return r.isEmpty(t._out[e])})},s.prototype.setNodes=function(t,e){var n=arguments,i=this;return r.each(t,function(t){n.length>1?i.setNode(t,e):i.setNode(t)}),this},s.prototype.setNode=function(t,e){return r.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=i,this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},s.prototype.node=function(t){return this._nodes[t]},s.prototype.hasNode=function(t){return r.has(this._nodes,t)},s.prototype.removeNode=function(t){var e=this;if(r.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],r.each(this.children(t),function(t){e.setParent(t)}),delete this._children[t]),r.each(r.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],r.each(r.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},s.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(e))e=i;else{for(var n=e+="";!r.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},s.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},s.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==i)return e}},s.prototype.children=function(t){if(r.isUndefined(t)&&(t=i),this._isCompound){var e=this._children[t];if(e)return r.keys(e)}else{if(t===i)return this.nodes();if(this.hasNode(t))return[]}},s.prototype.predecessors=function(t){var e=this._preds[t];if(e)return r.keys(e)},s.prototype.successors=function(t){var e=this._sucs[t];if(e)return r.keys(e)},s.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return r.union(e,this.successors(t))},s.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},s.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;r.each(this._nodes,function(n,r){t(r)&&e.setNode(r,n)}),r.each(this._edgeObjs,function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))});var i={};function s(t){var r=n.parent(t);return void 0===r||e.hasNode(r)?(i[t]=r,r):r in i?i[r]:s(r)}return this._isCompound&&r.each(e.nodes(),function(t){e.setParent(t,s(t))}),e},s.prototype.setDefaultEdgeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultEdgeLabelFn=t,this},s.prototype.edgeCount=function(){return this._edgeCount},s.prototype.edges=function(){return r.values(this._edgeObjs)},s.prototype.setPath=function(t,e){var n=this,i=arguments;return r.reduce(t,function(t,r){return i.length>1?n.setEdge(t,r,e):n.setEdge(t,r),r}),this},s.prototype.setEdge=function(){var t,e,n,i,s=!1,a=arguments[0];"object"==typeof a&&null!==a&&"v"in a?(t=a.v,e=a.w,n=a.name,2===arguments.length&&(i=arguments[1],s=!0)):(t=a,e=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],s=!0)),t=""+t,e=""+e,r.isUndefined(n)||(n=""+n);var l=u(this._isDirected,t,e,n);if(r.has(this._edgeLabels,l))return s&&(this._edgeLabels[l]=i),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[l]=s?i:this._defaultEdgeLabelFn(t,e,n);var h=c(this._isDirected,t,e,n);return t=h.v,e=h.w,Object.freeze(h),this._edgeObjs[l]=h,o(this._preds[e],t),o(this._sucs[t],e),this._in[e][l]=h,this._out[t][l]=h,this._edgeCount++,this},s.prototype.edge=function(t,e,n){var r=1===arguments.length?l(this._isDirected,arguments[0]):u(this._isDirected,t,e,n);return this._edgeLabels[r]},s.prototype.hasEdge=function(t,e,n){var i=1===arguments.length?l(this._isDirected,arguments[0]):u(this._isDirected,t,e,n);return r.has(this._edgeLabels,i)},s.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?l(this._isDirected,arguments[0]):u(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],a(this._preds[e],t),a(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},s.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var i=r.values(n);return e?r.filter(i,function(t){return t.v===e}):i}},s.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var i=r.values(n);return e?r.filter(i,function(t){return t.w===e}):i}},s.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},8057:(t,e,n)=>{t.exports={Graph:n(7051),version:n(751)}},1852:(t,e,n)=>{var r=n(4269),i=n(7051);function s(t){return r.map(t.nodes(),function(e){var n=t.node(e),i=t.parent(e),s={v:e};return r.isUndefined(n)||(s.value=n),r.isUndefined(i)||(s.parent=i),s})}function o(t){return r.map(t.edges(),function(e){var n=t.edge(e),i={v:e.v,w:e.w};return r.isUndefined(e.name)||(i.name=e.name),r.isUndefined(n)||(i.value=n),i})}t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:s(t),edges:o(t)};return r.isUndefined(t.graph())||(e.value=r.clone(t.graph())),e},read:function(t){var e=new i(t.options).setGraph(t.value);return r.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),r.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}}},4269:(t,e,n)=>{var r;try{r={clone:n(3742),constant:n(5654),each:n(3718),filter:n(3834),has:n(2335),isArray:n(1690),isEmpty:n(2232),isFunction:n(5836),isUndefined:n(9569),keys:n(9108),map:n(9718),reduce:n(6101),size:n(4951),transform:n(3593),union:n(9728),values:n(3348)}}catch(i){}r||(r=window._),t.exports=r},751:t=>{t.exports="2.1.8"},6676:function(t,e){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise(function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function r(t,e,r){var i,s=new Promise(function(s,o){n(i=t[e].apply(t,r)).then(s,o)});return s.request=i,s}function i(t,e,n){var i=r(t,e,n);return i.then(function(t){if(t)return new l(t,i.request)})}function s(t,e,n){n.forEach(function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})})}function o(t,e,n,i){i.forEach(function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})})}function a(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})})}function u(t,e,n,r){r.forEach(function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})})}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function d(t){this._tx=t,this.complete=new Promise(function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}})}function f(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new d(n)}function p(t){this._db=t}s(c,"_index",["name","keyPath","multiEntry","unique"]),o(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),s(l,"_cursor",["direction","key","primaryKey","value"]),o(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then(function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then(function(t){if(t)return new l(t,e._request)})})})}),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},s(h,"_store",["name","keyPath","indexNames","autoIncrement"]),o(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},s(d,"_tx",["objectStoreNames","mode"]),a(d,"_tx",IDBTransaction,["abort"]),f.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},s(f,"_db",["name","version","objectStoreNames"]),a(f,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},s(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(t){[h,c].forEach(function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,s=i[t].apply(i,n.slice(0,-1));s.onsuccess=function(){r(s.result)}})})}),[c,h].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise(function(i){n.iterateCursor(t,function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)})})})}),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),s=i.request;return s&&(s.onupgradeneeded=function(t){n&&n(new f(s.result,t.oldVersion,s.transaction))}),i.then(function(t){return new p(t)})},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},1235:(t,e,n)=>{var r=n(4153)(n(7038),"DataView");t.exports=r},1505:(t,e,n)=>{var r=n(9410),i=n(1143),s=n(604),o=n(584),a=n(7792);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=s,u.prototype.has=o,u.prototype.set=a,t.exports=u},3545:(t,e,n)=>{var r=n(3391),i=n(8971),s=n(4550),o=n(3913),a=n(8944);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=s,u.prototype.has=o,u.prototype.set=a,t.exports=u},9046:(t,e,n)=>{var r=n(4153)(n(7038),"Map");t.exports=r},3177:(t,e,n)=>{var r=n(536),i=n(1502),s=n(4960),o=n(1539),a=n(4138);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=s,u.prototype.has=o,u.prototype.set=a,t.exports=u},7129:(t,e,n)=>{var r=n(4153)(n(7038),"Promise");t.exports=r},4918:(t,e,n)=>{var r=n(4153)(n(7038),"Set");t.exports=r},8690:(t,e,n)=>{var r=n(3177),i=n(365),s=n(8235);function o(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}o.prototype.add=o.prototype.push=i,o.prototype.has=s,t.exports=o},3667:(t,e,n)=>{var r=n(3545),i=n(8034),s=n(7238),o=n(5887),a=n(1450),u=n(1386);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=i,c.prototype.delete=s,c.prototype.get=o,c.prototype.has=a,c.prototype.set=u,t.exports=c},7333:(t,e,n)=>{var r=n(7038);t.exports=r.Symbol},6820:(t,e,n)=>{var r=n(7038);t.exports=r.Uint8Array},4203:(t,e,n)=>{var r=n(4153)(n(7038),"WeakMap");t.exports=r},1638:t=>{t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},4500:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},1375:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,s=[];++n<r;){var o=t[n];e(o,n,t)&&(s[i++]=o)}return s}},5242:(t,e,n)=>{var r=n(2166);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},679:t=>{t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},1890:(t,e,n)=>{var r=n(8282),i=n(2952),s=n(1690),o=n(4444),a=n(968),u=n(7679),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=s(t),l=!n&&i(t),h=!n&&!l&&o(t),d=!n&&!l&&!h&&u(t),f=n||l||h||d,p=f?r(t.length,String):[],g=p.length;for(var m in t)!e&&!c.call(t,m)||f&&("length"==m||h&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||a(m,g))||p.push(m);return p}},4992:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},4165:t=>{t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},9731:t=>{t.exports=function(t,e,n,r){var i=-1,s=null==t?0:t.length;for(r&&s&&(n=t[++i]);++i<s;)n=e(n,t[i],i,t);return n}},8141:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},8956:(t,e,n)=>{var r=n(8840)("length");t.exports=r},3530:(t,e,n)=>{var r=n(2007),i=n(1166);t.exports=function(t,e,n){(void 0!==n&&!i(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},3898:(t,e,n)=>{var r=n(2007),i=n(1166),s=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var o=t[e];s.call(t,e)&&i(o,n)&&(void 0!==n||e in t)||r(t,e,n)}},5758:(t,e,n)=>{var r=n(1166);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},2067:(t,e,n)=>{var r=n(1694),i=n(9108);t.exports=function(t,e){return t&&r(e,i(e),t)}},882:(t,e,n)=>{var r=n(1694),i=n(2970);t.exports=function(t,e){return t&&r(e,i(e),t)}},2007:(t,e,n)=>{var r=n(395);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},7007:(t,e,n)=>{var r=n(3667),i=n(4500),s=n(3898),o=n(2067),a=n(882),u=n(694),c=n(3595),l=n(4746),h=n(8857),d=n(8605),f=n(1675),p=n(6663),g=n(2963),m=n(2143),y=n(1563),v=n(1690),_=n(4444),w=n(2e3),b=n(3867),x=n(8855),E=n(9108),T=n(2970),S="[object Arguments]",k="[object Function]",I="[object Object]",C={};C[S]=C["[object Array]"]=C["[object ArrayBuffer]"]=C["[object DataView]"]=C["[object Boolean]"]=C["[object Date]"]=C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Map]"]=C["[object Number]"]=C[I]=C["[object RegExp]"]=C["[object Set]"]=C["[object String]"]=C["[object Symbol]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C["[object Error]"]=C[k]=C["[object WeakMap]"]=!1,t.exports=function t(e,n,A,O,N,D){var P,R=1&n,M=2&n,L=4&n;if(A&&(P=N?A(e,O,N,D):A(e)),void 0!==P)return P;if(!b(e))return e;var F=v(e);if(F){if(P=g(e),!R)return c(e,P)}else{var j=p(e),U=j==k||"[object GeneratorFunction]"==j;if(_(e))return u(e,R);if(j==I||j==S||U&&!N){if(P=M||U?{}:y(e),!R)return M?h(e,a(P,e)):l(e,o(P,e))}else{if(!C[j])return N?e:{};P=m(e,j,R)}}D||(D=new r);var V=D.get(e);if(V)return V;D.set(e,P),x(e)?e.forEach(function(r){P.add(t(r,n,A,r,e,D))}):w(e)&&e.forEach(function(r,i){P.set(i,t(r,n,A,i,e,D))});var q=F?void 0:(L?M?f:d:M?T:E)(e);return i(q||e,function(r,i){q&&(r=e[i=r]),s(P,i,t(r,n,A,i,e,D))}),P}},920:(t,e,n)=>{var r=n(3867),i=Object.create,s=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=s},9026:(t,e,n)=>{var r=n(8022),i=n(9889)(r);t.exports=i},6681:(t,e,n)=>{var r=n(7786);t.exports=function(t,e,n){for(var i=-1,s=t.length;++i<s;){var o=t[i],a=e(o);if(null!=a&&(void 0===u?a==a&&!r(a):n(a,u)))var u=a,c=o}return c}},8711:(t,e,n)=>{var r=n(9026);t.exports=function(t,e){var n=[];return r(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}},2229:t=>{t.exports=function(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}},6369:(t,e,n)=>{var r=n(4165),i=n(1006);t.exports=function t(e,n,s,o,a){var u=-1,c=e.length;for(s||(s=i),a||(a=[]);++u<c;){var l=e[u];n>0&&s(l)?n>1?t(l,n-1,s,o,a):r(a,l):o||(a[a.length]=l)}return a}},5290:(t,e,n)=>{var r=n(8269)();t.exports=r},8022:(t,e,n)=>{var r=n(5290),i=n(9108);t.exports=function(t,e){return t&&r(t,e,i)}},3436:(t,e,n)=>{var r=n(4667),i=n(2773);t.exports=function(t,e){for(var n=0,s=(e=r(e,t)).length;null!=t&&n<s;)t=t[i(e[n++])];return n&&n==s?t:void 0}},9215:(t,e,n)=>{var r=n(4165),i=n(1690);t.exports=function(t,e,n){var s=e(t);return i(t)?s:r(s,n(t))}},2802:(t,e,n)=>{var r=n(7333),i=n(1613),s=n(1244),o=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?i(t):s(t)}},8354:t=>{t.exports=function(t,e){return t>e}},731:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t,n){return null!=t&&e.call(t,n)}},5333:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},2166:(t,e,n)=>{var r=n(2229),i=n(2469),s=n(4299);t.exports=function(t,e,n){return e==e?s(t,e,n):r(t,i,n)}},7090:(t,e,n)=>{var r=n(2802),i=n(7503);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},696:(t,e,n)=>{var r=n(6863),i=n(7503);t.exports=function t(e,n,s,o,a){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,s,o,t,a))}},6863:(t,e,n)=>{var r=n(3667),i=n(7667),s=n(4630),o=n(838),a=n(6663),u=n(1690),c=n(4444),l=n(7679),h="[object Arguments]",d="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,g,m,y){var v=u(t),_=u(e),w=v?d:a(t),b=_?d:a(e),x=(w=w==h?f:w)==f,E=(b=b==h?f:b)==f,T=w==b;if(T&&c(t)){if(!c(e))return!1;v=!0,x=!1}if(T&&!x)return y||(y=new r),v||l(t)?i(t,e,n,g,m,y):s(t,e,w,n,g,m,y);if(!(1&n)){var S=x&&p.call(t,"__wrapped__"),k=E&&p.call(e,"__wrapped__");if(S||k){var I=S?t.value():t,C=k?e.value():e;return y||(y=new r),m(I,C,n,g,y)}}return!!T&&(y||(y=new r),o(t,e,n,g,m,y))}},3434:(t,e,n)=>{var r=n(6663),i=n(7503);t.exports=function(t){return i(t)&&"[object Map]"==r(t)}},8783:(t,e,n)=>{var r=n(3667),i=n(696);t.exports=function(t,e,n,s){var o=n.length,a=o,u=!s;if(null==t)return!a;for(t=Object(t);o--;){var c=n[o];if(u&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<a;){var l=(c=n[o])[0],h=t[l],d=c[1];if(u&&c[2]){if(void 0===h&&!(l in t))return!1}else{var f=new r;if(s)var p=s(h,d,l,t,e,f);if(!(void 0===p?i(d,h,3,s,f):p))return!1}}return!0}},2469:t=>{t.exports=function(t){return t!=t}},3540:(t,e,n)=>{var r=n(5836),i=n(8466),s=n(3867),o=n(1217),a=/^\[object .+?Constructor\]$/,u=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!s(t)||i(t))&&(r(t)?u:a).test(o(t))}},7495:(t,e,n)=>{var r=n(6663),i=n(7503);t.exports=function(t){return i(t)&&"[object Set]"==r(t)}},9390:(t,e,n)=>{var r=n(2802),i=n(8613),s=n(7503),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,t.exports=function(t){return s(t)&&i(t.length)&&!!o[r(t)]}},5245:(t,e,n)=>{var r=n(9433),i=n(8608),s=n(290),o=n(1690),a=n(3354);t.exports=function(t){return"function"==typeof t?t:null==t?s:"object"==typeof t?o(t)?i(t[0],t[1]):r(t):a(t)}},2488:(t,e,n)=>{var r=n(8845),i=n(6700),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))s.call(t,n)&&"constructor"!=n&&e.push(n);return e}},762:(t,e,n)=>{var r=n(3867),i=n(8845),s=n(5618),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return s(t);var e=i(t),n=[];for(var a in t)("constructor"!=a||!e&&o.call(t,a))&&n.push(a);return n}},1054:t=>{t.exports=function(t,e){return t<e}},8641:(t,e,n)=>{var r=n(9026),i=n(3406);t.exports=function(t,e){var n=-1,s=i(t)?Array(t.length):[];return r(t,function(t,r,i){s[++n]=e(t,r,i)}),s}},9433:(t,e,n)=>{var r=n(8783),i=n(8834),s=n(3587);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?s(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},8608:(t,e,n)=>{var r=n(696),i=n(8102),s=n(8303),o=n(9743),a=n(5774),u=n(3587),c=n(2773);t.exports=function(t,e){return o(t)&&a(e)?u(c(t),e):function(n){var o=i(n,t);return void 0===o&&o===e?s(n,t):r(e,o,3)}}},9085:(t,e,n)=>{var r=n(3667),i=n(3530),s=n(5290),o=n(3607),a=n(3867),u=n(2970),c=n(5959);t.exports=function t(e,n,l,h,d){e!==n&&s(n,function(s,u){if(d||(d=new r),a(s))o(e,n,u,l,t,h,d);else{var f=h?h(c(e,u),s,u+"",e,n,d):void 0;void 0===f&&(f=s),i(e,u,f)}},u)}},3607:(t,e,n)=>{var r=n(3530),i=n(694),s=n(6282),o=n(3595),a=n(1563),u=n(2952),c=n(1690),l=n(2027),h=n(4444),d=n(5836),f=n(3867),p=n(2358),g=n(7679),m=n(5959),y=n(1413);t.exports=function(t,e,n,v,_,w,b){var x=m(t,n),E=m(e,n),T=b.get(E);if(T)r(t,n,T);else{var S=w?w(x,E,n+"",t,e,b):void 0,k=void 0===S;if(k){var I=c(E),C=!I&&h(E),A=!I&&!C&&g(E);S=E,I||C||A?c(x)?S=x:l(x)?S=o(x):C?(k=!1,S=i(E,!0)):A?(k=!1,S=s(E,!0)):S=[]:p(E)||u(E)?(S=x,u(x)?S=y(x):f(x)&&!d(x)||(S=a(E))):k=!1}k&&(b.set(E,S),_(S,E,v,w,b),b.delete(E)),r(t,n,S)}}},7977:(t,e,n)=>{var r=n(4992),i=n(3436),s=n(5245),o=n(8641),a=n(8421),u=n(544),c=n(5379),l=n(290),h=n(1690);t.exports=function(t,e,n){e=e.length?r(e,function(t){return h(t)?function(e){return i(e,1===t.length?t[0]:t)}:t}):[l];var d=-1;e=r(e,u(s));var f=o(t,function(t,n,i){return{criteria:r(e,function(e){return e(t)}),index:++d,value:t}});return a(f,function(t,e){return c(t,e,n)})}},6737:(t,e,n)=>{var r=n(2897),i=n(8303);t.exports=function(t,e){return r(t,e,function(e,n){return i(t,n)})}},2897:(t,e,n)=>{var r=n(3436),i=n(8262),s=n(4667);t.exports=function(t,e,n){for(var o=-1,a=e.length,u={};++o<a;){var c=e[o],l=r(t,c);n(l,c)&&i(u,s(c,t),l)}return u}},8840:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},9866:(t,e,n)=>{var r=n(3436);t.exports=function(t){return function(e){return r(e,t)}}},863:t=>{var e=Math.ceil,n=Math.max;t.exports=function(t,r,i,s){for(var o=-1,a=n(e((r-t)/(i||1)),0),u=Array(a);a--;)u[s?a:++o]=t,t+=i;return u}},5105:t=>{t.exports=function(t,e,n,r,i){return i(t,function(t,i,s){n=r?(r=!1,t):e(n,t,i,s)}),n}},4441:(t,e,n)=>{var r=n(290),i=n(5529),s=n(9009);t.exports=function(t,e){return s(i(t,e,r),t+"")}},8262:(t,e,n)=>{var r=n(3898),i=n(4667),s=n(968),o=n(3867),a=n(2773);t.exports=function(t,e,n,u){if(!o(t))return t;for(var c=-1,l=(e=i(e,t)).length,h=l-1,d=t;null!=d&&++c<l;){var f=a(e[c]),p=n;if("__proto__"===f||"constructor"===f||"prototype"===f)return t;if(c!=h){var g=d[f];void 0===(p=u?u(g,f,d):void 0)&&(p=o(g)?g:s(e[c+1])?[]:{})}r(d,f,p),d=d[f]}return t}},9372:(t,e,n)=>{var r=n(5654),i=n(395),s=n(290);t.exports=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:s},8421:t=>{t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},8282:t=>{t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},8166:(t,e,n)=>{var r=n(7333),i=n(4992),s=n(1690),o=n(7786),a=r?r.prototype:void 0,u=a?a.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(s(e))return i(e,t)+"";if(o(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},3743:(t,e,n)=>{var r=n(7478),i=/^\s+/;t.exports=function(t){return t?t.slice(0,r(t)+1).replace(i,""):t}},544:t=>{t.exports=function(t){return function(e){return t(e)}}},3987:(t,e,n)=>{var r=n(8690),i=n(5242),s=n(679),o=n(3747),a=n(2252),u=n(7673);t.exports=function(t,e,n){var c=-1,l=i,h=t.length,d=!0,f=[],p=f;if(n)d=!1,l=s;else if(h>=200){var g=e?null:a(t);if(g)return u(g);d=!1,l=o,p=new r}else p=e?[]:f;t:for(;++c<h;){var m=t[c],y=e?e(m):m;if(m=n||0!==m?m:0,d&&y==y){for(var v=p.length;v--;)if(p[v]===y)continue t;e&&p.push(y),f.push(m)}else l(p,y,n)||(p!==f&&p.push(y),f.push(m))}return f}},253:(t,e,n)=>{var r=n(4992);t.exports=function(t,e){return r(e,function(e){return t[e]})}},5687:t=>{t.exports=function(t,e,n){for(var r=-1,i=t.length,s=e.length,o={};++r<i;)n(o,t[r],r<s?e[r]:void 0);return o}},3747:t=>{t.exports=function(t,e){return t.has(e)}},8727:(t,e,n)=>{var r=n(290);t.exports=function(t){return"function"==typeof t?t:r}},4667:(t,e,n)=>{var r=n(1690),i=n(9743),s=n(9775),o=n(1233);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:s(o(t))}},8461:(t,e,n)=>{var r=n(6820);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},694:(t,e,n)=>{t=n.nmd(t);var r=n(7038),i=e&&!e.nodeType&&e,s=i&&t&&!t.nodeType&&t,o=s&&s.exports===i?r.Buffer:void 0,a=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=a?a(n):new t.constructor(n);return t.copy(r),r}},9757:(t,e,n)=>{var r=n(8461);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},3615:t=>{var e=/\w*$/;t.exports=function(t){var n=new t.constructor(t.source,e.exec(t));return n.lastIndex=t.lastIndex,n}},2282:(t,e,n)=>{var r=n(7333),i=r?r.prototype:void 0,s=i?i.valueOf:void 0;t.exports=function(t){return s?Object(s.call(t)):{}}},6282:(t,e,n)=>{var r=n(8461);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},809:(t,e,n)=>{var r=n(7786);t.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,s=t==t,o=r(t),a=void 0!==e,u=null===e,c=e==e,l=r(e);if(!u&&!l&&!o&&t>e||o&&a&&c&&!u&&!l||i&&a&&c||!n&&c||!s)return 1;if(!i&&!o&&!l&&t<e||l&&n&&s&&!i&&!o||u&&n&&s||!a&&s||!c)return-1}return 0}},5379:(t,e,n)=>{var r=n(809);t.exports=function(t,e,n){for(var i=-1,s=t.criteria,o=e.criteria,a=s.length,u=n.length;++i<a;){var c=r(s[i],o[i]);if(c)return i>=u?c:c*("desc"==n[i]?-1:1)}return t.index-e.index}},3595:t=>{t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},1694:(t,e,n)=>{var r=n(3898),i=n(2007);t.exports=function(t,e,n,s){var o=!n;n||(n={});for(var a=-1,u=e.length;++a<u;){var c=e[a],l=s?s(n[c],t[c],c,n,t):void 0;void 0===l&&(l=t[c]),o?i(n,c,l):r(n,c,l)}return n}},4746:(t,e,n)=>{var r=n(1694),i=n(296);t.exports=function(t,e){return r(t,i(t),e)}},8857:(t,e,n)=>{var r=n(1694),i=n(9572);t.exports=function(t,e){return r(t,i(t),e)}},3412:(t,e,n)=>{var r=n(7038);t.exports=r["__core-js_shared__"]},906:(t,e,n)=>{var r=n(4441),i=n(1100);t.exports=function(t){return r(function(e,n){var r=-1,s=n.length,o=s>1?n[s-1]:void 0,a=s>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(s--,o):void 0,a&&i(n[0],n[1],a)&&(o=s<3?void 0:o,s=1),e=Object(e);++r<s;){var u=n[r];u&&t(e,u,r,o)}return e})}},9889:(t,e,n)=>{var r=n(3406);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var s=n.length,o=e?s:-1,a=Object(n);(e?o--:++o<s)&&!1!==i(a[o],o,a););return n}}},8269:t=>{t.exports=function(t){return function(e,n,r){for(var i=-1,s=Object(e),o=r(e),a=o.length;a--;){var u=o[t?a:++i];if(!1===n(s[u],u,s))break}return e}}},4674:(t,e,n)=>{var r=n(5245),i=n(3406),s=n(9108);t.exports=function(t){return function(e,n,o){var a=Object(e);if(!i(e)){var u=r(n,3);e=s(e),n=function(t){return u(a[t],t,a)}}var c=t(e,n,o);return c>-1?a[u?e[c]:c]:void 0}}},8710:(t,e,n)=>{var r=n(863),i=n(1100),s=n(5152);t.exports=function(t){return function(e,n,o){return o&&"number"!=typeof o&&i(e,n,o)&&(n=o=void 0),e=s(e),void 0===n?(n=e,e=0):n=s(n),o=void 0===o?e<n?1:-1:s(o),r(e,n,o,t)}}},2252:(t,e,n)=>{var r=n(4918),i=n(9122),s=n(7673),o=r&&1/s(new r([,-0]))[1]==1/0?function(t){return new r(t)}:i;t.exports=o},395:(t,e,n)=>{var r=n(4153),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},7667:(t,e,n)=>{var r=n(8690),i=n(8141),s=n(3747);t.exports=function(t,e,n,o,a,u){var c=1&n,l=t.length,h=e.length;if(l!=h&&!(c&&h>l))return!1;var d=u.get(t),f=u.get(e);if(d&&f)return d==e&&f==t;var p=-1,g=!0,m=2&n?new r:void 0;for(u.set(t,e),u.set(e,t);++p<l;){var y=t[p],v=e[p];if(o)var _=c?o(v,y,p,e,t,u):o(y,v,p,t,e,u);if(void 0!==_){if(_)continue;g=!1;break}if(m){if(!i(e,function(t,e){if(!s(m,e)&&(y===t||a(y,t,n,o,u)))return m.push(e)})){g=!1;break}}else if(y!==v&&!a(y,v,n,o,u)){g=!1;break}}return u.delete(t),u.delete(e),g}},4630:(t,e,n)=>{var r=n(7333),i=n(6820),s=n(1166),o=n(7667),a=n(7461),u=n(7673),c=r?r.prototype:void 0,l=c?c.valueOf:void 0;t.exports=function(t,e,n,r,c,h,d){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var f=a;case"[object Set]":if(f||(f=u),t.size!=e.size&&!(1&r))return!1;var p=d.get(t);if(p)return p==e;r|=2,d.set(t,e);var g=o(f(t),f(e),r,c,h,d);return d.delete(t),g;case"[object Symbol]":if(l)return l.call(t)==l.call(e)}return!1}},838:(t,e,n)=>{var r=n(8605),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,s,o,a){var u=1&n,c=r(t),l=c.length;if(l!=r(e).length&&!u)return!1;for(var h=l;h--;){var d=c[h];if(!(u?d in e:i.call(e,d)))return!1}var f=a.get(t),p=a.get(e);if(f&&p)return f==e&&p==t;var g=!0;a.set(t,e),a.set(e,t);for(var m=u;++h<l;){var y=t[d=c[h]],v=e[d];if(s)var _=u?s(v,y,d,e,t,a):s(y,v,d,t,e,a);if(!(void 0===_?y===v||o(y,v,n,s,a):_)){g=!1;break}m||(m="constructor"==d)}if(g&&!m){var w=t.constructor,b=e.constructor;w==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof b&&b instanceof b||(g=!1)}return a.delete(t),a.delete(e),g}},58:(t,e,n)=>{var r=n(4694),i=n(5529),s=n(9009);t.exports=function(t){return s(i(t,void 0,r),t+"")}},1138:t=>{var e="object"==typeof global&&global&&global.Object===Object&&global;t.exports=e},8605:(t,e,n)=>{var r=n(9215),i=n(296),s=n(9108);t.exports=function(t){return r(t,s,i)}},1675:(t,e,n)=>{var r=n(9215),i=n(9572),s=n(2970);t.exports=function(t){return r(t,s,i)}},5556:(t,e,n)=>{var r=n(6586);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},8834:(t,e,n)=>{var r=n(5774),i=n(9108);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var s=e[n],o=t[s];e[n]=[s,o,r(o)]}return e}},4153:(t,e,n)=>{var r=n(3540),i=n(6825);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},2398:(t,e,n)=>{var r=n(3332)(Object.getPrototypeOf,Object);t.exports=r},1613:(t,e,n)=>{var r=n(7333),i=Object.prototype,s=i.hasOwnProperty,o=i.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=s.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(u){}var i=o.call(t);return r&&(e?t[a]=n:delete t[a]),i}},296:(t,e,n)=>{var r=n(1375),i=n(5336),s=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols;t.exports=o?function(t){return null==t?[]:(t=Object(t),r(o(t),function(e){return s.call(t,e)}))}:i},9572:(t,e,n)=>{var r=n(4165),i=n(2398),s=n(296),o=n(5336);t.exports=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,s(t)),t=i(t);return e}:o},6663:(t,e,n)=>{var r=n(1235),i=n(9046),s=n(7129),o=n(4918),a=n(4203),u=n(2802),c=n(1217),l="[object Map]",h="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",g=c(r),m=c(i),y=c(s),v=c(o),_=c(a),w=u;(r&&w(new r(new ArrayBuffer(1)))!=p||i&&w(new i)!=l||s&&w(s.resolve())!=h||o&&w(new o)!=d||a&&w(new a)!=f)&&(w=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case g:return p;case m:return l;case y:return h;case v:return d;case _:return f}return e}),t.exports=w},6825:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},2138:(t,e,n)=>{var r=n(4667),i=n(2952),s=n(1690),o=n(968),a=n(8613),u=n(2773);t.exports=function(t,e,n){for(var c=-1,l=(e=r(e,t)).length,h=!1;++c<l;){var d=u(e[c]);if(!(h=null!=t&&n(t,d)))break;t=t[d]}return h||++c!=l?h:!!(l=null==t?0:t.length)&&a(l)&&o(d,l)&&(s(t)||i(t))}},407:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},9410:(t,e,n)=>{var r=n(5969);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},1143:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},604:(t,e,n)=>{var r=n(5969),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},584:(t,e,n)=>{var r=n(5969),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},7792:(t,e,n)=>{var r=n(5969);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},2963:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t){var n=t.length,r=new t.constructor(n);return n&&"string"==typeof t[0]&&e.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},2143:(t,e,n)=>{var r=n(8461),i=n(9757),s=n(3615),o=n(2282),a=n(6282);t.exports=function(t,e,n){var u=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new u(+t);case"[object DataView]":return i(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(t,n);case"[object Map]":return new u;case"[object Number]":case"[object String]":return new u(t);case"[object RegExp]":return s(t);case"[object Set]":return new u;case"[object Symbol]":return o(t)}}},1563:(t,e,n)=>{var r=n(920),i=n(2398),s=n(8845);t.exports=function(t){return"function"!=typeof t.constructor||s(t)?{}:r(i(t))}},1006:(t,e,n)=>{var r=n(7333),i=n(2952),s=n(1690),o=r?r.isConcatSpreadable:void 0;t.exports=function(t){return s(t)||i(t)||!!(o&&t&&t[o])}},968:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}},1100:(t,e,n)=>{var r=n(1166),i=n(3406),s=n(968),o=n(3867);t.exports=function(t,e,n){if(!o(n))return!1;var a=typeof e;return!!("number"==a?i(n)&&s(e,n.length):"string"==a&&e in n)&&r(n[e],t)}},9743:(t,e,n)=>{var r=n(1690),i=n(7786),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||o.test(t)||!s.test(t)||null!=e&&t in Object(e)}},6586:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},8466:(t,e,n)=>{var r,i=n(3412),s=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!s&&s in t}},8845:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},5774:(t,e,n)=>{var r=n(3867);t.exports=function(t){return t==t&&!r(t)}},3391:t=>{t.exports=function(){this.__data__=[],this.size=0}},8971:(t,e,n)=>{var r=n(5758),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},4550:(t,e,n)=>{var r=n(5758);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},3913:(t,e,n)=>{var r=n(5758);t.exports=function(t){return r(this.__data__,t)>-1}},8944:(t,e,n)=>{var r=n(5758);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},536:(t,e,n)=>{var r=n(1505),i=n(3545),s=n(9046);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(s||i),string:new r}}},1502:(t,e,n)=>{var r=n(5556);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},4960:(t,e,n)=>{var r=n(5556);t.exports=function(t){return r(this,t).get(t)}},1539:(t,e,n)=>{var r=n(5556);t.exports=function(t){return r(this,t).has(t)}},4138:(t,e,n)=>{var r=n(5556);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},7461:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}},3587:t=>{t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},3911:(t,e,n)=>{var r=n(7425);t.exports=function(t){var e=r(t,function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}},5969:(t,e,n)=>{var r=n(4153)(Object,"create");t.exports=r},6700:(t,e,n)=>{var r=n(3332)(Object.keys,Object);t.exports=r},5618:t=>{t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},938:(t,e,n)=>{t=n.nmd(t);var r=n(1138),i=e&&!e.nodeType&&e,s=i&&t&&!t.nodeType&&t,o=s&&s.exports===i&&r.process,a=function(){try{return s&&s.require&&s.require("util").types||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=a},1244:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},3332:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},5529:(t,e,n)=>{var r=n(1638),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var s=arguments,o=-1,a=i(s.length-e,0),u=Array(a);++o<a;)u[o]=s[e+o];o=-1;for(var c=Array(e+1);++o<e;)c[o]=s[o];return c[e]=n(u),r(t,this,c)}}},7038:(t,e,n)=>{var r=n(1138),i="object"==typeof self&&self&&self.Object===Object&&self,s=r||i||Function("return this")();t.exports=s},5959:t=>{t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},365:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},8235:t=>{t.exports=function(t){return this.__data__.has(t)}},7673:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},9009:(t,e,n)=>{var r=n(9372),i=n(4094)(r);t.exports=i},4094:t=>{var e=Date.now;t.exports=function(t){var n=0,r=0;return function(){var i=e(),s=16-(i-r);if(r=i,s>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},8034:(t,e,n)=>{var r=n(3545);t.exports=function(){this.__data__=new r,this.size=0}},7238:t=>{t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},5887:t=>{t.exports=function(t){return this.__data__.get(t)}},1450:t=>{t.exports=function(t){return this.__data__.has(t)}},1386:(t,e,n)=>{var r=n(3545),i=n(9046),s=n(3177);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new s(o)}return n.set(t,e),this.size=n.size,this}},4299:t=>{t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},122:(t,e,n)=>{var r=n(8956),i=n(407),s=n(5154);t.exports=function(t){return i(t)?s(t):r(t)}},9775:(t,e,n)=>{var r=n(3911),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,o=r(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,function(t,n,r,i){e.push(r?i.replace(s,"$1"):n||t)}),e});t.exports=o},2773:(t,e,n)=>{var r=n(7786);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},1217:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(n){}try{return t+""}catch(n){}}return""}},7478:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},5154:t=>{var e="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",n="\\ud83c[\\udffb-\\udfff]",r="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",o="(?:"+e+"|"+n+")?",a="[\\ufe0e\\ufe0f]?",u=a+o+"(?:\\u200d(?:"+[r,i,s].join("|")+")"+a+o+")*",c="(?:"+[r+e+"?",e,i,s,"[\\ud800-\\udfff]"].join("|")+")",l=RegExp(n+"(?="+n+")|"+c+u,"g");t.exports=function(t){for(var e=l.lastIndex=0;l.test(t);)++e;return e}},3742:(t,e,n)=>{var r=n(7007);t.exports=function(t){return r(t,4)}},7524:(t,e,n)=>{var r=n(7007);t.exports=function(t){return r(t,5)}},5654:t=>{t.exports=function(t){return function(){return t}}},6726:(t,e,n)=>{var r=n(4441),i=n(1166),s=n(1100),o=n(2970),a=Object.prototype,u=a.hasOwnProperty,c=r(function(t,e){t=Object(t);var n=-1,r=e.length,c=r>2?e[2]:void 0;for(c&&s(e[0],e[1],c)&&(r=1);++n<r;)for(var l=e[n],h=o(l),d=-1,f=h.length;++d<f;){var p=h[d],g=t[p];(void 0===g||i(g,a[p])&&!u.call(t,p))&&(t[p]=l[p])}return t});t.exports=c},3718:(t,e,n)=>{t.exports=n(4733)},1166:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},3834:(t,e,n)=>{var r=n(1375),i=n(8711),s=n(5245),o=n(1690);t.exports=function(t,e){return(o(t)?r:i)(t,s(e,3))}},8990:(t,e,n)=>{var r=n(4674)(n(4857));t.exports=r},4857:(t,e,n)=>{var r=n(2229),i=n(5245),s=n(2781),o=Math.max;t.exports=function(t,e,n){var a=null==t?0:t.length;if(!a)return-1;var u=null==n?0:s(n);return u<0&&(u=o(a+u,0)),r(t,i(e,3),u)}},4694:(t,e,n)=>{var r=n(6369);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},4733:(t,e,n)=>{var r=n(4500),i=n(9026),s=n(8727),o=n(1690);t.exports=function(t,e){return(o(t)?r:i)(t,s(e))}},8577:(t,e,n)=>{var r=n(5290),i=n(8727),s=n(2970);t.exports=function(t,e){return null==t?t:r(t,i(e),s)}},8102:(t,e,n)=>{var r=n(3436);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},2335:(t,e,n)=>{var r=n(731),i=n(2138);t.exports=function(t,e){return null!=t&&i(t,e,r)}},8303:(t,e,n)=>{var r=n(5333),i=n(2138);t.exports=function(t,e){return null!=t&&i(t,e,r)}},290:t=>{t.exports=function(t){return t}},2952:(t,e,n)=>{var r=n(7090),i=n(7503),s=Object.prototype,o=s.hasOwnProperty,a=s.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&o.call(t,"callee")&&!a.call(t,"callee")};t.exports=u},1690:t=>{t.exports=Array.isArray},3406:(t,e,n)=>{var r=n(5836),i=n(8613);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},2027:(t,e,n)=>{var r=n(3406),i=n(7503);t.exports=function(t){return i(t)&&r(t)}},4444:(t,e,n)=>{t=n.nmd(t);var r=n(7038),i=n(1711),s=e&&!e.nodeType&&e,o=s&&t&&!t.nodeType&&t,a=o&&o.exports===s?r.Buffer:void 0;t.exports=(a?a.isBuffer:void 0)||i},2232:(t,e,n)=>{var r=n(2488),i=n(6663),s=n(2952),o=n(1690),a=n(3406),u=n(4444),c=n(8845),l=n(7679),h=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(a(t)&&(o(t)||"string"==typeof t||"function"==typeof t.splice||u(t)||l(t)||s(t)))return!t.length;var e=i(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(c(t))return!r(t).length;for(var n in t)if(h.call(t,n))return!1;return!0}},5836:(t,e,n)=>{var r=n(2802),i=n(3867);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},8613:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},2e3:(t,e,n)=>{var r=n(3434),i=n(544),s=n(938),o=s&&s.isMap,a=o?i(o):r;t.exports=a},3867:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},7503:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},2358:(t,e,n)=>{var r=n(2802),i=n(2398),s=n(7503),o=Function.prototype.toString,a=Object.prototype.hasOwnProperty,u=o.call(Object);t.exports=function(t){if(!s(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=a.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&o.call(n)==u}},8855:(t,e,n)=>{var r=n(7495),i=n(544),s=n(938),o=s&&s.isSet,a=o?i(o):r;t.exports=a},4871:(t,e,n)=>{var r=n(2802),i=n(1690),s=n(7503);t.exports=function(t){return"string"==typeof t||!i(t)&&s(t)&&"[object String]"==r(t)}},7786:(t,e,n)=>{var r=n(2802),i=n(7503);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},7679:(t,e,n)=>{var r=n(9390),i=n(544),s=n(938),o=s&&s.isTypedArray,a=o?i(o):r;t.exports=a},9569:t=>{t.exports=function(t){return void 0===t}},9108:(t,e,n)=>{var r=n(1890),i=n(2488),s=n(3406);t.exports=function(t){return s(t)?r(t):i(t)}},2970:(t,e,n)=>{var r=n(1890),i=n(762),s=n(3406);t.exports=function(t){return s(t)?r(t,!0):i(t)}},7842:t=>{t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},9718:(t,e,n)=>{var r=n(4992),i=n(5245),s=n(8641),o=n(1690);t.exports=function(t,e){return(o(t)?r:s)(t,i(e,3))}},182:(t,e,n)=>{var r=n(2007),i=n(8022),s=n(5245);t.exports=function(t,e){var n={};return e=s(e,3),i(t,function(t,i,s){r(n,i,e(t,i,s))}),n}},1334:(t,e,n)=>{var r=n(6681),i=n(8354),s=n(290);t.exports=function(t){return t&&t.length?r(t,s,i):void 0}},7425:(t,e,n)=>{var r=n(3177);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},3912:(t,e,n)=>{var r=n(9085),i=n(906)(function(t,e,n){r(t,e,n)});t.exports=i},1518:(t,e,n)=>{var r=n(6681),i=n(1054),s=n(290);t.exports=function(t){return t&&t.length?r(t,s,i):void 0}},5353:(t,e,n)=>{var r=n(6681),i=n(5245),s=n(1054);t.exports=function(t,e){return t&&t.length?r(t,i(e,2),s):void 0}},9122:t=>{t.exports=function(){}},765:(t,e,n)=>{var r=n(7038);t.exports=function(){return r.Date.now()}},1133:(t,e,n)=>{var r=n(6737),i=n(58)(function(t,e){return null==t?{}:r(t,e)});t.exports=i},3354:(t,e,n)=>{var r=n(8840),i=n(9866),s=n(9743),o=n(2773);t.exports=function(t){return s(t)?r(o(t)):i(t)}},1221:(t,e,n)=>{var r=n(8710)();t.exports=r},6101:(t,e,n)=>{var r=n(9731),i=n(9026),s=n(5245),o=n(5105),a=n(1690);t.exports=function(t,e,n){var u=a(t)?r:o,c=arguments.length<3;return u(t,s(e,4),n,c,i)}},4951:(t,e,n)=>{var r=n(2488),i=n(6663),s=n(3406),o=n(4871),a=n(122);t.exports=function(t){if(null==t)return 0;if(s(t))return o(t)?a(t):t.length;var e=i(t);return"[object Map]"==e||"[object Set]"==e?t.size:r(t).length}},280:(t,e,n)=>{var r=n(6369),i=n(7977),s=n(4441),o=n(1100),a=s(function(t,e){if(null==t)return[];var n=e.length;return n>1&&o(t,e[0],e[1])?e=[]:n>2&&o(e[0],e[1],e[2])&&(e=[e[0]]),i(t,r(e,1),[])});t.exports=a},5336:t=>{t.exports=function(){return[]}},1711:t=>{t.exports=function(){return!1}},5152:(t,e,n)=>{var r=n(5038);t.exports=function(t){return t?1/0===(t=r(t))||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},2781:(t,e,n)=>{var r=n(5152);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},5038:(t,e,n)=>{var r=n(3743),i=n(3867),s=n(7786),o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(s(t))return NaN;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=a.test(t);return n||u.test(t)?c(t.slice(2),n?2:8):o.test(t)?NaN:+t}},1413:(t,e,n)=>{var r=n(1694),i=n(2970);t.exports=function(t){return r(t,i(t))}},1233:(t,e,n)=>{var r=n(8166);t.exports=function(t){return null==t?"":r(t)}},3593:(t,e,n)=>{var r=n(4500),i=n(920),s=n(8022),o=n(5245),a=n(2398),u=n(1690),c=n(4444),l=n(5836),h=n(3867),d=n(7679);t.exports=function(t,e,n){var f=u(t),p=f||c(t)||d(t);if(e=o(e,4),null==n){var g=t&&t.constructor;n=p?f?new g:[]:h(t)&&l(g)?i(a(t)):{}}return(p?r:s)(t,function(t,r,i){return e(n,t,r,i)}),n}},9728:(t,e,n)=>{var r=n(6369),i=n(4441),s=n(3987),o=n(2027),a=i(function(t){return s(r(t,1,o,!0))});t.exports=a},5927:(t,e,n)=>{var r=n(1233),i=0;t.exports=function(t){var e=++i;return r(t)+e}},3348:(t,e,n)=>{var r=n(253),i=n(9108);t.exports=function(t){return null==t?[]:r(t,i(t))}},1507:(t,e,n)=>{var r=n(3898),i=n(5687);t.exports=function(t,e){return i(t||[],e||[],r)}},7574:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(7393),i=n(9181),s=n(6490),o=n(6554),a=n(4487),u=n(2494);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:o}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(s.c)}(t,e,n);if(a.add(o?o.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[o.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},6490:(t,e,n)=>{"use strict";n.d(e,{c:()=>s});var r=n(2494),i=n(4449);const s={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},9765:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(7574),i=n(7393),s=n(5319),o=n(7971),a=n(8858),u=n(9181);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new o.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new o.N;return this.hasError?(t.error(this.thrownError),s.w.EMPTY):this.isStopped?(t.complete(),s.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):s.w.EMPTY}}},8858:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(5319);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},7393:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(9105),i=n(6490),s=n(5319),o=n(9181),a=n(2494),u=n(4449);class c extends s.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[o.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,s){let o;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?o=e:e&&(o=e.next,n=e.error,s=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},5319:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(9796),i=n(1555),s=n(9105);const o=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();class a{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:n,_unsubscribe:u,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof a)e.remove(this);else if(null!==e)for(let r=0;r<e.length;++r)e[r].remove(this);if((0,s.m)(u)){n&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){t=h instanceof o?c(h.errors):[h]}}if((0,r.k)(l)){let e=-1,n=l.length;for(;++e<n;){const n=l[e];if((0,i.K)(n))try{n.unsubscribe()}catch(h){t=t||[],h instanceof o?t=t.concat(c(h.errors)):t.push(h)}}}if(t)throw new o(t)}add(t){let e=t;if(!t)return a.EMPTY;switch(typeof t){case"function":e=new a(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof a)){const t=e;e=new a,e._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=e;if(null===n)e._parentOrParents=this;else if(n instanceof a){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[e]:r.push(e),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var u;function c(t){return t.reduce((t,e)=>t.concat(e instanceof o?e.errors:e),[])}a.EMPTY=((u=new a).closed=!0,u)},2494:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:(t,e,n)=>{"use strict";n.d(e,{IY:()=>o,Ds:()=>a,ft:()=>u});var r=n(7393),i=n(7574),s=n(7444);class o extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,s.s)(t)(e)}catch(r){e.error(r)}return n}},2441:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>u});var r=n(9765),i=n(7574),s=n(5319),o=n(1307);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.w.EMPTY)),t}refCount(){return(0,o.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},9193:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>s});var r=n(7574);const i=new r.y(t=>t.complete());function s(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},4402:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(7574),i=n(7444),s=n(5319),o=n(6554),a=n(4087),u=n(377),c=n(4072),l=n(9489);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[o.L]}(t))return function(t,e){return new r.y(n=>{const r=new s.w;return r.add(e.schedule(()=>{const i=t[o.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new s.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new s.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},6693:(t,e,n)=>{"use strict";n.d(e,{n:()=>o});var r=n(7574),i=n(5015),s=n(4087);function o(t,e){return e?(0,s.r)(t,e):new r.y((0,i.V)(t))}},6682:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(7574),i=n(4869),s=n(3282),o=n(6693);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,s.J)(e)((0,o.n)(t,n))}},5917:(t,e,n)=>{"use strict";n.d(e,{of:()=>o});var r=n(4869),i=n(6693),s=n(4087);function o(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,s.r)(t,e)):(0,i.n)(t)}},8002:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(7393);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(t,e))}}class s{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new o(t,this.project,this.thisArg))}}class o extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},3282:(t,e,n)=>{"use strict";n.d(e,{J:()=>s});var r=n(9773),i=n(4487);function s(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},9773:(t,e,n)=>{"use strict";n.d(e,{zg:()=>o});var r=n(8002),i=n(4402),s=n(5345);function o(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?s=>s.pipe(o((n,s)=>(0,i.D)(t(n,s)).pipe((0,r.U)((t,r)=>e(n,t,s,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends s.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new s.IY(this),n=this.destination;n.add(e);const r=(0,s.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(t,e,n)=>{"use strict";n.d(e,{ht:()=>l,QV:()=>u});var r=n(7393),i=n(9193),s=n(5917),o=n(7574);class a{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,s.of)(this.value);case"E":return t=this.error,new o.y(e=>e.error(t));case"C":return(0,i.c)()}var t;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new a("N",t):a.undefinedValueNotification}static createError(t){return new a("E",void 0,t)}static createComplete(){return a.completeNotification}}function u(t,e=0){return function(n){return n.lift(new c(t,e))}}a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0);class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},1307:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(7393);function i(){return function(t){return t.lift(new s(t))}}class s{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new o(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},3101:(t,e,n)=>{"use strict";n.d(e,{R:()=>p});var r=n(7574);let i=1;const s=Promise.resolve(),o={};function a(t){return t in o&&(delete o[t],!0)}const u={setImmediate(t){const e=i++;return o[e]=!0,s.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(6465),l=n(6102);const h=new class extends l.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}});var d=n(9796);class f extends r.y{constructor(t,e=0,n=h){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,((0,d.k)(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=h)}static create(t,e=0,n=h){return new f(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(f.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function p(t,e=0){return function(n){return n.lift(new g(t,e))}}class g{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new f(e,this.delay,this.scheduler).subscribe(t)}}},3342:(t,e,n)=>{"use strict";n.d(e,{b:()=>o});var r=n(7393);function i(){}var s=n(9105);function o(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,s.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},4087:(t,e,n)=>{"use strict";n.d(e,{r:()=>s});var r=n(7574),i=n(5319);function s(t,e){return new r.y(n=>{const r=new i.w;let s=0;return r.add(e.schedule(function(){s!==t.length?(n.next(t[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:(t,e,n)=>{"use strict";n.d(e,{o:()=>s});var r=n(5319);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class s extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},6102:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},3637:(t,e,n)=>{"use strict";n.d(e,{z:()=>i,P:()=>s});var r=n(6465);const i=new(n(6102).v)(r.o),s=i},7771:(t,e,n)=>{"use strict";n.d(e,{c:()=>o,N:()=>s});var r=n(6465),i=n(6102);const s=new class extends i.v{}(class extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}),o=s},377:(t,e,n)=>{"use strict";n.d(e,{hZ:()=>r});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},4449:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},4487:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},9796:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=Array.isArray||(t=>t&&"number"==typeof t.length)},9489:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},9105:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},1555:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},4072:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},4869:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},7444:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(5015),i=n(4449),s=n(377),o=n(6554),a=n(9489),u=n(4072),c=n(1555);const l=t=>{if(t&&"function"==typeof t[o.L])return l=t,t=>{const e=l[o.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[s.hZ])return e=t,t=>{const n=e[s.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},5015:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},6703:(t,e,n)=>{"use strict";function r(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),r(n(46)),r(n(9755)),r(n(9737)),r(n(5872)),r(n(6573)),r(n(8833)),r(n(8640)),r(n(9739)),r(n(1468)),r(n(9347)),r(n(9516)),r(n(3294)),r(n(7262)),r(n(5259)),r(n(3535)),r(n(8344))},46:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(8640),o=function(t){function e(e){var n=t.call(this)||this,r=e;return r.trigger&&(n.trigger=r.trigger),r.kick&&(n.kick=r.kick),r.drag&&(n.drag=r.drag),r.on&&(n.on=r.on),n.dragstart=n.dragStart=s.Layout.dragStart,n.dragend=n.dragEnd=s.Layout.dragEnd,n}return i(e,t),e.prototype.trigger=function(t){},e.prototype.kick=function(){},e.prototype.drag=function(){},e.prototype.on=function(t,e){return this},e}(s.Layout);e.LayoutAdaptor=o,e.adaptor=function(t){return new o(t)}},8344:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8640),i=n(6573);e.gridify=function(t,e,n,r){return t.cola.start(0,0,0,10,!1),function(t,e,n,r){t.forEach(function(t){t.routerNode={name:t.name,bounds:t.bounds.inflate(-n)}}),e.forEach(function(e){e.routerNode={bounds:e.bounds.inflate(-r),children:(void 0!==e.groups?e.groups.map(function(e){return t.length+e.id}):[]).concat(void 0!==e.leaves?e.leaves.map(function(t){return t.index}):[])}});var s=t.concat(e).map(function(t,e){return t.routerNode.id=e,t.routerNode});return new i.GridRouter(s,{getChildren:function(t){return t.children},getBounds:function(t){return t.bounds}},n-r)}(t.cola.nodes(),t.cola.groups(),n,r).routeEdges(t.powerGraph.powerEdges,e,function(t){return t.source.routerNode.id},function(t){return t.target.routerNode.id})},e.powerGraphGridLayout=function(t,e,n){var i;t.nodes.forEach(function(t,e){return t.index=e}),(new r.Layout).avoidOverlaps(!1).nodes(t.nodes).links(t.links).powerGraphGroups(function(t){(i=t).groups.forEach(function(t){return t.padding=n})});var s=t.nodes.length,o=[],a=t.nodes.slice(0);return a.forEach(function(t,e){return t.index=e}),i.groups.forEach(function(t){var e=t.index=t.id+s;a.push(t),void 0!==t.leaves&&t.leaves.forEach(function(t){return o.push({source:e,target:t.index})}),void 0!==t.groups&&t.groups.forEach(function(t){return o.push({source:e,target:t.id+s})})}),i.powerEdges.forEach(function(t){o.push({source:t.source.index,target:t.target.index})}),(new r.Layout).size(e).nodes(a).links(o).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new r.Layout).convergenceThreshold(.001).size(e).avoidOverlaps(!0).nodes(t.nodes).links(t.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(t){(i=t).groups.forEach(function(t){t.padding=n})}).start(50,0,100,0,!1),powerGraph:i}}},9755:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8965),i=n(4910);e.d3adaptor=function(t){return!t||function(t){return t.version&&null!==t.version.match(/^3\./)}(t)?new r.D3StyleLayoutAdaptor:new i.D3StyleLayoutAdaptor(t)}},8965:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(8640),o=function(t){function e(){var e=t.call(this)||this;e.event=d3.dispatch(s.EventType[s.EventType.start],s.EventType[s.EventType.tick],s.EventType[s.EventType.end]);var n=e;return e.drag=function(){if(!t)var t=d3.behavior.drag().origin(s.Layout.dragOrigin).on("dragstart.d3adaptor",s.Layout.dragStart).on("drag.d3adaptor",function(t){s.Layout.drag(t,d3.event),n.resume()}).on("dragend.d3adaptor",s.Layout.dragEnd);if(!arguments.length)return t;this.call(t)},e}return i(e,t),e.prototype.trigger=function(t){var e={type:s.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event[e.type](e)},e.prototype.kick=function(){var e=this;d3.timer(function(){return t.prototype.tick.call(e)})},e.prototype.on=function(t,e){return this.event.on("string"==typeof t?t:s.EventType[t],e),this},e}(s.Layout);e.D3StyleLayoutAdaptor=o,e.d3adaptor=function(){return new o}},4910:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(8640),o=function(t){function e(e){var n=t.call(this)||this;n.d3Context=e,n.event=e.dispatch(s.EventType[s.EventType.start],s.EventType[s.EventType.tick],s.EventType[s.EventType.end]);var r=n;return n.drag=function(){if(!t)var t=e.drag().subject(s.Layout.dragOrigin).on("start.d3adaptor",s.Layout.dragStart).on("drag.d3adaptor",function(t){s.Layout.drag(t,e.event),r.resume()}).on("end.d3adaptor",s.Layout.dragEnd);if(!arguments.length)return t;arguments[0].call(t)},n}return i(e,t),e.prototype.trigger=function(t){var e={type:s.EventType[t.type],alpha:t.alpha,stress:t.stress};this.event.call(e.type,e)},e.prototype.kick=function(){var e=this,n=this.d3Context.timer(function(){return t.prototype.tick.call(e)&&n.stop()})},e.prototype.on=function(t,e){return this.event.on("string"==typeof t?t:s.EventType[t],e),this},e}(s.Layout);e.D3StyleLayoutAdaptor=o},9737:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.locks={}}return t.prototype.add=function(t,e){this.locks[t]=e},t.prototype.clear=function(){this.locks={}},t.prototype.isEmpty=function(){for(var t in this.locks)return!1;return!0},t.prototype.apply=function(t){for(var e in this.locks)t(Number(e),this.locks[e])},t}();e.Locks=n;var r=function(){function t(t,e,r){void 0===r&&(r=null),this.D=e,this.G=r,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new i,this.project=null,this.x=t,this.k=t.length;var s=this.n=t[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new n,this.minD=Number.MAX_VALUE;for(var o,a=s;a--;)for(o=s;--o>a;){var u=e[a][o];u>0&&u<this.minD&&(this.minD=u)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),a=this.k;a--;){for(this.g[a]=new Array(s),this.H[a]=new Array(s),o=s;o--;)this.H[a][o]=new Array(s);this.Hd[a]=new Array(s),this.a[a]=new Array(s),this.b[a]=new Array(s),this.c[a]=new Array(s),this.d[a]=new Array(s),this.e[a]=new Array(s),this.ia[a]=new Array(s),this.ib[a]=new Array(s),this.xtmp[a]=new Array(s)}}return t.createSquareMatrix=function(t,e){for(var n=new Array(t),r=0;r<t;++r){n[r]=new Array(t);for(var i=0;i<t;++i)n[r][i]=e(r,i)}return n},t.prototype.offsetDir=function(){for(var t=this,e=new Array(this.k),n=0,r=0;r<this.k;++r){var i=e[r]=this.random.getNextBetween(.01,1)-.5;n+=i*i}return n=Math.sqrt(n),e.map(function(e){return e*(t.minD/n)})},t.prototype.computeDerivatives=function(t){var e=this,n=this.n;if(!(n<1)){for(var r,i=new Array(this.k),s=new Array(this.k),o=new Array(this.k),a=0,u=0;u<n;++u){for(r=0;r<this.k;++r)o[r]=this.g[r][u]=0;for(var c=0;c<n;++c)if(u!==c){for(var l=n;l--;){var h=0;for(r=0;r<this.k;++r){var d=i[r]=t[r][u]-t[r][c];h+=s[r]=d*d}if(h>1e-9)break;var f=this.offsetDir();for(r=0;r<this.k;++r)t[r][c]+=f[r]}var p=Math.sqrt(h),g=this.D[u][c],m=null!=this.G?this.G[u][c]:1;if(m>1&&p>g||!isFinite(g))for(r=0;r<this.k;++r)this.H[r][u][c]=0;else{m>1&&(m=1);var y=g*g,v=2*m*(p-g)/(y*p),_=p*p*p,w=2*-m/(y*_);for(isFinite(v)||console.log(v),r=0;r<this.k;++r)this.g[r][u]+=i[r]*v,o[r]-=this.H[r][u][c]=w*(_+g*(s[r]-h)+p*h)}}for(r=0;r<this.k;++r)a=Math.max(a,this.H[r][u][u]=o[r])}var b=this.snapGridSize/2,x=this.snapGridSize,E=this.snapStrength/(b*b),T=this.numGridSnapNodes;for(u=0;u<T;++u)for(r=0;r<this.k;++r){var S=this.x[r][u],k=S/x,I=k%1,C=k-I;-b<(d=Math.abs(I)<=.5?S-C*x:S>0?S-(C+1)*x:S-(C-1)*x)&&d<=b&&(this.scaleSnapByMaxH?(this.g[r][u]+=a*E*d,this.H[r][u][u]+=a*E):(this.g[r][u]+=E*d,this.H[r][u][u]+=E))}this.locks.isEmpty()||this.locks.apply(function(n,i){for(r=0;r<e.k;++r)e.H[r][n][n]+=a,e.g[r][n]-=a*(i[r]-t[r][n])})}},t.dotProd=function(t,e){for(var n=0,r=t.length;r--;)n+=t[r]*e[r];return n},t.rightMultiply=function(e,n,r){for(var i=e.length;i--;)r[i]=t.dotProd(e[i],n)},t.prototype.computeStepSize=function(e){for(var n=0,r=0,i=0;i<this.k;++i)n+=t.dotProd(this.g[i],e[i]),t.rightMultiply(this.H[i],e[i],this.Hd[i]),r+=t.dotProd(e[i],this.Hd[i]);return 0!==r&&isFinite(r)?1*n/r:0},t.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var t=this.computeStepSize(this.g),e=0;e<this.k;++e)this.takeDescentStep(this.x[e],this.g[e],t);return this.computeStress()},t.copy=function(t,e){for(var n=t.length,r=e[0].length,i=0;i<n;++i)for(var s=0;s<r;++s)e[i][s]=t[i][s]},t.prototype.stepAndProject=function(e,n,r,i){t.copy(e,n),this.takeDescentStep(n[0],r[0],i),this.project&&this.project[0](e[0],e[1],n[0]),this.takeDescentStep(n[1],r[1],i),this.project&&this.project[1](n[0],e[1],n[1]);for(var s=2;s<this.k;s++)this.takeDescentStep(n[s],r[s],i)},t.mApply=function(t,e,n){for(var r=t;r-- >0;)for(var i=e;i-- >0;)n(r,i)},t.prototype.matrixApply=function(e){t.mApply(this.k,this.n,e)},t.prototype.computeNextPosition=function(t,e){var n=this;this.computeDerivatives(t);var r=this.computeStepSize(this.g);if(this.stepAndProject(t,e,this.g,r),this.project){this.matrixApply(function(r,i){return n.e[r][i]=t[r][i]-e[r][i]});var i=this.computeStepSize(this.e);i=Math.max(.2,Math.min(i,1)),this.stepAndProject(t,e,this.e,i)}},t.prototype.run=function(t){for(var e=Number.MAX_VALUE,n=!1;!n&&t-- >0;){var r=this.rungeKutta();n=Math.abs(e/r-1)<this.threshold,e=r}return e},t.prototype.rungeKutta=function(){var e=this;this.computeNextPosition(this.x,this.a),t.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),t.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var n=0;return this.matrixApply(function(t,r){var i=(e.a[t][r]+2*e.b[t][r]+2*e.c[t][r]+e.d[t][r])/6,s=e.x[t][r]-i;n+=s*s,e.x[t][r]=i}),n},t.mid=function(e,n,r){t.mApply(e.length,e[0].length,function(t,i){return r[t][i]=e[t][i]+(n[t][i]-e[t][i])/2})},t.prototype.takeDescentStep=function(t,e,n){for(var r=0;r<this.n;++r)t[r]=t[r]-n*e[r]},t.prototype.computeStress=function(){for(var t=0,e=0,n=this.n-1;e<n;++e)for(var r=e+1,i=this.n;r<i;++r){for(var s=0,o=0;o<this.k;++o){var a=this.x[o][e]-this.x[o][r];s+=a*a}s=Math.sqrt(s);var u=this.D[e][r];if(isFinite(u)){var c=u-s;t+=c*c/(u*u)}}return t},t.zeroDistance=1e-10,t}();e.Descent=r;var i=function(){function t(t){void 0===t&&(t=1),this.seed=t,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return t.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},t.prototype.getNextBetween=function(t,e){return t+this.getNext()*(e-t)},t}();e.PseudoRandom=i},5872:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(7262),o=function(){};e.Point=o;var a=function(t,e,n,r){this.x1=t,this.y1=e,this.x2=n,this.y2=r};e.LineSegment=a;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(o);function c(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)}function l(t,e,n){return c(t,e,n)>0}function h(t,e,n){return c(t,e,n)<0}function d(t,e){var n,r,i,s,o=e.length-1;if(h(t,e[1],e[0])&&!l(t,e[o-1],e[0]))return 0;for(n=0,r=o;;){if(r-n==1)return l(t,e[n],e[r])?n:r;if((s=h(t,e[(i=Math.floor((n+r)/2))+1],e[i]))&&!l(t,e[i-1],e[i]))return i;l(t,e[n+1],e[n])?s||l(t,e[n],e[i])?r=i:n=i:s&&h(t,e[n],e[i])?r=i:n=i}}function f(t,e){var n,r,i,s,o=e.length-1;if(l(t,e[o-1],e[0])&&!h(t,e[1],e[0]))return 0;for(n=0,r=o;;){if(r-n==1)return h(t,e[n],e[r])?n:r;if(s=h(t,e[(i=Math.floor((n+r)/2))+1],e[i]),l(t,e[i-1],e[i])&&!s)return i;h(t,e[n+1],e[n])?s?h(t,e[n],e[i])?r=i:n=i:r=i:s?n=i:l(t,e[n],e[i])?r=i:n=i}}function p(t,e,n,r,i,s){var o,a;a=r(t[o=n(e[0],t)],e);for(var u=!1;!u;){for(u=!0;o===t.length-1&&(o=0),!i(e[a],t[o],t[o+1]);)++o;for(;0===a&&(a=e.length-1),!s(t[o],e[a],e[a-1]);)--a,u=!1}return{t1:o,t2:a}}function g(t,e){return p(t,e,d,f,l,h)}e.PolyPoint=u,e.isLeft=c,e.ConvexHull=function(t){var e,n=t.slice(0).sort(function(t,e){return t.x!==e.x?e.x-t.x:e.y-t.y}),r=t.length,i=n[0].x;for(e=1;e<r&&n[e].x===i;++e);var s=e-1,o=[];if(o.push(n[0]),s===r-1)n[s].y!==n[0].y&&o.push(n[s]);else{var a,u=r-1,l=n[r-1].x;for(e=r-2;e>=0&&n[e].x===l;e--);for(a=e+1,e=s;++e<=a;)if(!(c(n[0],n[a],n[e])>=0&&e<a)){for(;o.length>1&&!(c(o[o.length-2],o[o.length-1],n[e])>0);)o.length-=1;0!=e&&o.push(n[e])}u!=a&&o.push(n[u]);var h=o.length;for(e=a;--e>=s;)if(!(c(n[u],n[s],n[e])>=0&&e>s)){for(;o.length>h&&!(c(o[o.length-2],o[o.length-1],n[e])>0);)o.length-=1;0!=e&&o.push(n[e])}}return o},e.clockwiseRadialSweep=function(t,e,n){e.slice(0).sort(function(e,n){return Math.atan2(e.y-t.y,e.x-t.x)-Math.atan2(n.y-t.y,n.x-t.x)}).forEach(n)},e.tangent_PolyPolyC=p,e.LRtangent_PolyPolyC=function(t,e){var n=g(e,t);return{t1:n.t2,t2:n.t1}},e.RLtangent_PolyPolyC=g,e.LLtangent_PolyPolyC=function(t,e){return p(t,e,f,f,h,h)},e.RRtangent_PolyPolyC=function(t,e){return p(t,e,d,d,l,l)};var m=function(t,e){this.t1=t,this.t2=e};e.BiTangent=m;var y=function(){};e.BiTangents=y;var v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(o);e.TVGPoint=v;var _=function(t,e,n,r){this.id=t,this.polyid=e,this.polyvertid=n,this.p=r,r.vv=this};e.VisibilityVertex=_;var w=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.length=function(){var t=this.source.p.x-this.target.p.x,e=this.source.p.y-this.target.p.y;return Math.sqrt(t*t+e*e)},t}();e.VisibilityEdge=w;var b=function(){function t(t,e){if(this.P=t,this.V=[],this.E=[],e)this.V=e.V.slice(0),this.E=e.E.slice(0);else{for(var n=t.length,r=0;r<n;r++){for(var i=t[r],s=0;s<i.length;++s){var o=new _(this.V.length,r,s,i[s]);this.V.push(o),s>0&&this.E.push(new w(i[s-1].vv,o))}i.length>1&&this.E.push(new w(i[0].vv,i[i.length-1].vv))}for(r=0;r<n-1;r++){var a=t[r];for(s=r+1;s<n;s++){var u=t[s],c=E(a,u);for(var l in c){var h=c[l];this.addEdgeIfVisible(a[h.t1],u[h.t2],r,s)}}}}}return t.prototype.addEdgeIfVisible=function(t,e,n,r){this.intersectsPolys(new a(t.x,t.y,e.x,e.y),n,r)||this.E.push(new w(t.vv,e.vv))},t.prototype.addPoint=function(t,e){var n,r,i,s=this.P.length;this.V.push(new _(this.V.length,s,0,t));for(var o=0;o<s;++o)if(o!==e){var a=this.P[o],u=(n=t,i=void 0,(i=(r=a).slice(0)).push(r[0]),{rtan:d(n,i),ltan:f(n,i)});this.addEdgeIfVisible(t,a[u.ltan],e,o),this.addEdgeIfVisible(t,a[u.rtan],e,o)}return t.vv},t.prototype.intersectsPolys=function(t,e,n){for(var r=0,i=this.P.length;r<i;++r)if(r!=e&&r!=n&&x(t,this.P[r]).length>0)return!0;return!1},t}();function x(t,e){for(var n=[],r=1,i=e.length;r<i;++r){var o=s.Rectangle.lineIntersection(t.x1,t.y1,t.x2,t.y2,e[r-1].x,e[r-1].y,e[r].x,e[r].y);o&&n.push(o)}return n}function E(t,e){for(var n=t.length-1,r=e.length-1,i=new y,s=0;s<n;++s)for(var o=0;o<r;++o){var a=t[0==s?n-1:s-1],u=t[s],l=t[s+1],h=e[0==o?r-1:o-1],d=e[o],f=e[o+1],p=c(a,u,d),g=c(u,h,d),v=c(u,d,f),_=c(h,d,u),w=c(d,a,u),b=c(d,u,l);p>=0&&g>=0&&v<0&&_>=0&&w>=0&&b<0?i.ll=new m(s,o):p<=0&&g<=0&&v>0&&_<=0&&w<=0&&b>0?i.rr=new m(s,o):p<=0&&g>0&&v<=0&&_>=0&&w<0&&b>=0?i.rl=new m(s,o):p>=0&&g<0&&v>=0&&_<=0&&w>0&&b<=0&&(i.lr=new m(s,o))}return i}function T(t,e){return!t.every(function(t){return!function(t,e){for(var n=1,r=e.length;n<r;++n)if(h(e[n-1],e[n],t))return!1;return!0}(t,e)})}e.TangentVisibilityGraph=b,e.tangents=E,e.polysOverlap=function(t,e){if(T(t,e))return!0;if(T(e,t))return!0;for(var n=1,r=t.length;n<r;++n){var i=t[n],s=t[n-1];if(x(new a(s.x,s.y,i.x,i.y),e).length>0)return!0}return!1}},6573:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7262),i=n(3535),s=n(5259),o=function(t,e,n){this.id=t,this.rect=e,this.children=n,this.leaf=void 0===n||0===n.length};e.NodeWrapper=o;var a=function(t,e,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null),this.id=t,this.x=e,this.y=n,this.node=r,this.line=i};e.Vert=a;var u=function(){function t(e,n){this.s=e,this.t=n;var r=t.findMatch(e,n),i=n.slice(0).reverse(),s=t.findMatch(e,i);r.length>=s.length?(this.length=r.length,this.si=r.si,this.ti=r.ti,this.reversed=!1):(this.length=s.length,this.si=s.si,this.ti=n.length-s.ti-s.length,this.reversed=!0)}return t.findMatch=function(t,e){for(var n=t.length,r=e.length,i={length:0,si:-1,ti:-1},s=new Array(n),o=0;o<n;o++){s[o]=new Array(r);for(var a=0;a<r;a++)if(t[o]===e[a]){var u=s[o][a]=0===o||0===a?1:s[o-1][a-1]+1;u>i.length&&(i.length=u,i.si=o-u+1,i.ti=a-u+1)}else s[o][a]=0}return i},t.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},t}();e.LongestCommonSubsequence=u;var c=function(){function t(t,e,n){var i=this;void 0===n&&(n=12),this.originalnodes=t,this.groupPadding=n,this.leaves=null,this.nodes=t.map(function(t,n){return new o(n,e.getBounds(t),e.getChildren(t))}),this.leaves=this.nodes.filter(function(t){return t.leaf}),this.groups=this.nodes.filter(function(t){return!t.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(t){return t.children.forEach(function(e){return i.nodes[e].parent=t})}),this.root={children:[]},this.nodes.forEach(function(t){void 0===t.parent&&(t.parent=i.root,i.root.children.push(t.id)),t.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(t,e){return i.getDepth(t)-i.getDepth(e)}),this.backToFront.slice(0).reverse().filter(function(t){return!t.leaf}).forEach(function(t){var e=r.Rectangle.empty();t.children.forEach(function(t){return e=e.union(i.nodes[t].rect)}),t.rect=e.inflate(i.groupPadding)});var s=this.midPoints(this.cols.map(function(t){return t.pos})),u=this.midPoints(this.rows.map(function(t){return t.pos})),c=s[0],l=s[s.length-1],h=u[0],d=u[u.length-1],f=this.rows.map(function(t){return{x1:c,x2:l,y1:t.pos,y2:t.pos}}).concat(u.map(function(t){return{x1:c,x2:l,y1:t,y2:t}})),p=this.cols.map(function(t){return{x1:t.pos,x2:t.pos,y1:h,y2:d}}).concat(s.map(function(t){return{x1:t,x2:t,y1:h,y2:d}})),g=f.concat(p);g.forEach(function(t){return t.verts=[]}),this.verts=[],this.edges=[],f.forEach(function(t){return p.forEach(function(e){var n=new a(i.verts.length,e.x1,t.y1);t.verts.push(n),e.verts.push(n),i.verts.push(n);for(var r=i.backToFront.length;r-- >0;){var s=i.backToFront[r],o=s.rect,u=Math.abs(n.x-o.cx()),c=Math.abs(n.y-o.cy());if(u<o.width()/2&&c<o.height()/2){n.node=s;break}}})}),g.forEach(function(t,e){i.nodes.forEach(function(e,n){e.rect.lineIntersections(t.x1,t.y1,t.x2,t.y2).forEach(function(n,r){var s=new a(i.verts.length,n.x,n.y,e,t);i.verts.push(s),t.verts.push(s),e.ports.push(s)})});var n=Math.abs(t.y1-t.y2)<.1,r=function(t,e){return n?e.x-t.x:e.y-t.y};t.verts.sort(r);for(var s=1;s<t.verts.length;s++){var o=t.verts[s-1],u=t.verts[s];o.node&&o.node===u.node&&o.node.leaf||i.edges.push({source:o.id,target:u.id,length:Math.abs(r(o,u))})}})}return t.prototype.avg=function(t){return t.reduce(function(t,e){return t+e})/t.length},t.prototype.getGridLines=function(t){for(var e=[],n=this.leaves.slice(0,this.leaves.length);n.length>0;){var r=n.filter(function(e){return e.rect["overlap"+t.toUpperCase()](n[0].rect)}),i={nodes:r,pos:this.avg(r.map(function(e){return e.rect["c"+t]()}))};e.push(i),i.nodes.forEach(function(t){return n.splice(n.indexOf(t),1)})}return e.sort(function(t,e){return t.pos-e.pos}),e},t.prototype.getDepth=function(t){for(var e=0;t.parent!==this.root;)e++,t=t.parent;return e},t.prototype.midPoints=function(t){for(var e=t[1]-t[0],n=[t[0]-e/2],r=1;r<t.length;r++)n.push((t[r]+t[r-1])/2);return n.push(t[t.length-1]+e/2),n},t.prototype.findLineage=function(t){var e=[t];do{e.push(t=t.parent)}while(t!==this.root);return e.reverse()},t.prototype.findAncestorPathBetween=function(t,e){for(var n=this.findLineage(t),r=this.findLineage(e),i=0;n[i]===r[i];)i++;return{commonAncestor:n[i-1],lineages:n.slice(i).concat(r.slice(i))}},t.prototype.siblingObstacles=function(t,e){var n=this,r=this.findAncestorPathBetween(t,e),i={};r.lineages.forEach(function(t){return i[t.id]={}});var s=r.commonAncestor.children.filter(function(t){return!(t in i)});return r.lineages.filter(function(t){return t.parent!==r.commonAncestor}).forEach(function(t){return s=s.concat(t.parent.children.filter(function(e){return e!==t.id}))}),s.map(function(t){return n.nodes[t]})},t.getSegmentSets=function(t,e,n){for(var r=[],i=0;i<t.length;i++)for(var s=t[i],o=0;o<s.length;o++)(l=s[o]).edgeid=i,l.i=o,Math.abs(l[1][e]-l[0][e])<.1&&r.push(l);r.sort(function(t,n){return t[0][e]-n[0][e]});for(var a=[],u=null,c=0;c<r.length;c++){var l=r[c];(!u||Math.abs(l[0][e]-u.pos)>.1)&&a.push(u={pos:l[0][e],segments:[]}),u.segments.push(l)}return a},t.nudgeSegs=function(t,e,n,r,s,o){var a=r.length;if(!(a<=1)){for(var u=r.map(function(e){return new i.Variable(e[0][t])}),c=[],l=0;l<a;l++)for(var h=0;h<a;h++)if(l!==h){var d=r[l],f=d.edgeid,p=r[h].edgeid,g=-1,m=-1;"x"==t?s(f,p)&&(d[0][e]<d[1][e]?(g=h,m=l):(g=l,m=h)):s(f,p)&&(d[0][e]<d[1][e]?(g=l,m=h):(g=h,m=l)),g>=0&&c.push(new i.Constraint(u[g],u[m],o))}new i.Solver(u,c).solve(),u.forEach(function(e,i){var s=r[i],o=e.position();s[0][t]=s[1][t]=o;var a=n[s.edgeid];s.i>0&&(a[s.i-1][1][t]=o),s.i<a.length-1&&(a[s.i+1][0][t]=o)})}},t.nudgeSegments=function(e,n,r,i,s){for(var o=t.getSegmentSets(e,n,r),a=0;a<o.length;a++){for(var u=o[a],c=[],l=0;l<u.segments.length;l++){var h=u.segments[l];c.push({type:0,s:h,pos:Math.min(h[0][r],h[1][r])}),c.push({type:1,s:h,pos:Math.max(h[0][r],h[1][r])})}c.sort(function(t,e){return t.pos-e.pos+t.type-e.type});var d=[],f=0;c.forEach(function(o){0===o.type?(d.push(o.s),f++):f--,0==f&&(t.nudgeSegs(n,r,e,d,i,s),d=[])})}},t.prototype.routeEdges=function(e,n,r,i){var s=this,o=e.map(function(t){return s.route(r(t),i(t))}),a=t.orderEdges(o),u=o.map(function(e){return t.makeSegments(e)});return t.nudgeSegments(u,"x","y",a,n),t.nudgeSegments(u,"y","x",a,n),t.unreverseEdges(u,o),u},t.unreverseEdges=function(t,e){t.forEach(function(t,n){e[n].reversed&&(t.reverse(),t.forEach(function(t){t.reverse()}))})},t.angleBetween2Lines=function(t,e){var n=Math.atan2(t[0].y-t[1].y,t[0].x-t[1].x),r=Math.atan2(e[0].y-e[1].y,e[0].x-e[1].x),i=n-r;return(i>Math.PI||i<-Math.PI)&&(i=r-n),i},t.isLeft=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)<=0},t.getOrder=function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];void 0===e[r.l]&&(e[r.l]={}),e[r.l][r.r]=!0}return function(t,n){return void 0!==e[t]&&e[t][n]}},t.orderEdges=function(e){for(var n=[],r=0;r<e.length-1;r++)for(var i=r+1;i<e.length;i++){var s,o,a,c=e[r],l=e[i],h=new u(c,l);0!==h.length&&(h.reversed&&(l.reverse(),l.reversed=!0,h=new u(c,l)),(h.si<=0||h.ti<=0)&&(h.si+h.length>=c.length||h.ti+h.length>=l.length)?n.push({l:r,r:i}):(h.si+h.length>=c.length||h.ti+h.length>=l.length?(s=c[h.si+1],a=c[h.si-1],o=l[h.ti-1]):(s=c[h.si+h.length-2],o=c[h.si+h.length],a=l[h.ti+h.length]),t.isLeft(s,o,a)?n.push({l:i,r:r}):n.push({l:r,r:i})))}return t.getOrder(n)},t.makeSegments=function(t){function e(t){return{x:t.x,y:t.y}}for(var n=function(t,e,n){return Math.abs((e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x))<.001},r=[],i=e(t[0]),s=1;s<t.length;s++){var o=e(t[s]),a=s<t.length-1?t[s+1]:null;a&&n(i,o,a)||(r.push([i,o]),i=o)}return r},t.prototype.route=function(t,e){var n=this,r=this.nodes[t],i=this.nodes[e];this.obstacles=this.siblingObstacles(r,i);var o={};this.obstacles.forEach(function(t){return o[t.id]=t}),this.passableEdges=this.edges.filter(function(t){var e=n.verts[t.source],r=n.verts[t.target];return!(e.node&&e.node.id in o||r.node&&r.node.id in o)});for(var a=1;a<r.ports.length;a++)this.passableEdges.push({source:r.ports[0].id,target:r.ports[a].id,length:0});for(a=1;a<i.ports.length;a++)this.passableEdges.push({source:i.ports[0].id,target:i.ports[a].id,length:0});var u=new s.Calculator(this.verts.length,this.passableEdges,function(t){return t.source},function(t){return t.target},function(t){return t.length}).PathFromNodeToNodeWithPrevCost(r.ports[0].id,i.ports[0].id,function(t,e,s){var o=n.verts[t],a=n.verts[e],u=n.verts[s],c=Math.abs(u.x-o.x),l=Math.abs(u.y-o.y);return o.node===r&&o.node===a.node||a.node===i&&a.node===u.node?0:c>1&&l>1?1e3:0}).reverse().map(function(t){return n.verts[t]});return u.push(this.nodes[i.id].ports[0]),u.filter(function(t,e){return!(e<u.length-1&&u[e+1].node===r&&t.node===r||e>0&&t.node===i&&u[e-1].node===i)})},t.getRoutePath=function(e,n,r,i){var s,o,a,u,c,l={routepath:"M "+e[0][0].x+" "+e[0][0].y+" ",arrowpath:""};if(e.length>1)for(var h=0;h<e.length;h++){var d=(o=(s=e[h])[1].x)-s[0].x,f=(a=s[1].y)-s[0].y;if(h<e.length-1){Math.abs(d)>0?o-=d/Math.abs(d)*n:a-=f/Math.abs(f)*n,l.routepath+="L "+o+" "+a+" ";var p=e[h+1],g=p[0].x,m=p[0].y;d=p[1].x-g,f=p[1].y-m;var y,v,_=t.angleBetween2Lines(s,p)<0?1:0;Math.abs(d)>0?(y=g+d/Math.abs(d)*n,v=m):(y=g,v=m+f/Math.abs(f)*n);var w=Math.abs(y-o),b=Math.abs(v-a);l.routepath+="A "+w+" "+b+" 0 0 "+_+" "+y+" "+v+" "}else{var x=[o,a];Math.abs(d)>0?(u=[o-=d/Math.abs(d)*i,a+r],c=[o,a-r]):(u=[o+r,a-=f/Math.abs(f)*i],c=[o-r,a]),l.routepath+="L "+o+" "+a+" ",i>0&&(l.arrowpath="M "+x[0]+" "+x[1]+" L "+u[0]+" "+u[1]+" L "+c[0]+" "+c[1])}}else d=(o=(s=e[0])[1].x)-s[0].x,f=(a=s[1].y)-s[0].y,x=[o,a],Math.abs(d)>0?(u=[o-=d/Math.abs(d)*i,a+r],c=[o,a-r]):(u=[o+r,a-=f/Math.abs(f)*i],c=[o-r,a]),l.routepath+="L "+o+" "+a+" ",i>0&&(l.arrowpath="M "+x[0]+" "+x[1]+" L "+u[0]+" "+u[1]+" L "+c[0]+" "+c[1]);return l},t}();e.GridRouter=c},8833:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=10,r=(1+Math.sqrt(5))/2,i=1e-4;e.applyPacking=function(t,e,s,o,a,u){void 0===a&&(a=1),void 0===u&&(u=!0);var c=e,l=s,h=(a=void 0!==a?a:1,o=void 0!==o?o:0,0),d=0,f=0,p=0,g=[];function m(t,e){g=[],h=0,d=0,p=0;for(var n=0;n<t.length;n++)y(t[n],e);return Math.abs(h/d-a)}function y(t,e){for(var r=void 0,s=0;s<g.length;s++)if(g[s].space_left>=t.height&&g[s].x+g[s].width+t.width+n-e<=i){r=g[s];break}g.push(t),void 0!==r?(t.x=r.x+r.width+n,t.y=r.bottom,t.space_left=t.height,t.bottom=t.y,r.space_left-=t.height+n,r.bottom+=t.height+n):(t.y=p,p+=t.height+n,t.x=0,t.bottom=t.y,t.space_left=t.height),t.y+t.height-d>-1e-4&&(d=t.y+t.height-0),t.x+t.width-h>-1e-4&&(h=t.x+t.width-0)}0!=t.length&&(function(t){t.forEach(function(t){var e,n,r,i,s;e=t,n=Number.MAX_VALUE,r=Number.MAX_VALUE,i=0,s=0,e.array.forEach(function(t){var e=void 0!==t.width?t.width:o,a=void 0!==t.height?t.height:o;e/=2,a/=2,i=Math.max(t.x+e,i),n=Math.min(t.x-e,n),s=Math.max(t.y+a,s),r=Math.min(t.y-a,r)}),e.width=i-n,e.height=s-r})}(t),function(t,e){var s=Number.POSITIVE_INFINITY,o=0;t.sort(function(t,e){return e.height-t.height});for(var a=y=f=t.reduce(function(t,e){return t.width<e.width?t.width:e.width}),u=v=function(t){var e=0;return t.forEach(function(t){return e+=t.width+n}),e}(t),c=0,l=Number.MAX_VALUE,h=Number.MAX_VALUE,d=-1,p=Number.MAX_VALUE,g=Number.MAX_VALUE;p>f||g>i;){if(1!=d){var y=u-(u-a)/r;l=m(t,y)}if(0!=d){var v=a+(u-a)/r;h=m(t,v)}if(p=Math.abs(y-v),g=Math.abs(l-h),l<s&&(s=l,o=y),h<s&&(s=h,o=v),l>h?(a=y,y=v,l=h,d=1):(u=v,v=y,h=l,d=0),c++>100)break}m(t,o)}(t),u&&function(t){t.forEach(function(t){var e={x:0,y:0};t.array.forEach(function(t){e.x+=t.x,e.y+=t.y}),e.x/=t.array.length,e.y/=t.array.length;var n=t.x-(e.x-t.width/2)+c/2-h/2,r=t.y-(e.y-t.height/2)+l/2-d/2;t.array.forEach(function(t){t.x+=n,t.y+=r})})}(t))},e.separateGraphs=function(t,e){for(var n={},r={},i=[],s=0,o=0;o<e.length;o++){var a=e[o],u=a.source,c=a.target;r[u.index]?r[u.index].push(c):r[u.index]=[c],r[c.index]?r[c.index].push(u):r[c.index]=[u]}for(o=0;o<t.length;o++){var l=t[o];n[l.index]||h(l,!0)}function h(t,e){if(void 0===n[t.index]){e&&(s++,i.push({array:[]})),n[t.index]=s,i[s-1].array.push(t);var o=r[t.index];if(o)for(var a=0;a<o.length;a++)h(o[a],!1)}}return i}},8640:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(9347),s=n(1468),o=n(9737),a=n(7262),u=n(5259),c=n(5872),l=n(8833);function h(t){return void 0!==t.leaves||void 0!==t.groups}!function(t){t[t.start=0]="start",t[t.tick=1]="tick",t[t.end=2]="end"}(r=e.EventType||(e.EventType={}));var d=function(){function t(){var e=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:t.getSourceIndex,getTargetIndex:t.getTargetIndex,setLength:t.setLinkLength,getType:function(t){return"function"==typeof e._linkType?e._linkType(t):0}}}return t.prototype.on=function(t,e){return this.event||(this.event={}),"string"==typeof t?this.event[r[t]]=e:this.event[t]=e,this},t.prototype.trigger=function(t){this.event&&void 0!==this.event[t.type]&&this.event[t.type](t)},t.prototype.kick=function(){for(;!this.tick(););},t.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:r.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var t,e,n=this._nodes.length;for(this._descent.locks.clear(),e=0;e<n;++e)(t=this._nodes[e]).fixed&&(void 0!==t.px&&void 0!==t.py||(t.px=t.x,t.py=t.y),this._descent.locks.add(e,[t.px,t.py]));var i=this._descent.rungeKutta();return 0===i?this._alpha=0:void 0!==this._lastStress&&(this._alpha=i),this._lastStress=i,this.updateNodePositions(),this.trigger({type:r.tick,alpha:this._alpha,stress:this._lastStress}),!1},t.prototype.updateNodePositions=function(){for(var t,e=this._descent.x[0],n=this._descent.x[1],r=this._nodes.length;r--;)(t=this._nodes[r]).x=e[r],t.y=n[r]},t.prototype.nodes=function(t){if(!t){if(0===this._nodes.length&&this._links.length>0){var e=0;this._links.forEach(function(t){e=Math.max(e,t.source,t.target)}),this._nodes=new Array(++e);for(var n=0;n<e;++n)this._nodes[n]={}}return this._nodes}return this._nodes=t,this},t.prototype.groups=function(t){var e=this;return t?(this._groups=t,this._rootGroup={},this._groups.forEach(function(t){void 0===t.padding&&(t.padding=1),void 0!==t.leaves&&t.leaves.forEach(function(n,r){"number"==typeof n&&((t.leaves[r]=e._nodes[n]).parent=t)}),void 0!==t.groups&&t.groups.forEach(function(n,r){"number"==typeof n&&((t.groups[r]=e._groups[n]).parent=t)})}),this._rootGroup.leaves=this._nodes.filter(function(t){return void 0===t.parent}),this._rootGroup.groups=this._groups.filter(function(t){return void 0===t.parent}),this):this._groups},t.prototype.powerGraphGroups=function(t){var e=i.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(e.groups),t(e),this},t.prototype.avoidOverlaps=function(t){return arguments.length?(this._avoidOverlaps=t,this):this._avoidOverlaps},t.prototype.handleDisconnected=function(t){return arguments.length?(this._handleDisconnected=t,this):this._handleDisconnected},t.prototype.flowLayout=function(t,e){return arguments.length||(t="y"),this._directedLinkConstraints={axis:t,getMinSeparation:"number"==typeof e?function(){return e}:e},this},t.prototype.links=function(t){return arguments.length?(this._links=t,this):this._links},t.prototype.constraints=function(t){return arguments.length?(this._constraints=t,this):this._constraints},t.prototype.distanceMatrix=function(t){return arguments.length?(this._distanceMatrix=t,this):this._distanceMatrix},t.prototype.size=function(t){return t?(this._canvasSize=t,this):this._canvasSize},t.prototype.defaultNodeSize=function(t){return t?(this._defaultNodeSize=t,this):this._defaultNodeSize},t.prototype.groupCompactness=function(t){return t?(this._groupCompactness=t,this):this._groupCompactness},t.prototype.linkDistance=function(t){return t?(this._linkDistance="function"==typeof t?t:+t,this._linkLengthCalculator=null,this):this._linkDistance},t.prototype.linkType=function(t){return this._linkType=t,this},t.prototype.convergenceThreshold=function(t){return t?(this._threshold="function"==typeof t?t:+t,this):this._threshold},t.prototype.alpha=function(t){return arguments.length?(t=+t,this._alpha?this._alpha=t>0?t:0:t>0&&(this._running||(this._running=!0,this.trigger({type:r.start,alpha:this._alpha=t}),this.kick())),this):this._alpha},t.prototype.getLinkLength=function(t){return"function"==typeof this._linkDistance?+this._linkDistance(t):this._linkDistance},t.setLinkLength=function(t,e){t.length=e},t.prototype.getLinkType=function(t){return"function"==typeof this._linkType?this._linkType(t):0},t.prototype.symmetricDiffLinkLengths=function(t,e){var n=this;return void 0===e&&(e=1),this.linkDistance(function(e){return t*e.length}),this._linkLengthCalculator=function(){return s.symmetricDiffLinkLengths(n._links,n.linkAccessor,e)},this},t.prototype.jaccardLinkLengths=function(t,e){var n=this;return void 0===e&&(e=1),this.linkDistance(function(e){return t*e.length}),this._linkLengthCalculator=function(){return s.jaccardLinkLengths(n._links,n.linkAccessor,e)},this},t.prototype.start=function(e,n,r,i,c,l){var h=this;void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===c&&(c=!0),void 0===l&&(l=!0);var d,f=this.nodes().length,p=f+2*this._groups.length,g=this._canvasSize[0],m=this._canvasSize[1],y=new Array(p),v=new Array(p),_=null,w=this._avoidOverlaps;this._nodes.forEach(function(t,e){t.index=e,void 0===t.x&&(t.x=g/2,t.y=m/2),y[e]=t.x,v[e]=t.y}),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?d=this._distanceMatrix:(d=new u.Calculator(p,this._links,t.getSourceIndex,t.getTargetIndex,function(t){return h.getLinkLength(t)}).DistanceMatrix(),_=o.Descent.createSquareMatrix(p,function(){return 2}),this._links.forEach(function(t){"number"==typeof t.source&&(t.source=h._nodes[t.source]),"number"==typeof t.target&&(t.target=h._nodes[t.target])}),this._links.forEach(function(e){var n=t.getSourceIndex(e),r=t.getTargetIndex(e);_[n][r]=_[r][n]=e.weight||1}));var b=o.Descent.createSquareMatrix(p,function(t,e){return d[t][e]});if(this._rootGroup&&void 0!==this._rootGroup.groups){var x=f;this._groups.forEach(function(t){!function(t,e,n,r){_[t][e]=_[e][t]=n,b[t][e]=b[e][t]=.1}(x,x+1,h._groupCompactness),y[x]=0,v[x++]=0,y[x]=0,v[x++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var E=this._constraints||[];for(this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,E=E.concat(s.generateDirectedEdgeConstraints(f,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new o.Descent([y,v],b),this._descent.locks.clear(),x=0;x<f;++x){var T=this._nodes[x];T.fixed&&(T.px=T.x,T.py=T.y,this._descent.locks.add(x,[T.x,T.y]))}if(this._descent.threshold=this._threshold,this.initialLayout(e,y,v),E.length>0&&(this._descent.project=new a.Projection(this._nodes,this._groups,this._rootGroup,E).projectFunctions()),this._descent.run(n),this.separateOverlappingComponents(g,m,l),this.avoidOverlaps(w),w&&(this._nodes.forEach(function(t,e){t.x=y[e],t.y=v[e]}),this._descent.project=new a.Projection(this._nodes,this._groups,this._rootGroup,E,!0).projectFunctions(),this._nodes.forEach(function(t,e){y[e]=t.x,v[e]=t.y})),this._descent.G=_,this._descent.run(r),i){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=f,this._descent.scaleSnapByMaxH=f!=p;var S=o.Descent.createSquareMatrix(p,function(t,e){return t>=f||e>=f?_[t][e]:0});this._descent.G=S,this._descent.run(i)}return this.updateNodePositions(),this.separateOverlappingComponents(g,m,l),c?this.resume():this},t.prototype.initialLayout=function(e,n,r){if(this._groups.length>0&&e>0){var i=this._nodes.length,s=this._links.map(function(t){return{source:t.source.index,target:t.target.index}}),o=this._nodes.map(function(t){return{index:t.index}});this._groups.forEach(function(t,e){o.push({index:t.index=i+e})}),this._groups.forEach(function(t,e){void 0!==t.leaves&&t.leaves.forEach(function(e){return s.push({source:t.index,target:e.index})}),void 0!==t.groups&&t.groups.forEach(function(e){return s.push({source:t.index,target:e.index})})}),(new t).size(this.size()).nodes(o).links(s).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(e,0,0,0,!1),this._nodes.forEach(function(t){n[t.index]=o[t.index].x,r[t.index]=o[t.index].y})}else this._descent.run(e)},t.prototype.separateOverlappingComponents=function(t,e,n){var r=this;if(void 0===n&&(n=!0),!this._distanceMatrix&&this._handleDisconnected){var i=this._descent.x[0],s=this._descent.x[1];this._nodes.forEach(function(t,e){t.x=i[e],t.y=s[e]});var o=l.separateGraphs(this._nodes,this._links);l.applyPacking(o,t,e,this._defaultNodeSize,1,n),this._nodes.forEach(function(t,e){r._descent.x[0][e]=t.x,r._descent.x[1][e]=t.y,t.bounds&&(t.bounds.setXCentre(t.x),t.bounds.setYCentre(t.y))})}},t.prototype.resume=function(){return this.alpha(.1)},t.prototype.stop=function(){return this.alpha(0)},t.prototype.prepareEdgeRouting=function(t){void 0===t&&(t=0),this._visibilityGraph=new c.TangentVisibilityGraph(this._nodes.map(function(e){return e.bounds.inflate(-t).vertices()}))},t.prototype.routeEdge=function(t,e,n){void 0===e&&(e=5);var r=[],i=new c.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),s={x:t.source.x,y:t.source.y},o={x:t.target.x,y:t.target.y},l=i.addPoint(s,t.source.index),h=i.addPoint(o,t.target.index);i.addEdgeIfVisible(s,o,t.source.index,t.target.index),void 0!==n&&n(i);var d=new u.Calculator(i.V.length,i.E,function(t){return t.source.id},function(t){return t.target.id},function(t){return t.length()}).PathFromNodeToNode(l.id,h.id);if(1===d.length||d.length===i.V.length){var f=a.makeEdgeBetween(t.source.innerBounds,t.target.innerBounds,e);r=[f.sourceIntersection,f.arrowStart]}else{for(var p=d.length-2,g=i.V[d[p]].p,m=i.V[d[0]].p,y=(r=[t.source.innerBounds.rayIntersection(g.x,g.y)],p);y>=0;--y)r.push(i.V[d[y]].p);r.push(a.makeEdgeTo(m,t.target.innerBounds,e))}return r},t.getSourceIndex=function(t){return"number"==typeof t.source?t.source:t.source.index},t.getTargetIndex=function(t){return"number"==typeof t.target?t.target:t.target.index},t.linkId=function(e){return t.getSourceIndex(e)+"-"+t.getTargetIndex(e)},t.dragStart=function(e){h(e)?t.storeOffset(e,t.dragOrigin(e)):(t.stopNode(e),e.fixed|=2)},t.stopNode=function(t){t.px=t.x,t.py=t.y},t.storeOffset=function(e,n){void 0!==e.leaves&&e.leaves.forEach(function(e){e.fixed|=2,t.stopNode(e),e._dragGroupOffsetX=e.x-n.x,e._dragGroupOffsetY=e.y-n.y}),void 0!==e.groups&&e.groups.forEach(function(e){return t.storeOffset(e,n)})},t.dragOrigin=function(t){return h(t)?{x:t.bounds.cx(),y:t.bounds.cy()}:t},t.drag=function(e,n){h(e)?(void 0!==e.leaves&&e.leaves.forEach(function(t){e.bounds.setXCentre(n.x),e.bounds.setYCentre(n.y),t.px=t._dragGroupOffsetX+n.x,t.py=t._dragGroupOffsetY+n.y}),void 0!==e.groups&&e.groups.forEach(function(e){return t.drag(e,n)})):(e.px=n.x,e.py=n.y)},t.dragEnd=function(e){h(e)?(void 0!==e.leaves&&e.leaves.forEach(function(e){t.dragEnd(e),delete e._dragGroupOffsetX,delete e._dragGroupOffsetY}),void 0!==e.groups&&e.groups.forEach(t.dragEnd)):e.fixed&=-7},t.mouseOver=function(t){t.fixed|=4,t.px=t.x,t.py=t.y},t.mouseOut=function(t){t.fixed&=-5},t}();e.Layout=d},9739:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5259),i=n(9737),s=n(7262),o=n(1468),a=function(){function t(t,e){this.source=t,this.target=e}return t.prototype.actualLength=function(t){var e=this;return Math.sqrt(t.reduce(function(t,n){var r=n[e.target]-n[e.source];return t+r*r},0))},t}();e.Link3D=a,e.Node3D=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n};var u=function(){function t(e,n,r){var i=this;void 0===r&&(r=1),this.nodes=e,this.links=n,this.idealLinkLength=r,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(t.k);for(var s=0;s<t.k;++s)this.result[s]=new Array(e.length);e.forEach(function(e,n){for(var r=0,s=t.dims;r<s.length;r++){var o=s[r];void 0===e[o]&&(e[o]=Math.random())}i.result[0][n]=e.x,i.result[1][n]=e.y,i.result[2][n]=e.z})}return t.prototype.linkLength=function(t){return t.actualLength(this.result)},t.prototype.start=function(t){var e=this;void 0===t&&(t=100);var n=this.nodes.length,a=new c;this.useJaccardLinkLengths&&o.jaccardLinkLengths(this.links,a,1.5),this.links.forEach(function(t){return t.length*=e.idealLinkLength});var u=new r.Calculator(n,this.links,function(t){return t.source},function(t){return t.target},function(t){return t.length}).DistanceMatrix(),l=i.Descent.createSquareMatrix(n,function(t,e){return u[t][e]}),h=i.Descent.createSquareMatrix(n,function(){return 2});this.links.forEach(function(t){var e=t.source,n=t.target;return h[e][n]=h[n][e]=1}),this.descent=new i.Descent(this.result,l),this.descent.threshold=.001,this.descent.G=h,this.constraints&&(this.descent.project=new s.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var d=0;d<this.nodes.length;d++){var f=this.nodes[d];f.fixed&&this.descent.locks.add(d,[f.x,f.y,f.z])}return this.descent.run(t),this},t.prototype.tick=function(){this.descent.locks.clear();for(var t=0;t<this.nodes.length;t++){var e=this.nodes[t];e.fixed&&this.descent.locks.add(t,[e.x,e.y,e.z])}return this.descent.rungeKutta()},t.k=(t.dims=["x","y","z"]).length,t}();e.Layout3D=u;var c=function(){function t(){}return t.prototype.getSourceIndex=function(t){return t.source},t.prototype.getTargetIndex=function(t){return t.target},t.prototype.getLength=function(t){return t.length},t.prototype.setLength=function(t,e){t.length=e},t}()},1468:(t,e)=>{"use strict";function n(t,e){var n={};for(var r in t)n[r]={};for(var r in e)n[r]={};return Object.keys(n).length}function r(t,e){var n=0;for(var r in t)void 0!==e[r]&&++n;return n}function i(t,e,n,r){var i=function(t,e){var n={},r=function(t,e){void 0===n[t]&&(n[t]={}),n[t][e]={}};return t.forEach(function(t){var n=e.getSourceIndex(t),i=e.getTargetIndex(t);r(n,i),r(i,n)}),n}(t,r);t.forEach(function(t){var s=i[r.getSourceIndex(t)],o=i[r.getTargetIndex(t)];r.setLength(t,1+e*n(s,o))})}function s(t,e,n){var r=[],i=0,s=[],o=[];function a(t){t.index=t.lowlink=i++,s.push(t),t.onStack=!0;for(var e=0,n=t.out;e<n.length;e++){var r=n[e];void 0===r.index?(a(r),t.lowlink=Math.min(t.lowlink,r.lowlink)):r.onStack&&(t.lowlink=Math.min(t.lowlink,r.index))}if(t.lowlink===t.index){for(var u=[];s.length&&((r=s.pop()).onStack=!1,u.push(r),r!==t););o.push(u.map(function(t){return t.id}))}}for(var u=0;u<t;u++)r.push({id:u,out:[]});for(var c=0,l=e;c<l.length;c++){var h=l[c],d=r[n.getSourceIndex(h)],f=r[n.getTargetIndex(h)];d.out.push(f)}for(var p=0,g=r;p<g.length;p++){var m=g[p];void 0===m.index&&a(m)}return o}Object.defineProperty(e,"__esModule",{value:!0}),e.symmetricDiffLinkLengths=function(t,e,s){void 0===s&&(s=1),i(t,s,function(t,e){return Math.sqrt(n(t,e)-r(t,e))},e)},e.jaccardLinkLengths=function(t,e,s){void 0===s&&(s=1),i(t,s,function(t,e){return Math.min(Object.keys(t).length,Object.keys(e).length)<1.1?0:r(t,e)/n(t,e)},e)},e.generateDirectedEdgeConstraints=function(t,e,n,r){var i=s(t,e,r),o={};i.forEach(function(t,e){return t.forEach(function(t){return o[t]=e})});var a=[];return e.forEach(function(t){var e=r.getSourceIndex(t),i=r.getTargetIndex(t);o[e]!==o[i]&&a.push({axis:n,left:e,right:i,gap:r.getMinSeparation(t)})}),a},e.stronglyConnectedComponents=s},9347:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,n){this.source=t,this.target=e,this.type=n};e.PowerEdge=n;var r=function(){function t(t,e,n,r){var i=this;if(this.linkAccessor=n,this.modules=new Array(t),this.roots=[],r)this.initModulesFromGroup(r);else{this.roots.push(new o);for(var a=0;a<t;++a)this.roots[0].add(this.modules[a]=new s(a))}this.R=e.length,e.forEach(function(t){var e=i.modules[n.getSourceIndex(t)],r=i.modules[n.getTargetIndex(t)],s=n.getType(t);e.outgoing.add(s,r),r.incoming.add(s,e)})}return t.prototype.initModulesFromGroup=function(t){var e=new o;this.roots.push(e);for(var n=0;n<t.leaves.length;++n){var r=t.leaves[n],i=new s(r.id);this.modules[r.id]=i,e.add(i)}if(t.groups)for(var u=0;u<t.groups.length;++u){var c=t.groups[u],l={};for(var h in c)"leaves"!==h&&"groups"!==h&&c.hasOwnProperty(h)&&(l[h]=c[h]);e.add(new s(-1-u,new a,new a,this.initModulesFromGroup(c),l))}return e},t.prototype.merge=function(t,e,n){void 0===n&&(n=0);var r=t.incoming.intersection(e.incoming),i=t.outgoing.intersection(e.outgoing),a=new o;a.add(t),a.add(e);var u=new s(this.modules.length,i,r,a);this.modules.push(u);var c=function(n,r,i){n.forAll(function(n,s){n.forAll(function(n){var o=n[r];o.add(s,u),o.remove(s,t),o.remove(s,e),t[i].remove(s,n),e[i].remove(s,n)})})};return c(i,"incoming","outgoing"),c(r,"outgoing","incoming"),this.R-=r.count()+i.count(),this.roots[n].remove(t),this.roots[n].remove(e),this.roots[n].add(u),u},t.prototype.rootMerges=function(t){void 0===t&&(t=0);for(var e=this.roots[t].modules(),n=e.length,r=new Array(n*(n-1)),i=0,s=0,o=n-1;s<o;++s)for(var a=s+1;a<n;++a){var u=e[s],c=e[a];r[i]={id:i,nEdges:this.nEdges(u,c),a:u,b:c},i++}return r},t.prototype.greedyMerge=function(){for(var t=0;t<this.roots.length;++t)if(!(this.roots[t].modules().length<2)){var e=this.rootMerges(t).sort(function(t,e){return t.nEdges==e.nEdges?t.id-e.id:t.nEdges-e.nEdges})[0];if(!(e.nEdges>=this.R))return this.merge(e.a,e.b,t),!0}},t.prototype.nEdges=function(t,e){var n=t.incoming.intersection(e.incoming),r=t.outgoing.intersection(e.outgoing);return this.R-n.count()-r.count()},t.prototype.getGroupHierarchy=function(t){var e=this,r=[];return i(this.roots[0],{},r),this.allEdges().forEach(function(i){var s=e.modules[i.source],o=e.modules[i.target];t.push(new n(void 0===s.gid?i.source:r[s.gid],void 0===o.gid?i.target:r[o.gid],i.type))}),r},t.prototype.allEdges=function(){var e=[];return t.getEdges(this.roots[0],e),e},t.getEdges=function(e,n){e.forAll(function(e){e.getEdges(n),t.getEdges(e.children,n)})},t}();function i(t,e,n){t.forAll(function(t){if(t.isLeaf())e.leaves||(e.leaves=[]),e.leaves.push(t.id);else{var r=e;if(t.gid=n.length,!t.isIsland()||t.isPredefined()){if(r={id:t.gid},t.isPredefined())for(var s in t.definition)r[s]=t.definition[s];e.groups||(e.groups=[]),e.groups.push(t.gid),n.push(r)}i(t.children,r,n)}})}e.Configuration=r;var s=function(){function t(t,e,n,r,i){void 0===e&&(e=new a),void 0===n&&(n=new a),void 0===r&&(r=new o),this.id=t,this.outgoing=e,this.incoming=n,this.children=r,this.definition=i}return t.prototype.getEdges=function(t){var e=this;this.outgoing.forAll(function(r,i){r.forAll(function(r){t.push(new n(e.id,r.id,i))})})},t.prototype.isLeaf=function(){return 0===this.children.count()},t.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},t.prototype.isPredefined=function(){return void 0!==this.definition},t}();e.Module=s;var o=function(){function t(){this.table={}}return t.prototype.count=function(){return Object.keys(this.table).length},t.prototype.intersection=function(e){var n=new t;return n.table=function(t,e){var n={};for(var r in t)r in e&&(n[r]=t[r]);return n}(this.table,e.table),n},t.prototype.intersectionCount=function(t){return this.intersection(t).count()},t.prototype.contains=function(t){return t in this.table},t.prototype.add=function(t){this.table[t.id]=t},t.prototype.remove=function(t){delete this.table[t.id]},t.prototype.forAll=function(t){for(var e in this.table)t(this.table[e])},t.prototype.modules=function(){var t=[];return this.forAll(function(e){e.isPredefined()||t.push(e)}),t},t}();e.ModuleSet=o;var a=function(){function t(){this.sets={},this.n=0}return t.prototype.count=function(){return this.n},t.prototype.contains=function(t){var e=!1;return this.forAllModules(function(n){e||n.id!=t||(e=!0)}),e},t.prototype.add=function(t,e){(t in this.sets?this.sets[t]:this.sets[t]=new o).add(e),++this.n},t.prototype.remove=function(t,e){var n=this.sets[t];n.remove(e),0===n.count()&&delete this.sets[t],--this.n},t.prototype.forAll=function(t){for(var e in this.sets)t(this.sets[e],Number(e))},t.prototype.forAllModules=function(t){this.forAll(function(e,n){return e.forAll(t)})},t.prototype.intersection=function(e){var n=new t;return this.forAll(function(t,r){if(r in e.sets){var i=t.intersection(e.sets[r]),s=i.count();s>0&&(n.sets[r]=i,n.n+=s)}}),n},t}();e.LinkSets=a,e.getGroups=function(t,e,n,i){for(var s=new r(t.length,e,n,i);s.greedyMerge(););var o=[],a=s.getGroupHierarchy(o);return o.forEach(function(e){var n=function(n){var r=e[n];"number"==typeof r&&(e[n]=t[r])};n("source"),n("target")}),{groups:a,powerEdges:o}}},9516:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.elem=t,this.subheaps=[]}return t.prototype.toString=function(t){for(var e="",n=!1,r=0;r<this.subheaps.length;++r){var i=this.subheaps[r];i.elem?(n&&(e+=","),e+=i.toString(t),n=!0):n=!1}return""!==e&&(e="("+e+")"),(this.elem?t(this.elem):"")+e},t.prototype.forEach=function(t){this.empty()||(t(this.elem,this),this.subheaps.forEach(function(e){return e.forEach(t)}))},t.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(t,e){return t+e.count()},0)},t.prototype.min=function(){return this.elem},t.prototype.empty=function(){return null==this.elem},t.prototype.contains=function(t){if(this===t)return!0;for(var e=0;e<this.subheaps.length;e++)if(this.subheaps[e].contains(t))return!0;return!1},t.prototype.isHeap=function(t){var e=this;return this.subheaps.every(function(n){return t(e.elem,n.elem)&&n.isHeap(t)})},t.prototype.insert=function(e,n){return this.merge(new t(e),n)},t.prototype.merge=function(t,e){return this.empty()?t:t.empty()?this:e(this.elem,t.elem)?(this.subheaps.push(t),this):(t.subheaps.push(this),t)},t.prototype.removeMin=function(t){return this.empty()?null:this.mergePairs(t)},t.prototype.mergePairs=function(e){if(0==this.subheaps.length)return new t(null);if(1==this.subheaps.length)return this.subheaps[0];var n=this.subheaps.pop().merge(this.subheaps.pop(),e),r=this.mergePairs(e);return n.merge(r,e)},t.prototype.decreaseKey=function(e,n,r,i){var s=e.removeMin(i);e.elem=s.elem,e.subheaps=s.subheaps,null!==r&&null!==s.elem&&r(e.elem,e);var o=new t(n);return null!==r&&r(n,o),this.merge(o,i)},t}();e.PairingHeap=n;var r=function(){function t(t){this.lessThan=t}return t.prototype.top=function(){return this.empty()?null:this.root.elem},t.prototype.push=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i,s=0;i=e[s];++s)t=new n(i),this.root=this.empty()?t:this.root.merge(t,this.lessThan);return t},t.prototype.empty=function(){return!this.root||!this.root.elem},t.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},t.prototype.forEach=function(t){this.root.forEach(t)},t.prototype.pop=function(){if(this.empty())return null;var t=this.root.min();return this.root=this.root.removeMin(this.lessThan),t},t.prototype.reduceKey=function(t,e,n){void 0===n&&(n=null),this.root=this.root.decreaseKey(t,e,n,this.lessThan)},t.prototype.toString=function(t){return this.root.toString(t)},t.prototype.count=function(){return this.root.count()},t}();e.PriorityQueue=r},3294:function(t,e){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.findIter=function(t){for(var e=this._root,n=this.iterator();null!==e;){var r=this._comparator(t,e.data);if(0===r)return n._cursor=e,n;n._ancestors.push(e),e=e.get_child(r>0)}return null}}return t.prototype.clear=function(){this._root=null,this.size=0},t.prototype.find=function(t){for(var e=this._root;null!==e;){var n=this._comparator(t,e.data);if(0===n)return e.data;e=e.get_child(n>0)}return null},t.prototype.lowerBound=function(t){return this._bound(t,this._comparator)},t.prototype.upperBound=function(t){var e=this._comparator;return this._bound(t,function(t,n){return e(n,t)})},t.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},t.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},t.prototype.iterator=function(){return new s(this)},t.prototype.each=function(t){for(var e,n=this.iterator();null!==(e=n.next());)t(e)},t.prototype.reach=function(t){for(var e,n=this.iterator();null!==(e=n.prev());)t(e)},t.prototype._bound=function(t,e){for(var n=this._root,r=this.iterator();null!==n;){var i=this._comparator(t,n.data);if(0===i)return r._cursor=n,r;r._ancestors.push(n),n=n.get_child(i>0)}for(var s=r._ancestors.length-1;s>=0;--s)if(e(t,(n=r._ancestors[s]).data)>0)return r._cursor=n,r._ancestors.length=s,r;return r._ancestors.length=0,r},t}();e.TreeBase=i;var s=function(){function t(t){this._tree=t,this._ancestors=[],this._cursor=null}return t.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},t.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else{var e;if(null===this._cursor.right)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===e);else this._ancestors.push(this._cursor),this._minNode(this._cursor.right)}return null!==this._cursor?this._cursor.data:null},t.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else{var e;if(null===this._cursor.left)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===e);else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left)}return null!==this._cursor?this._cursor.data:null},t.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},t.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t},t}();e.Iterator=s;var o=function(){function t(t){this.data=t,this.left=null,this.right=null,this.red=!0}return t.prototype.get_child=function(t){return t?this.right:this.left},t.prototype.set_child=function(t,e){t?this.right=e:this.left=e},t}(),a=function(t){function e(e){var n=t.call(this)||this;return n._root=null,n._comparator=e,n.size=0,n}return r(e,t),e.prototype.insert=function(t){var n=!1;if(null===this._root)this._root=new o(t),n=!0,this.size++;else{var r=new o(void 0),i=!1,s=!1,a=null,u=r,c=null,l=this._root;for(u.right=this._root;;){if(null===l?(l=new o(t),c.set_child(i,l),n=!0,this.size++):e.is_red(l.left)&&e.is_red(l.right)&&(l.red=!0,l.left.red=!1,l.right.red=!1),e.is_red(l)&&e.is_red(c)){var h=u.right===a;l===c.get_child(s)?u.set_child(h,e.single_rotate(a,!s)):u.set_child(h,e.double_rotate(a,!s))}var d=this._comparator(l.data,t);if(0===d)break;s=i,null!==a&&(u=a),a=c,c=l,l=l.get_child(i=d<0)}this._root=r.right}return this._root.red=!1,n},e.prototype.remove=function(t){if(null===this._root)return!1;var n=new o(void 0),r=n;r.right=this._root;for(var i=null,s=null,a=null,u=!0;null!==r.get_child(u);){var c=u;s=i,i=r,r=r.get_child(u);var l=this._comparator(t,r.data);if(u=l>0,0===l&&(a=r),!e.is_red(r)&&!e.is_red(r.get_child(u)))if(e.is_red(r.get_child(!u))){var h=e.single_rotate(r,u);i.set_child(c,h),i=h}else if(!e.is_red(r.get_child(!u))){var d=i.get_child(!c);if(null!==d)if(e.is_red(d.get_child(!c))||e.is_red(d.get_child(c))){var f=s.right===i;e.is_red(d.get_child(c))?s.set_child(f,e.double_rotate(i,c)):e.is_red(d.get_child(!c))&&s.set_child(f,e.single_rotate(i,c));var p=s.get_child(f);p.red=!0,r.red=!0,p.left.red=!1,p.right.red=!1}else i.red=!1,d.red=!0,r.red=!0}}return null!==a&&(a.data=r.data,i.set_child(i.right===r,r.get_child(null===r.left)),this.size--),this._root=n.right,null!==this._root&&(this._root.red=!1),null!==a},e.is_red=function(t){return null!==t&&t.red},e.single_rotate=function(t,e){var n=t.get_child(!e);return t.set_child(!e,n.get_child(e)),n.set_child(e,t),t.red=!0,n.red=!1,n},e.double_rotate=function(t,n){return t.set_child(!n,e.single_rotate(t.get_child(!n),!n)),e.single_rotate(t,n)},e}(i);e.RBTree=a},7262:function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(3535),o=n(3294);function a(t){return t.bounds=void 0!==t.leaves?t.leaves.reduce(function(t,e){return e.bounds.union(t)},u.empty()):u.empty(),void 0!==t.groups&&(t.bounds=t.groups.reduce(function(t,e){return a(e).union(t)},t.bounds)),t.bounds=t.bounds.inflate(t.padding),t.bounds}e.computeGroupBounds=a;var u=function(){function t(t,e,n,r){this.x=t,this.X=e,this.y=n,this.Y=r}return t.empty=function(){return new t(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},t.prototype.cx=function(){return(this.x+this.X)/2},t.prototype.cy=function(){return(this.y+this.Y)/2},t.prototype.overlapX=function(t){var e=this.cx(),n=t.cx();return e<=n&&t.x<this.X?this.X-t.x:n<=e&&this.x<t.X?t.X-this.x:0},t.prototype.overlapY=function(t){var e=this.cy(),n=t.cy();return e<=n&&t.y<this.Y?this.Y-t.y:n<=e&&this.y<t.Y?t.Y-this.y:0},t.prototype.setXCentre=function(t){var e=t-this.cx();this.x+=e,this.X+=e},t.prototype.setYCentre=function(t){var e=t-this.cy();this.y+=e,this.Y+=e},t.prototype.width=function(){return this.X-this.x},t.prototype.height=function(){return this.Y-this.y},t.prototype.union=function(e){return new t(Math.min(this.x,e.x),Math.max(this.X,e.X),Math.min(this.y,e.y),Math.max(this.Y,e.Y))},t.prototype.lineIntersections=function(e,n,r,i){for(var s=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],o=[],a=0;a<4;++a){var u=t.lineIntersection(e,n,r,i,s[a][0],s[a][1],s[a][2],s[a][3]);null!==u&&o.push({x:u.x,y:u.y})}return o},t.prototype.rayIntersection=function(t,e){var n=this.lineIntersections(this.cx(),this.cy(),t,e);return n.length>0?n[0]:null},t.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},t.lineIntersection=function(t,e,n,r,i,s,o,a){var u=n-t,c=o-i,l=r-e,h=a-s,d=h*u-c*l;if(0==d)return null;var f=t-i,p=e-s,g=(c*p-h*f)/d,m=(u*p-l*f)/d;return g>=0&&g<=1&&m>=0&&m<=1?{x:t+g*u,y:e+g*l}:null},t.prototype.inflate=function(e){return new t(this.x-e,this.X+e,this.y-e,this.Y+e)},t}();e.Rectangle=u,e.makeEdgeBetween=function(t,e,n){var r=t.rayIntersection(e.cx(),e.cy())||{x:t.cx(),y:t.cy()},i=e.rayIntersection(t.cx(),t.cy())||{x:e.cx(),y:e.cy()},s=i.x-r.x,o=i.y-r.y,a=Math.sqrt(s*s+o*o),u=a-n;return{sourceIntersection:r,targetIntersection:i,arrowStart:{x:r.x+u*s/a,y:r.y+u*o/a}}},e.makeEdgeTo=function(t,e,n){var r=e.rayIntersection(t.x,t.y);r||(r={x:e.cx(),y:e.cy()});var i=r.x-t.x,s=r.y-t.y,o=Math.sqrt(i*i+s*s);return{x:r.x-n*i/o,y:r.y-n*s/o}};var c=function(t,e,n){this.v=t,this.r=e,this.pos=n,this.prev=d(),this.next=d()},l=function(t,e,n){this.isOpen=t,this.v=e,this.pos=n};function h(t,e){return t.pos>e.pos?1:t.pos<e.pos||t.isOpen?-1:e.isOpen?1:0}function d(){return new o.RBTree(function(t,e){return t.pos-e.pos})}var f={getCentre:function(t){return t.cx()},getOpen:function(t){return t.y},getClose:function(t){return t.Y},getSize:function(t){return t.width()},makeRect:function(t,e,n,r){return new u(n-r/2,n+r/2,t,e)},findNeighbours:function(t,e){var n=function(n,r){for(var i,s=e.findIter(t);null!==(i=s[n]());){var o=i.r.overlapX(t.r);if((o<=0||o<=i.r.overlapY(t.r))&&(t[n].insert(i),i[r].insert(t)),o<=0)break}};n("next","prev"),n("prev","next")}},p={getCentre:function(t){return t.cy()},getOpen:function(t){return t.x},getClose:function(t){return t.X},getSize:function(t){return t.height()},makeRect:function(t,e,n,r){return new u(t,e,n-r/2,n+r/2)},findNeighbours:function(t,e){var n=function(n,r){var i=e.findIter(t)[n]();null!==i&&i.r.overlapX(t.r)>0&&(t[n].insert(i),i[r].insert(t))};n("next","prev"),n("prev","next")}};function g(t,e,n,r){void 0===r&&(r=!1);var i=t.padding,s=void 0!==t.groups?t.groups.length:0,o=void 0!==t.leaves?t.leaves.length:0,a=s?t.groups.reduce(function(t,r){return t.concat(g(r,e,n,!0))},[]):[],u=(r?2:0)+o+s,c=new Array(u),l=new Array(u),h=0,d=function(t,e){l[h]=t,c[h++]=e};if(r){var f=t.bounds,p=e.getCentre(f),y=e.getSize(f)/2,v=e.getOpen(f),_=e.getClose(f),w=p-y+i/2,b=p+y-i/2;t.minVar.desiredPosition=w,d(e.makeRect(v,_,w,i),t.minVar),t.maxVar.desiredPosition=b,d(e.makeRect(v,_,b,i),t.maxVar)}o&&t.leaves.forEach(function(t){return d(t.bounds,t.variable)}),s&&t.groups.forEach(function(t){var n=t.bounds;d(e.makeRect(e.getOpen(n),e.getClose(n),e.getCentre(n),e.getSize(n)),t.minVar)});var x=m(l,c,e,n);return s&&(c.forEach(function(t){t.cOut=[],t.cIn=[]}),x.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),t.groups.forEach(function(t){var n=(t.padding-e.getSize(t.bounds))/2;t.minVar.cIn.forEach(function(t){return t.gap+=n}),t.minVar.cOut.forEach(function(e){e.left=t.maxVar,e.gap+=n})})),a.concat(x)}function m(t,e,n,r){var i,o=t.length,a=2*o;console.assert(e.length>=o);var u=new Array(a);for(i=0;i<o;++i){var f=t[i],p=new c(e[i],f,n.getCentre(f));u[i]=new l(!0,p,n.getOpen(f)),u[i+o]=new l(!1,p,n.getClose(f))}u.sort(h);var g=new Array,m=d();for(i=0;i<a;++i){var y=u[i];if(p=y.v,y.isOpen)m.insert(p),n.findNeighbours(p,m);else{m.remove(p);var v=function(t,e){var i=(n.getSize(t.r)+n.getSize(e.r))/2+r;g.push(new s.Constraint(t.v,e.v,i))},_=function(t,e,n){for(var r,i=p[t].iterator();null!==(r=i[t]());)n(r,p),r[e].remove(p)};_("prev","next",function(t,e){return v(t,e)}),_("next","prev",function(t,e){return v(e,t)})}}return console.assert(0===m.size),g}function y(t,e){return m(t,e,f,1e-6)}function v(t,e){return m(t,e,p,1e-6)}function _(t){return g(t,f,1e-6)}function w(t){return g(t,p,1e-6)}e.generateXConstraints=y,e.generateYConstraints=v,e.generateXGroupConstraints=_,e.generateYGroupConstraints=w,e.removeOverlaps=function(t){var e=t.map(function(t){return new s.Variable(t.cx())}),n=y(t,e),r=new s.Solver(e,n);r.solve(),e.forEach(function(e,n){return t[n].setXCentre(e.position())}),e=t.map(function(t){return new s.Variable(t.cy())}),n=v(t,e),(r=new s.Solver(e,n)).solve(),e.forEach(function(e,n){return t[n].setYCentre(e.position())})};var b=function(t){function e(e,n){var r=t.call(this,0,n)||this;return r.index=e,r}return i(e,t),e}(s.Variable);e.IndexedVariable=b;var x=function(){function t(t,e,n,r,i){var s=this;if(void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=!1),this.nodes=t,this.groups=e,this.rootGroup=n,this.avoidOverlaps=i,this.variables=t.map(function(t,e){return t.variable=new b(e,1)}),r&&this.createConstraints(r),i&&n&&void 0!==n.groups){t.forEach(function(t){if(t.width&&t.height){var e=t.width/2,n=t.height/2;t.bounds=new u(t.x-e,t.x+e,t.y-n,t.y+n)}else t.bounds=new u(t.x,t.x,t.y,t.y)}),a(n);var o=t.length;e.forEach(function(t){s.variables[o]=t.minVar=new b(o++,void 0!==t.stiffness?t.stiffness:.01),s.variables[o]=t.maxVar=new b(o++,void 0!==t.stiffness?t.stiffness:.01)})}}return t.prototype.createSeparation=function(t){return new s.Constraint(this.nodes[t.left].variable,this.nodes[t.right].variable,t.gap,void 0!==t.equality&&t.equality)},t.prototype.makeFeasible=function(t){var e=this;if(this.avoidOverlaps){var n="x",r="width";"x"===t.axis&&(n="y",r="height");var i=t.offsets.map(function(t){return e.nodes[t.node]}).sort(function(t,e){return t[n]-e[n]}),s=null;i.forEach(function(t){if(s){var e=s[n]+s[r];e>t[n]&&(t[n]=e)}s=t})}},t.prototype.createAlignment=function(t){var e=this,n=this.nodes[t.offsets[0].node].variable;this.makeFeasible(t);var r="x"===t.axis?this.xConstraints:this.yConstraints;t.offsets.slice(1).forEach(function(t){r.push(new s.Constraint(n,e.nodes[t.node].variable,t.offset,!0))})},t.prototype.createConstraints=function(t){var e=this,n=function(t){return void 0===t.type||"separation"===t.type};this.xConstraints=t.filter(function(t){return"x"===t.axis&&n(t)}).map(function(t){return e.createSeparation(t)}),this.yConstraints=t.filter(function(t){return"y"===t.axis&&n(t)}).map(function(t){return e.createSeparation(t)}),t.filter(function(t){return"alignment"===t.type}).forEach(function(t){return e.createAlignment(t)})},t.prototype.setupVariablesAndBounds=function(t,e,n,r){this.nodes.forEach(function(i,s){i.fixed?(i.variable.weight=i.fixedWeight?i.fixedWeight:1e3,n[s]=r(i)):i.variable.weight=1;var o=(i.width||0)/2,a=(i.height||0)/2,c=t[s],l=e[s];i.bounds=new u(c-o,c+o,l-a,l+a)})},t.prototype.xProject=function(t,e,n){(this.rootGroup||this.avoidOverlaps||this.xConstraints)&&this.project(t,e,t,n,function(t){return t.px},this.xConstraints,_,function(t){return t.bounds.setXCentre(n[t.variable.index]=t.variable.position())},function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.x=e-i,t.bounds.X=r+i})},t.prototype.yProject=function(t,e,n){(this.rootGroup||this.yConstraints)&&this.project(t,e,e,n,function(t){return t.py},this.yConstraints,w,function(t){return t.bounds.setYCentre(n[t.variable.index]=t.variable.position())},function(t){var e=n[t.minVar.index]=t.minVar.position(),r=n[t.maxVar.index]=t.maxVar.position(),i=t.padding/2;t.bounds.y=e-i,t.bounds.Y=r+i})},t.prototype.projectFunctions=function(){var t=this;return[function(e,n,r){return t.xProject(e,n,r)},function(e,n,r){return t.yProject(e,n,r)}]},t.prototype.project=function(t,e,n,r,i,s,o,u,c){this.setupVariablesAndBounds(t,e,r,i),this.rootGroup&&this.avoidOverlaps&&(a(this.rootGroup),s=s.concat(o(this.rootGroup))),this.solve(this.variables,s,n,r),this.nodes.forEach(u),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(c),a(this.rootGroup))},t.prototype.solve=function(t,e,n,r){var i=new s.Solver(t,e);i.setStartingPositions(n),i.setDesiredPositions(r),i.solve()},t}();e.Projection=x},5259:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9516),i=function(t,e){this.id=t,this.distance=e},s=function(t){this.id=t,this.neighbours=[]},o=function(t,e,n){this.node=t,this.prev=e,this.d=n},a=function(){function t(t,e,n,r,o){this.n=t,this.es=e,this.neighbours=new Array(this.n);for(var a=this.n;a--;)this.neighbours[a]=new s(a);for(a=this.es.length;a--;){var u=this.es[a],c=n(u),l=r(u),h=o(u);this.neighbours[c].neighbours.push(new i(l,h)),this.neighbours[l].neighbours.push(new i(c,h))}}return t.prototype.DistanceMatrix=function(){for(var t=new Array(this.n),e=0;e<this.n;++e)t[e]=this.dijkstraNeighbours(e);return t},t.prototype.DistancesFromNode=function(t){return this.dijkstraNeighbours(t)},t.prototype.PathFromNodeToNode=function(t,e){return this.dijkstraNeighbours(t,e)},t.prototype.PathFromNodeToNodeWithPrevCost=function(t,e,n){var i=new r.PriorityQueue(function(t,e){return t.d<=e.d}),s=this.neighbours[t],a=new o(s,null,0),u={};for(i.push(a);!i.empty()&&(s=(a=i.pop()).node).id!==e;)for(var c=s.neighbours.length;c--;){var l=s.neighbours[c],h=this.neighbours[l.id];if(!a.prev||h.id!==a.prev.node.id){var d=h.id+","+s.id;if(!(d in u&&u[d]<=a.d)){var f=a.prev?n(a.prev.node.id,s.id,h.id):0,p=a.d+l.distance+f;u[d]=p,i.push(new o(h,a,p))}}}for(var g=[];a.prev;)g.push((a=a.prev).node.id);return g},t.prototype.dijkstraNeighbours=function(t,e){void 0===e&&(e=-1);for(var n=new r.PriorityQueue(function(t,e){return t.d<=e.d}),i=this.neighbours.length,s=new Array(i);i--;){var o=this.neighbours[i];o.d=i===t?0:Number.POSITIVE_INFINITY,o.q=n.push(o)}for(;!n.empty();){var a=n.pop();if(s[a.id]=a.d,a.id===e){for(var u=[],c=a;void 0!==c.prev;)u.push(c.prev.id),c=c.prev;return u}for(i=a.neighbours.length;i--;){var l=a.neighbours[i],h=(c=this.neighbours[l.id],a.d+l.distance);a.d!==Number.MAX_VALUE&&c.d>h&&(c.d=h,c.prev=a,n.reduceKey(c.q,c,function(t,e){return t.q=e}))}}return s},t}();e.Calculator=a},3535:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.scale=t,this.AB=0,this.AD=0,this.A2=0}return t.prototype.addVariable=function(t){var e=this.scale/t.scale,n=t.weight;this.AB+=n*e*(t.offset/t.scale),this.AD+=n*e*t.desiredPosition,this.A2+=n*e*e},t.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},t}();e.PositionStats=n;var r=function(){function t(t,e,n,r){void 0===r&&(r=!1),this.left=t,this.right=e,this.gap=n,this.equality=r,this.active=!1,this.unsatisfiable=!1,this.left=t,this.right=e,this.gap=n,this.equality=r}return t.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},t}();e.Constraint=r;var i=function(){function t(t,e,n){void 0===e&&(e=1),void 0===n&&(n=1),this.desiredPosition=t,this.weight=e,this.scale=n,this.offset=0}return t.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},t.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},t.prototype.visitNeighbours=function(t,e){var n=function(n,r){return n.active&&t!==r&&e(n,r)};this.cOut.forEach(function(t){return n(t,t.right)}),this.cIn.forEach(function(t){return n(t,t.left)})},t}();e.Variable=i;var s=function(){function t(t){this.vars=[],t.offset=0,this.ps=new n(t.scale),this.addVariable(t)}return t.prototype.addVariable=function(t){t.block=this,this.vars.push(t),this.ps.addVariable(t),this.posn=this.ps.getPosn()},t.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var t=0,e=this.vars.length;t<e;++t)this.ps.addVariable(this.vars[t]);this.posn=this.ps.getPosn()},t.prototype.compute_lm=function(t,e,n){var r=this,i=t.dfdv();return t.visitNeighbours(e,function(e,s){var o=r.compute_lm(s,t,n);s===e.right?(i+=o*e.left.scale,e.lm=o):(i+=o*e.right.scale,e.lm=-o),n(e)}),i/t.scale},t.prototype.populateSplitBlock=function(t,e){var n=this;t.visitNeighbours(e,function(e,r){r.offset=t.offset+(r===e.right?e.gap:-e.gap),n.addVariable(r),n.populateSplitBlock(r,t)})},t.prototype.traverse=function(t,e,n,r){var i=this;void 0===n&&(n=this.vars[0]),void 0===r&&(r=null),n.visitNeighbours(r,function(r,s){e.push(t(r)),i.traverse(t,e,s,n)})},t.prototype.findMinLM=function(){var t=null;return this.compute_lm(this.vars[0],null,function(e){!e.equality&&(null===t||e.lm<t.lm)&&(t=e)}),t},t.prototype.findMinLMBetween=function(t,e){this.compute_lm(t,null,function(){});var n=null;return this.findPath(t,null,e,function(t,e){!t.equality&&t.right===e&&(null===n||t.lm<n.lm)&&(n=t)}),n},t.prototype.findPath=function(t,e,n,r){var i=this,s=!1;return t.visitNeighbours(e,function(e,o){s||o!==n&&!i.findPath(o,t,n,r)||(s=!0,r(e,o))}),s},t.prototype.isActiveDirectedPathBetween=function(t,e){if(t===e)return!0;for(var n=t.cOut.length;n--;){var r=t.cOut[n];if(r.active&&this.isActiveDirectedPathBetween(r.right,e))return!0}return!1},t.split=function(e){return e.active=!1,[t.createSplitBlock(e.left),t.createSplitBlock(e.right)]},t.createSplitBlock=function(e){var n=new t(e);return n.populateSplitBlock(e,null),n},t.prototype.splitBetween=function(e,n){var r=this.findMinLMBetween(e,n);if(null!==r){var i=t.split(r);return{constraint:r,lb:i[0],rb:i[1]}}return null},t.prototype.mergeAcross=function(t,e,n){e.active=!0;for(var r=0,i=t.vars.length;r<i;++r){var s=t.vars[r];s.offset+=n,this.addVariable(s)}this.posn=this.ps.getPosn()},t.prototype.cost=function(){for(var t=0,e=this.vars.length;e--;){var n=this.vars[e],r=n.position()-n.desiredPosition;t+=r*r*n.weight}return t},t}();e.Block=s;var o=function(){function t(t){this.vs=t;var e=t.length;for(this.list=new Array(e);e--;){var n=new s(t[e]);this.list[e]=n,n.blockInd=e}}return t.prototype.cost=function(){for(var t=0,e=this.list.length;e--;)t+=this.list[e].cost();return t},t.prototype.insert=function(t){t.blockInd=this.list.length,this.list.push(t)},t.prototype.remove=function(t){var e=this.list.length-1,n=this.list[e];this.list.length=e,t!==n&&(this.list[t.blockInd]=n,n.blockInd=t.blockInd)},t.prototype.merge=function(t){var e=t.left.block,n=t.right.block,r=t.right.offset-t.left.offset-t.gap;e.vars.length<n.vars.length?(n.mergeAcross(e,t,r),this.remove(e)):(e.mergeAcross(n,t,-r),this.remove(n))},t.prototype.forEach=function(t){this.list.forEach(t)},t.prototype.updateBlockPositions=function(){this.list.forEach(function(t){return t.updateWeightedPosition()})},t.prototype.split=function(t){var e=this;this.updateBlockPositions(),this.list.forEach(function(n){var r=n.findMinLM();null!==r&&r.lm<a.LAGRANGIAN_TOLERANCE&&(n=r.left.block,s.split(r).forEach(function(t){return e.insert(t)}),e.remove(n),t.push(r))})},t}();e.Blocks=o;var a=function(){function t(t,e){this.vs=t,this.cs=e,this.vs=t,t.forEach(function(t){t.cIn=[],t.cOut=[]}),this.cs=e,e.forEach(function(t){t.left.cOut.push(t),t.right.cIn.push(t)}),this.inactive=e.map(function(t){return t.active=!1,t}),this.bs=null}return t.prototype.cost=function(){return this.bs.cost()},t.prototype.setStartingPositions=function(t){this.inactive=this.cs.map(function(t){return t.active=!1,t}),this.bs=new o(this.vs),this.bs.forEach(function(e,n){return e.posn=t[n]})},t.prototype.setDesiredPositions=function(t){this.vs.forEach(function(e,n){return e.desiredPosition=t[n]})},t.prototype.mostViolated=function(){for(var e=Number.MAX_VALUE,n=null,r=this.inactive,i=r.length,s=i,o=0;o<i;++o){var a=r[o];if(!a.unsatisfiable){var u=a.slack();if((a.equality||u<e)&&(e=u,n=a,s=o,a.equality))break}}return s!==i&&(e<t.ZERO_UPPERBOUND&&!n.active||n.equality)&&(r[s]=r[i-1],r.length=i-1),n},t.prototype.satisfy=function(){null==this.bs&&(this.bs=new o(this.vs)),this.bs.split(this.inactive);for(var e=null;(e=this.mostViolated())&&(e.equality||e.slack()<t.ZERO_UPPERBOUND&&!e.active);){var n=e.left.block;if(n!==e.right.block)this.bs.merge(e);else{if(n.isActiveDirectedPathBetween(e.right,e.left)){e.unsatisfiable=!0;continue}var r=n.splitBetween(e.left,e.right);if(null===r){e.unsatisfiable=!0;continue}this.bs.insert(r.lb),this.bs.insert(r.rb),this.bs.remove(n),this.inactive.push(r.constraint),e.slack()>=0?this.inactive.push(e):this.bs.merge(e)}}},t.prototype.solve=function(){this.satisfy();for(var t=Number.MAX_VALUE,e=this.bs.cost();Math.abs(t-e)>1e-4;)this.satisfy(),t=e,e=this.bs.cost();return e},t.LAGRANGIAN_TOLERANCE=-1e-4,t.ZERO_UPPERBOUND=-1e-10,t}();e.Solver=a,e.removeOverlapInOneDimension=function(t,e,n){for(var s=t.map(function(t){return new i(t.desiredCenter)}),o=[],u=t.length,c=0;c<u-1;c++)o.push(new r(s[c],s[c+1],(t[c].size+t[c+1].size)/2));var l=s[0],h=s[u-1],d=t[0].size/2,f=t[u-1].size/2,p=null,g=null;return e&&(p=new i(e,1e3*l.weight),s.push(p),o.push(new r(p,l,d))),n&&(g=new i(n,1e3*h.weight),s.push(g),o.push(new r(h,g,f))),new a(s,o).solve(),{newCenters:s.slice(0,t.length).map(function(t){return t.position()}),lowerBound:p?p.position():l.position()-d,upperBound:g?g.position():h.position()+f}}},9396:(t,e,n)=>{"use strict";var r={};n.r(r),n.d(r,{forceCenter:()=>Hc,forceCollide:()=>ol,forceLink:()=>gl,forceManyBody:()=>wl,forceRadial:()=>bl,forceSimulation:()=>_l,forceX:()=>xl,forceY:()=>El});var i={};n.r(i),n.d(i,{dispatch:()=>fr});var s={};n.r(s),n.d(s,{interval:()=>Sl,now:()=>gi,timeout:()=>Ei,timer:()=>vi,timerFlush:()=>_i});var o=n(3018);let a=null;function u(){return a}const c=new o.OlP("DocumentToken");let l=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,o.Yz7)({factory:h,token:t,providedIn:"platform"}),t})();function h(){return(0,o.LFG)(f)}const d=new o.OlP("Location Initialized");let f=(()=>{class t extends l{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return u().getBaseHref(this._doc)}onPopState(t){const e=u().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=u().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){p()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){p()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(c))},t.\u0275prov=(0,o.Yz7)({factory:g,token:t,providedIn:"platform"}),t})();function p(){return!!window.history.pushState}function g(){return new f((0,o.LFG)(c))}function m(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function y(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function v(t){return t&&"?"!==t[0]?"?"+t:t}let _=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,o.Yz7)({factory:w,token:t,providedIn:"root"}),t})();function w(t){const e=(0,o.LFG)(c).location;return new x((0,o.LFG)(l),e&&e.origin||"")}const b=new o.OlP("appBaseHref");let x=(()=>{class t extends _{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return m(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+v(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+v(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+v(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(l),o.LFG(b,8))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})(),E=(()=>{class t extends _{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=m(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+v(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+v(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(l),o.LFG(b,8))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})(),T=(()=>{class t{constructor(t,e){this._subject=new o.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=y(k(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+v(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,k(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+v(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+v(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(_),o.LFG(l))},t.normalizeQueryParams=v,t.joinWithSlash=m,t.stripTrailingSlash=y,t.\u0275prov=(0,o.Yz7)({factory:S,token:t,providedIn:"root"}),t})();function S(){return new T((0,o.LFG)(_),(0,o.LFG)(l))}function k(t){return t.replace(/\/index.html$/,"")}var I=(()=>((I=I||{})[I.Zero=0]="Zero",I[I.One=1]="One",I[I.Two=2]="Two",I[I.Few=3]="Few",I[I.Many=4]="Many",I[I.Other=5]="Other",I))();const C=o.kL8;class A{}let O=(()=>{class t extends A{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(C(e||this.locale)(t)){case I.Zero:return"zero";case I.One:return"one";case I.Two:return"two";case I.Few:return"few";case I.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(o.soG))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})();class N{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let D=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(mk){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(t){return t.name||typeof t}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new N(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new P(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new P(t,i);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4))},t.\u0275dir=o.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class P{constructor(t,e){this.record=t,this.view=e}}let R=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new M,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){L("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){L("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(o.s_b),o.Y36(o.Rgc))},t.\u0275dir=o.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class M{constructor(){this.$implicit=null,this.ngIf=null}}function L(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,o.AaK)(e)}'.`)}let F=(()=>{class t{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(t.ngTemplateOutlet){const t=this._viewContainerRef;this._viewRef&&t.remove(t.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?t.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(o.s_b))},t.\u0275dir=o.lG2({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[o.TTD]}),t})(),j=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({providers:[{provide:A,useClass:O}]}),t})();function U(t){return"server"===t}let V=(()=>{class t{}return t.\u0275prov=(0,o.Yz7)({token:t,providedIn:"root",factory:()=>new q((0,o.LFG)(c),window)}),t})();class q{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=B(this.window.history)||B(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(mk){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(mk){return!1}}}function B(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class z extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new z,a||(a=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(G=G||document.querySelector("base"),G?G.getAttribute("href"):null);return null==e?null:function(t){$=$||document.createElement("a"),$.setAttribute("href",t);const e=$.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){G=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let $,G=null;const Z=new o.OlP("TRANSITION_ID"),H=[{provide:o.ip1,useFactory:function(t,e,n){return()=>{n.get(o.CZH).donePromise.then(()=>{const n=u();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Z,c,o.zs3],multi:!0}];class W{static init(){(0,o.VLi)(new W)}addToWindow(t){o.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},o.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),o.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),o.dqk.frameworkStabilizers||(o.dqk.frameworkStabilizers=[]),o.dqk.frameworkStabilizers.push(t=>{const e=o.dqk.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach(function(t){t.whenStable(i)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?u().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let K=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})();const Y=new o.OlP("EventManagerPlugins");let Q=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(Y),o.LFG(o.R0b))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})();class J{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=u().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let X=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})(),tt=(()=>{class t extends X{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(et),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(et))}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(c))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})();function et(t){u().remove(t)}const nt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},rt=/%COMP%/g;function it(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?it(t,i,n):(i=i.replace(rt,t),n.push(i))}return n}function st(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let ot=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new at(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case o.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new ut(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case o.ifc.ShadowDom:return new ct(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=it(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(Q),o.LFG(tt),o.LFG(o.AFp))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})();class at{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(nt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=nt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=nt[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(o.JOm.DashCase|o.JOm.Important)?t.style.setProperty(e,n,r&o.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&o.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,st(n)):this.eventManager.addEventListener(t,e,st(n))}}class ut extends at{constructor(t,e,n,r){super(t),this.component=n;const i=it(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(rt,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(rt,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ct extends at{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=it(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const t=document.createElement("style");t.textContent=i[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let lt=(()=>{class t extends J{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(c))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})();const ht=["alt","control","meta","shift"],dt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ft={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},pt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let gt=(()=>{class t extends J{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>u().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let s="";if(ht.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ft.hasOwnProperty(e)&&(e=ft[e]))}return dt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),ht.forEach(r=>{r!=n&&(0,pt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(c))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})(),mt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,o.Yz7)({factory:function(){return(0,o.LFG)(vt)},token:t,providedIn:"root"}),t})();function yt(t){return new vt(t.get(c))}let vt=(()=>{class t extends mt{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case o.q3G.NONE:return e;case o.q3G.HTML:return(0,o.qzn)(e,"HTML")?(0,o.z3N)(e):(0,o.EiD)(this._doc,String(e)).toString();case o.q3G.STYLE:return(0,o.qzn)(e,"Style")?(0,o.z3N)(e):e;case o.q3G.SCRIPT:if((0,o.qzn)(e,"Script"))return(0,o.z3N)(e);throw new Error("unsafe value used in a script context");case o.q3G.URL:return(0,o.yhl)(e),(0,o.qzn)(e,"URL")?(0,o.z3N)(e):(0,o.mCW)(String(e));case o.q3G.RESOURCE_URL:if((0,o.qzn)(e,"ResourceURL"))return(0,o.z3N)(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,o.JVY)(t)}bypassSecurityTrustStyle(t){return(0,o.L6k)(t)}bypassSecurityTrustScript(t){return(0,o.eBb)(t)}bypassSecurityTrustUrl(t){return(0,o.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,o.pB0)(t)}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(c))},t.\u0275prov=(0,o.Yz7)({factory:function(){return yt((0,o.LFG)(o.gxx))},token:t,providedIn:"root"}),t})();const _t=(0,o.eFA)(o._c5,"browser",[{provide:o.Lbi,useValue:"browser"},{provide:o.g9A,useValue:function(){z.makeCurrent(),W.init()},multi:!0},{provide:c,useFactory:function(){return(0,o.RDi)(document),document},deps:[]}]),wt=[[],{provide:o.zSh,useValue:"root"},{provide:o.qLn,useFactory:function(){return new o.qLn},deps:[]},{provide:Y,useClass:lt,multi:!0,deps:[c,o.R0b,o.Lbi]},{provide:Y,useClass:gt,multi:!0,deps:[c]},[],{provide:ot,useClass:ot,deps:[Q,tt,o.AFp]},{provide:o.FYo,useExisting:ot},{provide:X,useExisting:tt},{provide:tt,useClass:tt,deps:[c]},{provide:o.dDg,useClass:o.dDg,deps:[o.R0b]},{provide:Q,useClass:Q,deps:[Y,o.R0b]},{provide:class{},useClass:K,deps:[]},[]];let bt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:o.AFp,useValue:e.appId},{provide:Z,useExisting:o.AFp},H]}}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(t,12))},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({providers:wt,imports:[j,o.hGG]}),t})();"undefined"!=typeof window&&window;var xt=n(4402),Et=n(7574),Tt=n(9796),St=n(8002),kt=n(1555);function It(t,e){return new Et.y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const u=(0,xt.D)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,o++),i[a]=t},error:t=>n.error(t),complete:()=>{s++,s!==r&&c||(o===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}let Ct=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(o.Qsj),o.Y36(o.SBq))},t.\u0275dir=o.lG2({type:t}),t})(),At=(()=>{class t extends Ct{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=o.n5z(t)))(n||t)}}(),t.\u0275dir=o.lG2({type:t,features:[o.qOj]}),t})();const Ot=new o.OlP("NgValueAccessor"),Nt={provide:Ot,useExisting:(0,o.Gpc)(()=>Pt),multi:!0},Dt=new o.OlP("CompositionEventMode");let Pt=(()=>{class t extends Ct{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=u()?u().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(Dt,8))},t.\u0275dir=o.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&o.NdJ("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[o._Bn([Nt]),o.qOj]}),t})();const Rt=new o.OlP("NgValidators"),Mt=new o.OlP("NgAsyncValidators");function Lt(t){return null!=t}function Ft(t){const e=(0,o.QGY)(t)?(0,xt.D)(t):t;return(0,o.CqO)(e),e}function jt(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Ut(t,e){return e.map(e=>e(t))}function Vt(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function qt(t){return null!=t?function(t){if(!t)return null;const e=t.filter(Lt);return 0==e.length?null:function(t){return jt(Ut(t,e))}}(Vt(t)):null}function Bt(t){return null!=t?function(t){if(!t)return null;const e=t.filter(Lt);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if((0,Tt.k)(e))return It(e,null);if((0,kt.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return It(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return It(t=1===t.length&&(0,Tt.k)(t[0])?t[0]:t,null).pipe((0,St.U)(t=>e(...t)))}return It(t,null)}(Ut(t,e).map(Ft)).pipe((0,St.U)(jt))}}(Vt(t)):null}function zt(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let $t=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=qt(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Bt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=o.lG2({type:t}),t})(),Gt=(()=>{class t extends $t{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=o.n5z(t)))(n||t)}}(),t.\u0275dir=o.lG2({type:t,features:[o.qOj]}),t})();class Zt extends $t{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ht{constructor(t){this._cd=t}is(t){var e,n,r;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[t])}}let Wt=(()=>{class t extends Ht{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(Zt,2))},t.\u0275dir=o.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&o.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[o.qOj]}),t})(),Kt=(()=>{class t extends Ht{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(Gt,10))},t.\u0275dir=o.lG2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,e){2&t&&o.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))("ng-submitted",e.is("submitted"))},features:[o.qOj]}),t})();function Yt(t,e){Jt(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Xt(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Xt(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function Qt(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Jt(t,e){const n=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(zt(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(zt(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();Qt(e._rawValidators,i),Qt(e._rawAsyncValidators,i)}function Xt(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function te(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ee="VALID",ne="INVALID",re="PENDING",ie="DISABLED";function se(t){return(ce(t)?t.validators:t)||null}function oe(t){return Array.isArray(t)?qt(t):t||null}function ae(t,e){return(ce(e)?e.asyncValidators:t)||null}function ue(t){return Array.isArray(t)?Bt(t):t||null}function ce(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class le{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=oe(this._rawValidators),this._composedAsyncValidatorFn=ue(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ee}get invalid(){return this.status===ne}get pending(){return this.status==re}get disabled(){return this.status===ie}get enabled(){return this.status!==ie}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=oe(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=ue(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=re,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ie,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ee,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==ee&&this.status!==re||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ie:ee}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=re,this._hasOwnPendingAsyncValidator=!0;const e=Ft(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof de?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof fe&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?ie:this.errors?ne:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(re)?re:this._anyControlsHaveStatus(ne)?ne:ee}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){ce(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class he extends le{constructor(t=null,e,n){super(se(e),ae(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){te(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){te(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class de extends le{constructor(t,e,n){super(se(e),ae(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof he?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class fe extends le{constructor(t,e,n){super(se(e),ae(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof he?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const pe={provide:Gt,useExisting:(0,o.Gpc)(()=>me)},ge=(()=>Promise.resolve(null))();let me=(()=>{class t extends Gt{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new o.vpe,this.form=new de({},qt(t),Bt(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ge.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Yt(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ge.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),te(this._directives,t)})}addFormGroup(t){ge.then(()=>{const e=this._findContainer(t.path),n=new de({});(function(t,e){Jt(t,e)})(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ge.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){ge.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(Rt,10),o.Y36(Mt,10))},t.\u0275dir=o.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&o.NdJ("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([pe]),o.qOj]}),t})();const ye={provide:Zt,useExisting:(0,o.Gpc)(()=>_e)},ve=(()=>Promise.resolve(null))();let _e=(()=>{class t extends Zt{constructor(t,e,n,r){super(),this.control=new he,this._registered=!1,this.update=new o.vpe,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===Pt?n=t:Object.getPrototypeOf(t.constructor)===At?r=t:i=t}),i||r||n||null}(0,r)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Yt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){ve.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;ve.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(Gt,9),o.Y36(Rt,10),o.Y36(Mt,10),o.Y36(Ot,10))},t.\u0275dir=o.lG2({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[o._Bn([ye]),o.qOj,o.TTD]}),t})(),we=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=o.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),be=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({}),t})();const xe={provide:Rt,useExisting:(0,o.Gpc)(()=>Ee),multi:!0};let Ee=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?function(t){return function(t){return null==t||0===t.length}(t.value)?{required:!0}:null}(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=o.lG2({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&o.uIk("required",e.required?"":null)},inputs:{required:"required"},features:[o._Bn([xe])]}),t})(),Te=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[be]]}),t})(),Se=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[Te]}),t})();var ke=n(4762);class Ie{}const Ce="*";function Ae(t,e=null){return{type:4,styles:e,timings:t}}function Oe(t,e=null){return{type:2,steps:t,options:e}}function Ne(t){return{type:6,styles:t,offset:null}}function De(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function Pe(t){Promise.resolve(null).then(t)}class Re{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Pe(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Me{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const i=this.players.length;0==i?Pe(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==i&&this._onFinish()}),t.onDestroy(()=>{++n==i&&this._onDestroy()}),t.onStart(()=>{++r==i&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Le{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Fe extends Le{constructor(t,e,n,r){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r}}class je extends Le{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class Ue extends Le{constructor(t){super(),this.element=t instanceof o.SBq?t.nativeElement:t}}class Ve extends class extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof Fe?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof je?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof Ue?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(t,e,n,r,i){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=t=>{const e=t.element,n=this._document.createComment("dom-portal");e.parentNode.insertBefore(n,e),this.outletElement.appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=i}attachComponentPortal(t){const e=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let n;return t.viewContainerRef?(n=t.viewContainerRef.createComponent(e,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=e.create(t.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=t,n}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.rootNodes.forEach(t=>this.outletElement.appendChild(t)),n.detectChanges(),this.setDisposeFn(()=>{let t=e.indexOf(n);-1!==t&&e.remove(t)}),this._attachedPortal=t,n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}{}var qe=n(9105);function Be(t,e,n,r){return(0,qe.m)(n)&&(r=n,n=void 0),r?Be(t,e,n).pipe((0,St.U)(t=>(0,Tt.k)(t)?r(...t):r(t))):new Et.y(r=>{ze(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function ze(t,e,n,r,i){let s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),s=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),s=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),s=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let s=0,o=t.length;s<o;s++)ze(t[s],e,n,r,i)}r.add(s)}var $e=n(7393),Ge=n(3637);class Ze{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new He(t,this.dueTime,this.scheduler))}}class He extends $e.L{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(We,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function We(t){t.debouncedNext()}function Ke(){}function Ye(t){return null==t?Ke:function(){return this.querySelector(t)}}function Qe(){return[]}function Je(t){return null==t?Qe:function(){return this.querySelectorAll(t)}}function Xe(t){return function(){return this.matches(t)}}function tn(t){return new Array(t.length)}function en(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function nn(t,e,n,r,i,s){for(var o,a=0,u=e.length,c=s.length;a<c;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new en(t,s[a]);for(;a<u;++a)(o=e[a])&&(i[a]=o)}function rn(t,e,n,r,i,s,o){var a,u,c,l={},h=e.length,d=s.length,f=new Array(h);for(a=0;a<h;++a)(u=e[a])&&(f[a]=c="$"+o.call(u,u.__data__,a,e),c in l?i[a]=u:l[c]=u);for(a=0;a<d;++a)(u=l[c="$"+o.call(t,s[a],a,s)])?(r[a]=u,u.__data__=s[a],l[c]=null):n[a]=new en(t,s[a]);for(a=0;a<h;++a)(u=e[a])&&l[f[a]]===u&&(i[a]=u)}function sn(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}en.prototype={constructor:en,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var on="http://www.w3.org/1999/xhtml";const an={svg:"http://www.w3.org/2000/svg",xhtml:on,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function un(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),an.hasOwnProperty(e)?{space:an[e],local:t}:t}function cn(t){return function(){this.removeAttribute(t)}}function ln(t){return function(){this.removeAttributeNS(t.space,t.local)}}function hn(t,e){return function(){this.setAttribute(t,e)}}function dn(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function fn(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function pn(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function gn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function mn(t){return function(){this.style.removeProperty(t)}}function yn(t,e,n){return function(){this.style.setProperty(t,e,n)}}function vn(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function _n(t,e){return t.style.getPropertyValue(e)||gn(t).getComputedStyle(t,null).getPropertyValue(e)}function wn(t){return function(){delete this[t]}}function bn(t,e){return function(){this[t]=e}}function xn(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function En(t){return t.trim().split(/^|\s+/)}function Tn(t){return t.classList||new Sn(t)}function Sn(t){this._node=t,this._names=En(t.getAttribute("class")||"")}function kn(t,e){for(var n=Tn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function In(t,e){for(var n=Tn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Cn(t){return function(){kn(this,t)}}function An(t){return function(){In(this,t)}}function On(t,e){return function(){(e.apply(this,arguments)?kn:In)(this,t)}}function Nn(){this.textContent=""}function Dn(t){return function(){this.textContent=t}}function Pn(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Rn(){this.innerHTML=""}function Mn(t){return function(){this.innerHTML=t}}function Ln(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Fn(){this.nextSibling&&this.parentNode.appendChild(this)}function jn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Un(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===on&&e.documentElement.namespaceURI===on?e.createElement(t):e.createElementNS(n,t)}}function Vn(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function qn(t){var e=un(t);return(e.local?Vn:Un)(e)}function Bn(){return null}function zn(){var t=this.parentNode;t&&t.removeChild(this)}function $n(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Gn(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}Sn.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Zn={},Hn=null;function Wn(t,e,n){return t=Kn(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function Kn(t,e,n){return function(r){var i=Hn;Hn=r;try{t.call(this,this.__data__,e,n)}finally{Hn=i}}}function Yn(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function Qn(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,s=e.length;r<s;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function Jn(t,e,n){var r=Zn.hasOwnProperty(t.type)?Wn:Kn;return function(i,s,o){var a,u=this.__on,c=r(e,s,o);if(u)for(var l=0,h=u.length;l<h;++l)if((a=u[l]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=c,a.capture=n),void(a.value=e);this.addEventListener(t.type,c,n),a={type:t.type,name:t.name,value:e,listener:c,capture:n},u?u.push(a):this.__on=[a]}}function Xn(t,e,n){var r=gn(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function tr(t,e){return function(){return Xn(this,t,e)}}function er(t,e){return function(){return Xn(this,t,e.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Zn={mouseenter:"mouseover",mouseleave:"mouseout"}));var nr=[null];function rr(t,e){this._groups=t,this._parents=e}function ir(){return new rr([[document.documentElement]],nr)}rr.prototype=ir.prototype={constructor:rr,select:function(t){"function"!=typeof t&&(t=Ye(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o,a=e[i],u=a.length,c=r[i]=new Array(u),l=0;l<u;++l)(s=a[l])&&(o=t.call(s,s.__data__,l,a))&&("__data__"in s&&(o.__data__=s.__data__),c[l]=o);return new rr(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=Je(t));for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var o,a=e[s],u=a.length,c=0;c<u;++c)(o=a[c])&&(r.push(t.call(o,o.__data__,c,a)),i.push(o));return new rr(r,i)},filter:function(t){"function"!=typeof t&&(t=Xe(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,u=r[i]=[],c=0;c<a;++c)(s=o[c])&&t.call(s,s.__data__,c,o)&&u.push(s);return new rr(r,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),l=-1,this.each(function(t){p[++l]=t}),p;var n,r=e?rn:nn,i=this._parents,s=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=s.length,a=new Array(o),u=new Array(o),c=new Array(o),l=0;l<o;++l){var h=i[l],d=s[l],f=d.length,p=t.call(h,h&&h.__data__,l,i),g=p.length,m=u[l]=new Array(g),y=a[l]=new Array(g);r(h,d,m,y,c[l]=new Array(f),p,e);for(var v,_,w=0,b=0;w<g;++w)if(v=m[w]){for(w>=b&&(b=w+1);!(_=y[b])&&++b<g;);v._next=_||null}}return(a=new rr(a,i))._enter=u,a._exit=c,a},enter:function(){return new rr(this._enter||this._groups.map(tn),this._parents)},exit:function(){return new rr(this._exit||this._groups.map(tn),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,s=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?s.remove():n(s),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=Math.min(r,n.length),s=new Array(r),o=0;o<i;++o)for(var a,u=e[o],c=n[o],l=u.length,h=s[o]=new Array(l),d=0;d<l;++d)(a=u[d]||c[d])&&(h[d]=a);for(;o<r;++o)s[o]=e[o];return new rr(s,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],s=i.length-1,o=i[s];--s>=0;)(r=i[s])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=sn);for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o,a=n[s],u=a.length,c=i[s]=new Array(u),l=0;l<u;++l)(o=a[l])&&(c[l]=o);c.sort(e)}return new rr(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,s=e[n],o=0,a=s.length;o<a;++o)(i=s[o])&&t.call(i,i.__data__,o,s);return this},attr:function(t,e){var n=un(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?ln:cn:"function"==typeof e?n.local?pn:fn:n.local?dn:hn)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?mn:"function"==typeof e?vn:yn)(t,e,null==n?"":n)):_n(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?wn:"function"==typeof e?xn:bn)(t,e)):this.node()[t]},classed:function(t,e){var n=En(t+"");if(arguments.length<2){for(var r=Tn(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?On:e?Cn:An)(n,e))},text:function(t){return arguments.length?this.each(null==t?Nn:("function"==typeof t?Pn:Dn)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Rn:("function"==typeof t?Ln:Mn)(t)):this.node().innerHTML},raise:function(){return this.each(Fn)},lower:function(){return this.each(jn)},append:function(t){var e="function"==typeof t?t:qn(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:qn(t),r=null==e?Bn:"function"==typeof e?e:Ye(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(zn)},clone:function(t){return this.select(t?Gn:$n)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,s=Yn(t+""),o=s.length;if(!(arguments.length<2)){for(a=e?Jn:Qn,null==n&&(n=!1),r=0;r<o;++r)this.each(a(s[r],e,n));return this}var a=this.node().__on;if(a)for(var u,c=0,l=a.length;c<l;++c)for(r=0,u=a[c];r<o;++r)if((i=s[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?er:tr)(t,e))}};const sr=ir;function or(t){return"string"==typeof t?new rr([[document.querySelector(t)]],[document.documentElement]):new rr([[t]],nr)}var ar={value:function(){}};function ur(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new cr(r)}function cr(t){this._=t}function lr(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function hr(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function dr(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ar,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}cr.prototype=ur.prototype={constructor:cr,on:function(t,e){var n,r=this._,i=lr(t+"",r),s=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<o;)if(n=(t=i[s]).type)r[n]=dr(r[n],t.name,e);else if(null==e)for(n in r)r[n]=dr(r[n],t.name,null);return this}for(;++s<o;)if((n=(t=i[s]).type)&&(n=hr(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new cr(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),s=0;s<n;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(r=this._[t]).length;s<n;++s)r[s].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};const fr=ur;function pr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function gr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function mr(){}var yr=.7,vr=1/yr,_r="\\s*([+-]?\\d+)\\s*",wr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",br="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xr=/^#([0-9a-f]{3,8})$/,Er=new RegExp("^rgb\\("+[_r,_r,_r]+"\\)$"),Tr=new RegExp("^rgb\\("+[br,br,br]+"\\)$"),Sr=new RegExp("^rgba\\("+[_r,_r,_r,wr]+"\\)$"),kr=new RegExp("^rgba\\("+[br,br,br,wr]+"\\)$"),Ir=new RegExp("^hsl\\("+[wr,br,br]+"\\)$"),Cr=new RegExp("^hsla\\("+[wr,br,br,wr]+"\\)$"),Ar={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Or(){return this.rgb().formatHex()}function Nr(){return this.rgb().formatRgb()}function Dr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=xr.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Pr(e):3===n?new Fr(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Rr(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Rr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Er.exec(t))?new Fr(e[1],e[2],e[3],1):(e=Tr.exec(t))?new Fr(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Sr.exec(t))?Rr(e[1],e[2],e[3],e[4]):(e=kr.exec(t))?Rr(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ir.exec(t))?qr(e[1],e[2]/100,e[3]/100,1):(e=Cr.exec(t))?qr(e[1],e[2]/100,e[3]/100,e[4]):Ar.hasOwnProperty(t)?Pr(Ar[t]):"transparent"===t?new Fr(NaN,NaN,NaN,0):null}function Pr(t){return new Fr(t>>16&255,t>>8&255,255&t,1)}function Rr(t,e,n,r){return r<=0&&(t=e=n=NaN),new Fr(t,e,n,r)}function Mr(t){return t instanceof mr||(t=Dr(t)),t?new Fr((t=t.rgb()).r,t.g,t.b,t.opacity):new Fr}function Lr(t,e,n,r){return 1===arguments.length?Mr(t):new Fr(t,e,n,null==r?1:r)}function Fr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function jr(){return"#"+Vr(this.r)+Vr(this.g)+Vr(this.b)}function Ur(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Vr(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function qr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new zr(t,e,n,r)}function Br(t){if(t instanceof zr)return new zr(t.h,t.s,t.l,t.opacity);if(t instanceof mr||(t=Dr(t)),!t)return new zr;if(t instanceof zr)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(o=e===s?(n-r)/a+6*(n<r):n===s?(r-e)/a+2:(e-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new zr(o,a,u,t.opacity)}function zr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function $r(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Gr(t,e,n,r,i){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*r+o*i)/6}function Zr(t){return function(){return t}}function Hr(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Zr(isNaN(t)?e:t)}pr(mr,Dr,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Or,formatHex:Or,formatHsl:function(){return Br(this).formatHsl()},formatRgb:Nr,toString:Nr}),pr(Fr,Lr,gr(mr,{brighter:function(t){return t=null==t?vr:Math.pow(vr,t),new Fr(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?yr:Math.pow(yr,t),new Fr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jr,formatHex:jr,formatRgb:Ur,toString:Ur})),pr(zr,function(t,e,n,r){return 1===arguments.length?Br(t):new zr(t,e,n,null==r?1:r)},gr(mr,{brighter:function(t){return t=null==t?vr:Math.pow(vr,t),new zr(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?yr:Math.pow(yr,t),new zr(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Fr($r(t>=240?t-240:t+120,i,r),$r(t,i,r),$r(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const Wr=function t(e){var n=function(t){return 1==(t=+t)?Hr:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Zr(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=Lr(t)).r,(e=Lr(e)).r),i=n(t.g,e.g),s=n(t.b,e.b),o=Hr(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=s(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function Kr(t){return function(e){var n,r,i=e.length,s=new Array(i),o=new Array(i),a=new Array(i);for(n=0;n<i;++n)r=Lr(e[n]),s[n]=r.r||0,o[n]=r.g||0,a[n]=r.b||0;return s=t(s),o=t(o),a=t(a),r.opacity=1,function(t){return r.r=s(t),r.g=o(t),r.b=a(t),r+""}}}function Yr(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,s=new Array(i),o=new Array(r);for(n=0;n<i;++n)s[n]=ii(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=s[n](t);return o}}function Qr(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Jr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Xr(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=ii(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}Kr(function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],s=t[r+1];return Gr((n-r/e)*e,r>0?t[r-1]:2*i-s,i,s,r<e-1?t[r+2]:2*s-i)}}),Kr(function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e);return Gr((n-r/e)*e,t[(r+e-1)%e],t[r%e],t[(r+1)%e],t[(r+2)%e])}});var ti=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ei=new RegExp(ti.source,"g");function ni(t,e){var n,r,i,s=ti.lastIndex=ei.lastIndex=0,o=-1,a=[],u=[];for(t+="",e+="";(n=ti.exec(t))&&(r=ei.exec(e));)(i=r.index)>s&&(i=e.slice(s,i),a[o]?a[o]+=i:a[++o]=i),(n=n[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,u.push({i:o,x:Jr(n,r)})),s=ei.lastIndex;return s<e.length&&(i=e.slice(s),a[o]?a[o]+=i:a[++o]=i),a.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)a[(n=u[r]).i]=n.x(t);return a.join("")})}function ri(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(s){for(n=0;n<r;++n)i[n]=t[n]*(1-s)+e[n]*s;return i}}function ii(t,e){var n,r,i=typeof e;return null==e||"boolean"===i?Zr(e):("number"===i?Jr:"string"===i?(n=Dr(e))?(e=n,Wr):ni:e instanceof Dr?Wr:e instanceof Date?Qr:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?Yr:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Xr:Jr:ri))(t,e)}var si,oi,ai=0,ui=0,ci=0,li=0,hi=0,di=0,fi="object"==typeof performance&&performance.now?performance:Date,pi="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function gi(){return hi||(pi(mi),hi=fi.now()+di)}function mi(){hi=0}function yi(){this._call=this._time=this._next=null}function vi(t,e,n){var r=new yi;return r.restart(t,e,n),r}function _i(){gi(),++ai;for(var t,e=si;e;)(t=hi-e._time)>=0&&e._call.call(null,t),e=e._next;--ai}function wi(){hi=(li=fi.now())+di,ai=ui=0;try{_i()}finally{ai=0,function(){for(var t,e,n=si,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:si=e);oi=t,xi(r)}(),hi=0}}function bi(){var t=fi.now(),e=t-li;e>1e3&&(di-=e,li=t)}function xi(t){ai||(ui&&(ui=clearTimeout(ui)),t-hi>24?(t<1/0&&(ui=setTimeout(wi,t-fi.now()-di)),ci&&(ci=clearInterval(ci))):(ci||(li=fi.now(),ci=setInterval(bi,1e3)),ai=1,pi(wi)))}function Ei(t,e,n){var r=new yi;return r.restart(function(n){r.stop(),t(n+e)},e=null==e?0:+e,n),r}yi.prototype=vi.prototype={constructor:yi,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?gi():+n)+(null==e?0:+e),this._next||oi===this||(oi?oi._next=this:si=this,oi=this),this._call=t,this._time=n,xi()},stop:function(){this._call&&(this._call=null,this._time=1/0,xi())}};var Ti=fr("start","end","cancel","interrupt"),Si=[];function ki(t,e,n,r,i,s){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function s(u){var c,l,h,d;if(1!==n.state)return a();for(c in i)if((d=i[c]).name===n.name){if(3===d.state)return Ei(s);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[c]):+c<e&&(d.state=6,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[c])}if(Ei(function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),c=0,l=-1;c<h;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=d);r.length=l+1}}function o(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(a),n.state=5,1),s=-1,o=r.length;++s<o;)r[s].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=vi(function(t){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay)},0,n.time)}(t,n,{name:e,index:r,group:i,on:Ti,tween:Si,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:0})}function Ii(t,e){var n=Ai(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Ci(t,e){var n=Ai(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Ai(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var Oi,Ni,Di,Pi,Ri=180/Math.PI,Mi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Li(t,e,n,r,i,s){var o,a,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Ri,skewX:Math.atan(u)*Ri,scaleX:o,scaleY:a}}function Fi(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(s,o){var a=[],u=[];return s=t(s),o=t(o),function(t,r,i,s,o,a){if(t!==i||r!==s){var u=o.push("translate(",null,e,null,n);a.push({i:u-4,x:Jr(t,i)},{i:u-2,x:Jr(r,s)})}else(i||s)&&o.push("translate("+i+e+s+n)}(s.translateX,s.translateY,o.translateX,o.translateY,a,u),function(t,e,n,s){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),s.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Jr(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(s.rotate,o.rotate,a,u),function(t,e,n,s){t!==e?s.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Jr(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(s.skewX,o.skewX,a,u),function(t,e,n,r,s,o){if(t!==n||e!==r){var a=s.push(i(s)+"scale(",null,",",null,")");o.push({i:a-4,x:Jr(t,n)},{i:a-2,x:Jr(e,r)})}else 1===n&&1===r||s.push(i(s)+"scale("+n+","+r+")")}(s.scaleX,s.scaleY,o.scaleX,o.scaleY,a,u),s=o=null,function(t){for(var e,n=-1,r=u.length;++n<r;)a[(e=u[n]).i]=e.x(t);return a.join("")}}}var ji=Fi(function(t){return"none"===t?Mi:(Oi||(Oi=document.createElement("DIV"),Ni=document.documentElement,Di=document.defaultView),Oi.style.transform=t,t=Di.getComputedStyle(Ni.appendChild(Oi),null).getPropertyValue("transform"),Ni.removeChild(Oi),Li(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),Ui=Fi(function(t){return null==t?Mi:(Pi||(Pi=document.createElementNS("http://www.w3.org/2000/svg","g")),Pi.setAttribute("transform",t),(t=Pi.transform.baseVal.consolidate())?Li((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Mi)},", ",")",")");function Vi(t,e){var n,r;return function(){var i=Ci(this,t),s=i.tween;if(s!==n)for(var o=0,a=(r=n=s).length;o<a;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r}}function qi(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var s=Ci(this,t),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=a;break}u===c&&i.push(a)}s.tween=i}}function Bi(t,e,n){var r=t._id;return t.each(function(){var t=Ci(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return Ai(t,r).value[e]}}function zi(t,e){var n;return("number"==typeof e?Jr:e instanceof Dr?Wr:(n=Dr(e))?(e=n,Wr):ni)(t,e)}function $i(t){return function(){this.removeAttribute(t)}}function Gi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Zi(t,e,n){var r,i,s=n+"";return function(){var o=this.getAttribute(t);return o===s?null:o===r?i:i=e(r=o,n)}}function Hi(t,e,n){var r,i,s=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===s?null:o===r?i:i=e(r=o,n)}}function Wi(t,e,n){var r,i,s;return function(){var o,a,u=n(this);if(null!=u)return(o=this.getAttribute(t))===(a=u+"")?null:o===r&&a===i?s:(i=a,s=e(r=o,u));this.removeAttribute(t)}}function Ki(t,e,n){var r,i,s;return function(){var o,a,u=n(this);if(null!=u)return(o=this.getAttributeNS(t.space,t.local))===(a=u+"")?null:o===r&&a===i?s:(i=a,s=e(r=o,u));this.removeAttributeNS(t.space,t.local)}}function Yi(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Qi(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ji(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Qi(t,i)),n}return i._value=e,i}function Xi(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Yi(t,i)),n}return i._value=e,i}function ts(t,e){return function(){Ii(this,t).delay=+e.apply(this,arguments)}}function es(t,e){return e=+e,function(){Ii(this,t).delay=e}}function ns(t,e){return function(){Ci(this,t).duration=+e.apply(this,arguments)}}function rs(t,e){return e=+e,function(){Ci(this,t).duration=e}}function is(t,e){if("function"!=typeof e)throw new Error;return function(){Ci(this,t).ease=e}}function ss(t,e,n){var r,i,s=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(e)?Ii:Ci;return function(){var o=s(this,t),a=o.on;a!==r&&(i=(r=a).copy()).on(e,n),o.on=i}}var os=sr.prototype.constructor;function as(t){return function(){this.style.removeProperty(t)}}function us(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function cs(t,e,n){var r,i;function s(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&us(t,s,n)),r}return s._value=e,s}function ls(t){return function(e){this.textContent=t.call(this,e)}}function hs(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&ls(r)),e}return r._value=t,r}var ds=0;function fs(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function ps(){return++ds}var gs=sr.prototype;fs.prototype=(function(t){return sr().transition(t)}).prototype={constructor:fs,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Ye(t));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a,u,c=r[o],l=c.length,h=s[o]=new Array(l),d=0;d<l;++d)(a=c[d])&&(u=t.call(a,a.__data__,d,c))&&("__data__"in a&&(u.__data__=a.__data__),h[d]=u,ki(h[d],e,n,d,h,Ai(a,n)));return new fs(s,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Je(t));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u,c=r[a],l=c.length,h=0;h<l;++h)if(u=c[h]){for(var d,f=t.call(u,u.__data__,h,c),p=Ai(u,n),g=0,m=f.length;g<m;++g)(d=f[g])&&ki(d,e,n,g,f,p);s.push(f),o.push(u)}return new fs(s,o,e,n)},filter:function(t){"function"!=typeof t&&(t=Xe(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o=e[i],a=o.length,u=r[i]=[],c=0;c<a;++c)(s=o[c])&&t.call(s,s.__data__,c,o)&&u.push(s);return new fs(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=Math.min(r,n.length),s=new Array(r),o=0;o<i;++o)for(var a,u=e[o],c=n[o],l=u.length,h=s[o]=new Array(l),d=0;d<l;++d)(a=u[d]||c[d])&&(h[d]=a);for(;o<r;++o)s[o]=e[o];return new fs(s,this._parents,this._name,this._id)},selection:function(){return new os(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=ps(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a=r[s],u=a.length,c=0;c<u;++c)if(o=a[c]){var l=Ai(o,e);ki(o,t,n,c,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new fs(r,this._parents,t,n)},call:gs.call,nodes:gs.nodes,node:gs.node,size:gs.size,empty:gs.empty,each:gs.each,on:function(t,e){var n=this._id;return arguments.length<2?Ai(this.node(),n).on.on(t):this.each(ss(n,t,e))},attr:function(t,e){var n=un(t),r="transform"===n?Ui:zi;return this.attrTween(t,"function"==typeof e?(n.local?Ki:Wi)(n,r,Bi(this,"attr."+t,e)):null==e?(n.local?Gi:$i)(n):(n.local?Hi:Zi)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=un(t);return this.tween(n,(r.local?Ji:Xi)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?ji:zi;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var s=_n(this,t),o=(this.style.removeProperty(t),_n(this,t));return s===o?null:s===n&&o===r?i:i=e(n=s,r=o)}}(t,r)).on("end.style."+t,as(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,s;return function(){var o=_n(this,t),a=n(this),u=a+"";return null==a&&(this.style.removeProperty(t),u=a=_n(this,t)),o===u?null:o===r&&u===i?s:(i=u,s=e(r=o,a))}}(t,r,Bi(this,"style."+t,e))).each(function(t,e){var n,r,i,s,o="style."+e,a="end."+o;return function(){var u=Ci(this,t),c=u.on,l=null==u.value[o]?s||(s=as(e)):void 0;c===n&&i===l||(r=(n=c).copy()).on(a,i=l),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,s=n+"";return function(){var o=_n(this,t);return o===s?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,cs(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Bi(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,hs(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Ai(this.node(),n).tween,s=0,o=i.length;s<o;++s)if((r=i[s]).name===t)return r.value;return null}return this.each((null==e?Vi:qi)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?ts:es)(e,t)):Ai(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?ns:rs)(e,t)):Ai(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(is(e,t)):Ai(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){0==--i&&s()}};n.each(function(){var n=Ci(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),n.on=e})})}};var ms={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function ys(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return ms.time=gi(),ms;return n}function vs(t){return{type:t}}function _s(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ws(t){let e=t,n=t;function r(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){const s=r+i>>>1;n(t[s],e)<0?r=s+1:i=s}return r}return 1===t.length&&(e=(e,n)=>t(e)-n,n=function(t){return(e,n)=>_s(t(e),n)}(t)),{left:r,center:function(t,n,i,s){null==i&&(i=0),null==s&&(s=t.length);const o=r(t,n,i,s-1);return o>i&&e(t[o-1],n)>-e(t[o],n)?o-1:o},right:function(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){const s=r+i>>>1;n(t[s],e)>0?i=s:r=s+1}return r}}}sr.prototype.interrupt=function(t){return this.each(function(){!function(t,e){var n,r,i,s=t.__transition,o=!0;if(s){for(i in e=null==e?null:e+"",s)(n=s[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete s[i]):o=!1;o&&delete t.__transition}}(this,t)})},sr.prototype.transition=function(t){var e,n;t instanceof fs?(e=t._id,t=t._name):(e=ps(),(n=ms).time=gi(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o,a=r[s],u=a.length,c=0;c<u;++c)(o=a[c])&&ki(o,t,e,c,a,n||ys(o,e));return new fs(r,this._parents,t,e)},["w","e"].map(vs),["n","s"].map(vs),["n","w","e","s","nw","ne","sw","se"].map(vs);var bs=Math.sqrt(50),xs=Math.sqrt(10),Es=Math.sqrt(2);function Ts(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,i);return i>=0?(s>=bs?10:s>=xs?5:s>=Es?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(s>=bs?10:s>=xs?5:s>=Es?2:1)}function Ss(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/i;return s>=bs?i*=10:s>=xs?i*=5:s>=Es&&(i*=2),e<t?-i:i}const ks=1e3,Is=6e4,Cs=36e5,As=864e5,Os=6048e5,Ns=31536e6;var Ds=new Date,Ps=new Date;function Rs(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,s){var o,a=[];if(n=i.ceil(n),s=null==s?1:Math.floor(s),!(n<r&&s>0))return a;do{a.push(o=new Date(+n)),e(n,s),t(n)}while(o<n&&n<r);return a},i.filter=function(n){return Rs(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(i.count=function(e,r){return Ds.setTime(+e),Ps.setTime(+r),t(Ds),t(Ps),Math.floor(n(Ds,Ps))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var Ms=Rs(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Ms.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Rs(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Ms:null};const Ls=Ms,Fs=Rs(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*ks)},function(t,e){return(e-t)/ks},function(t){return t.getUTCSeconds()}),js=Rs(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*ks)},function(t,e){t.setTime(+t+e*Is)},function(t,e){return(e-t)/Is},function(t){return t.getMinutes()}),Us=Rs(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*ks-t.getMinutes()*Is)},function(t,e){t.setTime(+t+e*Cs)},function(t,e){return(e-t)/Cs},function(t){return t.getHours()}),Vs=Rs(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Is)/As,t=>t.getDate()-1);function qs(t){return Rs(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Is)/Os})}var Bs=qs(0);const zs=(qs(1),qs(2),qs(3),qs(4),qs(5),qs(6),Rs(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}));var $s=Rs(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});$s.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Rs(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};const Gs=$s,Zs=Rs(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Is)},function(t,e){return(e-t)/Is},function(t){return t.getUTCMinutes()}),Hs=Rs(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*Cs)},function(t,e){return(e-t)/Cs},function(t){return t.getUTCHours()}),Ws=Rs(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/As},function(t){return t.getUTCDate()-1});function Ks(t){return Rs(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Os})}var Ys=Ks(0);const Qs=(Ks(1),Ks(2),Ks(3),Ks(4),Ks(5),Ks(6),Rs(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}));var Js=Rs(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Js.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Rs(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};const Xs=Js;function to(t,e,n,r,i,s){const o=[[Fs,1,ks],[Fs,5,5e3],[Fs,15,15e3],[Fs,30,3e4],[s,1,Is],[s,5,3e5],[s,15,9e5],[s,30,18e5],[i,1,Cs],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,As],[r,2,1728e5],[n,1,Os],[e,1,2592e6],[e,3,7776e6],[t,1,Ns]];function a(e,n,r){const i=Math.abs(n-e)/r,s=ws(([,,t])=>t).right(o,i);if(s===o.length)return t.every(Ss(e/Ns,n/Ns,r));if(0===s)return Ls.every(Math.max(Ss(e,n,r),1));const[a,u]=o[i/o[s-1][2]<o[s][2]/i?s-1:s];return a.every(u)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:a(t,e,n),s=i?i.range(t,+e+1):[];return r?s.reverse():s},a]}const[eo,no]=to(Xs,Qs,Ys,Ws,Hs,Zs),[ro,io]=to(Gs,zs,Bs,Vs,Us,js);var so=new Date,oo=new Date;function ao(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,s){var o,a=[];if(n=i.ceil(n),s=null==s?1:Math.floor(s),!(n<r&&s>0))return a;do{a.push(o=new Date(+n)),e(n,s),t(n)}while(o<n&&n<r);return a},i.filter=function(n){return ao(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(i.count=function(e,r){return so.setTime(+e),oo.setTime(+r),t(so),t(oo),Math.floor(n(so,oo))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var uo=864e5,co=6048e5;function lo(t){return ao(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/co})}var ho=lo(0),fo=lo(1),po=(lo(2),lo(3),lo(4));const go=(lo(5),lo(6),ao(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/uo},function(t){return t.getUTCDate()-1}));function mo(t){return ao(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/co})}var yo=mo(0),vo=mo(1),_o=(mo(2),mo(3),mo(4));const wo=(mo(5),mo(6),ao(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/uo},function(t){return t.getDate()-1}));var bo=ao(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});bo.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ao(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};const xo=bo;var Eo=ao(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Eo.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ao(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};const To=Eo;var So={"-":"",_:" ",0:"0"},ko=/[\\^$*+?|[\]().{}]/g;function Io(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function Co(t){return t.replace(ko,"\\$&")}function Ao(t){return new RegExp("^(?:"+t.map(Co).join("|")+")","i")}function Oo(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function No(t,e){return Io(t.getDate(),e,2)}function Do(t,e){return Io(t.getHours(),e,2)}function Po(t,e){return Io(t.getHours()%12||12,e,2)}function Ro(t,e){return Io(1+wo.count(xo(t),t),e,3)}function Mo(t,e){return Io(t.getMilliseconds(),e,3)}function Lo(t,e){return Mo(t,e)+"000"}function Fo(t,e){return Io(t.getMonth()+1,e,2)}function jo(t,e){return Io(t.getMinutes(),e,2)}function Uo(t,e){return Io(t.getSeconds(),e,2)}function Vo(t){var e=t.getDay();return 0===e?7:e}function qo(t,e){return Io(yo.count(xo(t)-1,t),e,2)}function Bo(t){var e=t.getDay();return e>=4||0===e?_o(t):_o.ceil(t)}function zo(t,e){return t=Bo(t),Io(_o.count(xo(t),t)+(4===xo(t).getDay()),e,2)}function $o(t){return t.getDay()}function Go(t,e){return Io(vo.count(xo(t)-1,t),e,2)}function Zo(t,e){return Io(t.getFullYear()%100,e,2)}function Ho(t,e){return Io((t=Bo(t)).getFullYear()%100,e,2)}function Wo(t,e){return Io(t.getFullYear()%1e4,e,4)}function Ko(t,e){var n=t.getDay();return Io((t=n>=4||0===n?_o(t):_o.ceil(t)).getFullYear()%1e4,e,4)}function Yo(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Io(e/60|0,"0",2)+Io(e%60,"0",2)}function Qo(t,e){return Io(t.getUTCDate(),e,2)}function Jo(t,e){return Io(t.getUTCHours(),e,2)}function Xo(t,e){return Io(t.getUTCHours()%12||12,e,2)}function ta(t,e){return Io(1+go.count(To(t),t),e,3)}function ea(t,e){return Io(t.getUTCMilliseconds(),e,3)}function na(t,e){return ea(t,e)+"000"}function ra(t,e){return Io(t.getUTCMonth()+1,e,2)}function ia(t,e){return Io(t.getUTCMinutes(),e,2)}function sa(t,e){return Io(t.getUTCSeconds(),e,2)}function oa(t){var e=t.getUTCDay();return 0===e?7:e}function aa(t,e){return Io(ho.count(To(t)-1,t),e,2)}function ua(t){var e=t.getUTCDay();return e>=4||0===e?po(t):po.ceil(t)}function ca(t,e){return t=ua(t),Io(po.count(To(t),t)+(4===To(t).getUTCDay()),e,2)}function la(t){return t.getUTCDay()}function ha(t,e){return Io(fo.count(To(t)-1,t),e,2)}function da(t,e){return Io(t.getUTCFullYear()%100,e,2)}function fa(t,e){return Io((t=ua(t)).getUTCFullYear()%100,e,2)}function pa(t,e){return Io(t.getUTCFullYear()%1e4,e,4)}function ga(t,e){var n=t.getUTCDay();return Io((t=n>=4||0===n?po(t):po.ceil(t)).getUTCFullYear()%1e4,e,4)}function ma(){return"+0000"}function ya(){return"%"}function va(t){return+t}function _a(t){return Math.floor(+t/1e3)}function wa(t){return null===t?NaN:+t}!function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,a=t.months,u=t.shortMonths,c=(Ao(i),Oo(i),Ao(s),Oo(s),Ao(o),Oo(o),Ao(a),Oo(a),Ao(u),Oo(u),{a:function(t){return o[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:No,e:No,f:Lo,g:Ho,G:Ko,H:Do,I:Po,j:Ro,L:Mo,m:Fo,M:jo,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:va,s:_a,S:Uo,u:Vo,U:qo,V:zo,w:$o,W:Go,x:null,X:null,y:Zo,Y:Wo,Z:Yo,"%":ya}),l={a:function(t){return o[t.getUTCDay()]},A:function(t){return s[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:Qo,e:Qo,f:na,g:fa,G:ga,H:Jo,I:Xo,j:ta,L:ea,m:ra,M:ia,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:va,s:_a,S:sa,u:oa,U:aa,V:ca,w:la,W:ha,x:null,X:null,y:da,Y:pa,Z:ma,"%":ya};function h(t,e){return function(n){var r,i,s,o=[],a=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++a<c;)37===t.charCodeAt(a)&&(o.push(t.slice(u,a)),null!=(i=So[r=t.charAt(++a)])?r=t.charAt(++a):i="e"===r?" ":"0",(s=e[r])&&(r=s(n,i)),o.push(r),u=a+1);return o.push(t.slice(u,a)),o.join("")}}c.x=h(n,c),c.X=h(r,c),c.c=h(e,c),l.x=h(n,l),l.X=h(r,l),l.c=h(e,l)}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});const ba=ws(_s).right,xa=(ws(wa),ba);function Ea(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Ta(t){return+t}var Sa=[0,1];function ka(t){return t}function Ia(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function Ca(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=Ia(i,r),s=n(o,s)):(r=Ia(r,i),s=n(s,o)),function(t){return s(r(t))}}function Aa(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Ia(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(e){var n=xa(t,e,1,r)-1;return s[n](i[n](e))}}function Oa(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Na(){return function(){var t,e,n,r,i,s,o=Sa,a=Sa,u=ii,c=ka;function l(){var t=Math.min(o.length,a.length);return c!==ka&&(c=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(o[0],o[t-1])),r=t>2?Aa:Ca,i=s=null,h}function h(e){return null==e||isNaN(e=+e)?n:(i||(i=r(o.map(t),a,u)))(t(c(e)))}return h.invert=function(n){return c(e((s||(s=r(a,o.map(t),Jr)))(n)))},h.domain=function(t){return arguments.length?(o=Array.from(t,Ta),l()):o.slice()},h.range=function(t){return arguments.length?(a=Array.from(t),l()):a.slice()},h.rangeRound=function(t){return a=Array.from(t),u=Ea,l()},h.clamp=function(t){return arguments.length?(c=!!t||ka,l()):c!==ka},h.interpolate=function(t){return arguments.length?(u=t,l()):u},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,r){return t=n,e=r,l()}}()(ka,ka)}function Da(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var Pa,Ra=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ma(t){if(!(e=Ra.exec(t)))throw new Error("invalid format: "+t);var e;return new La({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function La(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Fa(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function ja(t){return(t=Fa(Math.abs(t)))?t[1]:NaN}function Ua(t,e){var n=Fa(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Ma.prototype=La.prototype,La.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Va={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Ua(100*t,e)},r:Ua,s:function(t,e){var n=Fa(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(Pa=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Fa(t,Math.max(0,e+s-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function qa(t){return t}var Ba,za,$a,Ga=Array.prototype.map,Za=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Ha(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var r,i,s,o,a=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(o=Ts(t,e,n))||!isFinite(o))return[];if(o>0){let n=Math.round(t/o),r=Math.round(e/o);for(n*o<t&&++n,r*o>e&&--r,s=new Array(i=r-n+1);++a<i;)s[a]=(n+a)*o}else{o=-o;let n=Math.round(t*o),r=Math.round(e*o);for(n/o<t&&++n,r/o>e&&--r,s=new Array(i=r-n+1);++a<i;)s[a]=(n+a)/o}return r&&s.reverse(),s}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return function(t,e,n,r){var i,s=Ss(t,e,n);switch((r=Ma(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ja(e)/3)))-ja(Math.abs(t)))}(s,o))||(r.precision=i),$a(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ja(e)-ja(t))+1}(s,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-ja(Math.abs(t)))}(s))||(r.precision=i-2*("%"===r.type))}return za(r)}(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,s=e(),o=0,a=s.length-1,u=s[o],c=s[a],l=10;for(c<u&&(i=u,u=c,c=i,i=o,o=a,a=i);l-- >0;){if((i=Ts(u,c,n))===r)return s[o]=u,s[a]=c,e(s);if(i>0)u=Math.floor(u/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function Wa(){var t=Na();return t.copy=function(){return Oa(t,Wa())},Da.apply(t,arguments),Ha(t)}function Ka(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),s=new Array(i);++r<i;)s[r]=t+r*n;return s}Ba=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?qa:(e=Ga.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(t.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",s=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?qa:function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(Ga.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"-":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=Ma(t)).fill,n=t.align,h=t.sign,d=t.symbol,f=t.zero,p=t.width,g=t.comma,m=t.precision,y=t.trim,v=t.type;"n"===v?(g=!0,v="g"):Va[v]||(void 0===m&&(m=12),y=!0,v="g"),(f||"0"===e&&"="===n)&&(f=!0,e="0",n="=");var _="$"===d?i:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",w="$"===d?s:/[%p]/.test(v)?u:"",b=Va[v],x=/[defgprs%]/.test(v);function E(t){var i,s,u,d=_,E=w;if("c"===v)E=b(t)+E,t="";else{var T=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:b(Math.abs(t),m),y&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),T&&0==+t&&"+"!==h&&(T=!1),d=(T?"("===h?h:c:"-"===h||"("===h?"":h)+d,E=("s"===v?Za[8+Pa/3]:"")+E+(T&&"("===h?")":""),x)for(i=-1,s=t.length;++i<s;)if(48>(u=t.charCodeAt(i))||u>57){E=(46===u?o+t.slice(i+1):t.slice(i))+E,t=t.slice(0,i);break}}g&&!f&&(t=r(t,1/0));var S=d.length+t.length+E.length,k=S<p?new Array(p-S+1).join(e):"";switch(g&&f&&(t=r(k+t,k.length?p-E.length:1/0),k=""),n){case"<":t=d+t+E+k;break;case"=":t=d+k+t+E;break;case"^":t=k.slice(0,S=k.length>>1)+d+t+E+k.slice(S);break;default:t=k+d+t+E}return a(t)}return m=void 0===m?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),E.toString=function(){return t+""},E}return{format:h,formatPrefix:function(t,e){var n=h(((t=Ma(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(ja(e)/3))),i=Math.pow(10,-r),s=Za[8+r/3];return function(t){return n(i*t)+s}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),za=Ba.format,$a=Ba.formatPrefix;const Ya=Symbol("implicit");function Qa(){var t=new Map,e=[],n=[],r=Ya;function i(i){var s=i+"",o=t.get(s);if(!o){if(r!==Ya)return r;t.set(s,o=e.push(i))}return n[(o-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Map;for(const r of n){const n=r+"";t.has(n)||t.set(n,e.push(r))}return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Qa(e,n).unknown(r)},Da.apply(i,arguments),i}function Ja(){var t,e,n=Qa().unknown(void 0),r=n.domain,i=n.range,s=0,o=1,a=!1,u=0,c=0,l=.5;function h(){var n=r().length,h=o<s,d=h?o:s,f=h?s:o;t=(f-d)/Math.max(1,n-u+2*c),a&&(t=Math.floor(t)),d+=(f-d-t*(n-u))*l,e=t*(1-u),a&&(d=Math.round(d),e=Math.round(e));var p=Ka(n).map(function(e){return d+t*e});return i(h?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),h()):r()},n.range=function(t){return arguments.length?([s,o]=t,s=+s,o=+o,h()):[s,o]},n.rangeRound=function(t){return[s,o]=t,s=+s,o=+o,a=!0,h()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(a=!!t,h()):a},n.padding=function(t){return arguments.length?(u=Math.min(1,c=+t),h()):u},n.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),h()):u},n.paddingOuter=function(t){return arguments.length?(c=+t,h()):c},n.align=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),h()):l},n.copy=function(){return Ja(r(),[s,o]).round(a).paddingInner(u).paddingOuter(c).align(l)},Da.apply(h(),arguments)}function Xa(t,e,n=wa){if(r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),o=+n(t[s],s,t);return o+(+n(t[s+1],s+1,t)-o)*(i-s)}}function tu(){var t,e=[],n=[],r=[];function i(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=Xa(e,t/i);return s}function s(e){return null==e||isNaN(e=+e)?t:n[xa(r,e)]}return s.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},s.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(_s),i()},s.range=function(t){return arguments.length?(n=Array.from(t),i()):n.slice()},s.unknown=function(e){return arguments.length?(t=e,s):t},s.quantiles=function(){return r.slice()},s.copy=function(){return tu().domain(e).range(n).unknown(t)},Da.apply(s,arguments)}function eu(t){this._context=t}function nu(t){return new eu(t)}eu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var ru=Math.PI,iu=2*ru,su=1e-6,ou=iu-su;function au(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function uu(){return new au}au.prototype=uu.prototype={constructor:au,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+s)},arcTo:function(t,e,n,r,i){var s=this._x1,o=this._y1,a=(n=+n)-(t=+t),u=(r=+r)-(e=+e),c=s-t,l=o-e,h=c*c+l*l;if((i=+i)<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>su)if(Math.abs(l*a-u*c)>su&&i){var d=n-s,f=r-o,p=a*a+u*u,g=d*d+f*f,m=Math.sqrt(p),y=Math.sqrt(h),v=i*Math.tan((ru-Math.acos((p+h-g)/(2*m*y)))/2),_=v/y,w=v/m;Math.abs(_-1)>su&&(this._+="L"+(t+_*c)+","+(e+_*l)),this._+="A"+i+","+i+",0,0,"+ +(l*d>c*f)+","+(this._x1=t+w*a)+","+(this._y1=e+w*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,r,i,s){t=+t,e=+e,s=!!s;var o=(n=+n)*Math.cos(r),a=n*Math.sin(r),u=t+o,c=e+a,l=1^s,h=s?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>su||Math.abs(this._y1-c)>su)&&(this._+="L"+u+","+c),n&&(h<0&&(h=h%iu+iu),h>ou?this._+="A"+n+","+n+",0,1,"+l+","+(t-o)+","+(e-a)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):h>su&&(this._+="A"+n+","+n+",0,"+ +(h>=ru)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};const cu=uu;function lu(t){return function(){return t}}function hu(t){return t[0]}function du(t){return t[1]}function fu(){}function pu(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function gu(t,e){this._context=t,this._k=(1-e)/6}function mu(t,e){this._context=t,this._k=(1-e)/6}function yu(t){this._curve=t}function vu(t,e,n,r,i){for(var s,o=t.children,a=-1,u=o.length,c=t.value&&(r-e)/t.value;++a<u;)(s=o[a]).y0=n,s.y1=i,s.x0=e,s.x1=e+=s.value*c}function _u(t,e,n,r,i){for(var s,o=t.children,a=-1,u=o.length,c=t.value&&(i-n)/t.value;++a<u;)(s=o[a]).x0=e,s.x1=r,s.y0=n,s.y1=n+=s.value*c}function wu(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function bu(t,e){var n,r,i,s,o,a=new Su(t),u=+t.value&&(a.value=t.value),c=[a];for(null==e&&(e=xu);n=c.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(o=i.length))for(n.children=new Array(o),s=o-1;s>=0;--s)c.push(r=n.children[s]=new Su(i[s])),r.parent=n,r.depth=n.depth+1;return a.eachBefore(Tu)}function xu(t){return t.children}function Eu(t){t.data=t.data.data}function Tu(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Su(t){this.data=t,this.depth=this.height=0,this.parent=null}gu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:pu(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:pu(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return new gu(t,e)}return n.tension=function(e){return t(+e)},n}(0),mu.prototype={areaStart:fu,areaEnd:fu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:pu(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return new mu(t,e)}return n.tension=function(e){return t(+e)},n}(0),yu.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}},Math,Math,Math,Math,Math,Math,Math,Math,function t(e){function n(t,n,r,i,s){!function(t,e,n,r,i,s){for(var o,a,u,c,l,h,d,f,p,g,m,y=[],v=e.children,_=0,w=0,b=v.length,x=e.value;_<b;){u=i-n,c=s-r;do{l=v[w++].value}while(!l&&w<b);for(h=d=l,m=l*l*(g=Math.max(c/u,u/c)/(x*t)),p=Math.max(d/m,m/h);w<b;++w){if(l+=a=v[w].value,a<h&&(h=a),a>d&&(d=a),m=l*l*g,(f=Math.max(d/m,m/h))>p){l-=a;break}p=f}y.push(o={value:l,dice:u<c,children:v.slice(_,w)}),o.dice?vu(o,n,r,i,x?r+=c*l/x:s):_u(o,n,r,x?n+=u*l/x:i,s),x-=l,_=w}}(e,t,n,r,i,s)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}((1+Math.sqrt(5))/2),Su.prototype=bu.prototype={constructor:Su,count:function(){return this.eachAfter(wu)},each:function(t){var e,n,r,i,s=this,o=[s];do{for(e=o.reverse(),o=[];s=e.pop();)if(t(s),n=s.children)for(r=0,i=n.length;r<i;++r)o.push(n[r])}while(o.length);return this},eachAfter:function(t){for(var e,n,r,i=this,s=[i],o=[];i=s.pop();)if(o.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)s.push(e[n]);for(;i=o.pop();)t(i);return this},eachBefore:function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)r.push(e=e.parent);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return bu(this).eachBefore(Eu)}};const ku=["caretElm"];function Iu(t,e){}const Cu=function(t){return{model:t}};function Au(t,e){if(1&t&&(o.TgZ(0,"span"),o.YNc(1,Iu,0,0,"ng-template",5),o.qZA()),2&t){const t=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",t.template)("ngTemplateOutletContext",o.VKq(2,Cu,t.context))}}function Ou(t,e){if(1&t&&o._UZ(0,"span",6),2&t){const t=o.oxw();o.Q6J("innerHTML",t.title,o.oJD)}}function Nu(t,e){if(1&t&&(o.O4$(),o.kcU(),o._UZ(0,"ngx-charts-scale-legend",4)),2&t){const t=o.oxw();o.Q6J("horizontal",t.legendOptions&&"below"===t.legendOptions.position)("valueRange",t.legendOptions.domain)("colors",t.legendOptions.colors)("height",t.view[1])("width",t.legendWidth)}}function Du(t,e){if(1&t){const t=o.EpF();o.O4$(),o.kcU(),o.TgZ(0,"ngx-charts-legend",5),o.NdJ("labelClick",function(e){return o.CHM(t),o.oxw().legendLabelClick.emit(e)})("labelActivate",function(e){return o.CHM(t),o.oxw().legendLabelActivate.emit(e)})("labelDeactivate",function(e){return o.CHM(t),o.oxw().legendLabelDeactivate.emit(e)}),o.qZA()}if(2&t){const t=o.oxw();o.Q6J("horizontal",t.legendOptions&&"below"===t.legendOptions.position)("data",t.legendOptions.domain)("title",t.legendOptions.title)("colors",t.legendOptions.colors)("height",t.view[1])("width",t.legendWidth)("activeEntries",t.activeEntries)}}const Pu=["*"];function Ru(t,e){if(1&t&&(o.TgZ(0,"header",4),o.TgZ(1,"span",5),o._uU(2),o.qZA(),o.qZA()),2&t){const t=o.oxw();o.xp6(2),o.Oqu(t.title)}}function Mu(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"li",6),o.TgZ(1,"ngx-charts-legend-entry",7),o.NdJ("select",function(e){return o.CHM(t),o.oxw().labelClick.emit(e)})("activate",function(e){return o.CHM(t),o.oxw().activate(e)})("deactivate",function(e){return o.CHM(t),o.oxw().deactivate(e)}),o.qZA(),o.qZA()}if(2&t){const t=e.$implicit,n=o.oxw();o.xp6(1),o.Q6J("label",t.label)("formattedLabel",t.formattedLabel)("color",t.color)("isActive",n.isActive(t))}}let Lu=(()=>{class t{constructor(t,e,n){this.applicationRef=t,this.componentFactoryResolver=e,this.injector=n}static setGlobalRootViewContainer(e){t.globalRootViewContainer=e}getRootViewContainer(){if(this._container)return this._container;if(t.globalRootViewContainer)return t.globalRootViewContainer;if(this.applicationRef.components.length)return this.applicationRef.components[0];throw new Error("View Container not found! ngUpgrade needs to manually set this via setRootViewContainer or setGlobalRootViewContainer.")}setRootViewContainer(t){this._container=t}getComponentRootNode(t){return t.element?t.element.nativeElement:t.hostView&&t.hostView.rootNodes.length>0?t.hostView.rootNodes[0]:t.location.nativeElement}getRootViewContainerNode(t){return this.getComponentRootNode(t)}projectComponentBindings(t,e){if(e){if(void 0!==e.inputs){const n=Object.getOwnPropertyNames(e.inputs);for(const r of n)t.instance[r]=e.inputs[r]}if(void 0!==e.outputs){const n=Object.getOwnPropertyNames(e.outputs);for(const r of n)t.instance[r]=e.outputs[r]}}return t}appendComponent(t,e={},n){n||(n=this.getRootViewContainer());const r=this.getComponentRootNode(n),i=new Ve(r,this.componentFactoryResolver,this.applicationRef,this.injector),s=new Fe(t),o=i.attach(s);return this.projectComponentBindings(o,e),o}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(o.z2F),o.LFG(o._Vd),o.LFG(o.zs3))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t.globalRootViewContainer=null,t})();function Fu(t,e,n){let r,i,s;n=n||{};let o=null,a=0;function u(){a=!1===n.leading?0:+new Date,o=null,s=t.apply(r,i)}return function(){const c=+new Date;a||!1!==n.leading||(a=c);const l=e-(c-a);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,a=c,s=t.apply(r,i)):o||!1===n.trailing||(o=setTimeout(u,l)),s}}var ju=(()=>(function(t){t[t.top="top"]="top",t[t.bottom="bottom"]="bottom",t[t.left="left"]="left",t[t.right="right"]="right"}(ju||(ju={})),ju))();function Uu(t,e,n){return"top"===n?t.top-7:"bottom"===n?t.top+t.height-e.height+7:"center"===n?t.top+t.height/2-e.height/2:void 0}function Vu(t,e,n){return"left"===n?t.left-7:"right"===n?t.left+t.width-e.width+7:"center"===n?t.left+t.width/2-e.width/2:void 0}class qu{static calculateVerticalAlignment(t,e,n){let r=Uu(t,e,n);return r+e.height>window.innerHeight&&(r=window.innerHeight-e.height),r}static calculateVerticalCaret(t,e,n,r){let i;"top"===r&&(i=t.height/2-n.height/2+7),"bottom"===r&&(i=e.height-t.height/2-n.height/2-7),"center"===r&&(i=e.height/2-n.height/2);const s=Uu(t,e,r);return s+e.height>window.innerHeight&&(i+=s+e.height-window.innerHeight),i}static calculateHorizontalAlignment(t,e,n){let r=Vu(t,e,n);return r+e.width>window.innerWidth&&(r=window.innerWidth-e.width),r}static calculateHorizontalCaret(t,e,n,r){let i;"left"===r&&(i=t.width/2-n.width/2+7),"right"===r&&(i=e.width-t.width/2-n.width/2-7),"center"===r&&(i=e.width/2-n.width/2);const s=Vu(t,e,r);return s+e.width>window.innerWidth&&(i+=s+e.width-window.innerWidth),i}static shouldFlip(t,e,n,r){let i=!1;return"right"===n&&t.left+t.width+e.width+r>window.innerWidth&&(i=!0),"left"===n&&t.left-e.width-r<0&&(i=!0),"top"===n&&t.top-e.height-r<0&&(i=!0),"bottom"===n&&t.top+t.height+e.height+r>window.innerHeight&&(i=!0),i}static positionCaret(t,e,n,r,i){let s=0,o=0;return t===ju.right?(o=-7,s=qu.calculateVerticalCaret(n,e,r,i)):t===ju.left?(o=e.width,s=qu.calculateVerticalCaret(n,e,r,i)):t===ju.top?(s=e.height,o=qu.calculateHorizontalCaret(n,e,r,i)):t===ju.bottom&&(s=-7,o=qu.calculateHorizontalCaret(n,e,r,i)),{top:s,left:o}}static positionContent(t,e,n,r,i){let s=0,o=0;return t===ju.right?(o=n.left+n.width+r,s=qu.calculateVerticalAlignment(n,e,i)):t===ju.left?(o=n.left-e.width-r,s=qu.calculateVerticalAlignment(n,e,i)):t===ju.top?(s=n.top-e.height-r,o=qu.calculateHorizontalAlignment(n,e,i)):t===ju.bottom&&(s=n.top+n.height+r,o=qu.calculateHorizontalAlignment(n,e,i)),{top:s,left:o}}static determinePlacement(t,e,n,r){if(qu.shouldFlip(n,e,t,r)){if(t===ju.right)return ju.left;if(t===ju.left)return ju.right;if(t===ju.top)return ju.bottom;if(t===ju.bottom)return ju.top}return t}}let Bu,zu=(()=>{class t{constructor(t,e){this.element=t,this.renderer=e}get cssClasses(){let t="ngx-charts-tooltip-content";return t+=` position-${this.placement}`,t+=` type-${this.type}`,t+=` ${this.cssClass}`,t}ngAfterViewInit(){setTimeout(this.position.bind(this))}position(){const t=this.element.nativeElement,e=this.host.nativeElement.getBoundingClientRect();if(!e.height&&!e.width)return;const n=t.getBoundingClientRect();this.checkFlip(e,n),this.positionContent(t,e,n),this.showCaret&&this.positionCaret(e,n),setTimeout(()=>this.renderer.addClass(t,"animate"),1)}positionContent(t,e,n){const{top:r,left:i}=qu.positionContent(this.placement,n,e,this.spacing,this.alignment);this.renderer.setStyle(t,"top",`${r}px`),this.renderer.setStyle(t,"left",`${i}px`)}positionCaret(t,e){const n=this.caretElm.nativeElement,r=n.getBoundingClientRect(),{top:i,left:s}=qu.positionCaret(this.placement,e,t,r,this.alignment);this.renderer.setStyle(n,"top",`${i}px`),this.renderer.setStyle(n,"left",`${s}px`)}checkFlip(t,e){this.placement=qu.determinePlacement(this.placement,e,t,this.spacing)}onWindowResize(){this.position()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(o.SBq),o.Y36(o.Qsj))},t.\u0275cmp=o.Xpm({type:t,selectors:[["ngx-tooltip-content"]],viewQuery:function(t,e){if(1&t&&o.Gf(ku,5),2&t){let t;o.iGM(t=o.CRH())&&(e.caretElm=t.first)}},hostVars:2,hostBindings:function(t,e){1&t&&o.NdJ("resize",function(){return e.onWindowResize()},!1,o.Jf7),2&t&&o.Tol(e.cssClasses)},inputs:{placement:"placement",host:"host",showCaret:"showCaret",type:"type",alignment:"alignment",spacing:"spacing",cssClass:"cssClass",title:"title",template:"template",context:"context"},decls:6,vars:6,consts:[[3,"hidden"],["caretElm",""],[1,"tooltip-content"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"]],template:function(t,e){1&t&&(o.TgZ(0,"div"),o._UZ(1,"span",0,1),o.TgZ(3,"div",2),o.YNc(4,Au,2,4,"span",3),o.YNc(5,Ou,1,1,"span",4),o.qZA(),o.qZA()),2&t&&(o.xp6(1),o.Gre("tooltip-caret position-",e.placement,""),o.Q6J("hidden",!e.showCaret),o.xp6(3),o.Q6J("ngIf",!e.title),o.xp6(1),o.Q6J("ngIf",e.title))},directives:[R,F],styles:[".ngx-charts-tooltip-content{border-radius:3px;display:block;font-weight:400;opacity:0;pointer-events:none!important;position:fixed;z-index:5000}.ngx-charts-tooltip-content.type-popover{background:#fff;border:1px solid #72809b;box-shadow:0 1px 3px 0 rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 2px 1px -1px rgba(0,0,0,.12);color:#060709;font-size:13px;padding:4px}.ngx-charts-tooltip-content.type-popover .tooltip-caret{height:0;position:absolute;width:0;z-index:5001}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-left{border-bottom:7px solid transparent;border-left:7px solid #fff;border-top:7px solid transparent}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid #fff}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-right{border-bottom:7px solid transparent;border-right:7px solid #fff;border-top:7px solid transparent}.ngx-charts-tooltip-content.type-popover .tooltip-caret.position-bottom{border-bottom:7px solid #fff;border-left:7px solid transparent;border-right:7px solid transparent}.ngx-charts-tooltip-content.type-tooltip{background:rgba(0,0,0,.75);color:#fff;font-size:12px;padding:0 10px;pointer-events:auto;text-align:center}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-left{border-bottom:7px solid transparent;border-left:7px solid rgba(0,0,0,.75);border-top:7px solid transparent}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-top{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid rgba(0,0,0,.75)}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-right{border-bottom:7px solid transparent;border-right:7px solid rgba(0,0,0,.75);border-top:7px solid transparent}.ngx-charts-tooltip-content.type-tooltip .tooltip-caret.position-bottom{border-bottom:7px solid rgba(0,0,0,.75);border-left:7px solid transparent;border-right:7px solid transparent}.ngx-charts-tooltip-content .tooltip-label{display:block;font-size:1em;line-height:1em;padding:8px 5px 5px}.ngx-charts-tooltip-content .tooltip-val{display:block;font-size:1.3em;line-height:1em;padding:0 5px 8px}.ngx-charts-tooltip-content .tooltip-caret{height:0;position:absolute;width:0;z-index:5001}.ngx-charts-tooltip-content.position-right{transform:translate3d(10px,0,0)}.ngx-charts-tooltip-content.position-left{transform:translate3d(-10px,0,0)}.ngx-charts-tooltip-content.position-top{transform:translate3d(0,-10px,0)}.ngx-charts-tooltip-content.position-bottom{transform:translate3d(0,10px,0)}.ngx-charts-tooltip-content.animate{opacity:1;pointer-events:auto;transform:translateZ(0);transition:opacity .3s,transform .3s}.area-tooltip-container{padding:5px 0;pointer-events:none}.tooltip-item{line-height:1.2em;padding:5px 0;text-align:left}.tooltip-item .tooltip-item-color{border-radius:3px;color:#5b646b;display:inline-block;height:12px;margin-right:5px;width:12px}"],encapsulation:2}),(0,ke.gn)([(100,function(t,e,n){return{configurable:!0,enumerable:n.enumerable,get:function(){return Object.defineProperty(this,e,{configurable:!0,enumerable:n.enumerable,value:Fu(n.value,100,undefined)}),this[e]}}})],t.prototype,"onWindowResize",null),t})(),$u=(()=>{class t extends class{constructor(t){this.injectionService=t,this.defaults={},this.components=new Map}getByType(t=this.type){return this.components.get(t)}create(t){return this.createByType(this.type,t)}createByType(t,e){e=this.assignDefaults(e);const n=this.injectComponent(t,e);return this.register(t,n),n}destroy(t){const e=this.components.get(t.componentType);if(e&&e.length){const n=e.indexOf(t);n>-1&&(e[n].destroy(),e.splice(n,1))}}destroyAll(){this.destroyByType(this.type)}destroyByType(t){const e=this.components.get(t);if(e&&e.length){let t=e.length-1;for(;t>=0;)this.destroy(e[t--])}}injectComponent(t,e){return this.injectionService.appendComponent(t,e)}assignDefaults(t){const e=Object.assign({},this.defaults.inputs),n=Object.assign({},this.defaults.outputs);return t.inputs||t.outputs||(t={inputs:t}),e&&(t.inputs=Object.assign(Object.assign({},e),t.inputs)),n&&(t.outputs=Object.assign(Object.assign({},n),t.outputs)),t}register(t,e){this.components.has(t)||this.components.set(t,[]),this.components.get(t).push(e)}}{constructor(t){super(t),this.type=zu}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(Lu))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})(),Gu=(()=>{class t{constructor(){this.showLegend=!1,this.animations=!0,this.legendLabelClick=new o.vpe,this.legendLabelActivate=new o.vpe,this.legendLabelDeactivate=new o.vpe}ngOnChanges(t){this.update()}update(){let t=0;this.showLegend&&(this.legendType=this.getLegendType(),this.legendOptions&&"right"!==this.legendOptions.position||(t="scaleLegend"===this.legendType?1:2)),this.chartWidth=Math.floor(this.view[0]*(12-t)/12),this.legendWidth=this.legendOptions&&"right"!==this.legendOptions.position?this.chartWidth:Math.floor(this.view[0]*t/12)}getLegendType(){return"linear"===this.legendOptions.scaleType?"scaleLegend":"legend"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["ngx-charts-chart"]],inputs:{showLegend:"showLegend",animations:"animations",legendType:"legendType",view:"view",legendOptions:"legendOptions",data:"data",legendData:"legendData",colors:"colors",activeEntries:"activeEntries"},outputs:{legendLabelClick:"legendLabelClick",legendLabelActivate:"legendLabelActivate",legendLabelDeactivate:"legendLabelDeactivate"},features:[o._Bn([$u]),o.TTD],ngContentSelectors:Pu,decls:5,vars:8,consts:[[1,"ngx-charts-outer"],[1,"ngx-charts"],["class","chart-legend",3,"horizontal","valueRange","colors","height","width",4,"ngIf"],["class","chart-legend",3,"horizontal","data","title","colors","height","width","activeEntries","labelClick","labelActivate","labelDeactivate",4,"ngIf"],[1,"chart-legend",3,"horizontal","valueRange","colors","height","width"],[1,"chart-legend",3,"horizontal","data","title","colors","height","width","activeEntries","labelClick","labelActivate","labelDeactivate"]],template:function(t,e){1&t&&(o.F$t(),o.TgZ(0,"div",0),o.O4$(),o.TgZ(1,"svg",1),o.Hsn(2),o.qZA(),o.YNc(3,Nu,1,5,"ngx-charts-scale-legend",2),o.YNc(4,Du,1,7,"ngx-charts-legend",3),o.qZA()),2&t&&(o.Udp("width",e.view[0],"px"),o.Q6J("@animationState","active")("@.disabled",!e.animations),o.xp6(1),o.uIk("width",e.chartWidth)("height",e.view[1]),o.xp6(2),o.Q6J("ngIf",e.showLegend&&"scaleLegend"===e.legendType),o.xp6(1),o.Q6J("ngIf",e.showLegend&&"legend"===e.legendType))},directives:function(){return[R,Xu,Qu]},encapsulation:2,data:{animation:[("animationState",e=[De(":enter",[Ne({opacity:0}),Ae("500ms 100ms",Ne({opacity:1}))])],{type:7,name:"animationState",definitions:e,options:{}})]},changeDetection:0}),t;var e})(),Zu=(()=>{class t{constructor(t,e){this.element=t,this.zone=e,this.visible=new o.vpe,this.isVisible=!1,this.runCheck()}destroy(){clearTimeout(this.timeout)}onVisibilityChange(){this.zone.run(()=>{this.isVisible=!0,this.visible.emit(!0)})}runCheck(){const t=()=>{if(!this.element)return;const{offsetHeight:e,offsetWidth:n}=this.element.nativeElement;e&&n?(clearTimeout(this.timeout),this.onVisibilityChange()):(clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>t(),100)}))};this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>t())})}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(o.SBq),o.Y36(o.R0b))},t.\u0275dir=o.lG2({type:t,selectors:[["visibility-observer"]],outputs:{visible:"visible"}}),t})(),Hu=(()=>{class t{constructor(t,e,n){this.chartElement=t,this.zone=e,this.cd=n,this.scheme="cool",this.schemeType="ordinal",this.animations=!0,this.select=new o.vpe}ngAfterViewInit(){this.bindWindowResizeEvent(),this.visibilityObserver=new Zu(this.chartElement,this.zone),this.visibilityObserver.visible.subscribe(this.update.bind(this))}ngOnDestroy(){this.unbindEvents(),this.visibilityObserver&&(this.visibilityObserver.visible.unsubscribe(),this.visibilityObserver.destroy())}ngOnChanges(t){this.update()}update(){if(this.results=this.results?this.cloneData(this.results):[],this.view)this.width=this.view[0],this.height=this.view[1];else{const t=this.getContainerDims();t&&(this.width=t.width,this.height=t.height)}this.width||(this.width=600),this.height||(this.height=400),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this.cd&&this.cd.markForCheck()}getContainerDims(){let t,e;const n=this.chartElement.nativeElement;if(null!==n.parentNode){const r=n.parentNode.getBoundingClientRect();t=r.width,e=r.height}return t&&e?{width:t,height:e}:null}formatDates(){for(let t=0;t<this.results.length;t++){const e=this.results[t];if(e.label=e.name,e.label instanceof Date&&(e.label=e.label.toLocaleDateString()),e.series)for(let t=0;t<e.series.length;t++){const n=e.series[t];n.label=n.name,n.label instanceof Date&&(n.label=n.label.toLocaleDateString())}}}unbindEvents(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}bindWindowResizeEvent(){const t=Be(window,"resize").pipe(function(t,e=Ge.P){return n=>n.lift(new Ze(t,e))}(200)).subscribe(t=>{this.update(),this.cd&&this.cd.markForCheck()});this.resizeSubscription=t}cloneData(t){const e=[];for(const n of t){const t={name:n.name};if(void 0!==n.value&&(t.value=n.value),void 0!==n.series){t.series=[];for(const e of n.series){const n=Object.assign({},e);t.series.push(n)}}void 0!==n.extra&&(t.extra=JSON.parse(JSON.stringify(n.extra))),e.push(t)}return e}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(o.sBO))},t.\u0275cmp=o.Xpm({type:t,selectors:[["base-chart"]],inputs:{scheme:"scheme",schemeType:"schemeType",animations:"animations",results:"results",view:"view",customColors:"customColors"},outputs:{select:"select"},features:[o.TTD],decls:1,vars:0,template:function(t,e){1&t&&o._UZ(0,"div")},encapsulation:2}),t})(),Wu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[j]]}),t})(),Ku=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({providers:[Lu,$u],imports:[[j]]}),t})();function Yu(t){return t instanceof Date?t.toLocaleDateString():t.toLocaleString()}"undefined"!=typeof window?Bu=window:"undefined"!=typeof global&&(Bu=global);let Qu=(()=>{class t{constructor(t){this.cd=t,this.horizontal=!1,this.labelClick=new o.vpe,this.labelActivate=new o.vpe,this.labelDeactivate=new o.vpe,this.legendEntries=[]}ngOnChanges(t){this.update()}update(){this.cd.markForCheck(),this.legendEntries=this.getLegendEntries()}getLegendEntries(){const t=[];for(const e of this.data){const n=Yu(e);-1===t.findIndex(t=>t.label===n)&&t.push({label:e,formattedLabel:n,color:this.colors.getColor(e)})}return t}isActive(t){return!!this.activeEntries&&void 0!==this.activeEntries.find(e=>t.label===e.name)}activate(t){this.labelActivate.emit(t)}deactivate(t){this.labelDeactivate.emit(t)}trackBy(t,e){return e.label}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(o.sBO))},t.\u0275cmp=o.Xpm({type:t,selectors:[["ngx-charts-legend"]],inputs:{horizontal:"horizontal",data:"data",title:"title",colors:"colors",height:"height",width:"width",activeEntries:"activeEntries"},outputs:{labelClick:"labelClick",labelActivate:"labelActivate",labelDeactivate:"labelDeactivate"},features:[o.TTD],decls:5,vars:9,consts:[["class","legend-title",4,"ngIf"],[1,"legend-wrap"],[1,"legend-labels"],["class","legend-label",4,"ngFor","ngForOf","ngForTrackBy"],[1,"legend-title"],[1,"legend-title-text"],[1,"legend-label"],[3,"label","formattedLabel","color","isActive","select","activate","deactivate"]],template:function(t,e){1&t&&(o.TgZ(0,"div"),o.YNc(1,Ru,3,1,"header",0),o.TgZ(2,"div",1),o.TgZ(3,"ul",2),o.YNc(4,Mu,2,4,"li",3),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.Udp("width",e.width,"px"),o.xp6(1),o.Q6J("ngIf",(null==e.title?null:e.title.length)>0),o.xp6(2),o.Udp("max-height",e.height-45,"px"),o.ekj("horizontal-legend",e.horizontal),o.xp6(1),o.Q6J("ngForOf",e.legendEntries)("ngForTrackBy",e.trackBy))},directives:function(){return[R,D,Ju]},styles:[".chart-legend{display:inline-block;padding:0;width:auto!important}.chart-legend .legend-title{font-size:14px;font-weight:700;margin-bottom:5px;margin-left:10px;overflow:hidden;white-space:nowrap}.chart-legend li,.chart-legend ul{list-style:none;margin:0;padding:0}.chart-legend .horizontal-legend li{display:inline-block}.chart-legend .legend-wrap{width:calc(100% - 10px)}.chart-legend .legend-labels{background:rgba(0,0,0,.05);border-radius:3px;float:left;line-height:85%;list-style:none;overflow-x:hidden;overflow-y:auto;text-align:left;white-space:nowrap;width:100%}.chart-legend .legend-label{color:#afb7c8;cursor:pointer;font-size:90%;margin:8px}.chart-legend .legend-label:hover{color:#000;transition:.2s}.chart-legend .legend-label .active .legend-label-text{color:#000}.chart-legend .legend-label-color{border-radius:3px;color:#5b646b;display:inline-block;height:15px;margin-right:5px;width:15px}.chart-legend .legend-label-text{font-size:12px;line-height:15px;vertical-align:top;width:calc(100% - 20px)}.chart-legend .legend-label-text,.chart-legend .legend-title-text{display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.chart-legend .legend-title-text{line-height:16px;vertical-align:bottom}"],encapsulation:2,changeDetection:0}),t})(),Ju=(()=>{class t{constructor(){this.isActive=!1,this.select=new o.vpe,this.activate=new o.vpe,this.deactivate=new o.vpe,this.toggle=new o.vpe}get trimmedLabel(){return this.formattedLabel||"(empty)"}onMouseEnter(){this.activate.emit({name:this.label})}onMouseLeave(){this.deactivate.emit({name:this.label})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["ngx-charts-legend-entry"]],hostBindings:function(t,e){1&t&&o.NdJ("mouseenter",function(){return e.onMouseEnter()})("mouseleave",function(){return e.onMouseLeave()})},inputs:{isActive:"isActive",color:"color",label:"label",formattedLabel:"formattedLabel"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",toggle:"toggle"},decls:4,vars:6,consts:[["tabindex","-1",3,"title","click"],[1,"legend-label-color",3,"click"],[1,"legend-label-text"]],template:function(t,e){1&t&&(o.TgZ(0,"span",0),o.NdJ("click",function(){return e.select.emit(e.formattedLabel)}),o.TgZ(1,"span",1),o.NdJ("click",function(){return e.toggle.emit(e.formattedLabel)}),o.qZA(),o.TgZ(2,"span",2),o._uU(3),o.qZA(),o.qZA()),2&t&&(o.ekj("active",e.isActive),o.Q6J("title",e.formattedLabel),o.xp6(1),o.Udp("background-color",e.color),o.xp6(2),o.hij(" ",e.trimmedLabel," "))},encapsulation:2,changeDetection:0}),t})(),Xu=(()=>{class t{constructor(t){this.sanitizer=t,this.horizontal=!1}ngOnChanges(t){const e=this.gradientString(this.colors.range(),this.colors.domain());this.gradient=this.sanitizer.bypassSecurityTrustStyle(`linear-gradient(to ${this.horizontal?"right":"bottom"}, ${e})`)}gradientString(t,e){e.push(1);const n=[];return t.reverse().forEach((t,r)=>{n.push(`${t} ${Math.round(100*e[r])}%`)}),n.join(", ")}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(mt))},t.\u0275cmp=o.Xpm({type:t,selectors:[["ngx-charts-scale-legend"]],inputs:{horizontal:"horizontal",valueRange:"valueRange",colors:"colors",height:"height",width:"width"},features:[o.TTD],decls:8,vars:10,consts:[[1,"scale-legend"],[1,"scale-legend-label"],[1,"scale-legend-wrap"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"span"),o._uU(3),o.qZA(),o.qZA(),o._UZ(4,"div",2),o.TgZ(5,"div",1),o.TgZ(6,"span"),o._uU(7),o.qZA(),o.qZA(),o.qZA()),2&t&&(o.Udp("height",e.horizontal?void 0:e.height,"px")("width",e.width,"px"),o.ekj("horizontal-legend",e.horizontal),o.xp6(3),o.Oqu(e.valueRange[1].toLocaleString()),o.xp6(1),o.Udp("background",e.gradient),o.xp6(3),o.Oqu(e.valueRange[0].toLocaleString()))},styles:[".chart-legend{display:inline-block;padding:0;width:auto!important}.chart-legend .scale-legend{display:flex;flex-direction:column;text-align:center}.chart-legend .scale-legend-wrap{border-radius:5px;display:inline-block;flex:1;margin:0 auto;width:30px}.chart-legend .scale-legend-label{font-size:12px}.chart-legend .horizontal-legend.scale-legend{flex-direction:row}.chart-legend .horizontal-legend .scale-legend-wrap{height:30px;margin:0 16px;width:auto}"],encapsulation:2,changeDetection:0}),t})(),tc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[j,Wu,Ku],j,Wu,Ku]}),t})(),ec=[{name:"vivid",selectable:!0,group:"Ordinal",domain:["#647c8a","#3f51b5","#2196f3","#00b862","#afdf0a","#a7b61a","#f3e562","#ff9800","#ff5722","#ff4514"]},{name:"natural",selectable:!0,group:"Ordinal",domain:["#bf9d76","#e99450","#d89f59","#f2dfa7","#a5d7c6","#7794b1","#afafaf","#707160","#ba9383","#d9d5c3"]},{name:"cool",selectable:!0,group:"Ordinal",domain:["#a8385d","#7aa3e5","#a27ea8","#aae3f5","#adcded","#a95963","#8796c0","#7ed3ed","#50abcc","#ad6886"]},{name:"fire",selectable:!0,group:"Ordinal",domain:["#ff3d00","#bf360c","#ff8f00","#ff6f00","#ff5722","#e65100","#ffca28","#ffab00"]},{name:"solar",selectable:!0,group:"Continuous",domain:["#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00"]},{name:"air",selectable:!0,group:"Continuous",domain:["#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b"]},{name:"aqua",selectable:!0,group:"Continuous",domain:["#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064"]},{name:"flame",selectable:!1,group:"Ordinal",domain:["#A10A28","#D3342D","#EF6D49","#FAAD67","#FDDE90","#DBED91","#A9D770","#6CBA67","#2C9653","#146738"]},{name:"ocean",selectable:!1,group:"Ordinal",domain:["#1D68FB","#33C0FC","#4AFFFE","#AFFFFF","#FFFC63","#FDBD2D","#FC8A25","#FA4F1E","#FA141B","#BA38D1"]},{name:"forest",selectable:!1,group:"Ordinal",domain:["#55C22D","#C1F33D","#3CC099","#AFFFFF","#8CFC9D","#76CFFA","#BA60FB","#EE6490","#C42A1C","#FC9F32"]},{name:"horizon",selectable:!1,group:"Ordinal",domain:["#2597FB","#65EBFD","#99FDD0","#FCEE4B","#FEFCFA","#FDD6E3","#FCB1A8","#EF6F7B","#CB96E8","#EFDEE0"]},{name:"neons",selectable:!1,group:"Ordinal",domain:["#FF3333","#FF33FF","#CC33FF","#0000FF","#33CCFF","#33FFFF","#33FF66","#CCFF33","#FFCC00","#FF6600"]},{name:"picnic",selectable:!1,group:"Ordinal",domain:["#FAC51D","#66BD6D","#FAA026","#29BB9C","#E96B56","#55ACD2","#B7332F","#2C83C9","#9166B8","#92E7E8"]},{name:"night",selectable:!1,group:"Ordinal",domain:["#2B1B5A","#501356","#183356","#28203F","#391B3C","#1E2B3C","#120634","#2D0432","#051932","#453080","#75267D","#2C507D","#4B3880","#752F7D","#35547D"]},{name:"nightLights",selectable:!1,group:"Ordinal",domain:["#4e31a5","#9c25a7","#3065ab","#57468b","#904497","#46648b","#32118d","#a00fb3","#1052a2","#6e51bd","#b63cc3","#6c97cb","#8671c1","#b455be","#7496c3"]}];class nc{constructor(t,e,n,r){"string"==typeof t&&(t=ec.find(e=>e.name===t)),this.colorDomain=t.domain,this.scaleType=e,this.domain=n,this.customColors=r,this.scale=this.generateColorScheme(t,e,this.domain)}generateColorScheme(t,e,n){let r;if("string"==typeof t&&(t=ec.find(e=>e.name===t)),"quantile"===e)r=tu().range(t.domain).domain(n);else if("ordinal"===e)r=Qa().range(t.domain).domain(n);else if("linear"===e){const e=[...t.domain];1===e.length&&(e.push(e[0]),this.colorDomain=e);const n=Ka(0,1,1/e.length);r=Wa().domain(n).range(e)}return r}getColor(t){if(null==t)throw new Error("Value can not be null");if("linear"===this.scaleType){const e=Wa().domain(this.domain).range([0,1]);return this.scale(e(t))}{if("function"==typeof this.customColors)return this.customColors(t);const e=t.toString();let n;return this.customColors&&this.customColors.length>0&&(n=this.customColors.find(t=>t.name.toLowerCase()===e.toLowerCase())),n?n.value:this.scale(t)}}getLinearGradientStops(t,e){void 0===e&&(e=this.domain[0]);const n=Wa().domain(this.domain).range([0,1]),r=Ja().domain(this.colorDomain).range([0,1]),i=this.getColor(t),s=n(e),o=this.getColor(e),a=n(t);let u=1,c=s;const l=[];for(l.push({color:o,offset:s,originalOffset:s,opacity:1});c<a&&u<this.colorDomain.length;){const t=this.colorDomain[u],e=r(t);if(e<=s)u++;else{if(e.toFixed(4)>=(a-r.bandwidth()).toFixed(4))break;l.push({color:t,offset:e,opacity:1}),c=e,u++}}if(l[l.length-1].offset<100&&l.push({color:i,offset:a,opacity:1}),a===s)l[0].offset=0,l[1].offset=100;else if(100!==l[l.length-1].offset)for(const h of l)h.offset=(h.offset-s)/(a-s)*100;return l}}let rc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[tc]]}),t})(),ic=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[tc]]}),t})(),sc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[tc]]}),t})(),oc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[tc]]}),t})(),ac=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[tc]]}),t})();Math;let uc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[tc]]}),t})(),cc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[tc,uc,ac]]}),t})(),lc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[tc]]}),t})(),hc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[tc]]}),t})(),dc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[tc,uc,ic]]}),t})(),fc=(()=>{class t{constructor(){"undefined"!=typeof SVGElement&&void 0===SVGElement.prototype.contains&&(SVGElement.prototype.contains=HTMLDivElement.prototype.contains)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[tc,rc,ic,sc,oc,ac,cc,lc,uc,hc,dc]}),t})();function pc(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function gc(t){this._context=t}function mc(t,e){this._basis=new gc(t),this._beta=e}gc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:pc(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:pc(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},mc.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],s=e[0],o=t[n]-i,a=e[n]-s,u=-1;++u<=n;)this._basis.point(this._beta*t[u]+(1-this._beta)*(i+(r=u/n)*o),this._beta*e[u]+(1-this._beta)*(s+r*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const yc=function t(e){function n(t){return 1===e?new gc(t):new mc(t,e)}return n.beta=function(e){return t(+e)},n}(.85);var vc=Math.PI;function _c(t){return(1-Math.cos(vc*t))/2}var wc=n(9765),bc=n(5319),xc=n(5917);const Ec=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function Tc(t,e){return function(n){return n.lift(new Sc(t,e))}}class Sc{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new kc(t,this.predicate,this.thisArg))}}class kc extends $e.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const Ic=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var Cc=n(9193);function Ac(t){return e=>0===t?(0,Cc.c)():e.lift(new Oc(t))}class Oc{constructor(t){if(this.total=t,this.total<0)throw new Ic}call(t,e){return e.subscribe(new Nc(t,this.total))}}class Nc extends $e.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Dc(t=null){return e=>e.lift(new Pc(t))}class Pc{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Rc(t,this.defaultValue))}}class Rc extends $e.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Mc(t=jc){return e=>e.lift(new Lc(t))}class Lc{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Fc(t,this.errorFactory))}}class Fc extends $e.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function jc(){return new Ec}var Uc=n(4487);function Vc(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Tc((e,n)=>t(e,n,r)):Uc.y,Ac(1),n?Dc(e):Mc(()=>new Ec))}function qc(t){return void 0===t}function Bc(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function zc(t){return Array.isArray(t)?t:Array.from(t)}function $c(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=function(t,e){return{a:t.a*e.a+t.c*e.b,c:t.a*e.c+t.c*e.d,e:t.a*e.e+t.c*e.f+t.e,b:t.b*e.a+t.d*e.b,d:t.b*e.c+t.d*e.d,f:t.b*e.e+t.d*e.f+t.f}};switch((e=Array.isArray(e[0])?e[0]:e).length){case 0:throw new Error("no matrices provided");case 1:return e[0];case 2:return r(e[0],e[1]);default:var i=e,s=zc(i),o=s[0],a=s[1],u=s.slice(2),c=r(o,a);return $c.apply(void 0,[c].concat(Bc(u)))}}function Gc(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{a:1,c:0,e:t,b:0,d:1,f:e}}"function"==typeof Symbol&&Symbol,Math,Math,Math,Math;var Zc=n(218);function Hc(t,e){var n;function r(){var r,i,s=n.length,o=0,a=0;for(r=0;r<s;++r)o+=(i=n[r]).x,a+=i.y;for(o=o/s-t,a=a/s-e,r=0;r<s;++r)(i=n[r]).x-=o,i.y-=a}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r}function Wc(t){return function(){return t}}function Kc(){return 1e-6*(Math.random()-.5)}function Yc(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,s,o,a,u,c,l,h,d,f=t._root,p={data:r},g=t._x0,m=t._y0,y=t._x1,v=t._y1;if(!f)return t._root=p,t;for(;f.length;)if((c=e>=(s=(g+y)/2))?g=s:y=s,(l=n>=(o=(m+v)/2))?m=o:v=o,i=f,!(f=f[h=l<<1|c]))return i[h]=p,t;if(a=+t._x.call(null,f.data),u=+t._y.call(null,f.data),e===a&&n===u)return p.next=f,i?i[h]=p:t._root=p,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(c=e>=(s=(g+y)/2))?g=s:y=s,(l=n>=(o=(m+v)/2))?m=o:v=o}while((h=l<<1|c)==(d=(u>=o)<<1|a>=s));return i[d]=f,i[h]=p,t}function Qc(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Jc(t){return t[0]}function Xc(t){return t[1]}function tl(t,e,n){var r=new el(null==e?Jc:e,null==n?Xc:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function el(t,e,n,r,i,s){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function nl(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var rl=tl.prototype=el.prototype;function il(t){return t.x+t.vx}function sl(t){return t.y+t.vy}function ol(t){var e,n,r=1,i=1;function s(){for(var t,s,a,u,c,l,h,d=e.length,f=0;f<i;++f)for(s=tl(e,il,sl).visitAfter(o),t=0;t<d;++t)h=(l=n[(a=e[t]).index])*l,u=a.x+a.vx,c=a.y+a.vy,s.visit(p);function p(t,e,n,i,s){var o=t.data,d=t.r,f=l+d;if(!o)return e>u+f||i<u-f||n>c+f||s<c-f;if(o.index>a.index){var p=u-o.x-o.vx,g=c-o.y-o.vy,m=p*p+g*g;m<f*f&&(0===p&&(m+=(p=Kc())*p),0===g&&(m+=(g=Kc())*g),m=(f-(m=Math.sqrt(m)))/m*r,a.vx+=(p*=m)*(f=(d*=d)/(h+d)),a.vy+=(g*=m)*f,o.vx-=p*(f=1-f),o.vy-=g*f)}}}function o(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function a(){if(e){var r,i,s=e.length;for(n=new Array(s),r=0;r<s;++r)n[(i=e[r]).index]=+t(i,r,e)}}return"function"!=typeof t&&(t=Wc(null==t?1:+t)),s.initialize=function(t){e=t,a()},s.iterations=function(t){return arguments.length?(i=+t,s):i},s.strength=function(t){return arguments.length?(r=+t,s):r},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:Wc(+e),a(),s):t},s}rl.copy=function(){var t,e,n=new el(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=nl(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=nl(e));return n},rl.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Yc(this.cover(e,n),e,n,t)},rl.addAll=function(t){var e,n,r,i,s=t.length,o=new Array(s),a=new Array(s),u=1/0,c=1/0,l=-1/0,h=-1/0;for(n=0;n<s;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(o[n]=r,a[n]=i,r<u&&(u=r),r>l&&(l=r),i<c&&(c=i),i>h&&(h=i));if(u>l||c>h)return this;for(this.cover(u,c).cover(l,h),n=0;n<s;++n)Yc(this,o[n],a[n],t[n]);return this},rl.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(r=Math.floor(e))+1;else{for(var o,a,u=i-n,c=this._root;n>t||t>=i||r>e||e>=s;)switch(a=(e<r)<<1|t<n,(o=new Array(4))[a]=c,c=o,u*=2,a){case 0:i=n+u,s=r+u;break;case 1:n=i-u,s=r+u;break;case 2:i=n+u,r=s-u;break;case 3:n=i-u,r=s-u}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this},rl.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},rl.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},rl.find=function(t,e,n){var r,i,s,o,a,u,c,l=this._x0,h=this._y0,d=this._x1,f=this._y1,p=[],g=this._root;for(g&&p.push(new Qc(g,l,h,d,f)),null==n?n=1/0:(l=t-n,h=e-n,d=t+n,f=e+n,n*=n);u=p.pop();)if(!(!(g=u.node)||(i=u.x0)>d||(s=u.y0)>f||(o=u.x1)<l||(a=u.y1)<h))if(g.length){var m=(i+o)/2,y=(s+a)/2;p.push(new Qc(g[3],m,y,o,a),new Qc(g[2],i,y,m,a),new Qc(g[1],m,s,o,y),new Qc(g[0],i,s,m,y)),(c=(e>=y)<<1|t>=m)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=u)}else{var v=t-+this._x.call(null,g.data),_=e-+this._y.call(null,g.data),w=v*v+_*_;if(w<n){var b=Math.sqrt(n=w);l=t-b,h=e-b,d=t+b,f=e+b,r=g.data}}return r},rl.remove=function(t){if(isNaN(s=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,s,o,a,u,c,l,h,d,f=this._root,p=this._x0,g=this._y0,m=this._x1,y=this._y1;if(!f)return this;if(f.length)for(;;){if((c=s>=(a=(p+m)/2))?p=a:m=a,(l=o>=(u=(g+y)/2))?g=u:y=u,e=f,!(f=f[h=l<<1|c]))return this;if(!f.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,d=h)}for(;f.data!==t;)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=i,this)},rl.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},rl.root=function(){return this._root},rl.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},rl.visit=function(t){var e,n,r,i,s,o,a=[],u=this._root;for(u&&a.push(new Qc(u,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,s=e.x1,o=e.y1)&&u.length){var c=(r+s)/2,l=(i+o)/2;(n=u[3])&&a.push(new Qc(n,c,l,s,o)),(n=u[2])&&a.push(new Qc(n,r,l,c,o)),(n=u[1])&&a.push(new Qc(n,c,i,s,l)),(n=u[0])&&a.push(new Qc(n,r,i,c,l))}return this},rl.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Qc(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var s,o=e.x0,a=e.y0,u=e.x1,c=e.y1,l=(o+u)/2,h=(a+c)/2;(s=i[0])&&n.push(new Qc(s,o,a,l,h)),(s=i[1])&&n.push(new Qc(s,l,a,u,h)),(s=i[2])&&n.push(new Qc(s,o,h,l,c)),(s=i[3])&&n.push(new Qc(s,l,h,u,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},rl.x=function(t){return arguments.length?(this._x=t,this):this._x},rl.y=function(t){return arguments.length?(this._y=t,this):this._y};var al="$";function ul(){}function cl(t,e){var n=new ul;if(t instanceof ul)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,s=t.length;if(null==e)for(;++i<s;)n.set(i,t[i]);else for(;++i<s;)n.set(e(r=t[i],i,t),r)}else if(t)for(var o in t)n.set(o,t[o]);return n}ul.prototype=cl.prototype={constructor:ul,has:function(t){return al+t in this},get:function(t){return this[al+t]},set:function(t,e){return this[al+t]=e,this},remove:function(t){var e=al+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===al&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===al&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===al&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===al&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===al&&++t;return t},empty:function(){for(var t in this)if(t[0]===al)return!1;return!0},each:function(t){for(var e in this)e[0]===al&&t(this[e],e.slice(1),this)}};const ll=cl;function hl(){}var dl=ll.prototype;function fl(t){return t.index}function pl(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function gl(t){var e,n,r,i,s,o=fl,a=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},u=Wc(30),c=1;function l(r){for(var i=0,o=t.length;i<c;++i)for(var a,u,l,h,d,f,p,g=0;g<o;++g)h=(l=(a=t[g]).target).x+l.vx-(u=a.source).x-u.vx||Kc(),d=l.y+l.vy-u.y-u.vy||Kc(),d*=f=((f=Math.sqrt(h*h+d*d))-n[g])/f*r*e[g],l.vx-=(h*=f)*(p=s[g]),l.vy-=d*p,u.vx+=h*(p=1-p),u.vy+=d*p}function h(){if(r){var a,u,c=r.length,l=t.length,h=ll(r,o);for(a=0,i=new Array(c);a<l;++a)(u=t[a]).index=a,"object"!=typeof u.source&&(u.source=pl(h,u.source)),"object"!=typeof u.target&&(u.target=pl(h,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(a=0,s=new Array(l);a<l;++a)s[a]=i[(u=t[a]).source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(l),d(),n=new Array(l),f()}}function d(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+a(t[n],n,t)}function f(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),l.initialize=function(t){r=t,h()},l.links=function(e){return arguments.length?(t=e,h(),l):t},l.id=function(t){return arguments.length?(o=t,l):o},l.iterations=function(t){return arguments.length?(c=+t,l):c},l.strength=function(t){return arguments.length?(a="function"==typeof t?t:Wc(+t),d(),l):a},l.distance=function(t){return arguments.length?(u="function"==typeof t?t:Wc(+t),f(),l):u},l}function ml(t){return t.x}function yl(t){return t.y}hl.prototype=(function(t,e){var n=new hl;if(t instanceof hl)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}).prototype={constructor:hl,has:dl.has,add:function(t){return this[al+(t+="")]=t,this},remove:dl.remove,clear:dl.clear,values:dl.keys,size:dl.size,empty:dl.empty,each:dl.each};var vl=Math.PI*(3-Math.sqrt(5));function _l(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=ll(),u=vi(l),c=fr("tick","end");function l(){h(),c.call("tick",e),n<r&&(u.stop(),c.call("end",e))}function h(r){var u,c,l=t.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(n+=(s-n)*i,a.each(function(t){t(n)}),u=0;u<l;++u)null==(c=t[u]).fx?c.x+=c.vx*=o:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=o:(c.y=c.fy,c.vy=0);return e}function d(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(n),s=n*vl;e.x=i*Math.cos(s),e.y=i*Math.sin(s)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function f(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),d(),e={tick:h,restart:function(){return u.restart(l),e},stop:function(){return u.stop(),e},nodes:function(n){return arguments.length?(t=n,d(),a.each(f),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(s=+t,e):s},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},force:function(t,n){return arguments.length>1?(null==n?a.remove(t):a.set(t,f(n)),e):a.get(t)},find:function(e,n,r){var i,s,o,a,u,c=0,l=t.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)(o=(i=e-(a=t[c]).x)*i+(s=n-a.y)*s)<r&&(u=a,r=o);return u},on:function(t,n){return arguments.length>1?(c.on(t,n),e):c.on(t)}}}function wl(){var t,e,n,r,i=Wc(-30),s=1,o=1/0,a=.81;function u(r){var i,s=t.length,o=tl(t,ml,yl).visitAfter(l);for(n=r,i=0;i<s;++i)e=t[i],o.visit(h)}function c(){if(t){var e,n,s=t.length;for(r=new Array(s),e=0;e<s;++e)r[(n=t[e]).index]=+i(n,e,t)}}function l(t){var e,n,i,s,o,a=0,u=0;if(t.length){for(i=s=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(a+=e.value,u+=n,i+=n*e.x,s+=n*e.y);t.x=i/u,t.y=s/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{a+=r[e.data.index]}while(e=e.next)}t.value=a}function h(t,i,u,c){if(!t.value)return!0;var l=t.x-e.x,h=t.y-e.y,d=c-i,f=l*l+h*h;if(d*d/a<f)return f<o&&(0===l&&(f+=(l=Kc())*l),0===h&&(f+=(h=Kc())*h),f<s&&(f=Math.sqrt(s*f)),e.vx+=l*t.value*n/f,e.vy+=h*t.value*n/f),!0;if(!(t.length||f>=o)){(t.data!==e||t.next)&&(0===l&&(f+=(l=Kc())*l),0===h&&(f+=(h=Kc())*h),f<s&&(f=Math.sqrt(s*f)));do{t.data!==e&&(e.vx+=l*(d=r[t.data.index]*n/f),e.vy+=h*d)}while(t=t.next)}}return u.initialize=function(e){t=e,c()},u.strength=function(t){return arguments.length?(i="function"==typeof t?t:Wc(+t),c(),u):i},u.distanceMin=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u.distanceMax=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.theta=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u}function bl(t,e,n){var r,i,s,o=Wc(.1);function a(t){for(var o=0,a=r.length;o<a;++o){var u=r[o],c=u.x-e||1e-6,l=u.y-n||1e-6,h=Math.sqrt(c*c+l*l),d=(s[o]-h)*i[o]*t/h;u.vx+=c*d,u.vy+=l*d}}function u(){if(r){var e,n=r.length;for(i=new Array(n),s=new Array(n),e=0;e<n;++e)s[e]=+t(r[e],e,r),i[e]=isNaN(s[e])?0:+o(r[e],e,r)}}return"function"!=typeof t&&(t=Wc(+t)),null==e&&(e=0),null==n&&(n=0),a.initialize=function(t){r=t,u()},a.strength=function(t){return arguments.length?(o="function"==typeof t?t:Wc(+t),u(),a):o},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:Wc(+e),u(),a):t},a.x=function(t){return arguments.length?(e=+t,a):e},a.y=function(t){return arguments.length?(n=+t,a):n},a}function xl(t){var e,n,r,i=Wc(.1);function s(t){for(var i,s=0,o=e.length;s<o;++s)(i=e[s]).vx+=(r[s]-i.x)*n[s]*t}function o(){if(e){var s,o=e.length;for(n=new Array(o),r=new Array(o),s=0;s<o;++s)n[s]=isNaN(r[s]=+t(e[s],s,e))?0:+i(e[s],s,e)}}return"function"!=typeof t&&(t=Wc(null==t?0:+t)),s.initialize=function(t){e=t,o()},s.strength=function(t){return arguments.length?(i="function"==typeof t?t:Wc(+t),o(),s):i},s.x=function(e){return arguments.length?(t="function"==typeof e?e:Wc(+e),o(),s):t},s}function El(t){var e,n,r,i=Wc(.1);function s(t){for(var i,s=0,o=e.length;s<o;++s)(i=e[s]).vy+=(r[s]-i.y)*n[s]*t}function o(){if(e){var s,o=e.length;for(n=new Array(o),r=new Array(o),s=0;s<o;++s)n[s]=isNaN(r[s]=+t(e[s],s,e))?0:+i(e[s],s,e)}}return"function"!=typeof t&&(t=Wc(null==t?0:+t)),s.initialize=function(t){e=t,o()},s.strength=function(t){return arguments.length?(i="function"==typeof t?t:Wc(+t),o(),s):i},s.y=function(e){return arguments.length?(t="function"==typeof e?e:Wc(+e),o(),s):t},s}var Tl=n(6703);function Sl(t,e,n){var r=new yi,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?gi():+n,r.restart(function s(o){o+=i,r.restart(s,i+=e,n),t(o)},e,n),r)}const kl=["linkTemplate"],Il=["nodeTemplate"],Cl=["clusterTemplate"],Al=["defsTemplate"],Ol=["miniMapNodeTemplate"],Nl=["nodeElement"],Dl=["linkElement"];function Pl(t,e){if(1&t&&(o.O4$(),o.GkF(0,13)),2&t){const t=o.oxw(2);o.Q6J("ngTemplateOutlet",t.defsTemplate)}}function Rl(t,e){if(1&t&&(o.O4$(),o._UZ(0,"path",14)),2&t){const t=e.$implicit;o.uIk("d",t.textPath)("id",t.id)}}const Ml=function(t){return{$implicit:t}};function Ll(t,e){if(1&t&&(o.O4$(),o.GkF(0,19)),2&t){const t=o.oxw().$implicit,e=o.oxw(2);o.Q6J("ngTemplateOutlet",e.clusterTemplate)("ngTemplateOutletContext",o.VKq(2,Ml,t))}}function Fl(t,e){if(1&t&&(o.O4$(),o.TgZ(0,"g",20),o._UZ(1,"rect"),o.TgZ(2,"text",21),o._uU(3),o.qZA(),o.qZA()),2&t){const t=o.oxw().$implicit;o.xp6(1),o.uIk("width",t.dimension.width)("height",t.dimension.height)("fill",null==t.data?null:t.data.color),o.xp6(1),o.uIk("x",10)("y",t.dimension.height/2),o.xp6(1),o.hij(" ",t.label," ")}}function jl(t,e){if(1&t){const t=o.EpF();o.O4$(),o.TgZ(0,"g",15,16),o.NdJ("click",function(){const e=o.CHM(t).$implicit;return o.oxw(2).onClick(e)}),o.YNc(2,Ll,1,4,"ng-container",17),o.YNc(3,Fl,4,6,"g",18),o.qZA()}if(2&t){const t=e.$implicit,n=o.oxw(2);o.ekj("old-node",n.animate&&n.oldClusters.has(t.id)),o.Q6J("id",t.id),o.uIk("transform",t.transform),o.xp6(2),o.Q6J("ngIf",n.clusterTemplate),o.xp6(1),o.Q6J("ngIf",!n.clusterTemplate)}}function Ul(t,e){if(1&t&&(o.O4$(),o.GkF(0,19)),2&t){const t=o.oxw().$implicit,e=o.oxw(2);o.Q6J("ngTemplateOutlet",e.linkTemplate)("ngTemplateOutletContext",o.VKq(2,Ml,t))}}function Vl(t,e){if(1&t&&(o.O4$(),o._UZ(0,"path",25)),2&t){const t=o.oxw().$implicit;o.uIk("d",t.line)}}function ql(t,e){if(1&t&&(o.O4$(),o.TgZ(0,"g",22,23),o.YNc(2,Ul,1,4,"ng-container",17),o.YNc(3,Vl,1,1,"path",24),o.qZA()),2&t){const t=e.$implicit,n=o.oxw(2);o.Q6J("id",t.id),o.xp6(2),o.Q6J("ngIf",n.linkTemplate),o.xp6(1),o.Q6J("ngIf",!n.linkTemplate)}}function Bl(t,e){if(1&t&&(o.O4$(),o.GkF(0,19)),2&t){const t=o.oxw().$implicit,e=o.oxw(2);o.Q6J("ngTemplateOutlet",e.nodeTemplate)("ngTemplateOutletContext",o.VKq(2,Ml,t))}}function zl(t,e){if(1&t&&(o.O4$(),o._UZ(0,"circle",29)),2&t){const t=o.oxw().$implicit;o.uIk("cx",t.dimension.width/2)("cy",t.dimension.height/2)("fill",null==t.data?null:t.data.color)}}function $l(t,e){if(1&t){const t=o.EpF();o.O4$(),o.TgZ(0,"g",26,27),o.NdJ("click",function(){const e=o.CHM(t).$implicit;return o.oxw(2).onClick(e)})("mousedown",function(e){const n=o.CHM(t).$implicit;return o.oxw(2).onNodeMouseDown(e,n)}),o.YNc(2,Bl,1,4,"ng-container",17),o.YNc(3,zl,1,3,"circle",28),o.qZA()}if(2&t){const t=e.$implicit,n=o.oxw(2);o.ekj("old-node",n.animate&&n.oldNodes.has(t.id)),o.Q6J("id",t.id),o.uIk("transform",t.transform),o.xp6(2),o.Q6J("ngIf",n.nodeTemplate),o.xp6(1),o.Q6J("ngIf",!n.nodeTemplate)}}function Gl(t,e){if(1&t){const t=o.EpF();o.O4$(),o.TgZ(0,"g",3),o.NdJ("touchstart",function(e){return o.CHM(t),o.oxw().onTouchStart(e)})("touchend",function(e){return o.CHM(t),o.oxw().onTouchEnd(e)}),o.TgZ(1,"defs"),o.YNc(2,Pl,1,1,"ng-container",4),o.YNc(3,Rl,1,2,"path",5),o.qZA(),o.TgZ(4,"rect",6),o.NdJ("mousedown",function(){return o.CHM(t),o.oxw().isPanning=!0}),o.qZA(),o.Hsn(5),o.TgZ(6,"g",7),o.YNc(7,jl,4,6,"g",8),o.qZA(),o.TgZ(8,"g",9),o.YNc(9,ql,4,3,"g",10),o.qZA(),o.TgZ(10,"g",11),o.YNc(11,$l,4,6,"g",12),o.qZA(),o.qZA()}if(2&t){const t=o.oxw();o.uIk("transform",t.transform),o.xp6(2),o.Q6J("ngIf",t.defsTemplate),o.xp6(1),o.Q6J("ngForOf",t.graph.edges),o.xp6(1),o.uIk("width",100*t.dims.width)("height",100*t.dims.height)("transform","translate("+50*(-t.dims.width||0)+","+50*(-t.dims.height||0)+")"),o.xp6(3),o.Q6J("ngForOf",t.graph.clusters)("ngForTrackBy",t.trackNodeBy),o.xp6(2),o.Q6J("ngForOf",t.graph.edges)("ngForTrackBy",t.trackLinkBy),o.xp6(2),o.Q6J("ngForOf",t.graph.nodes)("ngForTrackBy",t.trackNodeBy)}}function Zl(t,e){if(1&t&&(o.O4$(),o.GkF(0,19)),2&t){const t=o.oxw().$implicit,e=o.oxw(2);o.Q6J("ngTemplateOutlet",e.miniMapNodeTemplate)("ngTemplateOutletContext",o.VKq(2,Ml,t))}}function Hl(t,e){if(1&t&&(o.O4$(),o.GkF(0,19)),2&t){const t=o.oxw().$implicit,e=o.oxw(2);o.Q6J("ngTemplateOutlet",e.nodeTemplate)("ngTemplateOutletContext",o.VKq(2,Ml,t))}}function Wl(t,e){if(1&t&&(o.O4$(),o._UZ(0,"circle",29)),2&t){const t=o.oxw().$implicit,e=o.oxw(2);o.uIk("cx",t.dimension.width/2/e.minimapScaleCoefficient)("cy",t.dimension.height/2/e.minimapScaleCoefficient)("fill",null==t.data?null:t.data.color)}}function Kl(t,e){if(1&t&&(o.O4$(),o.TgZ(0,"g",35,27),o.YNc(2,Zl,1,4,"ng-container",17),o.YNc(3,Hl,1,4,"ng-container",17),o.YNc(4,Wl,1,3,"circle",28),o.qZA()),2&t){const t=e.$implicit,n=o.oxw(2);o.ekj("old-node",n.animate&&n.oldNodes.has(t.id)),o.Q6J("id",t.id),o.uIk("transform",t.transform),o.xp6(2),o.Q6J("ngIf",n.miniMapNodeTemplate),o.xp6(1),o.Q6J("ngIf",!n.miniMapNodeTemplate&&n.nodeTemplate),o.xp6(1),o.Q6J("ngIf",!n.nodeTemplate&&!n.miniMapNodeTemplate)}}function Yl(t,e){if(1&t){const t=o.EpF();o.O4$(),o.TgZ(0,"g",30),o.TgZ(1,"rect",31),o.NdJ("mousedown",function(e){return o.CHM(t),o.oxw().onMinimapPanTo(e)}),o.qZA(),o.TgZ(2,"g"),o.TgZ(3,"g",32),o.YNc(4,Kl,5,7,"g",33),o.qZA(),o.TgZ(5,"rect",34),o.NdJ("mousedown",function(){return o.CHM(t),o.oxw().onMinimapDragMouseDown()}),o.qZA(),o.qZA(),o.qZA()}if(2&t){const t=o.oxw();o.uIk("transform",t.minimapTransform)("clip-path","url(#"+t.minimapClipPathId+")"),o.xp6(1),o.uIk("width",t.graphDims.width/t.minimapScaleCoefficient)("height",t.graphDims.height/t.minimapScaleCoefficient),o.xp6(1),o.Udp("transform","translate("+-t.minimapOffsetX/t.minimapScaleCoefficient+"px,"+-t.minimapOffsetY/t.minimapScaleCoefficient+"px)"),o.xp6(1),o.Udp("transform","scale("+1/t.minimapScaleCoefficient+")"),o.xp6(1),o.Q6J("ngForOf",t.graph.nodes)("ngForTrackBy",t.trackNodeBy),o.xp6(1),o.ekj("panning",t.isMinimapPanning),o.uIk("transform","translate("+t.panOffsetX/t.zoomLevel/-t.minimapScaleCoefficient+","+t.panOffsetY/t.zoomLevel/-t.minimapScaleCoefficient+")")("width",t.width/t.minimapScaleCoefficient/t.zoomLevel)("height",t.height/t.minimapScaleCoefficient/t.zoomLevel)}}const Ql=function(t,e){return[t,e]},Jl=["*"],Xl={};function th(){let t=("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return t=`a${t}`,Xl[t]?th():(Xl[t]=!0,t)}var eh=(()=>(function(t){t.LEFT_TO_RIGHT="LR",t.RIGHT_TO_LEFT="RL",t.TOP_TO_BOTTOM="TB",t.BOTTOM_TO_TOM="BT"}(eh||(eh={})),eh))();function nh(t){return"string"==typeof t?{id:t,x:0,y:0}:t}function rh(t,e){return"number"==typeof e?t[e]:e}const ih={dagre:class{constructor(){this.defaultSettings={orientation:eh.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(t){this.createDagreGraph(t),(0,Zc.layout)(this.dagreGraph),t.edgeLabels=this.dagreGraph._edgeLabels;for(const e in this.dagreGraph._nodes){const n=this.dagreGraph._nodes[e],r=t.nodes.find(t=>t.id===n.id);r.position={x:n.x,y:n.y},r.dimension={width:n.width,height:n.height}}return t}updateEdge(t,e){const n=t.nodes.find(t=>t.id===e.source),r=t.nodes.find(t=>t.id===e.target),i=n.position.y<=r.position.y?-1:1;return e.points=[{x:n.position.x,y:n.position.y-i*(n.dimension.height/2)},{x:r.position.x,y:r.position.y+i*(r.dimension.height/2)}],t}createDagreGraph(t){const e=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new Zc.graphlib.Graph({compound:e.compound,multigraph:e.multigraph}),this.dagreGraph.setGraph({rankdir:e.orientation,marginx:e.marginX,marginy:e.marginY,edgesep:e.edgePadding,ranksep:e.rankPadding,nodesep:e.nodePadding,align:e.align,acyclicer:e.acyclicer,ranker:e.ranker,multigraph:e.multigraph,compound:e.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=t.nodes.map(t=>{const e=Object.assign({},t);return e.width=t.dimension.width,e.height=t.dimension.height,e.x=t.position.x,e.y=t.position.y,e}),this.dagreEdges=t.edges.map(t=>{const e=Object.assign({},t);return e.id||(e.id=th()),e});for(const n of this.dagreNodes)n.width||(n.width=20),n.height||(n.height=30),this.dagreGraph.setNode(n.id,n);for(const n of this.dagreEdges)e.multigraph?this.dagreGraph.setEdge(n.source,n.target,n,n.id):this.dagreGraph.setEdge(n.source,n.target);return this.dagreGraph}},dagreCluster:class{constructor(){this.defaultSettings={orientation:eh.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(t){this.createDagreGraph(t),(0,Zc.layout)(this.dagreGraph),t.edgeLabels=this.dagreGraph._edgeLabels;const e=t=>{const e=this.dagreGraph._nodes[t.id];return Object.assign(Object.assign({},t),{position:{x:e.x,y:e.y},dimension:{width:e.width,height:e.height}})};return t.clusters=(t.clusters||[]).map(e),t.nodes=t.nodes.map(e),t}updateEdge(t,e){const n=t.nodes.find(t=>t.id===e.source),r=t.nodes.find(t=>t.id===e.target),i=n.position.y<=r.position.y?-1:1;return e.points=[{x:n.position.x,y:n.position.y-i*(n.dimension.height/2)},{x:r.position.x,y:r.position.y+i*(r.dimension.height/2)}],t}createDagreGraph(t){const e=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new Zc.graphlib.Graph({compound:e.compound,multigraph:e.multigraph}),this.dagreGraph.setGraph({rankdir:e.orientation,marginx:e.marginX,marginy:e.marginY,edgesep:e.edgePadding,ranksep:e.rankPadding,nodesep:e.nodePadding,align:e.align,acyclicer:e.acyclicer,ranker:e.ranker,multigraph:e.multigraph,compound:e.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=t.nodes.map(t=>{const e=Object.assign({},t);return e.width=t.dimension.width,e.height=t.dimension.height,e.x=t.position.x,e.y=t.position.y,e}),this.dagreClusters=t.clusters||[],this.dagreEdges=t.edges.map(t=>{const e=Object.assign({},t);return e.id||(e.id=th()),e});for(const n of this.dagreNodes)this.dagreGraph.setNode(n.id,n);for(const n of this.dagreClusters)this.dagreGraph.setNode(n.id,n),n.childNodeIds.forEach(t=>{this.dagreGraph.setParent(t,n.id)});for(const n of this.dagreEdges)e.multigraph?this.dagreGraph.setEdge(n.source,n.target,n,n.id):this.dagreGraph.setEdge(n.source,n.target);return this.dagreGraph}},dagreNodesOnly:class{constructor(){this.defaultSettings={orientation:eh.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,curveDistance:20,multigraph:!0,compound:!0},this.settings={}}run(t){this.createDagreGraph(t),(0,Zc.layout)(this.dagreGraph),t.edgeLabels=this.dagreGraph._edgeLabels;for(const e in this.dagreGraph._nodes){const n=this.dagreGraph._nodes[e],r=t.nodes.find(t=>t.id===n.id);r.position={x:n.x,y:n.y},r.dimension={width:n.width,height:n.height}}for(const e of t.edges)this.updateEdge(t,e);return t}updateEdge(t,e){const n=t.nodes.find(t=>t.id===e.source),r=t.nodes.find(t=>t.id===e.target),i="BT"===this.settings.orientation||"TB"===this.settings.orientation?"y":"x",s="y"===i?"x":"y",o="y"===i?"height":"width",a=n.position[i]<=r.position[i]?-1:1,u={[s]:n.position[s],[i]:n.position[i]-a*(n.dimension[o]/2)},c={[s]:r.position[s],[i]:r.position[i]+a*(r.dimension[o]/2)},l=this.settings.curveDistance||this.defaultSettings.curveDistance;e.points=[u,{[s]:u[s],[i]:u[i]-a*l},{[s]:c[s],[i]:c[i]+a*l},c];const h=t.edgeLabels[`${e.source}\x01${e.target}\x01\0`];return h&&(h.points=e.points),t}createDagreGraph(t){const e=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new Zc.graphlib.Graph({compound:e.compound,multigraph:e.multigraph}),this.dagreGraph.setGraph({rankdir:e.orientation,marginx:e.marginX,marginy:e.marginY,edgesep:e.edgePadding,ranksep:e.rankPadding,nodesep:e.nodePadding,align:e.align,acyclicer:e.acyclicer,ranker:e.ranker,multigraph:e.multigraph,compound:e.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=t.nodes.map(t=>{const e=Object.assign({},t);return e.width=t.dimension.width,e.height=t.dimension.height,e.x=t.position.x,e.y=t.position.y,e}),this.dagreEdges=t.edges.map(t=>{const e=Object.assign({},t);return e.id||(e.id=th()),e});for(const n of this.dagreNodes)n.width||(n.width=20),n.height||(n.height=30),this.dagreGraph.setNode(n.id,n);for(const n of this.dagreEdges)e.multigraph?this.dagreGraph.setEdge(n.source,n.target,n,n.id):this.dagreGraph.setEdge(n.source,n.target);return this.dagreGraph}},d3ForceDirected:class{constructor(){this.defaultSettings={force:_l().force("charge",wl().strength(-150)).force("collide",ol(5)),forceLink:gl().id(t=>t.id).distance(()=>100)},this.settings={},this.outputGraph$=new wc.xQ}run(t){return this.inputGraph=t,this.d3Graph={nodes:[...this.inputGraph.nodes.map(t=>Object.assign({},t))],edges:[...this.inputGraph.edges.map(t=>Object.assign({},t))]},this.outputGraph={nodes:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&this.settings.force.nodes(this.d3Graph.nodes).force("link",this.settings.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}updateEdge(t,e){const n=Object.assign({},this.defaultSettings,this.settings);return n.force&&n.force.nodes(this.d3Graph.nodes).force("link",n.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}d3GraphToOutputGraph(t){return this.outputGraph.nodes=this.d3Graph.nodes.map(t=>Object.assign(Object.assign({},t),{id:t.id||th(),position:{x:t.x,y:t.y},dimension:{width:t.dimension&&t.dimension.width||20,height:t.dimension&&t.dimension.height||20},transform:`translate(${t.x-(t.dimension&&t.dimension.width||20)/2||0}, ${t.y-(t.dimension&&t.dimension.height||20)/2||0})`})),this.outputGraph.edges=this.d3Graph.edges.map(t=>Object.assign(Object.assign({},t),{source:nh(t.source).id,target:nh(t.target).id,points:[{x:nh(t.source).x,y:nh(t.source).y},{x:nh(t.target).x,y:nh(t.target).y}]})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(t,e){this.settings.force.alphaTarget(.3).restart();const n=this.d3Graph.nodes.find(e=>e.id===t.id);n&&(this.draggingStart={x:e.x-n.x,y:e.y-n.y},n.fx=e.x-this.draggingStart.x,n.fy=e.y-this.draggingStart.y)}onDrag(t,e){if(!t)return;const n=this.d3Graph.nodes.find(e=>e.id===t.id);n&&(n.fx=e.x-this.draggingStart.x,n.fy=e.y-this.draggingStart.y)}onDragEnd(t,e){if(!t)return;const n=this.d3Graph.nodes.find(e=>e.id===t.id);n&&(this.settings.force.alphaTarget(0),n.fx=void 0,n.fy=void 0)}},colaForceDirected:class{constructor(){this.defaultSettings={force:(0,Tl.d3adaptor)(Object.assign(Object.assign(Object.assign({},i),r),s)).linkDistance(150).avoidOverlaps(!0),viewDimensions:{width:600,height:600,xOffset:0}},this.settings={},this.outputGraph$=new wc.xQ}run(t){return this.inputGraph=t,this.inputGraph.clusters||(this.inputGraph.clusters=[]),this.internalGraph={nodes:[...this.inputGraph.nodes.map(t=>Object.assign(Object.assign({},t),{width:t.dimension?t.dimension.width:20,height:t.dimension?t.dimension.height:20}))],groups:[...this.inputGraph.clusters.map(t=>({padding:5,groups:t.childNodeIds.map(t=>this.inputGraph.clusters.findIndex(e=>e.id===t)).filter(t=>t>=0),leaves:t.childNodeIds.map(t=>this.inputGraph.nodes.findIndex(e=>e.id===t)).filter(t=>t>=0)}))],links:[...this.inputGraph.edges.map(t=>{const e=this.inputGraph.nodes.findIndex(e=>t.source===e.id),n=this.inputGraph.nodes.findIndex(e=>t.target===e.id);if(-1!==e&&-1!==n)return Object.assign(Object.assign({},t),{source:e,target:n})}).filter(t=>!!t)],groupLinks:[...this.inputGraph.edges.map(t=>{const e=this.inputGraph.nodes.findIndex(e=>t.source===e.id),n=this.inputGraph.nodes.findIndex(e=>t.target===e.id);if(!(e>=0&&n>=0))return t}).filter(t=>!!t)]},this.outputGraph={nodes:[],clusters:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&(this.settings.force=this.settings.force.nodes(this.internalGraph.nodes).groups(this.internalGraph.groups).links(this.internalGraph.links).alpha(.5).on("tick",()=>{this.settings.onTickListener&&this.settings.onTickListener(this.internalGraph),this.outputGraph$.next(this.internalGraphToOutputGraph(this.internalGraph))}),this.settings.viewDimensions&&(this.settings.force=this.settings.force.size([this.settings.viewDimensions.width,this.settings.viewDimensions.height])),this.settings.forceModifierFn&&(this.settings.force=this.settings.forceModifierFn(this.settings.force)),this.settings.force.start()),this.outputGraph$.asObservable()}updateEdge(t,e){const n=Object.assign({},this.defaultSettings,this.settings);return n.force&&n.force.start(),this.outputGraph$.asObservable()}internalGraphToOutputGraph(t){return this.outputGraph.nodes=t.nodes.map(t=>Object.assign(Object.assign({},t),{id:t.id||th(),position:{x:t.x,y:t.y},dimension:{width:t.dimension&&t.dimension.width||20,height:t.dimension&&t.dimension.height||20},transform:`translate(${t.x-(t.dimension&&t.dimension.width||20)/2||0}, ${t.y-(t.dimension&&t.dimension.height||20)/2||0})`})),this.outputGraph.edges=t.links.map(e=>{const n=rh(t.nodes,e.source),r=rh(t.nodes,e.target);return Object.assign(Object.assign({},e),{source:n.id,target:r.id,points:[n.bounds.rayIntersection(r.bounds.cx(),r.bounds.cy()),r.bounds.rayIntersection(n.bounds.cx(),n.bounds.cy())]})}).concat(t.groupLinks.map(e=>{const n=t.nodes.find(t=>t.id===e.source),r=t.nodes.find(t=>t.id===e.target),i=n||t.groups.find(t=>t.id===e.source),s=r||t.groups.find(t=>t.id===e.target);return Object.assign(Object.assign({},e),{source:i.id,target:s.id,points:[i.bounds.rayIntersection(s.bounds.cx(),s.bounds.cy()),s.bounds.rayIntersection(i.bounds.cx(),i.bounds.cy())]})})),this.outputGraph.clusters=t.groups.map((t,e)=>Object.assign(Object.assign({},this.inputGraph.clusters[e]),{dimension:{width:t.bounds?t.bounds.width():20,height:t.bounds?t.bounds.height():20},position:{x:t.bounds?t.bounds.x+t.bounds.width()/2:0,y:t.bounds?t.bounds.y+t.bounds.height()/2:0}})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(t,e){const n=this.outputGraph.nodes.findIndex(e=>e.id===t.id),r=this.internalGraph.nodes[n];r&&(this.draggingStart={x:r.x-e.x,y:r.y-e.y},r.fixed=1,this.settings.force.start())}onDrag(t,e){if(!t)return;const n=this.outputGraph.nodes.findIndex(e=>e.id===t.id),r=this.internalGraph.nodes[n];r&&(r.x=this.draggingStart.x+e.x,r.y=this.draggingStart.y+e.y)}onDragEnd(t,e){if(!t)return;const n=this.outputGraph.nodes.findIndex(e=>e.id===t.id),r=this.internalGraph.nodes[n];r&&(r.fixed=0)}}};let sh=(()=>{class t{getLayout(t){if(ih[t])return new ih[t];throw new Error(`Unknown layout type '${t}'`)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})();var oh=(()=>(function(t){t.Both="both",t.Horizontal="horizontal",t.Vertical="vertical"}(oh||(oh={})),oh))(),ah=(()=>(function(t){t.UpperLeft="UpperLeft",t.UpperRight="UpperRight"}(ah||(ah={})),ah))();function uh(t,e,n){let r,i,s;n=n||{};let o=null,a=0;function u(){a=!1===n.leading?0:+new Date,o=null,s=t.apply(r,i)}return function(){const c=+new Date;a||!1!==n.leading||(a=c);const l=e-(c-a);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,a=c,s=t.apply(r,i)):o||!1===n.trailing||(o=setTimeout(u,l)),s}}let ch=(()=>{class t extends Hu{constructor(t,e,n,r){super(t,e,n),this.el=t,this.zone=e,this.cd=n,this.layoutService=r,this.legend=!1,this.nodes=[],this.clusters=[],this.links=[],this.activeEntries=[],this.draggingEnabled=!0,this.panningEnabled=!0,this.panningAxis=oh.Both,this.enableZoom=!0,this.zoomSpeed=.1,this.minZoomLevel=.1,this.maxZoomLevel=4,this.autoZoom=!1,this.panOnZoom=!0,this.animate=!1,this.autoCenter=!1,this.enableTrackpadSupport=!1,this.showMiniMap=!1,this.miniMapMaxWidth=100,this.miniMapPosition=ah.UpperRight,this.activate=new o.vpe,this.deactivate=new o.vpe,this.zoomChange=new o.vpe,this.clickHandler=new o.vpe,this.isMouseMoveCalled=!1,this.graphSubscription=new bc.w,this.subscriptions=[],this.margin=[0,0,0,0],this.results=[],this.isPanning=!1,this.isDragging=!1,this.initialized=!1,this.graphDims={width:0,height:0},this._oldLinks=[],this.oldNodes=new Set,this.oldClusters=new Set,this.transformationMatrix={a:1,c:0,e:0,b:0,d:1,f:0},this._touchLastX=null,this._touchLastY=null,this.minimapScaleCoefficient=3,this.minimapOffsetX=0,this.minimapOffsetY=0,this.isMinimapPanning=!1,this.groupResultsBy=t=>t.label}get zoomLevel(){return this.transformationMatrix.a}set zoomLevel(t){this.zoomTo(Number(t))}get panOffsetX(){return this.transformationMatrix.e}set panOffsetX(t){this.panTo(Number(t),null)}get panOffsetY(){return this.transformationMatrix.f}set panOffsetY(t){this.panTo(null,Number(t))}ngOnInit(){this.update$&&this.subscriptions.push(this.update$.subscribe(()=>{this.update()})),this.center$&&this.subscriptions.push(this.center$.subscribe(()=>{this.center()})),this.zoomToFit$&&this.subscriptions.push(this.zoomToFit$.subscribe(()=>{this.zoomToFit()})),this.panToNode$&&this.subscriptions.push(this.panToNode$.subscribe(t=>{this.panToNodeId(t)})),this.minimapClipPathId=`minimapClip${th()}`}ngOnChanges(t){const{layoutSettings:e}=t;this.setLayout(this.layout),e&&this.setLayoutSettings(this.layoutSettings),this.update()}setLayout(t){this.initialized=!1,t||(t="dagre"),"string"==typeof t&&(this.layout=this.layoutService.getLayout(t),this.setLayoutSettings(this.layoutSettings))}setLayoutSettings(t){this.layout&&"string"!=typeof this.layout&&(this.layout.settings=t)}ngOnDestroy(){super.ngOnDestroy();for(const t of this.subscriptions)t.unsubscribe();this.subscriptions=null}ngAfterViewInit(){super.ngAfterViewInit(),setTimeout(()=>this.update())}update(){super.update(),this.curve||(this.curve=yc.beta(1)),this.zone.run(()=>{this.dims=function({width:t,height:e,margins:n,showXAxis:r=!1,showYAxis:i=!1,xAxisHeight:s=0,yAxisWidth:o=0,showXLabel:a=!1,showYLabel:u=!1,showLegend:c=!1,legendType:l="ordinal",legendPosition:h="right",columns:d=12}){let f=n[3],p=t,g=e-n[0]-n[2];if(c&&"right"===h&&(d-="ordinal"===l?2:1),p=p*d/12,p=p-n[1]-n[3],r&&(g-=5,g-=s,a)&&(g-=30),i&&(p-=5,p-=o,f+=o,f+=10,u)){const t=30;p-=t,f+=t}return p=Math.max(0,p),g=Math.max(0,g),{width:Math.floor(p),height:Math.floor(g),xOffset:Math.floor(f)}}({width:this.width,height:this.height,margins:this.margin,showLegend:this.legend}),this.seriesDomain=this.getSeriesDomain(),this.setColors(),this.legendOptions=this.getLegendOptions(),this.createGraph(),this.updateTransform(),this.initialized=!0})}createGraph(){this.graphSubscription.unsubscribe(),this.graphSubscription=new bc.w;const t=t=>(t.meta||(t.meta={}),t.id||(t.id=th()),t.dimension?t.meta.forceDimensions=void 0===t.meta.forceDimensions||t.meta.forceDimensions:(t.dimension={width:this.nodeWidth?this.nodeWidth:30,height:this.nodeHeight?this.nodeHeight:30},t.meta.forceDimensions=!1),t.position={x:0,y:0},t.data=t.data?t.data:{},t);this.graph={nodes:this.nodes.length>0?[...this.nodes].map(t):[],clusters:this.clusters&&this.clusters.length>0?[...this.clusters].map(t):[],edges:this.links.length>0?[...this.links].map(t=>(t.id||(t.id=th()),t)):[]},requestAnimationFrame(()=>this.draw())}draw(){if(!this.layout||"string"==typeof this.layout)return;this.applyNodeDimensions();const t=this.layout.run(this.graph),e=t instanceof Et.y?t:(0,xc.of)(t);this.graphSubscription.add(e.subscribe(t=>{this.graph=t,this.tick()})),0!==this.graph.nodes.length&&e.pipe(Vc()).subscribe(()=>this.applyNodeDimensions())}tick(){const t=new Set;this.graph.nodes.map(e=>{e.transform=`translate(${e.position.x-e.dimension.width/2||0}, ${e.position.y-e.dimension.height/2||0})`,e.data||(e.data={}),e.data.color=this.colors.getColor(this.groupResultsBy(e)),t.add(e.id)});const e=new Set;(this.graph.clusters||[]).map(t=>{t.transform=`translate(${t.position.x-t.dimension.width/2||0}, ${t.position.y-t.dimension.height/2||0})`,t.data||(t.data={}),t.data.color=this.colors.getColor(this.groupResultsBy(t)),e.add(t.id)}),setTimeout(()=>{this.oldNodes=t,this.oldClusters=e},500);const n=[];for(const r in this.graph.edgeLabels){const t=this.graph.edgeLabels[r],e=r.replace(/[^\w-]*/g,""),i=this.layout&&"string"!=typeof this.layout&&this.layout.settings&&this.layout.settings.multigraph;let s=this._oldLinks.find(i?t=>`${t.source}${t.target}${t.id}`===e:t=>`${t.source}${t.target}`===e);const o=this.graph.edges.find(i?t=>`${t.source}${t.target}${t.id}`===e:t=>`${t.source}${t.target}`===e);s?s.data&&o&&o.data&&JSON.stringify(s.data)!==JSON.stringify(o.data)&&(s.data=o.data):s=o||t,s.oldLine=s.line;const a=t.points,u=this.generateLine(a),c=Object.assign({},s);c.line=u,c.points=a,this.updateMidpointOnEdge(c,a);const l=a[Math.floor(a.length/2)];l&&(c.textTransform=`translate(${l.x||0},${l.y||0})`),c.textAngle=0,c.oldLine||(c.oldLine=c.line),this.calcDominantBaseline(c),n.push(c)}this.graph.edges=n,this.graph.edges&&(this._oldLinks=this.graph.edges.map(t=>{const e=Object.assign({},t);return e.oldLine=t.line,e})),this.updateMinimap(),this.autoZoom&&this.zoomToFit(),this.autoCenter&&this.center(),requestAnimationFrame(()=>this.redrawLines()),this.cd.markForCheck()}getMinimapTransform(){switch(this.miniMapPosition){case ah.UpperLeft:return"";case ah.UpperRight:return"translate("+(this.dims.width-this.graphDims.width/this.minimapScaleCoefficient)+",0)";default:return""}}updateGraphDims(){let t=1/0,e=-1/0,n=1/0,r=-1/0;for(let i=0;i<this.graph.nodes.length;i++){const s=this.graph.nodes[i];t=s.position.x<t?s.position.x:t,n=s.position.y<n?s.position.y:n,e=s.position.x+s.dimension.width>e?s.position.x+s.dimension.width:e,r=s.position.y+s.dimension.height>r?s.position.y+s.dimension.height:r}t-=100,n-=100,e+=100,r+=100,this.graphDims.width=e-t,this.graphDims.height=r-n,this.minimapOffsetX=t,this.minimapOffsetY=n}updateMinimap(){this.graph.nodes&&this.graph.nodes.length&&(this.updateGraphDims(),this.miniMapMaxWidth&&(this.minimapScaleCoefficient=this.graphDims.width/this.miniMapMaxWidth),this.miniMapMaxHeight&&(this.minimapScaleCoefficient=Math.max(this.minimapScaleCoefficient,this.graphDims.height/this.miniMapMaxHeight)),this.minimapTransform=this.getMinimapTransform())}applyNodeDimensions(){this.nodeElements&&this.nodeElements.length&&this.nodeElements.map(t=>{const e=t.nativeElement,n=this.graph.nodes.find(t=>t.id===e.id);if(!n)return;let r;try{if(r=e.getBBox(),!r.width||!r.height)return}catch(i){return}if(n.dimension.height=this.nodeHeight?n.dimension.height&&n.meta.forceDimensions?n.dimension.height:this.nodeHeight:n.dimension.height&&n.meta.forceDimensions?n.dimension.height:r.height,this.nodeMaxHeight&&(n.dimension.height=Math.max(n.dimension.height,this.nodeMaxHeight)),this.nodeMinHeight&&(n.dimension.height=Math.min(n.dimension.height,this.nodeMinHeight)),this.nodeWidth)n.dimension.width=n.dimension.width&&n.meta.forceDimensions?n.dimension.width:this.nodeWidth;else if(e.getElementsByTagName("text").length){let t;try{for(const n of e.getElementsByTagName("text")){const e=n.getBBox();t?(e.width>t.width&&(t.width=e.width),e.height>t.height&&(t.height=e.height)):t=e}}catch(i){return}n.dimension.width=n.dimension.width&&n.meta.forceDimensions?n.dimension.width:t.width+20}else n.dimension.width=n.dimension.width&&n.meta.forceDimensions?n.dimension.width:r.width;this.nodeMaxWidth&&(n.dimension.width=Math.max(n.dimension.width,this.nodeMaxWidth)),this.nodeMinWidth&&(n.dimension.width=Math.min(n.dimension.width,this.nodeMinWidth))})}redrawLines(t=this.animate){this.linkElements.map(e=>{const n=this.graph.edges.find(t=>t.id===e.nativeElement.id);n&&(or(e.nativeElement).select(".line").attr("d",n.oldLine).transition().ease(_c).duration(t?500:0).attr("d",n.line),or(this.chartElement.nativeElement).select(`#${n.id}`).attr("d",n.oldTextPath).transition().ease(_c).duration(t?500:0).attr("d",n.textPath),this.updateMidpointOnEdge(n,n.points))})}calcDominantBaseline(t){const e=t.points[0],n=t.points[t.points.length-1];t.oldTextPath=t.textPath,n.x<e.x?(t.dominantBaseline="text-before-edge",t.textPath=this.generateLine([...t.points].reverse())):(t.dominantBaseline="text-after-edge",t.textPath=t.line)}generateLine(t){return function(){var t=hu,e=du,n=lu(!0),r=null,i=nu,s=null;function o(o){var a,u,c,l=o.length,h=!1;for(null==r&&(s=i(c=cu())),a=0;a<=l;++a)!(a<l&&n(u=o[a],a,o))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(u,a,o),+e(u,a,o));if(c)return s=null,c+""||null}return o.x=function(e){return arguments.length?(t="function"==typeof e?e:lu(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:lu(+t),o):e},o.defined=function(t){return arguments.length?(n="function"==typeof t?t:lu(!!t),o):n},o.curve=function(t){return arguments.length?(i=t,null!=r&&(s=i(r)),o):i},o.context=function(t){return arguments.length?(null==t?r=s=null:s=i(r=t),o):r},o}().x(t=>t.x).y(t=>t.y).curve(this.curve)(t)}onZoom(t,e){if(this.enableTrackpadSupport&&!t.ctrlKey)return void this.pan(-1*t.deltaX,-1*t.deltaY);const n=1+("in"===e?this.zoomSpeed:-this.zoomSpeed),r=this.zoomLevel*n;if(!(r<=this.minZoomLevel||r>=this.maxZoomLevel)&&this.enableZoom)if(!0===this.panOnZoom&&t){const e=t.clientX,r=t.clientY,i=this.chart.nativeElement.querySelector("svg"),s=i.querySelector("g.chart"),o=i.createSVGPoint();o.x=e,o.y=r;const a=o.matrixTransform(s.getScreenCTM().inverse());this.pan(a.x,a.y,!0),this.zoom(n),this.pan(-a.x,-a.y,!0)}else this.zoom(n)}pan(t,e,n=!1){const r=n?1:this.zoomLevel;this.transformationMatrix=$c(this.transformationMatrix,Gc(t/r,e/r)),this.updateTransform()}panTo(t,e){null==t||isNaN(t)||null==e||isNaN(e)||(this.transformationMatrix=$c(this.transformationMatrix,Gc((-this.panOffsetX-t*this.zoomLevel+this.dims.width/2)/this.zoomLevel,(-this.panOffsetY-e*this.zoomLevel+this.dims.height/2)/this.zoomLevel)),this.updateTransform())}zoom(t){this.transformationMatrix=$c(this.transformationMatrix,function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return qc(e)&&(e=t),{a:t,c:0,e:0,b:0,d:e,f:0}}(t,t)),this.zoomChange.emit(this.zoomLevel),this.updateTransform()}zoomTo(t){this.transformationMatrix.a=isNaN(t)?this.transformationMatrix.a:Number(t),this.transformationMatrix.d=isNaN(t)?this.transformationMatrix.d:Number(t),this.zoomChange.emit(this.zoomLevel),this.updateTransform(),this.update()}onDrag(t){if(!this.draggingEnabled)return;const e=this.draggingNode;this.layout&&"string"!=typeof this.layout&&this.layout.onDrag&&this.layout.onDrag(e,t),e.position.x+=t.movementX/this.zoomLevel,e.position.y+=t.movementY/this.zoomLevel,e.transform=`translate(${e.position.x-e.dimension.width/2}, ${e.position.y-e.dimension.height/2})`;for(const n of this.graph.edges)if((n.target===e.id||n.source===e.id||n.target.id===e.id||n.source.id===e.id)&&this.layout&&"string"!=typeof this.layout){const t=this.layout.updateEdge(this.graph,n),e=t instanceof Et.y?t:(0,xc.of)(t);this.graphSubscription.add(e.subscribe(t=>{this.graph=t,this.redrawEdge(n)}))}this.redrawLines(!1),this.updateMinimap()}redrawEdge(t){const e=this.generateLine(t.points);this.calcDominantBaseline(t),t.oldLine=t.line,t.line=e}updateTransform(){var t;this.transform="matrix("+(t=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return{a:Math.round(t.a*e)/e,b:Math.round(t.b*e)/e,c:Math.round(t.c*e)/e,d:Math.round(t.d*e)/e,e:Math.round(t.e*e)/e,f:Math.round(t.f*e)/e}}(this.transformationMatrix,100)).a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")"}onClick(t){this.select.emit(t)}onActivate(t){this.activeEntries.indexOf(t)>-1||(this.activeEntries=[t,...this.activeEntries],this.activate.emit({value:t,entries:this.activeEntries}))}onDeactivate(t){const e=this.activeEntries.indexOf(t);this.activeEntries.splice(e,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:t,entries:this.activeEntries})}getSeriesDomain(){return this.nodes.map(t=>this.groupResultsBy(t)).reduce((t,e)=>-1!==t.indexOf(e)?t:t.concat([e]),[]).sort()}trackLinkBy(t,e){return e.id}trackNodeBy(t,e){return e.id}setColors(){this.colors=new nc(this.scheme,"ordinal",this.seriesDomain,this.customColors)}getLegendOptions(){return{scaleType:"ordinal",domain:this.seriesDomain,colors:this.colors}}onMouseMove(t){this.isMouseMoveCalled=!0,(this.isPanning||this.isMinimapPanning)&&this.panningEnabled?this.panWithConstraints(this.panningAxis,t):this.isDragging&&this.draggingEnabled&&this.onDrag(t)}onMouseDown(t){this.isMouseMoveCalled=!1}graphClick(t){this.isMouseMoveCalled||this.clickHandler.emit(t)}onTouchStart(t){this._touchLastX=t.changedTouches[0].clientX,this._touchLastY=t.changedTouches[0].clientY,this.isPanning=!0}onTouchMove(t){if(this.isPanning&&this.panningEnabled){const e=t.changedTouches[0].clientX,n=t.changedTouches[0].clientY,r=e-this._touchLastX,i=n-this._touchLastY;this._touchLastX=e,this._touchLastY=n,this.pan(r,i)}}onTouchEnd(t){this.isPanning=!1}onMouseUp(t){this.isDragging=!1,this.isPanning=!1,this.isMinimapPanning=!1,this.layout&&"string"!=typeof this.layout&&this.layout.onDragEnd&&this.layout.onDragEnd(this.draggingNode,t)}onNodeMouseDown(t,e){this.draggingEnabled&&(this.isDragging=!0,this.draggingNode=e,this.layout&&"string"!=typeof this.layout&&this.layout.onDragStart&&this.layout.onDragStart(e,t))}onMinimapDragMouseDown(){this.isMinimapPanning=!0}onMinimapPanTo(t){this.panTo((t.offsetX-(this.dims.width-(this.graphDims.width+this.minimapOffsetX)/this.minimapScaleCoefficient))*this.minimapScaleCoefficient,(t.offsetY+this.minimapOffsetY/this.minimapScaleCoefficient)*this.minimapScaleCoefficient),this.isMinimapPanning=!0}center(){this.panTo(this.graphDims.width/2,this.graphDims.height/2)}zoomToFit(){let t=Math.min(this.dims.height/this.graphDims.height,this.dims.width/this.graphDims.width,1);t<this.minZoomLevel&&(t=this.minZoomLevel),t>this.maxZoomLevel&&(t=this.maxZoomLevel),t!==this.zoomLevel&&(this.zoomLevel=t,this.updateTransform(),this.zoomChange.emit(this.zoomLevel))}panToNodeId(t){const e=this.graph.nodes.find(e=>e.id===t);e&&this.panTo(e.position.x,e.position.y)}panWithConstraints(t,e){let n=e.movementX,r=e.movementY;switch(this.isMinimapPanning&&(n=-this.minimapScaleCoefficient*n*this.zoomLevel,r=-this.minimapScaleCoefficient*r*this.zoomLevel),t){case oh.Horizontal:this.pan(n,0);break;case oh.Vertical:this.pan(0,r);break;default:this.pan(n,r)}}updateMidpointOnEdge(t,e){if(t&&e)if(e.length%2==1)t.midPoint=e[Math.floor(e.length/2)];else{const n=e[e.length/2],r=e[e.length/2-1];t.midPoint={x:(n.x+r.x)/2,y:(n.y+r.y)/2}}}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(o.sBO),o.Y36(sh))},t.\u0275cmp=o.Xpm({type:t,selectors:[["ngx-graph"]],contentQueries:function(t,e,n){if(1&t&&(o.Suo(n,kl,5),o.Suo(n,Il,5),o.Suo(n,Cl,5),o.Suo(n,Al,5),o.Suo(n,Ol,5)),2&t){let t;o.iGM(t=o.CRH())&&(e.linkTemplate=t.first),o.iGM(t=o.CRH())&&(e.nodeTemplate=t.first),o.iGM(t=o.CRH())&&(e.clusterTemplate=t.first),o.iGM(t=o.CRH())&&(e.defsTemplate=t.first),o.iGM(t=o.CRH())&&(e.miniMapNodeTemplate=t.first)}},viewQuery:function(t,e){if(1&t&&(o.Gf(Gu,7,o.SBq),o.Gf(Nl,5),o.Gf(Dl,5)),2&t){let t;o.iGM(t=o.CRH())&&(e.chart=t.first),o.iGM(t=o.CRH())&&(e.nodeElements=t),o.iGM(t=o.CRH())&&(e.linkElements=t)}},hostBindings:function(t,e){1&t&&o.NdJ("mousemove",function(t){return e.onMouseMove(t)},!1,o.evT)("mousedown",function(t){return e.onMouseDown(t)},!1,o.evT)("click",function(t){return e.graphClick(t)},!1,o.evT)("touchmove",function(t){return e.onTouchMove(t)},!1,o.evT)("mouseup",function(t){return e.onMouseUp(t)},!1,o.evT)},inputs:{legend:"legend",nodes:"nodes",clusters:"clusters",links:"links",activeEntries:"activeEntries",draggingEnabled:"draggingEnabled",panningEnabled:"panningEnabled",panningAxis:"panningAxis",enableZoom:"enableZoom",zoomSpeed:"zoomSpeed",minZoomLevel:"minZoomLevel",maxZoomLevel:"maxZoomLevel",autoZoom:"autoZoom",panOnZoom:"panOnZoom",animate:"animate",autoCenter:"autoCenter",enableTrackpadSupport:"enableTrackpadSupport",showMiniMap:"showMiniMap",miniMapMaxWidth:"miniMapMaxWidth",miniMapPosition:"miniMapPosition",groupResultsBy:"groupResultsBy",zoomLevel:"zoomLevel",panOffsetX:"panOffsetX",panOffsetY:"panOffsetY",layout:"layout",curve:"curve",nodeHeight:"nodeHeight",nodeMaxHeight:"nodeMaxHeight",nodeMinHeight:"nodeMinHeight",nodeWidth:"nodeWidth",nodeMinWidth:"nodeMinWidth",nodeMaxWidth:"nodeMaxWidth",update$:"update$",center$:"center$",zoomToFit$:"zoomToFit$",panToNode$:"panToNode$",layoutSettings:"layoutSettings",miniMapMaxHeight:"miniMapMaxHeight"},outputs:{activate:"activate",deactivate:"deactivate",zoomChange:"zoomChange",clickHandler:"clickHandler"},features:[o.qOj,o.TTD],ngContentSelectors:Jl,decls:5,vars:11,consts:[["mouseWheel","",3,"view","showLegend","legendOptions","legendLabelClick","legendLabelActivate","legendLabelDeactivate","mouseWheelUp","mouseWheelDown"],["class","graph chart",3,"touchstart","touchend",4,"ngIf"],["class","minimap",4,"ngIf"],[1,"graph","chart",3,"touchstart","touchend"],[3,"ngTemplateOutlet",4,"ngIf"],["class","text-path",4,"ngFor","ngForOf"],[1,"panning-rect",3,"mousedown"],[1,"clusters"],["class","node-group",3,"old-node","id","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"links"],["class","link-group",3,"id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"nodes"],["class","node-group",3,"old-node","id","click","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngTemplateOutlet"],[1,"text-path"],[1,"node-group",3,"id","click"],["clusterElement",""],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["class","node cluster",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"node","cluster"],["alignment-baseline","central"],[1,"link-group",3,"id"],["linkElement",""],["class","edge",4,"ngIf"],[1,"edge"],[1,"node-group",3,"id","click","mousedown"],["nodeElement",""],["r","10",4,"ngIf"],["r","10"],[1,"minimap"],[1,"minimap-background",3,"mousedown"],[1,"minimap-nodes"],["class","node-group",3,"old-node","id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"minimap-drag",3,"mousedown"],[1,"node-group",3,"id"]],template:function(t,e){1&t&&(o.F$t(),o.TgZ(0,"ngx-charts-chart",0),o.NdJ("legendLabelClick",function(t){return e.onClick(t)})("legendLabelActivate",function(t){return e.onActivate(t)})("legendLabelDeactivate",function(t){return e.onDeactivate(t)})("mouseWheelUp",function(t){return e.onZoom(t,"in")})("mouseWheelDown",function(t){return e.onZoom(t,"out")}),o.YNc(1,Gl,12,12,"g",1),o.O4$(),o.TgZ(2,"clipPath"),o._UZ(3,"rect"),o.qZA(),o.YNc(4,Yl,6,15,"g",2),o.qZA()),2&t&&(o.Q6J("view",o.WLB(8,Ql,e.width,e.height))("showLegend",e.legend)("legendOptions",e.legendOptions),o.xp6(1),o.Q6J("ngIf",e.initialized&&e.graph),o.xp6(1),o.uIk("id",e.minimapClipPathId),o.xp6(1),o.uIk("width",e.graphDims.width/e.minimapScaleCoefficient)("height",e.graphDims.height/e.minimapScaleCoefficient),o.xp6(1),o.Q6J("ngIf",e.showMiniMap))},directives:function(){return[Gu,lh,R,D,F]},styles:[".minimap .minimap-background{fill:rgba(0,0,0,.1)}.minimap .minimap-drag{cursor:pointer;fill:rgba(0,0,0,.2);stroke:#fff;stroke-dasharray:2px;stroke-dashoffset:2px;stroke-width:1px}.minimap .minimap-drag.panning{fill:rgba(0,0,0,.3)}.minimap .minimap-nodes{opacity:.5;pointer-events:none}.graph{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none}.graph .edge{fill:none;stroke:#666}.graph .edge .edge-label{fill:#251e1e;font-size:12px;stroke:none}.graph .panning-rect{cursor:move;fill:transparent}.graph .node-group.old-node{transition:transform .5s ease-in-out}.graph .node-group .node:focus{outline:none}.graph .cluster rect{opacity:.2}"],encapsulation:2,changeDetection:0}),(0,ke.gn)([(500,function(t,e,n){return{configurable:!0,enumerable:n.enumerable,get:function(){return Object.defineProperty(this,e,{configurable:!0,enumerable:n.enumerable,value:uh(n.value,500,undefined)}),this[e]}}}),(0,ke.w6)("design:type",Function),(0,ke.w6)("design:paramtypes",[]),(0,ke.w6)("design:returntype",void 0)],t.prototype,"updateMinimap",null),t})(),lh=(()=>{class t{constructor(){this.mouseWheelUp=new o.vpe,this.mouseWheelDown=new o.vpe}onMouseWheelChrome(t){this.mouseWheelFunc(t)}onMouseWheelFirefox(t){this.mouseWheelFunc(t)}onWheel(t){this.mouseWheelFunc(t)}onMouseWheelIE(t){this.mouseWheelFunc(t)}mouseWheelFunc(t){window.event&&(t=window.event);const e=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail||t.deltaY||t.deltaX)),n=t.wheelDelta?e<0:e>0;(t.wheelDelta?e>0:e<0)?this.mouseWheelUp.emit(t):n&&this.mouseWheelDown.emit(t),t.returnValue=!1,t.preventDefault&&t.preventDefault()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=o.lG2({type:t,selectors:[["","mouseWheel",""]],hostBindings:function(t,e){1&t&&o.NdJ("mousewheel",function(t){return e.onMouseWheelChrome(t)})("DOMMouseScroll",function(t){return e.onMouseWheelFirefox(t)})("wheel",function(t){return e.onWheel(t)})("onmousewheel",function(t){return e.onMouseWheelIE(t)})},outputs:{mouseWheelUp:"mouseWheelUp",mouseWheelDown:"mouseWheelDown"}}),t})(),hh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({providers:[sh],imports:[[tc]]}),t})(),dh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[fc],hh]}),t})(),fh=(()=>{class t{constructor(t,e){this.document=t,this.platformId=e,this.documentIsAccessible=function(t){return"browser"===t}(this.platformId)}static getCookieRegExp(t){const e=t.replace(/([\[\]\{\}\(\)\|\=\;\+\?\,\.\*\^\$])/gi,"\\$1");return new RegExp("(?:^"+e+"|;\\s*"+e+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(t){try{return decodeURIComponent(t)}catch{return t}}check(e){return!!this.documentIsAccessible&&(e=encodeURIComponent(e),t.getCookieRegExp(e).test(this.document.cookie))}get(e){if(this.documentIsAccessible&&this.check(e)){e=encodeURIComponent(e);const n=t.getCookieRegExp(e).exec(this.document.cookie);return n[1]?t.safeDecodeURIComponent(n[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const e={},n=this.document;return n.cookie&&""!==n.cookie&&n.cookie.split(";").forEach(n=>{const[r,i]=n.split("=");e[t.safeDecodeURIComponent(r.replace(/^ /,""))]=t.safeDecodeURIComponent(i)}),e}set(t,e,n,r,i,s,o){if(!this.documentIsAccessible)return;if("number"==typeof n||n instanceof Date||r||i||s||o)return void this.set(t,e,{expires:n,path:r,domain:i,secure:s,sameSite:o||"Lax"});let a=encodeURIComponent(t)+"="+encodeURIComponent(e)+";";const u=n||{};u.expires&&(a+="number"==typeof u.expires?"expires="+new Date((new Date).getTime()+1e3*u.expires*60*60*24).toUTCString()+";":"expires="+u.expires.toUTCString()+";"),u.path&&(a+="path="+u.path+";"),u.domain&&(a+="domain="+u.domain+";"),!1===u.secure&&"None"===u.sameSite&&(u.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${t} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),u.secure&&(a+="secure;"),u.sameSite||(u.sameSite="Lax"),a+="sameSite="+u.sameSite+";",this.document.cookie=a}delete(t,e,n,r,i="Lax"){if(!this.documentIsAccessible)return;const s=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(t,"",{expires:s,path:e,domain:n,secure:r,sameSite:i})}deleteAll(t,e,n,r="Lax"){if(!this.documentIsAccessible)return;const i=this.getAll();for(const s in i)i.hasOwnProperty(s)&&this.delete(s,t,e,n,r)}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(c),o.LFG(o.Lbi))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ph(){return"undefined"!=typeof window&&void 0!==window.document}function gh(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function mh(t){switch(t.length){case 0:return new Re;case 1:return t[0];default:return new Me(t)}}function yh(t,e,n,r,i={},s={}){const o=[],a=[];let u=-1,c=null;if(r.forEach(t=>{const n=t.offset,r=n==u,l=r&&c||{};Object.keys(t).forEach(n=>{let r=n,a=t[n];if("offset"!==n)switch(r=e.normalizePropertyName(r,o),a){case"!":a=i[n];break;case Ce:a=s[n];break;default:a=e.normalizeStyleValue(n,r,a,o)}l[r]=a}),r||a.push(l),c=l,u=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function vh(t,e,n,r){switch(e){case"start":t.onStart(()=>r(n&&_h(n,"start",t)));break;case"done":t.onDone(()=>r(n&&_h(n,"done",t)));break;case"destroy":t.onDestroy(()=>r(n&&_h(n,"destroy",t)))}}function _h(t,e,n){const r=n.totalTime,i=wh(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,!!n.disabled),s=t._data;return null!=s&&(i._data=s),i}function wh(t,e,n,r,i="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function bh(t,e,n){let r;return t instanceof Map?(r=t.get(e),r||t.set(e,r=n)):(r=t[e],r||(r=t[e]=n)),r}function xh(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let Eh=(t,e)=>!1,Th=(t,e)=>!1,Sh=(t,e,n)=>[];const kh=gh();(kh||"undefined"!=typeof Element)&&(Eh=ph()?(t,e)=>{for(;e&&e!==document.documentElement;){if(e===t)return!0;e=e.parentNode||e.host}return!1}:(t,e)=>t.contains(e),Th=(()=>{if(kh||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):Th}})(),Sh=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});let Ih=null,Ch=!1;function Ah(t){Ih||(Ih=("undefined"!=typeof document?document.body:null)||{},Ch=!!Ih.style&&"WebkitAppearance"in Ih.style);let e=!0;return Ih.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in Ih.style,!e&&Ch)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in Ih.style),e}const Oh=Th,Nh=Eh,Dh=Sh;function Ph(t){const e={};return Object.keys(t).forEach(n=>{const r=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=t[n]}),e}let Rh=(()=>{class t{validateStyleProperty(t){return Ah(t)}matchesElement(t,e){return Oh(t,e)}containsElement(t,e){return Nh(t,e)}query(t,e,n){return Dh(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,r,i,s=[],o){return new Re(n,r)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})();class Mh{}Mh.NOOP=new Rh;const Lh="ng-enter",Fh="ng-leave",jh="ng-trigger",Uh=".ng-trigger",Vh="ng-animating",qh=".ng-animating";function Bh(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:zh(parseFloat(e[1]),e[2])}function zh(t,e){switch(e){case"s":return 1e3*t;default:return t}}function $h(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let r,i=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};r=zh(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(i=zh(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else r=t;if(!n){let n=!1,s=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:r,delay:i,easing:s}}(t,e,n)}function Gh(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function Zh(t,e,n={}){if(e)for(let r in t)n[r]=t[r];else Gh(t,n);return n}function Hh(t,e,n){return n?e+":"+n+";":""}function Wh(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=Hh(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Hh(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function Kh(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=rd(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),gh()&&Wh(t))}function Yh(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=rd(e);t.style[n]=""}),gh()&&Wh(t))}function Qh(t){return Array.isArray(t)?1==t.length?t[0]:Oe(t):t}const Jh=new RegExp("{{\\s*(.+?)\\s*}}","g");function Xh(t){let e=[];if("string"==typeof t){let n;for(;n=Jh.exec(t);)e.push(n[1]);Jh.lastIndex=0}return e}function td(t,e,n){const r=t.toString(),i=r.replace(Jh,(t,r)=>{let i=e[r];return e.hasOwnProperty(r)||(n.push(`Please provide a value for the animation param ${r}`),i=""),i.toString()});return i==r?t:i}function ed(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const nd=/-+([a-z0-9])/g;function rd(t){return t.replace(nd,(...t)=>t[1].toUpperCase())}function id(t,e){return 0===t||0===e}function sd(t,e,n){const r=Object.keys(n);if(r.length&&e.length){let s=e[0],o=[];if(r.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var i=1;i<e.length;i++){let n=e[i];o.forEach(function(e){n[e]=ad(t,e)})}}return e}function od(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function ad(t,e){return window.getComputedStyle(t)[e]}const ud="*";function cd(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}const r=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const i=r[1],s=r[2],o=r[3];e.push(dd(i,o)),"<"!=s[0]||i==ud&&o==ud||e.push(dd(o,i))}(t,n,e)):n.push(t),n}const ld=new Set(["true","1"]),hd=new Set(["false","0"]);function dd(t,e){const n=ld.has(t)||hd.has(t),r=ld.has(e)||hd.has(e);return(i,s)=>{let o=t==ud||t==i,a=e==ud||e==s;return!o&&n&&"boolean"==typeof i&&(o=i?ld.has(t):hd.has(t)),!a&&r&&"boolean"==typeof s&&(a=s?ld.has(e):hd.has(e)),o&&a}}const fd=new RegExp("s*:selfs*,?","g");function pd(t,e,n){return new gd(t).build(e,n)}class gd{constructor(t){this._driver=t}build(t,e){const n=new md(e);return this._resetContextStyleTimingState(n),od(this,Qh(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const i=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,r=n.name;r.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,i.push(this.visitState(n,e))}),n.name=r}else if(1==t.type){const i=this.visitTransition(t,e);n+=i.queryCount,r+=i.depCount,s.push(i)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:i,transitions:s,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const i=new Set,s=r||{};if(n.styles.forEach(t=>{if(yd(t)){const e=t;Object.keys(e).forEach(t=>{Xh(e[t]).forEach(t=>{s.hasOwnProperty(t)||i.add(t)})})}}),i.size){const n=ed(i.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=od(this,Qh(t.animation),e);return{type:1,matchers:cd(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:vd(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>od(this,t,e)),options:vd(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const i=t.steps.map(t=>{e.currentTime=n;const i=od(this,t,e);return r=Math.max(r,e.currentTime),i});return e.currentTime=r,{type:3,steps:i,options:vd(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return _d($h(t,e).duration,0,"");const r=t;if(r.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=_d(0,0,"");return t.dynamic=!0,t.strValue=r,t}return n=n||$h(r,e),_d(n.duration,n.delay,n.easing)}(t.timings,e.errors);let r;e.currentAnimateTimings=n;let i=t.styles?t.styles:Ne({});if(5==i.type)r=this.visitKeyframes(i,e);else{let i=t.styles,s=!1;if(!i){s=!0;const t={};n.easing&&(t.easing=n.easing),i=Ne(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(i,e);o.isEmptyStep=s,r=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==Ce?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let r=!1,i=null;return n.forEach(t=>{if(yd(t)){const e=t,n=e.easing;if(n&&(i=n,delete e.easing),!r)for(let t in e)if(e[t].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:i,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,i=e.currentTime;n&&i>0&&(i-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let a=!0;o&&(i!=r&&i>=o.startTime&&r<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${i}ms" and "${r}ms"`),a=!1),i=o.startTime),a&&(s[n]={startTime:i,endTime:r}),e.options&&function(t,e,n){const r=e.params||{},i=Xh(t);i.length&&i.forEach(t=>{r.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let r=0;const i=[];let s=!1,o=!1,a=0;const u=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let u=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(yd(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(yd(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=u&&(r++,c=n.offset=u),o=o||c<0||c>1,s=s||c<a,a=c,i.push(c),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let l=0;r>0&&r<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==r&&(l=1/(c-1));const h=c-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return u.forEach((t,r)=>{const s=l>0?r==h?1:l*r:i[r],o=s*p;e.currentTime=d+f.delay+o,f.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:od(this,Qh(t.animation),e),options:vd(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:vd(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:vd(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[i,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(fd,"")),[t=t.replace(/@\*/g,Uh).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,qh),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+i:i,bh(e.collectedStyles,e.currentQuerySelector,{});const o=od(this,Qh(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:i,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:vd(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:$h(t.timings,e.errors,!0);return{type:12,animation:od(this,Qh(t.animation),e),timings:n,options:null}}}class md{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function yd(t){return!Array.isArray(t)&&"object"==typeof t}function vd(t){var e;return t?(t=Gh(t)).params&&(t.params=(e=t.params)?Gh(e):null):t={},t}function _d(t,e,n){return{duration:t,delay:e,easing:n}}function wd(t,e,n,r,i,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class bd{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const xd=new RegExp(":enter","g"),Ed=new RegExp(":leave","g");function Td(t,e,n,r,i,s={},o={},a,u,c=[]){return(new Sd).buildKeyframes(t,e,n,r,i,s,o,a,u,c)}class Sd{buildKeyframes(t,e,n,r,i,s,o,a,u,c=[]){u=u||new bd;const l=new Id(t,e,u,r,i,c,[]);l.options=a,l.currentTimeline.setStyles([s],null,l.errors,a),od(this,n,l);const h=l.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,l.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[wd(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let r=e.currentTimeline.currentTime;const i=null!=n.duration?Bh(n.duration):null,s=null!=n.delay?Bh(n.delay):null;return 0!==i&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,i,s);r=Math.max(r,n.duration+n.delay)}),r}visitReference(t,e){e.updateOptions(t.options,!0),od(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const i=t.options;if(i&&(i.params||i.delay)&&(r=e.createSubContext(i),r.transformIntoNewTimeline(),null!=i.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=kd);const t=Bh(i.delay);r.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>od(this,t,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const i=t.options&&t.options.delay?Bh(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);i&&o.delayNextStep(i),od(this,s,o),r=Math.max(r,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return $h(e.params?td(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,i=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*i),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(r+i),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},i=r.delay?Bh(r.delay):0;i&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=kd);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,r)=>{e.currentQueryIndex=r;const o=e.createSubContext(t.options,n);i&&o.delayNextStep(i),n===e.element&&(a=o.currentTimeline),od(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,i=t.timings,s=Math.abs(i.duration),o=s*(e.currentQueryTotal-1);let a=s*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const u=e.currentTimeline;a&&u.delayNextStep(a);const c=u.currentTime;od(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-c+(r.startTime-n.currentTimeline.startTime)}}const kd={};class Id{constructor(t,e,n,r,i,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=kd,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new Cd(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Bh(n.duration)),null!=n.delay&&(r.delay=Bh(n.delay));const i=n.params;if(i){let t=r.params;t||(t=this.options.params={}),Object.keys(i).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=td(i[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,i=new Id(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,i.parentContext=this,this.subContextCount++,i}transformIntoNewTimeline(t){return this.previousNode=kd,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new Ad(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,i,s){let o=[];if(r&&o.push(this.element),t.length>0){t=(t=t.replace(xd,"."+this._enterClassName)).replace(Ed,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return i||0!=o.length||s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class Cd{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Cd(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Ce,this._currentKeyframe[t]=Ce}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const i=r&&r.params||{},s=function(t,e){const n={};let r;return t.forEach(t=>{"*"===t?(r=r||Object.keys(e),r.forEach(t=>{n[t]=Ce})):Zh(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(t=>{const e=td(s[t],i,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:Ce),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((i,s)=>{const o=Zh(i,!0);Object.keys(o).forEach(n=>{const r=o[n];"!"==r?t.add(n):r==Ce&&e.add(n)}),n||(o.offset=s/this.duration),r.push(o)});const i=t.size?ed(t.values()):[],s=e.size?ed(e.values()):[];if(n){const t=r[0],e=Gh(t);t.offset=0,e.offset=1,r=[t,e]}return wd(this.element,r,i,s,this.duration,this.startTime,this.easing,!1)}}class Ad extends Cd{constructor(t,e,n,r,i,s,o=!1){super(t,e,s.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=i,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const i=[],s=n+e,o=e/s,a=Zh(t[0],!1);a.offset=0,i.push(a);const u=Zh(t[0],!1);u.offset=Od(o),i.push(u);const c=t.length-1;for(let r=1;r<=c;r++){let o=Zh(t[r],!1);o.offset=Od((e+o.offset*n)/s),i.push(o)}n=s,e=0,r="",t=i}return wd(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function Od(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class Nd{}class Dd extends Nd{normalizePropertyName(t,e){return rd(t)}normalizeStyleValue(t,e,n,r){let i="";const s=n.toString().trim();if(Pd[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&r.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+i}}const Pd=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Rd(t,e,n,r,i,s,o,a,u,c,l,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:c,postStyleProps:l,totalTime:h,errors:d}}const Md={};class Ld{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function(t,e,n,r,i){return t.some(t=>t(e,n,r,i))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],i=this._stateStyles[t],s=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):s}build(t,e,n,r,i,s,o,a,u,c){const l=[],h=this.ast.options&&this.ast.options.params||Md,d=this.buildStyles(n,o&&o.params||Md,l),f=a&&a.params||Md,p=this.buildStyles(r,f,l),g=new Set,m=new Map,y=new Map,v="void"===r,_={params:Object.assign(Object.assign({},h),f)},w=c?[]:Td(t,e,this.ast.animation,i,s,d,p,_,u,l);let b=0;if(w.forEach(t=>{b=Math.max(t.duration+t.delay,b)}),l.length)return Rd(e,this._triggerName,n,r,v,d,p,[],[],m,y,b,l);w.forEach(t=>{const n=t.element,r=bh(m,n,{});t.preStyleProps.forEach(t=>r[t]=!0);const i=bh(y,n,{});t.postStyleProps.forEach(t=>i[t]=!0),n!==e&&g.add(n)});const x=ed(g.values());return Rd(e,this._triggerName,n,r,v,d,p,w,x,m,y,b)}}class Fd{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n={},r=Gh(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(r[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const i=t;Object.keys(i).forEach(t=>{let s=i[t];s.length>1&&(s=td(s,r,e));const o=this.normalizer.normalizePropertyName(t,e);s=this.normalizer.normalizeStyleValue(t,o,s,e),n[o]=s})}}),n}}class jd{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new Fd(t.style,t.options&&t.options.params||{},n)}),Ud(this.states,"true","1"),Ud(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new Ld(t,e,this.states))}),this.fallbackTransition=new Ld(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(i=>i.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Ud(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const Vd=new bd;class qd{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],r=pd(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=r}_buildPlayer(t,e,n){const r=t.element,i=yh(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],i=this._animations[t];let s;const o=new Map;if(i?(s=Td(this._driver,e,i,Lh,Fh,{},{},n,Vd,r),s.forEach(t=>{const e=bh(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(r.push("The requested animation doesn't exist or has already been destroyed"),s=[]),r.length)throw new Error(`Unable to create the animation due to the following errors: ${r.join("\n")}`);o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,Ce)})});const a=mh(s.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,r){const i=wh(e,"","","");return vh(this._getPlayer(t),n,i,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Bd="ng-animate-queued",zd="ng-animate-disabled",$d=".ng-animate-disabled",Gd=[],Zd={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Hd={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Wd{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function(t){return null!=t?t:null}(n?t.value:t),n){const e=Gh(t);delete e.value,this.options=e}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const Kd="void",Yd=new Wd(Kd);class Qd{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,sf(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(i=n)&&"done"!=i)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var i;const s=bh(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=bh(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(sf(t,jh),sf(t,"ng-trigger-"+e),a[e]=Yd),()=>{this._engine.afterFlush(()=>{const t=s.indexOf(o);t>=0&&s.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,r=!0){const i=this._getTrigger(e),s=new Xd(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(sf(t,jh),sf(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const u=new Wd(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&u.absorbOptions(a.options),o[e]=u,a||(a=Yd),u.value!==Kd&&a.value===u.value){if(!function(t,e){const n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let i=0;i<n.length;i++){const r=n[i];if(!e.hasOwnProperty(r)||t[r]!==e[r])return!1}return!0}(a.params,u.params)){const e=[],n=i.matchStyles(a.value,a.params,e),r=i.matchStyles(u.value,u.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{Yh(t,n),Kh(t,r)})}return}const c=bh(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let l=i.matchTransition(a.value,u.value,t,u.params),h=!1;if(!l){if(!r)return;l=i.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:l,fromState:a,toState:u,player:s,isFallbackTransition:h}),h||(sf(t,Bd),s.onStart(()=>{of(t,Bd)})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),c.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,Uh,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,r){const i=this._engine.statesByElement.get(t);if(i){const s=[];if(Object.keys(i).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,Kd,r);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&mh(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(e=>{const i=e.name;if(r.has(i))return;r.add(i);const s=this._triggers[i].fallbackTransition,o=n[i]||Yd,a=new Wd(Kd),u=new Xd(this.id,i,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:i,transition:s,fromState:o,toState:a,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)r=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const r=t.__ng_removed;r&&r!==Zd||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){sf(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const i=n.element,s=this._elementListeners.get(i);s&&s.forEach(e=>{if(e.name==n.triggerName){const r=wh(i,n.triggerName,n.fromState.value,n.toState.value);r._data=t,vh(n.player,e.phase,r,e.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class Jd{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new Qd(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let r=!1;for(let i=n;i>=0;i--)if(this.driver.containsElement(this._namespaceList[i].hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=n[t[r]].namespaceId;if(i){const t=this._fetchNamespace(i);t&&e.add(t)}}}return e}trigger(t,e,n,r){if(tf(e)){const i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!tf(e))return;const i=e.__ng_removed;if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const r=this._fetchNamespace(t);r&&r.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),sf(t,zd)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),of(t,zd))}removeNode(t,e,n,r){if(tf(e)){const i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,r,i){return tf(e)?this._fetchNamespace(t).listen(e,n,r,i):()=>{}}_buildInstruction(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)}destroyInnerAnimations(t){let e=this.driver.query(t,Uh,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,qh,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return mh(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=Zd,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,$d)&&this.markElementAsDisabled(t,!1),this.driver.query(t,$d,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)sf(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?mh(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new bd,r=[],i=new Map,s=[],o=new Map,a=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const l=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=rf(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n=Lh+p++;f.set(e,n),t.forEach(t=>sf(t,n))});const g=[],m=new Set,y=new Set;for(let O=0;O<this.collectedLeaveElements.length;O++){const t=this.collectedLeaveElements[O],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):y.add(t))}const v=new Map,_=rf(h,Array.from(m));_.forEach((t,e)=>{const n=Fh+p++;v.set(e,n),t.forEach(t=>sf(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>of(t,n))}),_.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>of(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const w=[],b=[];for(let O=this._namespaceList.length-1;O>=0;O--)this._namespaceList[O].drainQueuedTransitions(e).forEach(t=>{const e=t.player,i=t.element;if(w.push(e),this.collectedEnterElements.length){const t=i.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!l||!this.driver.containsElement(l,i),h=v.get(i),d=f.get(i),p=this._buildInstruction(t,n,d,h,c);if(p.errors&&p.errors.length)b.push(p);else{if(c)return e.onStart(()=>Yh(i,p.fromStyles)),e.onDestroy(()=>Kh(i,p.toStyles)),void r.push(e);if(t.isFallbackTransition)return e.onStart(()=>Yh(i,p.fromStyles)),e.onDestroy(()=>Kh(i,p.toStyles)),void r.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(i,p.timelines),s.push({instruction:p,player:e,element:i}),p.queriedElements.forEach(t=>bh(o,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let r=u.get(e);r||u.set(e,r=new Set),n.forEach(t=>r.add(t))})}});if(b.length){const t=[];b.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),w.forEach(t=>t.destroy()),this.reportError(t)}const x=new Map,E=new Map;s.forEach(t=>{const e=t.element;n.has(e)&&(E.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,x))}),r.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{bh(x,e,[]).push(t),t.destroy()})});const T=g.filter(t=>cf(t,a,u)),S=new Map;nf(S,this.driver,y,u,Ce).forEach(t=>{cf(t,a,u)&&T.push(t)});const k=new Map;d.forEach((t,e)=>{nf(k,this.driver,new Set(t),a,"!")}),T.forEach(t=>{const e=S.get(t),n=k.get(t);S.set(t,Object.assign(Object.assign({},e),n))});const I=[],C=[],A={};s.forEach(t=>{const{element:e,player:s,instruction:o}=t;if(n.has(e)){if(c.has(e))return s.onDestroy(()=>Kh(e,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void r.push(s);let t=A;if(E.size>1){let n=e;const r=[];for(;n=n.parentNode;){const e=E.get(n);if(e){t=e;break}r.push(n)}r.forEach(e=>E.set(e,t))}const n=this._buildAnimation(s.namespaceId,o,x,i,k,S);if(s.setRealPlayer(n),t===A)I.push(s);else{const e=this.playersByElement.get(t);e&&e.length&&(s.parentPlayer=mh(e)),r.push(s)}}else Yh(e,o.fromStyles),s.onDestroy(()=>Kh(e,o.toStyles)),C.push(s),c.has(e)&&r.push(s)}),C.forEach(t=>{const e=i.get(t.element);if(e&&e.length){const n=mh(e);t.setRealPlayer(n)}}),r.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let O=0;O<g.length;O++){const t=g[O],e=t.__ng_removed;if(of(t,Fh),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let r=this.driver.query(t,qh,!0);for(let t=0;t<r.length;t++){let e=o.get(r[t]);e&&e.length&&n.push(...e)}}const r=n.filter(t=>!t.destroyed);r.length?af(this,t,r):this.processLeaveNode(t)}return g.length=0,I.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),I}elementContainsData(t,e){let n=!1;const r=e.__ng_removed;return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,i){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!i||i==Kd;e.forEach(e=>{e.queued||(t||e.triggerName==r)&&s.push(e)})}}return(n||r)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||r&&r!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const r=e.element,i=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==r,u=bh(n,t,[]);this._getPreviousPlayers(t,a,i,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),u.push(t)})}Yh(r,e.fromStyles)}_buildAnimation(t,e,n,r,i,s){const o=e.triggerName,a=e.element,u=[],c=new Set,l=new Set,h=e.timelines.map(e=>{const h=e.element;c.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new Re(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return uf(t,e),e}((n.get(h)||Gd).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),g=i.get(h),m=s.get(h),y=yh(0,this._normalizer,0,e.keyframes,g,m),v=this._buildPlayer(e,y,p);if(e.subTimeline&&r&&l.add(h),f){const e=new Xd(t,o,h);e.setRealPlayer(v),u.push(e)}return v});u.forEach(t=>{bh(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let r;if(t instanceof Map){if(r=t.get(e),r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&t.delete(e)}}else if(r=t[e],r){if(r.length){const t=r.indexOf(n);r.splice(t,1)}0==r.length&&delete t[e]}return r}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>sf(t,Vh));const d=mh(h);return d.onDestroy(()=>{c.forEach(t=>of(t,Vh)),Kh(a,e.toStyles)}),l.forEach(t=>{bh(r,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Re(t.duration,t.delay)}}class Xd{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Re,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>vh(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){bh(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function tf(t){return t&&1===t.nodeType}function ef(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function nf(t,e,n,r,i){const s=[];n.forEach(t=>s.push(ef(t)));const o=[];r.forEach((n,r)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(r,t,i);n&&0!=n.length||(r.__ng_removed=Hd,o.push(r))}),t.set(r,s)});let a=0;return n.forEach(t=>ef(t,s[a++])),o}function rf(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const r=new Set(e),i=new Map;function s(t){if(!t)return 1;let e=i.get(t);if(e)return e;const o=t.parentNode;return e=n.has(o)?o:r.has(o)?1:s(o),i.set(t,e),e}return e.forEach(t=>{const e=s(t);1!==e&&n.get(e).push(t)}),n}function sf(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function of(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function af(t,e,n){mh(n).onDone(()=>t.processLeaveNode(e))}function uf(t,e){for(let n=0;n<t.length;n++){const r=t[n];r instanceof Me?uf(r.players,e):e.push(r)}}function cf(t,e,n){const r=n.get(t);if(!r)return!1;let i=e.get(t);return i?r.forEach(t=>i.add(t)):e.set(t,r),n.delete(t),!0}class lf{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new Jd(t,e,n),this._timelineEngine=new qd(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,r,i){const s=t+"-"+r;let o=this._triggerCache[s];if(!o){const t=[],e=pd(this._driver,i,t);if(t.length)throw new Error(`The animation trigger "${r}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e,n){return new jd(t,e,n)}(r,e,this._normalizer),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,r,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[t,i]=xh(n);this._timelineEngine.command(t,e,i,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,i){if("@"==n.charAt(0)){const[t,r]=xh(n);return this._timelineEngine.listen(t,e,r,i)}return this._transitionEngine.listen(t,e,n,r,i)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function hf(t,e){let n=null,r=null;return Array.isArray(e)&&e.length?(n=ff(e[0]),e.length>1&&(r=ff(e[e.length-1]))):e&&(n=ff(e)),n||r?new df(t,n,r):null}class df{constructor(t,e,n){this._element=t,this._startStyles=e,this._endStyles=n,this._state=0;let r=df.initialStylesByElement.get(t);r||df.initialStylesByElement.set(t,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Kh(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Kh(this._element,this._initialStyles),this._endStyles&&(Kh(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(df.initialStylesByElement.delete(this._element),this._startStyles&&(Yh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Yh(this._element,this._endStyles),this._endStyles=null),Kh(this._element,this._initialStyles),this._state=3)}}function ff(t){let e=null;const n=Object.keys(t);for(let r=0;r<n.length;r++){const i=n[r];pf(i)&&(e=e||{},e[i]=t[i])}return e}function pf(t){return"display"===t||"position"===t}df.initialStylesByElement=new WeakMap;const gf="animation",mf="animationend";class yf{constructor(t,e,n,r,i,s,o){this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=Ef(t,"").trim();n.length&&(function(t,e){let n=0;for(let r=0;r<t.length;r++)","===t.charAt(r)&&n++}(n),e=`${n}, ${e}`),xf(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),bf(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){vf(this._element,this._name,"paused")}resume(){vf(this._element,this._name,"running")}setPosition(t){const e=_f(this._element,this._name);this._position=t*this._duration,xf(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),bf(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=Ef(t,"").split(","),r=wf(n,e);r>=0&&(n.splice(r,1),xf(t,"",n.join(",")))}(this._element,this._name))}}function vf(t,e,n){xf(t,"PlayState",n,_f(t,e))}function _f(t,e){const n=Ef(t,"");return n.indexOf(",")>0?wf(n.split(","),e):wf([n],e)}function wf(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function bf(t,e,n){n?t.removeEventListener(mf,e):t.addEventListener(mf,e)}function xf(t,e,n,r){const i=gf+e;if(null!=r){const e=t.style[i];if(e.length){const t=e.split(",");t[r]=n,n=t.join(",")}}t.style[i]=n}function Ef(t,e){return t.style[gf+e]||""}class Tf{constructor(t,e,n,r,i,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+i,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new yf(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:ad(this.element,n))})}this.currentSnapshot=t}}class Sf extends Re{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=Ph(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class kf{constructor(){this._count=0}validateStyleProperty(t){return Ah(t)}matchesElement(t,e){return Oh(t,e)}containsElement(t,e){return Nh(t,e)}query(t,e,n){return Dh(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>Ph(t));let r=`@keyframes ${e} {\n`,i="";n.forEach(t=>{i=" ";const e=parseFloat(t.offset);r+=`${i}${100*e}% {\n`,i+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(r+=`${i}animation-timing-function: ${n};\n`));default:return void(r+=`${i}${e}: ${n};\n`)}}),r+=`${i}}\n`}),r+="}\n";const s=document.createElement("style");return s.textContent=r,s}animate(t,e,n,r,i,s=[],o){const a=s.filter(t=>t instanceof Tf),u={};id(n,r)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=sd(t,e,u));if(0==n)return new Sf(t,c);const l="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,l,e);(function(t){var e;const n=null===(e=t.getRootNode)||void 0===e?void 0:e.call(t);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(h);const d=hf(t,e),f=new Tf(t,e,l,n,r,i,c,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}}class If{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:ad(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class Cf{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Af().toString()),this._cssKeyframesDriver=new kf}validateStyleProperty(t){return Ah(t)}matchesElement(t,e){return Oh(t,e)}containsElement(t,e){return Nh(t,e)}query(t,e,n){return Dh(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,r,i,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,s);const a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);const u={},c=s.filter(t=>t instanceof If);id(n,r)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>u[t]=e[t])});const l=hf(t,e=sd(t,e=e.map(t=>Zh(t,!1)),u));return new If(t,e,a,l)}}function Af(){return ph()&&Element.prototype.animate||{}}let Of=(()=>{class t extends Ie{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:o.ifc.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?Oe(t):t;return Pf(this._renderer,null,e,"register",[n]),new Nf(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(o.FYo),o.LFG(c))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})();class Nf extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Df(this._id,t,e||{},this._renderer)}}class Df{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return Pf(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function Pf(t,e,n,r,i){return t.setProperty(e,`@@${n}:${r}`,i)}const Rf="@",Mf="@.disabled";let Lf=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new Ff("",n,this.engine),this._rendererCache.set(n,t)),t}const r=e.id,i=e.id+"-"+this._currentId;this._currentId++,this.engine.register(i,t);const s=e=>{Array.isArray(e)?e.forEach(s):this.engine.registerTrigger(r,i,t,e.name,e)};return e.data.animation.forEach(s),new jf(this,i,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(o.FYo),o.LFG(lf),o.LFG(o.R0b))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})();class Ff{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==Rf&&e==Mf?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class jf extends Ff{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==Rf?"."==e.charAt(1)&&e==Mf?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==Rf){const r=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let i=e.substr(1),s="";return i.charAt(0)!=Rf&&([i,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(i)),this.engine.listen(this.namespaceId,r,i,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let Uf=(()=>{class t extends lf{constructor(t,e,n){super(t.body,e,n)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(c),o.LFG(Mh),o.LFG(Nd))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})();const Vf=new o.OlP("AnimationModuleType"),qf=[{provide:Ie,useClass:Of},{provide:Nd,useFactory:function(){return new Dd}},{provide:lf,useClass:Uf},{provide:o.FYo,useFactory:function(t,e,n){return new Lf(t,e,n)},deps:[ot,lf,o.R0b]}],Bf=[{provide:Mh,useFactory:function(){return"function"==typeof Af()?new Cf:new kf}},{provide:Vf,useValue:"BrowserAnimations"},...qf],zf=[{provide:Mh,useClass:Rh},{provide:Vf,useValue:"NoopAnimations"},...qf];let $f=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?zf:Bf}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({providers:Bf,imports:[bt]}),t})();var Gf=n(8939),Zf=n(4459),Hf=n(3282);function Wf(...t){return(0,Hf.J)(1)((0,xc.of)(...t))}var Kf=n(4869);function Yf(...t){const e=t[t.length-1];return(0,Kf.K)(e)?(t.pop(),n=>Wf(t,n,e)):e=>Wf(t,e)}function Qf(){return t=>t.lift(new Jf)}class Jf{call(t,e){return e.subscribe(new Xf(t))}}class Xf extends $e.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function tp(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new ep(t,e,n))}}class ep{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new np(t,this.accumulator,this.seed,this.hasSeed))}}class np extends $e.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}class rp{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new ip(t,this.compare,this.keySelector))}}class ip extends $e.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}n(6094);var sp,op=n(156),ap=n(6304),up=n(279),cp=n(8604),lp=n(9306),hp=n(3854),dp="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},fp={},pp=pp||{},gp=dp||self;function mp(){}function yp(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function vp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var _p="closure_uid_"+(1e9*Math.random()>>>0),wp=0;function bp(t,e,n){return t.call.apply(t.bind,arguments)}function xp(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ep(t,e,n){return(Ep=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bp:xp).apply(null,arguments)}function Tp(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Sp(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}function kp(){this.s=this.s,this.o=this.o}var Ip={};kp.prototype.s=!1,kp.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,_p)&&t[_p]||(t[_p]=++wp)}(this);delete Ip[t]}},kp.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Cp=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Ap=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,i="string"==typeof t?t.split(""):t;for(let s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function Op(t){return Array.prototype.concat.apply([],arguments)}function Np(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Dp(t){return/^[\s\xa0]*$/.test(t)}var Pp,Rp=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Mp(t,e){return-1!=t.indexOf(e)}function Lp(t,e){return t<e?-1:t>e?1:0}t:{var Fp=gp.navigator;if(Fp){var jp=Fp.userAgent;if(jp){Pp=jp;break t}}Pp=""}function Up(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function Vp(t){const e={};for(const n in t)e[n]=t[n];return e}var qp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bp(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let e=0;e<qp.length;e++)n=qp[e],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function zp(t){return zp[" "](t),t}zp[" "]=mp;var $p,Gp,Zp=Mp(Pp,"Opera"),Hp=Mp(Pp,"Trident")||Mp(Pp,"MSIE"),Wp=Mp(Pp,"Edge"),Kp=Wp||Hp,Yp=Mp(Pp,"Gecko")&&!(Mp(Pp.toLowerCase(),"webkit")&&!Mp(Pp,"Edge"))&&!(Mp(Pp,"Trident")||Mp(Pp,"MSIE"))&&!Mp(Pp,"Edge"),Qp=Mp(Pp.toLowerCase(),"webkit")&&!Mp(Pp,"Edge");function Jp(){var t=gp.document;return t?t.documentMode:void 0}t:{var Xp="",tg=(Gp=Pp,Yp?/rv:([^\);]+)(\)|;)/.exec(Gp):Wp?/Edge\/([\d\.]+)/.exec(Gp):Hp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Gp):Qp?/WebKit\/(\S+)/.exec(Gp):Zp?/(?:Version)[ \/]?(\S+)/.exec(Gp):void 0);if(tg&&(Xp=tg?tg[1]:""),Hp){var eg=Jp();if(null!=eg&&eg>parseFloat(Xp)){$p=String(eg);break t}}$p=Xp}var ng={};var rg=gp.document&&Hp&&(Jp()||parseInt($p,10))||void 0,ig=function(){if(!gp.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{gp.addEventListener("test",mp,e),gp.removeEventListener("test",mp,e)}catch(n){}return t}();function sg(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function og(t,e){if(sg.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Yp){t:{try{zp(e.nodeName);var i=!0;break t}catch(s){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ag[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&og.Z.h.call(this)}}sg.prototype.h=function(){this.defaultPrevented=!0},Sp(og,sg);var ag={2:"touch",3:"pen",4:"mouse"};og.prototype.h=function(){og.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ug="closure_listenable_"+(1e6*Math.random()|0),cg=0;function lg(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++cg,this.ca=this.fa=!1}function hg(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function dg(t){this.src=t,this.g={},this.h=0}function fg(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],s=Cp(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(hg(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function pg(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}dg.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=pg(t,e,r,i);return-1<o?(e=t[o],n||(e.fa=!1)):((e=new lg(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var gg="closure_lm_"+(1e6*Math.random()|0),mg={};function yg(t,e,n,r,i){if(r&&r.once)return _g(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)yg(t,e[s],n,r,i);return null}return n=kg(n),t&&t[ug]?t.N(e,n,vp(r)?!!r.capture:!!r,i):vg(t,e,n,!1,r,i)}function vg(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=vp(i)?!!i.capture:!!i,a=Tg(t);if(a||(t[gg]=a=new dg(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function(){var t=Eg;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ig||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(xg(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function _g(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)_g(t,e[s],n,r,i);return null}return n=kg(n),t&&t[ug]?t.O(e,n,vp(r)?!!r.capture:!!r,i):vg(t,e,n,!0,r,i)}function wg(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)wg(t,e[s],n,r,i);else r=vp(r)?!!r.capture:!!r,n=kg(n),t&&t[ug]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=pg(s=t.g[e],n,r,i))&&(hg(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=Tg(t))&&(e=t.g[e.toString()],t=-1,e&&(t=pg(e,n,r,i)),(n=-1<t?e[t]:null)&&bg(n))}function bg(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[ug])fg(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(xg(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Tg(e))?(fg(n,t),0==n.h&&(n.src=null,e[gg]=null)):hg(t)}}}function xg(t){return t in mg?mg[t]:mg[t]="on"+t}function Eg(t,e){if(t.ca)t=!0;else{e=new og(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&bg(t),t=n.call(r,e)}return t}function Tg(t){return(t=t[gg])instanceof dg?t:null}var Sg="__closure_events_fn_"+(1e9*Math.random()>>>0);function kg(t){return"function"==typeof t?t:(t[Sg]||(t[Sg]=function(e){return t.handleEvent(e)}),t[Sg])}function Ig(){kp.call(this),this.i=new dg(this),this.P=this,this.I=null}function Cg(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new sg(e,t);else if(e instanceof sg)e.target=e.target||t;else{var i=e;Bp(e=new sg(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Ag(o,r,!0,e)&&i}if(i=Ag(o=e.g=t,r,!0,e)&&i,i=Ag(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=Ag(o=e.g=n[s],r,!1,e)&&i}function Ag(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,u=o.ia||o.src;o.fa&&fg(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Sp(Ig,kp),Ig.prototype[ug]=!0,Ig.prototype.removeEventListener=function(t,e,n,r){wg(this,t,e,n,r)},Ig.prototype.M=function(){if(Ig.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)hg(n[r]);delete e.g[t],e.h--}}this.I=null},Ig.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Ig.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Og=gp.JSON.stringify;function Ng(){var t=jg;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Dg,Pg=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new Rg,t=>t.reset());class Rg{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Mg(t){gp.setTimeout(()=>{throw t},0)}function Lg(t,e){Dg||function(){var t=gp.Promise.resolve(void 0);Dg=function(){t.then(Ug)}}(),Fg||(Dg(),Fg=!0),jg.add(t,e)}var Fg=!1,jg=new class{constructor(){this.h=this.g=null}add(t,e){const n=Pg.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}};function Ug(){for(var t;t=Ng();){try{t.h.call(t.g)}catch(n){Mg(n)}var e=Pg;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Fg=!1}function Vg(t,e){Ig.call(this),this.h=t||1,this.g=e||gp,this.j=Ep(this.kb,this),this.l=Date.now()}function qg(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Bg(t,e,n){if("function"==typeof t)n&&(t=Ep(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ep(t.handleEvent,t)}return 2147483647<Number(e)?-1:gp.setTimeout(t,e||0)}function zg(t){t.g=Bg(()=>{t.g=null,t.i&&(t.i=!1,zg(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Sp(Vg,Ig),(sp=Vg.prototype).da=!1,sp.S=null,sp.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Cg(this,"tick"),this.da&&(qg(this),this.start()))}},sp.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},sp.M=function(){Vg.Z.M.call(this),qg(this),delete this.g};class $g extends kp{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:zg(this)}M(){super.M(),this.g&&(gp.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gg(t){kp.call(this),this.h=t,this.g={}}Sp(Gg,kp);var Zg=[];function Hg(t,e,n,r){Array.isArray(n)||(n&&(Zg[0]=n.toString()),n=Zg);for(var i=0;i<n.length;i++){var s=yg(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Wg(t){Up(t.g,function(t,e){this.g.hasOwnProperty(e)&&bg(t)},t),t.g={}}function Kg(){this.g=!0}function Yg(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Og(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Gg.prototype.M=function(){Gg.Z.M.call(this),Wg(this)},Gg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Kg.prototype.Aa=function(){this.g=!1},Kg.prototype.info=function(){};var Qg={},Jg=null;function Xg(){return Jg=Jg||new Ig}function tm(t){sg.call(this,Qg.Ma,t)}function em(t){const e=Xg();Cg(e,new tm(e,t))}function nm(t,e){sg.call(this,Qg.STAT_EVENT,t),this.stat=e}function rm(t){const e=Xg();Cg(e,new nm(e,t))}function im(t,e){sg.call(this,Qg.Na,t),this.size=e}function sm(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return gp.setTimeout(function(){t()},e)}Qg.Ma="serverreachability",Sp(tm,sg),Qg.STAT_EVENT="statevent",Sp(nm,sg),Qg.Na="timingevent",Sp(im,sg);var om={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},am={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function um(){}function cm(){}um.prototype.h=null;var lm,hm={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function dm(){sg.call(this,"d")}function fm(){sg.call(this,"c")}function pm(){}function gm(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Gg(this),this.P=ym,this.W=new Vg(t=Kp?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new mm}function mm(){this.i=null,this.g="",this.h=!1}Sp(dm,sg),Sp(fm,sg),Sp(pm,um),pm.prototype.g=function(){return new XMLHttpRequest},pm.prototype.i=function(){return{}},lm=new pm;var ym=45e3,vm={},_m={};function wm(t,e,n){t.K=1,t.v=zm(Fm(e)),t.s=n,t.U=!0,bm(t,null)}function bm(t,e){t.F=Date.now(),Sm(t),t.A=Fm(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),ny(n.h,"t",r),t.C=0,n=t.l.H,t.h=new mm,t.g=nv(t.l,n?e:null,!t.s),0<t.O&&(t.L=new $g(Ep(t.Ia,t,t.g),t.O)),Hg(t.V,t.g,"readystatechange",t.gb),e=t.H?Vp(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),em(1),function(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.X,t.s)}function xm(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Em(t,e,n){let r,i=!0;for(;!t.I&&t.C<n.length;){if(r=Tm(t,n),r==_m){4==e&&(t.o=4,rm(14),i=!1),Yg(t.j,t.m,null,"[Incomplete Response]");break}if(r==vm){t.o=4,rm(15),Yg(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Yg(t.j,t.m,r,null),Om(t,r)}xm(t)&&r!=_m&&r!=vm&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,rm(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Wy(e),e.L=!0,rm(11))):(Yg(t.j,t.m,n,"[Invalid Chunked Response]"),Am(t),Cm(t))}function Tm(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?_m:(n=Number(e.substring(n,r)),isNaN(n)?vm:(r+=1)+n>e.length?_m:(e=e.substr(r,n),t.C=r+n,e))}function Sm(t){t.Y=Date.now()+t.P,km(t,t.P)}function km(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=sm(Ep(t.eb,t),e)}function Im(t){t.B&&(gp.clearTimeout(t.B),t.B=null)}function Cm(t){0==t.l.G||t.I||Qy(t.l,t)}function Am(t){Im(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,qg(t.W),Wg(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Om(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||uy(n.i,t)))if(n.I=t.N,!t.J&&uy(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Yy(n),Uy(n)}Hy(n),rm(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=sm(Ep(n.ab,n),6e3));if(1>=ay(n.i)&&n.ka){try{n.ka()}catch(c){}n.ka=void 0}}else Xy(n,11)}else if((t.J||n.g==t)&&Yy(n),!Dp(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.U=c[0],c=c[1],2==n.G)if("c"==c[0]){n.J=c[1],n.la=c[2];const e=c[3];null!=e&&(n.ma=e,n.h.info("VER="+n.ma));const i=c[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const l=c[5];null!=l&&"number"==typeof l&&0<l&&(n.K=r=1.5*l,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=r.i;!s.g&&(Mp(t,"spdy")||Mp(t,"quic")||Mp(t,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(cy(s,s.h),s.h=null))}if(r.D){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(r.sa=t,Bm(r.F,r.D,t))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=t;if((r=n).oa=ev(r,r.H?r.la:null,r.W),o.J){ly(r.i,o);var a=o,u=r.K;u&&a.setTimeout(u),a.B&&(Im(a),Sm(a)),r.g=o}else Zy(r);0<n.l.length&&By(n)}else"stop"!=c[0]&&"close"!=c[0]||Xy(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Xy(n,7):jy(n):"noop"!=c[0]&&n.j&&n.j.wa(c),n.A=0)}em(4)}catch(c){}}function Nm(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(yp(t)||"string"==typeof t)Ap(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(yp(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(yp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function Dm(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Dm)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Pm(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Rm(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Rm(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Rm(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(sp=gm.prototype).setTimeout=function(t){this.P=t},sp.gb=function(t){t=t.target;const e=this.L;e&&3==Py(t)?e.l():this.Ia(t)},sp.Ia=function(t){try{if(t==this.g)t:{const l=Py(this.g);var e=this.g.Da();const h=this.g.ba();if(!(3>l)&&(3!=l||Kp||this.g&&(this.h.h||this.g.ga()||Ry(this.g)))){this.I||4!=l||7==e||em(8==e||0>=h?3:2),Im(this);var n=this.g.ba();this.N=n;e:if(xm(this)){var r=Ry(this.g);t="";var i=r.length,s=4==Py(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Am(this),Cm(this);var o="";break e}this.h.i=new gp.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,l,n),this.i){if(this.$&&!this.J){e:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Dp(a)){var c=a;break e}}c=null}if(!(n=c)){this.i=!1,this.o=3,rm(12),Am(this),Cm(this);break t}Yg(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Om(this,n)}this.U?(Em(this,l,o),Kp&&this.i&&3==l&&(Hg(this.V,this.W,"tick",this.fb),this.W.start())):(Yg(this.j,this.m,o,null),Om(this,o)),4==l&&Am(this),this.i&&!this.I&&(4==l?Qy(this.l,this):(this.i=!1,Sm(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,rm(12)):(this.o=0,rm(13)),Am(this),Cm(this)}}}catch(l){}},sp.fb=function(){if(this.g){var t=Py(this.g),e=this.g.ga();this.C<e.length&&(Im(this),Em(this,t,e),this.i&&4!=t&&Sm(this))}},sp.cancel=function(){this.I=!0,Am(this)},sp.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(em(3),rm(17)),Am(this),this.o=2,Cm(this)):km(this,this.Y-t)},(sp=Dm.prototype).R=function(){Pm(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},sp.T=function(){return Pm(this),this.g.concat()},sp.get=function(t,e){return Rm(this.h,t)?this.h[t]:e},sp.set=function(t,e){Rm(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},sp.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var Mm=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Lm(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Lm){this.g=void 0!==e?e:t.g,jm(this,t.j),this.s=t.s,Um(this,t.i),Vm(this,t.m),this.l=t.l,e=t.h;var n=new Jm;n.i=e.i,e.g&&(n.g=new Dm(e.g),n.h=e.h),qm(this,n),this.o=t.o}else t&&(n=String(t).match(Mm))?(this.g=!!e,jm(this,n[1]||"",!0),this.s=$m(n[2]||""),Um(this,n[3]||"",!0),Vm(this,n[4]),this.l=$m(n[5]||"",!0),qm(this,n[6]||"",!0),this.o=$m(n[7]||"")):(this.g=!!e,this.h=new Jm(null,this.g))}function Fm(t){return new Lm(t)}function jm(t,e,n){t.j=n?$m(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Um(t,e,n){t.i=n?$m(e,!0):e}function Vm(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function qm(t,e,n){e instanceof Jm?(t.h=e,function(t,e){e&&!t.j&&(Xm(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(ty(this,e),ny(this,n,t))},t)),t.j=e}(t.h,t.g)):(n||(e=Gm(e,Ym)),t.h=new Jm(e,t.g))}function Bm(t,e,n){t.h.set(e,n)}function zm(t){return Bm(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function $m(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Gm(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Zm),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Zm(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Lm.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Gm(e,Hm,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Gm(e,Hm,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Gm(n,"/"==n.charAt(0)?Km:Wm,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Gm(n,Qm)),t.join("")};var Hm=/[#\/\?@]/g,Wm=/[#\?:]/g,Km=/[#\?]/g,Ym=/[#\?@]/g,Qm=/#/g;function Jm(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Xm(t){t.g||(t.g=new Dm,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function ty(t,e){Xm(t),e=ry(t,e),Rm(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Rm((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Pm(t)))}function ey(t,e){return Xm(t),e=ry(t,e),Rm(t.g.h,e)}function ny(t,e,n){ty(t,e),0<n.length&&(t.i=null,t.g.set(ry(t,e),Np(n)),t.h+=n.length)}function ry(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function iy(t){this.l=t||sy,t=gp.PerformanceNavigationTiming?0<(t=gp.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(gp.g&&gp.g.Ea&&gp.g.Ea()&&gp.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(sp=Jm.prototype).add=function(t,e){Xm(this),this.i=null,t=ry(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},sp.forEach=function(t,e){Xm(this),this.g.forEach(function(n,r){Ap(n,function(n){t.call(e,n,r,this)},this)},this)},sp.T=function(){Xm(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},sp.R=function(t){Xm(this);var e=[];if("string"==typeof t)ey(this,t)&&(e=Op(e,this.g.get(ry(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Op(e,t[n])}return e},sp.set=function(t,e){return Xm(this),this.i=null,ey(this,t=ry(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},sp.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},sp.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),t.push(o)}}return this.i=t.join("&")};var sy=10;function oy(t){return!!t.h||!!t.g&&t.g.size>=t.j}function ay(t){return t.h?1:t.g?t.g.size:0}function uy(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function cy(t,e){t.g?t.g.add(e):t.h=e}function ly(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function hy(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return Np(t.i)}function dy(){}function fy(){this.g=new dy}function py(t,e,n){const r=n||"";try{Nm(t,function(t,n){let i=t;vp(t)&&(i=Og(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function gy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function my(t){this.l=t.$b||null,this.j=t.ib||!1}function yy(t,e){Ig.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=vy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}iy.prototype.cancel=function(){if(this.i=hy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},dy.prototype.stringify=function(t){return gp.JSON.stringify(t,void 0)},dy.prototype.parse=function(t){return gp.JSON.parse(t,void 0)},Sp(my,um),my.prototype.g=function(){return new yy(this.l,this.j)},my.prototype.i=function(t){return function(){return t}}({}),Sp(yy,Ig);var vy=0;function _y(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function wy(t){t.readyState=4,t.l=null,t.j=null,t.A=null,by(t)}function by(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(sp=yy.prototype).open=function(t,e){if(this.readyState!=vy)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,by(this)},sp.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||gp).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},sp.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,wy(this)),this.readyState=vy},sp.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,by(this)),this.g&&(this.readyState=3,by(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==gp.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_y(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},sp.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?wy(this):by(this),3==this.readyState&&_y(this)}},sp.Ua=function(t){this.g&&(this.response=this.responseText=t,wy(this))},sp.Ta=function(t){this.g&&(this.response=t,wy(this))},sp.ha=function(){this.g&&wy(this)},sp.setRequestHeader=function(t,e){this.v.append(t,e)},sp.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},sp.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(yy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var xy=gp.JSON.parse;function Ey(t){Ig.call(this),this.headers=new Dm,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ty,this.K=this.L=!1}Sp(Ey,Ig);var Ty="",Sy=/^https?$/i,ky=["POST","PUT"];function Iy(t){return"content-type"==t.toLowerCase()}function Cy(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ay(t),Ny(t)}function Ay(t){t.D||(t.D=!0,Cg(t,"complete"),Cg(t,"error"))}function Oy(t){if(t.h&&void 0!==pp&&(!t.C[1]||4!=Py(t)||2!=t.ba()))if(t.v&&4==Py(t))Bg(t.Fa,0,t);else if(Cg(t,"readystatechange"),4==Py(t)){t.h=!1;try{const u=t.ba();t:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var r;if(r=0===u){var i=String(t.H).match(Mm)[1]||null;if(!i&&gp.self&&gp.self.location){var s=gp.self.location.protocol;i=s.substr(0,s.length-1)}r=!Sy.test(i?i.toLowerCase():"")}n=r}if(n)Cg(t,"complete"),Cg(t,"success");else{t.m=6;try{var o=2<Py(t)?t.g.statusText:""}catch(a){o=""}t.j=o+" ["+t.ba()+"]",Ay(t)}}finally{Ny(t)}}}function Ny(t,e){if(t.g){Dy(t);const r=t.g,i=t.C[0]?mp:null;t.g=null,t.C=null,e||Cg(t,"ready");try{r.onreadystatechange=i}catch(n){}}}function Dy(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(gp.clearTimeout(t.A),t.A=null)}function Py(t){return t.g?t.g.readyState:0}function Ry(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Ty:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function My(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){let e="";return Up(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Bm(t,e,n))}function Ly(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Fy(t){this.za=0,this.l=[],this.h=new Kg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ly("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ly("baseRetryDelayMs",5e3,t),this.$a=Ly("retryDelaySeedMs",1e4,t),this.Ya=Ly("forwardChannelMaxRetries",2,t),this.ra=Ly("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new iy(t&&t.concurrentRequestLimit),this.Ca=new fy,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function jy(t){if(Vy(t),3==t.G){var e=t.V++,n=Fm(t.F);Bm(n,"SID",t.J),Bm(n,"RID",e),Bm(n,"TYPE","terminate"),$y(t,n),(e=new gm(t,t.h,e,void 0)).K=2,e.v=zm(Fm(n)),n=!1,gp.navigator&&gp.navigator.sendBeacon&&(n=gp.navigator.sendBeacon(e.v.toString(),"")),!n&&gp.Image&&((new Image).src=e.v,n=!0),n||(e.g=nv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Sm(e)}tv(t)}function Uy(t){t.g&&(Wy(t),t.g.cancel(),t.g=null)}function Vy(t){Uy(t),t.u&&(gp.clearTimeout(t.u),t.u=null),Yy(t),t.i.cancel(),t.m&&("number"==typeof t.m&&gp.clearTimeout(t.m),t.m=null)}function qy(t,e){t.l.push(new class{constructor(t,e){this.h=t,this.g=e}}(t.Za++,e)),3==t.G&&By(t)}function By(t){oy(t.i)||t.m||(t.m=!0,Lg(t.Ha,t),t.C=0)}function zy(t,e){var n;n=e?e.m:t.V++;const r=Fm(t.F);Bm(r,"SID",t.J),Bm(r,"RID",n),Bm(r,"AID",t.U),$y(t,r),t.o&&t.s&&My(r,t.o,t.s),n=new gm(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Gy(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),cy(t.i,n),wm(n,r,e)}function $y(t,e){t.j&&Nm({},function(t,n){Bm(e,n,t)})}function Gy(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Ep(t.j.Oa,t.j,t):null;t:{var i=t.l;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=i[0].h,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=e,0>n)e=Math.max(0,i[o].h-100),s=!1;else try{py(a,t,"req"+n+"_")}catch(Rv){r&&r(a)}}if(s){r=t.join("&");break t}}}return t=t.l.splice(0,n),e.D=t,r}function Zy(t){t.g||t.u||(t.Y=1,Lg(t.Ga,t),t.A=0)}function Hy(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=sm(Ep(t.Ga,t),Jy(t,t.A)),t.A++,0))}function Wy(t){null!=t.B&&(gp.clearTimeout(t.B),t.B=null)}function Ky(t){t.g=new gm(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Fm(t.oa);Bm(e,"RID","rpc"),Bm(e,"SID",t.J),Bm(e,"CI",t.N?"0":"1"),Bm(e,"AID",t.U),$y(t,e),Bm(e,"TYPE","xmlhttp"),t.o&&t.s&&My(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=zm(Fm(e)),n.s=null,n.U=!0,bm(n,t)}function Yy(t){null!=t.v&&(gp.clearTimeout(t.v),t.v=null)}function Qy(t,e){var n=null;if(t.g==e){Yy(t),Wy(t),t.g=null;var r=2}else{if(!uy(t.i,e))return;n=e.D,ly(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Cg(r=Xg(),new im(r,n,e,i)),By(t)}else Zy(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(ay(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=sm(Ep(t.Ha,t,e),Jy(t,t.C)),t.C++,0)))}(t,e)||2==r&&Hy(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Xy(t,5);break;case 4:Xy(t,10);break;case 3:Xy(t,6);break;default:Xy(t,2)}}function Jy(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Xy(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Ep(t.jb,t);n||(n=new Lm("//www.google.com/images/cleardot.gif"),gp.location&&"http"==gp.location.protocol||jm(n,"https"),zm(n)),function(t,e){const n=new Kg;if(gp.Image){const r=new Image;r.onload=Tp(gy,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Tp(gy,n,r,"TestLoadImage: error",!1,e),r.onabort=Tp(gy,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Tp(gy,n,r,"TestLoadImage: timeout",!1,e),gp.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else rm(2);t.G=0,t.j&&t.j.va(e),tv(t),Vy(t)}function tv(t){t.G=0,t.I=-1,t.j&&(0==hy(t.i).length&&0==t.l.length||(t.i.i.length=0,Np(t.l),t.l.length=0),t.j.ua())}function ev(t,e,n){let r=function(t){return t instanceof Lm?Fm(t):new Lm(t,void 0)}(n);if(""!=r.i)e&&Um(r,e+"."+r.i),Vm(r,r.m);else{const t=gp.location;r=function(t,e,n,r){var i=new Lm(null,void 0);return t&&jm(i,t),e&&Um(i,e),n&&Vm(i,n),r&&(i.l=r),i}(t.protocol,e?e+"."+t.hostname:t.hostname,+t.port,n)}return t.aa&&Up(t.aa,function(t,e){Bm(r,e,t)}),n=t.sa,(e=t.D)&&n&&Bm(r,e,n),Bm(r,"VER",t.ma),$y(t,r),r}function nv(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ey(n&&t.Ba&&!t.qa?new my({ib:!0}):t.qa)).L=t.H,e}function rv(){}function iv(){if(Hp&&!(10<=Number(rg)))throw Error("Environmental error: no available transport.")}function sv(t,e){Ig.call(this),this.g=new Fy(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!Dp(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Dp(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new uv(this)}function ov(t){dm.call(this);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function av(){fm.call(this),this.status=1}function uv(t){this.g=t}(sp=Ey.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():lm.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:lm),this.g.onreadystatechange=Ep(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){return void Cy(this,s)}t=n||"";const i=new Dm(this.headers);r&&Nm(r,function(t,e){i.set(e,t)}),r=function(t){t:{var e=Iy;const n=t.length,r="string"==typeof t?t.split(""):t;for(let i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=gp.FormData&&t instanceof gp.FormData,!(0<=Cp(ky,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Dy(this),0<this.B&&((this.K=function(t){return Hp&&function(){return t=ng,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){let t=0;const e=Rp(String($p)).split("."),n=Rp("9").split("."),r=Math.max(e.length,n.length);for(let o=0;0==t&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;t=Lp(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||Lp(0==i[2].length,0==s[2].length)||Lp(i[2],s[2]),i=i[3],s=s[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ep(this.pa,this)):this.A=Bg(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Cy(this,s)}},sp.pa=function(){void 0!==pp&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Cg(this,"timeout"),this.abort(8))},sp.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Cg(this,"complete"),Cg(this,"abort"),Ny(this))},sp.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ny(this,!0)),Ey.Z.M.call(this)},sp.Fa=function(){this.s||(this.F||this.v||this.l?Oy(this):this.cb())},sp.cb=function(){Oy(this)},sp.ba=function(){try{return 2<Py(this)?this.g.status:-1}catch(Gp){return-1}},sp.ga=function(){try{return this.g?this.g.responseText:""}catch(Gp){return""}},sp.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),xy(e)}},sp.Da=function(){return this.m},sp.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(sp=Fy.prototype).ma=8,sp.G=1,sp.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},sp.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new gm(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=Vp(s),Bp(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)t:{for(var e=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break t}if(4096===e||n===this.l.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Gy(this,i,e),Bm(n=Fm(this.F),"RID",t),Bm(n,"CVER",22),this.D&&Bm(n,"X-HTTP-Session-Id",this.D),$y(this,n),this.o&&s&&My(n,this.o,s),cy(this.i,i),this.Ra&&Bm(n,"TYPE","init"),this.ja?(Bm(n,"$req",e),Bm(n,"SID","null"),i.$=!0,wm(i,n,null)):wm(i,n,e),this.G=2}}else 3==this.G&&(t?zy(this,t):0==this.l.length||oy(this.i)||zy(this))},sp.Ga=function(){if(this.u=null,Ky(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=sm(Ep(this.bb,this),t)}},sp.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,rm(10),Uy(this),Ky(this))},sp.ab=function(){null!=this.v&&(this.v=null,Uy(this),Hy(this),rm(19))},sp.jb=function(t){t?(this.h.info("Successfully pinged google.com"),rm(2)):(this.h.info("Failed to ping google.com"),rm(1))},(sp=rv.prototype).xa=function(){},sp.wa=function(){},sp.va=function(){},sp.ua=function(){},sp.Oa=function(){},iv.prototype.g=function(t,e){return new sv(t,e)},Sp(sv,Ig),sv.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Lg(Ep(t.hb,t,e))),rm(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=ev(t,null,t.W),By(t)},sv.prototype.close=function(){jy(this.g)},sv.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,qy(this.g,e)}else this.v?((e={}).__data__=Og(t),qy(this.g,e)):qy(this.g,t)},sv.prototype.M=function(){this.g.j=null,delete this.j,jy(this.g),delete this.g,sv.Z.M.call(this)},Sp(ov,dm),Sp(av,fm),Sp(uv,rv),uv.prototype.xa=function(){Cg(this.g,"a")},uv.prototype.wa=function(t){Cg(this.g,new ov(t))},uv.prototype.va=function(t){Cg(this.g,new av(t))},uv.prototype.ua=function(){Cg(this.g,"b")},iv.prototype.createWebChannel=iv.prototype.g,sv.prototype.send=sv.prototype.u,sv.prototype.open=sv.prototype.m,sv.prototype.close=sv.prototype.close,om.NO_ERROR=0,om.TIMEOUT=8,om.HTTP_ERROR=6,am.COMPLETE="complete",cm.EventType=hm,hm.OPEN="a",hm.CLOSE="b",hm.ERROR="c",hm.MESSAGE="d",Ig.prototype.listen=Ig.prototype.N,Ey.prototype.listenOnce=Ey.prototype.O,Ey.prototype.getLastError=Ey.prototype.La,Ey.prototype.getLastErrorCode=Ey.prototype.Da,Ey.prototype.getStatus=Ey.prototype.ba,Ey.prototype.getResponseJson=Ey.prototype.Qa,Ey.prototype.getResponseText=Ey.prototype.ga,Ey.prototype.send=Ey.prototype.ea;var cv=fp.createWebChannelTransport=function(){return new iv},lv=fp.getStatEventTarget=function(){return Xg()},hv=fp.ErrorCode=om,dv=fp.EventType=am,fv=fp.Event=Qg,pv=fp.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},gv=fp.FetchXmlHttpFactory=my,mv=fp.WebChannel=cm,yv=fp.XhrIo=Ey;const vv="@firebase/firestore";class _v{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}_v.UNAUTHENTICATED=new _v(null),_v.GOOGLE_CREDENTIALS=new _v("google-credentials-uid"),_v.FIRST_PARTY=new _v("first-party-uid"),_v.MOCK_USER=new _v("mock-user");let wv="9.6.1";const bv=new lp.Yd("@firebase/firestore");function xv(){return bv.logLevel}function Ev(t,...e){if(bv.logLevel<=lp.in.DEBUG){const n=e.map(kv);bv.debug(`Firestore (${wv}): ${t}`,...n)}}function Tv(t,...e){if(bv.logLevel<=lp.in.ERROR){const n=e.map(kv);bv.error(`Firestore (${wv}): ${t}`,...n)}}function Sv(t,...e){if(bv.logLevel<=lp.in.WARN){const n=e.map(kv);bv.warn(`Firestore (${wv}): ${t}`,...n)}}function kv(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function Iv(t="Unexpected state"){const e=`FIRESTORE (${wv}) INTERNAL ASSERTION FAILED: `+t;throw Tv(e),new Error(e)}function Cv(t,e){t||Iv()}function Av(t,e){return t}const Ov={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Nv extends Error{constructor(t,e){super(e),this.code=t,this.message=e,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Dv{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class Pv{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Rv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(_v.UNAUTHENTICATED))}shutdown(){}}class Mv{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class Lv{constructor(t){this.t=t,this.currentUser=_v.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var n=this;let r=this.i;const i=t=>this.i!==r?(r=this.i,e(t)):Promise.resolve();let s=new Dv;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Dv,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const e=s;t.enqueueRetryable((0,ap.Z)(function*(){yield e.promise,yield i(n.currentUser)}))},a=t=>{Ev("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(t=>a(t)),setTimeout(()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?a(t):(Ev("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Dv)}},0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(e=>this.i!==t?(Ev("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(Cv("string"==typeof e.accessToken),new Pv(e.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Cv(null===t||"string"==typeof t),new _v(t)}}class Fv{constructor(t,e,n){this.type="FirstParty",this.user=_v.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const r=t.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class jv{constructor(t,e,n){this.h=t,this.l=e,this.m=n}getToken(){return Promise.resolve(new Fv(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(_v.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Uv{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vv{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null}start(t,e){this.o=n=>{t.enqueueRetryable(()=>(t=>(null!=t.error&&Ev("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`),e(t.token)))(n))};const n=t=>{Ev("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.g.onInit(t=>n(t)),setTimeout(()=>{if(!this.appCheck){const t=this.g.getImmediate({optional:!0});t?n(t):Ev("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(t=>t?(Cv("string"==typeof t.token),new Uv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class qv{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.p(t),this.T=t=>e.writeSequenceNumber(t))}p(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function Bv(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}qv.I=-1;class zv{static A(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const r=Bv(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length))}return n}}function $v(t,e){return t<e?-1:t>e?1:0}function Gv(t,e,n){return t.length===e.length&&t.every((t,r)=>n(t,e[r]))}function Zv(t){return t+"\0"}class Hv{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Nv(Ov.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Nv(Ov.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Nv(Ov.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Nv(Ov.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Hv.fromMillis(Date.now())}static fromDate(t){return Hv.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Hv(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?$v(this.nanoseconds,t.nanoseconds):$v(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Wv{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Wv(t)}static min(){return new Wv(new Hv(0,0))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Kv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yv(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Qv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Jv{constructor(t,e,n){void 0===e?e=0:e>t.length&&Iv(),void 0===n?n=t.length-e:n>t.length-e&&Iv(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Jv.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Jv?t.forEach(t=>{e.push(t)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const n=t.get(r),i=e.get(r);if(n<i)return-1;if(n>i)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Xv extends Jv{construct(t,e,n){return new Xv(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Nv(Ov.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(t=>t.length>0))}return new Xv(e)}static emptyPath(){return new Xv([])}}const t_=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class e_ extends Jv{construct(t,e,n){return new e_(t,e,n)}static isValidIdentifier(t){return t_.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e_.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new e_(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Nv(Ov.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;r<t.length;){const e=t[r];if("\\"===e){if(r+1===t.length)throw new Nv(Ov.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[r+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new Nv(Ov.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,r+=2}else"`"===e?(s=!s,r++):"."!==e||s?(n+=e,r++):(i(),r++)}if(i(),s)throw new Nv(Ov.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e_(e)}static emptyPath(){return new e_([])}}class n_{constructor(t){this.fields=t,t.sort(e_.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Gv(this.fields,t.fields,(t,e)=>t.isEqual(e))}}class r_{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new r_(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new r_(e)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return $v(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}r_.EMPTY_BYTE_STRING=new r_("");const i_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function s_(t){if(Cv(!!t),"string"==typeof t){let e=0;const n=i_.exec(t);if(Cv(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:o_(t.seconds),nanos:o_(t.nanos)}}function o_(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function a_(t){return"string"==typeof t?r_.fromBase64String(t):r_.fromUint8Array(t)}function u_(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function c_(t){const e=t.mapValue.fields.__previous_value__;return u_(e)?c_(e):e}function l_(t){const e=s_(t.mapValue.fields.__local_write_time__.timestampValue);return new Hv(e.seconds,e.nanos)}function h_(t){return null==t}function d_(t){return 0===t&&1/t==-1/0}function f_(t){return"number"==typeof t&&Number.isInteger(t)&&!d_(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}class p_{constructor(t){this.path=t}static fromPath(t){return new p_(Xv.fromString(t))}static fromName(t){return new p_(Xv.fromString(t).popFirst(5))}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}isEqual(t){return null!==t&&0===Xv.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Xv.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new p_(new Xv(t.slice()))}}function g_(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?u_(t)?4:10:Iv()}function m_(t,e){const n=g_(t);if(n!==g_(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return l_(t).isEqual(l_(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=s_(t.timestampValue),r=s_(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return a_(t.bytesValue).isEqual(a_(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return o_(t.geoPointValue.latitude)===o_(e.geoPointValue.latitude)&&o_(t.geoPointValue.longitude)===o_(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return o_(t.integerValue)===o_(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=o_(t.doubleValue),r=o_(e.doubleValue);return n===r?d_(n)===d_(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Gv(t.arrayValue.values||[],e.arrayValue.values||[],m_);case 10:return function(t,e){const n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Kv(n)!==Kv(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!m_(n[i],r[i])))return!1;return!0}(t,e);default:return Iv()}}function y_(t,e){return void 0!==(t.values||[]).find(t=>m_(t,e))}function v_(t,e){const n=g_(t),r=g_(e);if(n!==r)return $v(n,r);switch(n){case 0:return 0;case 1:return $v(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=o_(t.integerValue||t.doubleValue),r=o_(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return __(t.timestampValue,e.timestampValue);case 4:return __(l_(t),l_(e));case 5:return $v(t.stringValue,e.stringValue);case 6:return function(t,e){const n=a_(t),r=a_(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),r=e.split("/");for(let i=0;i<n.length&&i<r.length;i++){const t=$v(n[i],r[i]);if(0!==t)return t}return $v(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=$v(o_(t.latitude),o_(e.latitude));return 0!==n?n:$v(o_(t.longitude),o_(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const t=v_(n[i],r[i]);if(t)return t}return $v(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){const n=t.fields||{},r=Object.keys(n),i=e.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const t=$v(r[o],s[o]);if(0!==t)return t;const e=v_(n[r[o]],i[s[o]]);if(0!==e)return e}return $v(r.length,s.length)}(t.mapValue,e.mapValue);default:throw Iv()}}function __(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return $v(t,e);const n=s_(t),r=s_(e),i=$v(n.seconds,r.seconds);return 0!==i?i:$v(n.nanos,r.nanos)}function w_(t){return b_(t)}function b_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=s_(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?a_(t.bytesValue).toBase64():"referenceValue"in t?p_.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(t){let e="[",n=!0;for(const r of t.values||[])n?n=!1:e+=",",e+=b_(r);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",r=!0;for(const i of e)r?r=!1:n+=",",n+=`${i}:${b_(t.fields[i])}`;return n+"}"}(t.mapValue):Iv();var e}function x_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function E_(t){return!!t&&"integerValue"in t}function T_(t){return!!t&&"arrayValue"in t}function S_(t){return!!t&&"nullValue"in t}function k_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function I_(t){return!!t&&"mapValue"in t}function C_(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Yv(t.mapValue.fields,(t,n)=>e.mapValue.fields[t]=C_(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=C_(t.arrayValue.values[n]);return e}return Object.assign({},t)}class A_{constructor(t){this.value=t}static empty(){return new A_({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!I_(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=C_(e)}setAll(t){let e=e_.emptyPath(),n={},r=[];t.forEach((t,i)=>{if(!e.isImmediateParentOf(i)){const t=this.getFieldsMap(e);this.applyChanges(t,n,r),n={},r=[],e=i.popLast()}t?n[i.lastSegment()]=C_(t):r.push(i.lastSegment())});const i=this.getFieldsMap(e);this.applyChanges(i,n,r)}delete(t){const e=this.field(t.popLast());I_(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return m_(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];I_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){Yv(e,(e,n)=>t[e]=n);for(const r of n)delete t[r]}clone(){return new A_(C_(this.value))}}function O_(t){const e=[];return Yv(t.fields,(t,n)=>{const r=new e_([t]);if(I_(n)){const t=O_(n.mapValue).fields;if(0===t.length)e.push(r);else for(const n of t)e.push(r.child(n))}else e.push(r)}),new n_(e)}class N_{constructor(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}static newInvalidDocument(t){return new N_(t,0,Wv.min(),A_.empty(),0)}static newFoundDocument(t,e,n){return new N_(t,1,e,n,0)}static newNoDocument(t,e){return new N_(t,2,e,A_.empty(),0)}static newUnknownDocument(t,e){return new N_(t,3,e,A_.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=A_.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=A_.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof N_&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}clone(){return new N_(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class D_{constructor(t,e=null,n=[],r=[],i=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.R=null}}function P_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new D_(t,e,n,r,i,s,o)}function R_(t){const e=Av(t);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(t=>function(t){return t.field.canonicalString()+t.op.toString()+w_(t.value)}(t)).join(","),t+="|ob:",t+=e.orderBy.map(t=>function(t){return t.field.canonicalString()+t.dir}(t)).join(","),h_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=H_(e.startAt)),e.endAt&&(t+="|ub:",t+=H_(e.endAt)),e.R=t}return e.R}function M_(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!K_(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if((n=t.filters[i]).op!==(r=e.filters[i]).op||!n.field.isEqual(r.field)||!m_(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Q_(t.startAt,e.startAt)&&Q_(t.endAt,e.endAt)}function L_(t){return p_.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class F_ extends class{}{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.P(t,e,n):new j_(t,e,n):"array-contains"===e?new B_(t,n):"in"===e?new z_(t,n):"not-in"===e?new $_(t,n):"array-contains-any"===e?new G_(t,n):new F_(t,e,n)}static P(t,e,n){return"in"===e?new U_(t,n):new V_(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(v_(e,this.value)):null!==e&&g_(this.value)===g_(e)&&this.v(v_(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Iv()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class j_ extends F_{constructor(t,e,n){super(t,e,n),this.key=p_.fromName(n.referenceValue)}matches(t){const e=p_.comparator(t.key,this.key);return this.v(e)}}class U_ extends F_{constructor(t,e){super(t,"in",e),this.keys=q_(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class V_ extends F_{constructor(t,e){super(t,"not-in",e),this.keys=q_(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function q_(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(t=>p_.fromName(t.referenceValue))}class B_ extends F_{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return T_(e)&&y_(e.arrayValue,this.value)}}class z_ extends F_{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&y_(this.value.arrayValue,e)}}class $_ extends F_{constructor(t,e){super(t,"not-in",e)}matches(t){if(y_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!y_(this.value.arrayValue,e)}}class G_ extends F_{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!T_(e)||!e.arrayValue.values)&&e.arrayValue.values.some(t=>y_(this.value.arrayValue,t))}}class Z_{constructor(t,e){this.position=t,this.before=e}}function H_(t){return`${t.before?"b":"a"}:${t.position.map(t=>w_(t)).join(",")}`}class W_{constructor(t,e="asc"){this.field=t,this.dir=e}}function K_(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Y_(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?p_.comparator(p_.fromName(o.referenceValue),n.key):v_(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Q_(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!m_(t.position[n],e.position[n]))return!1;return!0}class J_{constructor(t,e=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.S=null,this.D=null}}function X_(t,e,n,r,i,s,o,a){return new J_(t,e,n,r,i,s,o,a)}function tw(t){return new J_(t)}function ew(t){return!h_(t.limit)&&"F"===t.limitType}function nw(t){return!h_(t.limit)&&"L"===t.limitType}function rw(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function iw(t){for(const e of t.filters)if(e.V())return e.field;return null}function sw(t){return null!==t.collectionGroup}function ow(t){const e=Av(t);if(null===e.S){e.S=[];const t=iw(e),n=rw(e);if(null!==t&&null===n)t.isKeyField()||e.S.push(new W_(t)),e.S.push(new W_(e_.keyField(),"asc"));else{let t=!1;for(const n of e.explicitOrderBy)e.S.push(n),n.field.isKeyField()&&(t=!0);if(!t){const t=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new W_(e_.keyField(),t))}}}return e.S}function aw(t){const e=Av(t);if(!e.D)if("F"===e.limitType)e.D=P_(e.path,e.collectionGroup,ow(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const i of ow(e))t.push(new W_(i.field,"desc"===i.dir?"asc":"desc"));const n=e.endAt?new Z_(e.endAt.position,!e.endAt.before):null,r=e.startAt?new Z_(e.startAt.position,!e.startAt.before):null;e.D=P_(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}return e.D}function uw(t,e,n){return new J_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cw(t,e){return M_(aw(t),aw(e))&&t.limitType===e.limitType}function lw(t){return`${R_(aw(t))}|lt:${t.limitType}`}function hw(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(t=>{return`${(e=t).field.canonicalString()} ${e.op} ${w_(e.value)}`;var e}).join(", ")}]`),h_(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t)).join(", ")}]`),t.startAt&&(e+=", startAt: "+H_(t.startAt)),t.endAt&&(e+=", endAt: "+H_(t.endAt)),`Target(${e})`}(aw(t))}; limitType=${t.limitType})`}function dw(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):p_.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of t.explicitOrderBy)if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Y_(t.startAt,ow(t),e)||t.endAt&&Y_(t.endAt,ow(t),e))}(t,e)}function fw(t){return(e,n)=>{let r=!1;for(const i of ow(t)){const t=pw(i,e,n);if(0!==t)return t;r=r||i.field.isKeyField()}return 0}}function pw(t,e,n){const r=t.field.isKeyField()?p_.comparator(e.key,n.key):function(t,e,n){const r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?v_(r,i):Iv()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Iv()}}function gw(t,e){if(t.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:d_(e)?"-0":e}}function mw(t){return{integerValue:""+t}}function yw(t,e){return f_(e)?mw(e):gw(t,e)}class vw{constructor(){this._=void 0}}function _w(t,e,n){return t instanceof xw?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ew?Tw(t,e):t instanceof Sw?kw(t,e):function(t,e){const n=bw(t,e),r=Cw(n)+Cw(t.N);return E_(n)&&E_(t.N)?mw(r):gw(t.k,r)}(t,e)}function ww(t,e,n){return t instanceof Ew?Tw(t,e):t instanceof Sw?kw(t,e):n}function bw(t,e){return t instanceof Iw?E_(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}class xw extends vw{}class Ew extends vw{constructor(t){super(),this.elements=t}}function Tw(t,e){const n=Aw(e);for(const r of t.elements)n.some(t=>m_(t,r))||n.push(r);return{arrayValue:{values:n}}}class Sw extends vw{constructor(t){super(),this.elements=t}}function kw(t,e){let n=Aw(e);for(const r of t.elements)n=n.filter(t=>!m_(t,r));return{arrayValue:{values:n}}}class Iw extends vw{constructor(t,e){super(),this.k=t,this.N=e}}function Cw(t){return o_(t.integerValue||t.doubleValue)}function Aw(t){return T_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Ow{constructor(t,e){this.field=t,this.transform=e}}class Nw{constructor(t,e){this.version=t,this.transformResults=e}}class Dw{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Dw}static exists(t){return new Dw(void 0,t)}static updateTime(t){return new Dw(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Pw(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class Rw{}function Mw(t,e,n){t instanceof Vw?function(t,e,n){const r=t.value.clone(),i=zw(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof qw?function(t,e,n){if(!Pw(t.precondition,e))return void e.convertToUnknownDocument(n.version);const r=zw(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Bw(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Lw(t,e,n){t instanceof Vw?function(t,e,n){if(!Pw(t.precondition,e))return;const r=t.value.clone(),i=$w(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Uw(e),r).setHasLocalMutations()}(t,e,n):t instanceof qw?function(t,e,n){if(!Pw(t.precondition,e))return;const r=$w(t.fieldTransforms,n,e),i=e.data;i.setAll(Bw(t)),i.setAll(r),e.convertToFoundDocument(Uw(e),i).setHasLocalMutations()}(t,e,n):function(t,e){Pw(t.precondition,e)&&e.convertToNoDocument(Wv.min())}(t,e)}function Fw(t,e){let n=null;for(const r of t.fieldTransforms){const t=e.data.field(r.field),i=bw(r.transform,t||null);null!=i&&(null==n&&(n=A_.empty()),n.set(r.field,i))}return n||null}function jw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Gv(t,e,(t,e)=>function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ew&&e instanceof Ew||t instanceof Sw&&e instanceof Sw?Gv(t.elements,e.elements,m_):t instanceof Iw&&e instanceof Iw?m_(t.N,e.N):t instanceof xw&&e instanceof xw}(t.transform,e.transform)}(t,e))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Uw(t){return t.isFoundDocument()?t.version:Wv.min()}class Vw extends Rw{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}}class qw extends Rw{constructor(t,e,n,r,i=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function Bw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function zw(t,e,n){const r=new Map;Cv(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,ww(o,a,n[i]))}return r}function $w(t,e,n){const r=new Map;for(const i of t){const t=i.transform,s=n.data.field(i.field);r.set(i.field,_w(t,s,e))}return r}class Gw extends Rw{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class Zw extends Rw{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class Hw{constructor(t){this.count=t}}var Ww,Kw;function Yw(t){switch(t){default:return Iv();case Ov.CANCELLED:case Ov.UNKNOWN:case Ov.DEADLINE_EXCEEDED:case Ov.RESOURCE_EXHAUSTED:case Ov.INTERNAL:case Ov.UNAVAILABLE:case Ov.UNAUTHENTICATED:return!1;case Ov.INVALID_ARGUMENT:case Ov.NOT_FOUND:case Ov.ALREADY_EXISTS:case Ov.PERMISSION_DENIED:case Ov.FAILED_PRECONDITION:case Ov.ABORTED:case Ov.OUT_OF_RANGE:case Ov.UNIMPLEMENTED:case Ov.DATA_LOSS:return!0}}function Qw(t){if(void 0===t)return Tv("GRPC error has no .code"),Ov.UNKNOWN;switch(t){case Ww.OK:return Ov.OK;case Ww.CANCELLED:return Ov.CANCELLED;case Ww.UNKNOWN:return Ov.UNKNOWN;case Ww.DEADLINE_EXCEEDED:return Ov.DEADLINE_EXCEEDED;case Ww.RESOURCE_EXHAUSTED:return Ov.RESOURCE_EXHAUSTED;case Ww.INTERNAL:return Ov.INTERNAL;case Ww.UNAVAILABLE:return Ov.UNAVAILABLE;case Ww.UNAUTHENTICATED:return Ov.UNAUTHENTICATED;case Ww.INVALID_ARGUMENT:return Ov.INVALID_ARGUMENT;case Ww.NOT_FOUND:return Ov.NOT_FOUND;case Ww.ALREADY_EXISTS:return Ov.ALREADY_EXISTS;case Ww.PERMISSION_DENIED:return Ov.PERMISSION_DENIED;case Ww.FAILED_PRECONDITION:return Ov.FAILED_PRECONDITION;case Ww.ABORTED:return Ov.ABORTED;case Ww.OUT_OF_RANGE:return Ov.OUT_OF_RANGE;case Ww.UNIMPLEMENTED:return Ov.UNIMPLEMENTED;case Ww.DATA_LOSS:return Ov.DATA_LOSS;default:return Iv()}}(Kw=Ww||(Ww={}))[Kw.OK=0]="OK",Kw[Kw.CANCELLED=1]="CANCELLED",Kw[Kw.UNKNOWN=2]="UNKNOWN",Kw[Kw.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kw[Kw.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kw[Kw.NOT_FOUND=5]="NOT_FOUND",Kw[Kw.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kw[Kw.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kw[Kw.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kw[Kw.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kw[Kw.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kw[Kw.ABORTED=10]="ABORTED",Kw[Kw.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kw[Kw.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kw[Kw.INTERNAL=13]="INTERNAL",Kw[Kw.UNAVAILABLE=14]="UNAVAILABLE",Kw[Kw.DATA_LOSS=15]="DATA_LOSS";class Jw{constructor(t,e){this.comparator=t,this.root=e||tb.EMPTY}insert(t,e){return new Jw(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,tb.BLACK,null,null))}remove(t){return new Jw(this.comparator,this.root.remove(t,this.comparator).copy(null,null,tb.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){const t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Xw(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Xw(this.root,t,this.comparator,!1)}getReverseIterator(){return new Xw(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Xw(this.root,t,this.comparator,!0)}}class Xw{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class tb{constructor(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:tb.RED,this.left=null!=r?r:tb.EMPTY,this.right=null!=i?i:tb.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,i){return new tb(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const i=n(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return tb.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return tb.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,tb.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,tb.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Iv();if(this.right.isRed())throw Iv();const t=this.left.check();if(t!==this.right.check())throw Iv();return t+(this.isRed()?0:1)}}tb.EMPTY=null,tb.RED=!0,tb.BLACK=!1,tb.EMPTY=new class{constructor(){this.size=0}get key(){throw Iv()}get value(){throw Iv()}get color(){throw Iv()}get left(){throw Iv()}get right(){throw Iv()}copy(t,e,n,r,i){return this}insert(t,e,n){return new tb(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class eb{constructor(t){this.comparator=t,this.data=new Jw(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new nb(this.data.getIterator())}getIteratorFrom(t){return new nb(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(t=>{e=e.add(t)}),e}isEqual(t){if(!(t instanceof eb))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(0!==this.comparator(t,r))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new eb(this.comparator);return e.data=t,e}}class nb{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const rb=new Jw(p_.comparator);function ib(){return rb}const sb=new Jw(p_.comparator);function ob(){return sb}const ab=new Jw(p_.comparator);function ub(){return ab}const cb=new eb(p_.comparator);function lb(...t){let e=cb;for(const n of t)e=e.add(n);return e}const hb=new eb($v);function db(){return hb}class fb{constructor(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e){const n=new Map;return n.set(t,pb.createSynthesizedTargetChangeForCurrentChange(t,e)),new fb(Wv.min(),n,db(),ib(),lb())}}class pb{constructor(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e){return new pb(r_.EMPTY_BYTE_STRING,e,lb(),lb(),lb())}}class gb{constructor(t,e,n,r){this.$=t,this.removedTargetIds=e,this.key=n,this.F=r}}class mb{constructor(t,e){this.targetId=t,this.O=e}}class yb{constructor(t,e,n=r_.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class vb{constructor(){this.M=0,this.L=bb(),this.B=r_.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(t){t.approximateByteSize()>0&&(this.q=!0,this.B=t)}G(){let t=lb(),e=lb(),n=lb();return this.L.forEach((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Iv()}}),new pb(this.B,this.U,t,e,n)}H(){this.q=!1,this.L=bb()}J(t,e){this.q=!0,this.L=this.L.insert(t,e)}Y(t){this.q=!0,this.L=this.L.remove(t)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class _b{constructor(t){this.et=t,this.nt=new Map,this.st=ib(),this.it=wb(),this.rt=new eb($v)}ot(t){for(const e of t.$)t.F&&t.F.isFoundDocument()?this.at(e,t.F):this.ct(e,t.key,t.F);for(const e of t.removedTargetIds)this.ct(e,t.key,t.F)}ut(t){this.forEachTarget(t,e=>{const n=this.ht(e);switch(t.state){case 0:this.lt(e)&&n.W(t.resumeToken);break;case 1:n.Z(),n.K||n.H(),n.W(t.resumeToken);break;case 2:n.Z(),n.K||this.removeTarget(e);break;case 3:this.lt(e)&&(n.tt(),n.W(t.resumeToken));break;case 4:this.lt(e)&&(this.ft(e),n.W(t.resumeToken));break;default:Iv()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.nt.forEach((t,n)=>{this.lt(n)&&e(n)})}dt(t){const e=t.targetId,n=t.O.count,r=this.wt(e);if(r){const t=r.target;if(L_(t))if(0===n){const n=new p_(t.path);this.ct(e,n,N_.newNoDocument(n,Wv.min()))}else Cv(1===n);else this._t(e)!==n&&(this.ft(e),this.rt=this.rt.add(e))}}gt(t){const e=new Map;this.nt.forEach((n,r)=>{const i=this.wt(r);if(i){if(n.current&&L_(i.target)){const e=new p_(i.target.path);null!==this.st.get(e)||this.yt(r,e)||this.ct(r,e,N_.newNoDocument(e,t))}n.j&&(e.set(r,n.G()),n.H())}});let n=lb();this.it.forEach((t,e)=>{let r=!0;e.forEachWhile(t=>{const e=this.wt(t);return!e||2===e.purpose||(r=!1,!1)}),r&&(n=n.add(t))});const r=new fb(t,e,this.rt,this.st,n);return this.st=ib(),this.it=wb(),this.rt=new eb($v),r}at(t,e){if(!this.lt(t))return;const n=this.yt(t,e.key)?2:0;this.ht(t).J(e.key,n),this.st=this.st.insert(e.key,e),this.it=this.it.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,n){if(!this.lt(t))return;const r=this.ht(t);this.yt(t,e)?r.J(e,1):r.Y(e),this.it=this.it.insert(e,this.Tt(e).delete(t)),n&&(this.st=this.st.insert(e,n))}removeTarget(t){this.nt.delete(t)}_t(t){const e=this.ht(t).G();return this.et.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}X(t){this.ht(t).X()}ht(t){let e=this.nt.get(t);return e||(e=new vb,this.nt.set(t,e)),e}Tt(t){let e=this.it.get(t);return e||(e=new eb($v),this.it=this.it.insert(t,e)),e}lt(t){const e=null!==this.wt(t);return e||Ev("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.nt.get(t);return e&&e.K?null:this.et.Et(t)}ft(t){this.nt.set(t,new vb),this.et.getRemoteKeysForTarget(t).forEach(e=>{this.ct(t,e,null)})}yt(t,e){return this.et.getRemoteKeysForTarget(t).has(e)}}function wb(){return new Jw(p_.comparator)}function bb(){return new Jw(p_.comparator)}const xb={asc:"ASCENDING",desc:"DESCENDING"},Eb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Tb{constructor(t,e){this.databaseId=t,this.C=e}}function Sb(t,e){return t.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kb(t,e){return t.C?e.toBase64():e.toUint8Array()}function Ib(t,e){return Sb(t,e.toTimestamp())}function Cb(t){return Cv(!!t),Wv.fromTimestamp(function(t){const e=s_(t);return new Hv(e.seconds,e.nanos)}(t))}function Ab(t,e){return function(t){return new Xv(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Ob(t){const e=Xv.fromString(t);return Cv(tx(e)),e}function Nb(t,e){return Ab(t.databaseId,e.path)}function Db(t,e){const n=Ob(e);if(n.get(1)!==t.databaseId.projectId)throw new Nv(Ov.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Nv(Ov.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new p_(Lb(n))}function Pb(t,e){return Ab(t.databaseId,e)}function Rb(t){const e=Ob(t);return 4===e.length?Xv.emptyPath():Lb(e)}function Mb(t){return new Xv(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Lb(t){return Cv(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Fb(t,e,n){return{name:Nb(t,e),fields:n.value.mapValue.fields}}function jb(t,e,n){const r=Db(t,e.name),i=Cb(e.updateTime),s=new A_({mapValue:{fields:e.fields}}),o=N_.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Ub(t,e){let n;if(e instanceof Vw)n={update:Fb(t,e.key,e.value)};else if(e instanceof Gw)n={delete:Nb(t,e.key)};else if(e instanceof qw)n={update:Fb(t,e.key,e.data),updateMask:Xb(e.fieldMask)};else{if(!(e instanceof Zw))return Iv();n={verify:Nb(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(t=>function(t,e){const n=e.transform;if(n instanceof xw)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ew)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Sw)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Iw)return{fieldPath:e.field.canonicalString(),increment:n.N};throw Iv()}(0,t))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ib(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Iv()}(t,e.precondition)),n}function Vb(t,e){const n=e.currentDocument?function(t){return void 0!==t.updateTime?Dw.updateTime(Cb(t.updateTime)):void 0!==t.exists?Dw.exists(t.exists):Dw.none()}(e.currentDocument):Dw.none(),r=e.updateTransforms?e.updateTransforms.map(e=>function(t,e){let n=null;"setToServerValue"in e?(Cv("REQUEST_TIME"===e.setToServerValue),n=new xw):"appendMissingElements"in e?n=new Ew(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Sw(e.removeAllFromArray.values||[]):"increment"in e?n=new Iw(t,e.increment):Iv();const r=e_.fromServerFormat(e.fieldPath);return new Ow(r,n)}(t,e)):[];if(e.update){const i=Db(t,e.update.name),s=new A_({mapValue:{fields:e.update.fields}});if(e.updateMask){const t=function(t){return new n_((t.fieldPaths||[]).map(t=>e_.fromServerFormat(t)))}(e.updateMask);return new qw(i,s,t,n,r)}return new Vw(i,s,n,r)}if(e.delete){const r=Db(t,e.delete);return new Gw(r,n)}if(e.verify){const r=Db(t,e.verify);return new Zw(r,n)}return Iv()}function qb(t,e){return{documents:[Pb(t,e.path)]}}function Bb(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Pb(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Pb(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(t){if(0===t.length)return;const e=t.map(t=>function(t){if("=="===t.op){if(k_(t.value))return{unaryFilter:{field:Kb(t.field),op:"IS_NAN"}};if(S_(t.value))return{unaryFilter:{field:Kb(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(k_(t.value))return{unaryFilter:{field:Kb(t.field),op:"IS_NOT_NAN"}};if(S_(t.value))return{unaryFilter:{field:Kb(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kb(t.field),op:Wb(t.op),value:t.value}}}(t));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}(e.filters);i&&(n.structuredQuery.where=i);const s=function(t){if(0!==t.length)return t.map(t=>function(t){return{field:Kb(t.field),direction:Hb(t.dir)}}(t))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(t,e){return t.C||h_(e)?e:{value:e}}(t,e.limit);return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=Gb(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Gb(e.endAt)),n}function zb(t){let e=Rb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Cv(1===r);const t=n.from[0];t.allDescendants?i=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=$b(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(t=>function(t){return new W_(Yb(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,h_(e)?null:e}(n.limit));let u=null;n.startAt&&(u=Zb(n.startAt));let c=null;return n.endAt&&(c=Zb(n.endAt)),X_(e,i,o,s,a,"F",u,c)}function $b(t){return t?void 0!==t.unaryFilter?[Jb(t)]:void 0!==t.fieldFilter?[Qb(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(t=>$b(t)).reduce((t,e)=>t.concat(e)):Iv():[]}function Gb(t){return{before:t.before,values:t.position}}function Zb(t){return new Z_(t.values||[],!!t.before)}function Hb(t){return xb[t]}function Wb(t){return Eb[t]}function Kb(t){return{fieldPath:t.canonicalString()}}function Yb(t){return e_.fromServerFormat(t.fieldPath)}function Qb(t){return F_.create(Yb(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Iv()}}(t.fieldFilter.op),t.fieldFilter.value)}function Jb(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Yb(t.unaryFilter.field);return F_.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Yb(t.unaryFilter.field);return F_.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Yb(t.unaryFilter.field);return F_.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Yb(t.unaryFilter.field);return F_.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Iv()}}function Xb(t){const e=[];return t.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function tx(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function ex(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=rx(e)),e=nx(t.get(n),e);return rx(e)}function nx(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const e=t.charAt(i);switch(e){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=e}}return n}function rx(t){return t+"\x01\x01"}function ix(t){const e=t.length;if(Cv(e>=2),2===e)return Cv("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Xv.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const e=t.indexOf("\x01",s);switch((e<0||e>n)&&Iv(),t.charAt(e+1)){case"\x01":const n=t.substring(s,e);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=t.substring(s,e),i+="\0";break;case"\x11":i+=t.substring(s,e+1);break;default:Iv()}s=e+2}return new Xv(r)}class sx{constructor(t,e){this.seconds=t,this.nanoseconds=e}}class ox{constructor(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}}ox.store="owner",ox.key="owner";class ax{constructor(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}}ax.store="mutationQueues",ax.keyPath="userId";class ux{constructor(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}ux.store="mutations",ux.keyPath="batchId",ux.userMutationsIndex="userMutationsIndex",ux.userMutationsKeyPath=["userId","batchId"];class cx{constructor(){}static prefixForUser(t){return[t]}static prefixForPath(t,e){return[t,ex(e)]}static key(t,e,n){return[t,ex(e),n]}}cx.store="documentMutations",cx.PLACEHOLDER=new cx;class lx{constructor(t,e){this.path=t,this.readTime=e}}class hx{constructor(t,e){this.path=t,this.version=e}}class dx{constructor(t,e,n,r,i,s){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}}dx.store="remoteDocuments",dx.readTimeIndex="readTimeIndex",dx.readTimeIndexPath="readTime",dx.collectionReadTimeIndex="collectionReadTimeIndex",dx.collectionReadTimeIndexPath=["parentPath","readTime"];class fx{constructor(t){this.byteSize=t}}fx.store="remoteDocumentGlobal",fx.key="remoteDocumentGlobalKey";class px{constructor(t,e,n,r,i,s,o){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}}px.store="targets",px.keyPath="targetId",px.queryTargetsIndexName="queryTargetsIndex",px.queryTargetsKeyPath=["canonicalId","targetId"];class gx{constructor(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n}}gx.store="targetDocuments",gx.keyPath=["targetId","path"],gx.documentTargetsIndex="documentTargetsIndex",gx.documentTargetsKeyPath=["path","targetId"];class mx{constructor(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}mx.key="targetGlobalKey",mx.store="targetGlobal";class yx{constructor(t,e){this.collectionId=t,this.parent=e}}yx.store="collectionParents",yx.keyPath=["collectionId","parent"];class vx{constructor(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}}vx.store="clientMetadata",vx.keyPath="clientId";class _x{constructor(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}}_x.store="bundles",_x.keyPath="bundleId";class wx{constructor(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}}wx.store="namedQueries",wx.keyPath="name";const bx=[ax.store,ux.store,cx.store,dx.store,px.store,ox.store,mx.store,gx.store,vx.store,fx.store,yx.store,_x.store,wx.store],xx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ex{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}class Tx{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Iv(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Tx((n,r)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,r)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof Tx?e:Tx.resolve(e)}catch(t){return Tx.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):Tx.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):Tx.reject(e)}static resolve(t){return new Tx((e,n)=>{e(t)})}static reject(t){return new Tx((e,n)=>{n(t)})}static waitFor(t){return new Tx((e,n)=>{let r=0,i=0,s=!1;t.forEach(t=>{++r,t.next(()=>{++i,s&&i===r&&e()},t=>n(t))}),s=!0,i===r&&e()})}static or(t){let e=Tx.resolve(!1);for(const n of t)e=e.next(t=>t?Tx.resolve(t):n());return e}static forEach(t,e){const n=[];return t.forEach((t,r)=>{n.push(e.call(this,t,r))}),this.waitFor(n)}}class Sx{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.It=new Dv,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{e.error?this.It.reject(new Cx(t,e.error)):this.It.resolve()},this.transaction.onerror=e=>{const n=Px(e.target.error);this.It.reject(new Cx(t,n))}}static open(t,e,n,r){try{return new Sx(e,t.transaction(r,n))}catch(t){throw new Cx(e,t)}}get At(){return this.It.promise}abort(t){t&&this.It.reject(t),this.aborted||(Ev("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(t){const e=this.transaction.objectStore(t);return new Ox(e)}}class kx{constructor(t,e,n){this.name=t,this.version=e,this.Rt=n,12.2===kx.Pt((0,hp.z$)())&&Tv("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Ev("SimpleDb","Removing database:",t),Nx(window.indexedDB.deleteDatabase(t)).toPromise()}static bt(){if(!(0,hp.hl)())return!1;if(kx.vt())return!0;const t=(0,hp.z$)(),e=kx.Pt(t),n=0<e&&e<10,r=kx.Vt(t),i=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||i)}static vt(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.St)}static Dt(t,e){return t.store(e)}static Pt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static Vt(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}Ct(t){var e=this;return(0,ap.Z)(function*(){return e.db||(Ev("SimpleDb","Opening database:",e.name),e.db=yield new Promise((n,r)=>{const i=indexedDB.open(e.name,e.version);i.onsuccess=t=>{n(t.target.result)},i.onblocked=()=>{r(new Cx(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=e=>{const n=e.target.error;r("VersionError"===n.name?new Nv(Ov.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new Nv(Ov.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new Cx(t,n))},i.onupgradeneeded=t=>{Ev("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',t.oldVersion),e.Rt.Nt(t.target.result,i.transaction,t.oldVersion,e.version).next(()=>{Ev("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.kt&&(e.db.onversionchange=t=>e.kt(t)),e.db})()}xt(t){this.kt=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,n,r){var i=this;return(0,ap.Z)(function*(){const s="readonly"===e;let o=0;for(;;){++o;try{i.db=yield i.Ct(t);const e=Sx.open(i.db,t,s?"readonly":"readwrite",n),o=r(e).catch(t=>(e.abort(t),Tx.reject(t))).toPromise();return o.catch(()=>{}),yield e.At,o}catch(t){const n="FirebaseError"!==t.name&&o<3;if(Ev("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),i.close(),!n)return Promise.reject(t)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ix{constructor(t){this.$t=t,this.Ft=!1,this.Ot=null}get isDone(){return this.Ft}get Mt(){return this.Ot}set cursor(t){this.$t=t}done(){this.Ft=!0}Lt(t){this.Ot=t}delete(){return Nx(this.$t.delete())}}class Cx extends Nv{constructor(t,e){super(Ov.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Ax(t){return"IndexedDbTransactionError"===t.name}class Ox{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(Ev("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ev("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Nx(n)}add(t){return Ev("SimpleDb","ADD",this.store.name,t,t),Nx(this.store.add(t))}get(t){return Nx(this.store.get(t)).next(e=>(void 0===e&&(e=null),Ev("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Ev("SimpleDb","DELETE",this.store.name,t),Nx(this.store.delete(t))}count(){return Ev("SimpleDb","COUNT",this.store.name),Nx(this.store.count())}Bt(t,e){const n=this.cursor(this.options(t,e)),r=[];return this.Ut(n,(t,e)=>{r.push(e)}).next(()=>r)}qt(t,e){Ev("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.Kt=!1;const r=this.cursor(n);return this.Ut(r,(t,e,n)=>n.delete())}jt(t,e){let n;e?n=t:(n={},e=t);const r=this.cursor(n);return this.Ut(r,e)}Qt(t){const e=this.cursor({});return new Tx((n,r)=>{e.onerror=t=>{const e=Px(t.target.error);r(e)},e.onsuccess=e=>{const r=e.target.result;r?t(r.primaryKey,r.value).next(t=>{t?r.continue():n()}):n()}})}Ut(t,e){const n=[];return new Tx((r,i)=>{t.onerror=t=>{i(t.target.error)},t.onsuccess=t=>{const i=t.target.result;if(!i)return void r();const s=new Ix(i),o=e(i.primaryKey,i.value,s);if(o instanceof Tx){const t=o.catch(t=>(s.done(),Tx.reject(t)));n.push(t)}s.isDone?r():null===s.Mt?i.continue():i.continue(s.Mt)}}).next(()=>Tx.waitFor(n))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.Kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Nx(t){return new Tx((e,n)=>{t.onsuccess=t=>{e(t.target.result)},t.onerror=t=>{const e=Px(t.target.error);n(e)}})}let Dx=!1;function Px(t){const e=kx.Pt((0,hp.z$)());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new Nv("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Dx||(Dx=!0,setTimeout(()=>{throw t},0)),t}}return t}class Rx extends Ex{constructor(t,e){super(),this.Wt=t,this.currentSequenceNumber=e}}function Mx(t,e){const n=Av(t);return kx.Dt(n.Wt,e)}class Lx{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const e=this.mutations[r];e.key.isEqual(t.key)&&Mw(e,t,n[r])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&Lw(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&Lw(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(e=>{const n=t.get(e.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(Wv.min())})}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),lb())}isEqual(t){return this.batchId===t.batchId&&Gv(this.mutations,t.mutations,(t,e)=>jw(t,e))&&Gv(this.baseMutations,t.baseMutations,(t,e)=>jw(t,e))}}class Fx{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){Cv(t.mutations.length===n.length);let r=ub();const i=t.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Fx(t,e,n,r)}}class jx{constructor(t,e,n,r,i=Wv.min(),s=Wv.min(),o=r_.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(t){return new jx(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new jx(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new jx(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class Ux{constructor(t){this.Gt=t}}function Vx(t,e){if(e.document)return jb(t.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=p_.fromSegments(e.noDocument.path),n=Gx(e.noDocument.readTime),r=N_.newNoDocument(t,n);return e.hasCommittedMutations?r.setHasCommittedMutations():r}if(e.unknownDocument){const t=p_.fromSegments(e.unknownDocument.path),n=Gx(e.unknownDocument.version);return N_.newUnknownDocument(t,n)}return Iv()}function qx(t,e,n){const r=Bx(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){const n=function(t,e){return{name:Nb(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Sb(t,e.version.toTimestamp())}}(t.Gt,e);return new dx(null,null,n,e.hasCommittedMutations,r,i)}if(e.isNoDocument()){const t=e.key.path.toArray(),n=$x(e.version),s=e.hasCommittedMutations;return new dx(null,new lx(t,n),null,s,r,i)}if(e.isUnknownDocument()){const t=e.key.path.toArray(),n=$x(e.version);return new dx(new hx(t,n),null,null,!0,r,i)}return Iv()}function Bx(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function zx(t){const e=new Hv(t[0],t[1]);return Wv.fromTimestamp(e)}function $x(t){const e=t.toTimestamp();return new sx(e.seconds,e.nanoseconds)}function Gx(t){const e=new Hv(t.seconds,t.nanoseconds);return Wv.fromTimestamp(e)}function Zx(t,e){const n=(e.baseMutations||[]).map(e=>Vb(t.Gt,e));for(let s=0;s<e.mutations.length-1;++s){const t=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(t.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(e=>Vb(t.Gt,e)),i=Hv.fromMillis(e.localWriteTimeMs);return new Lx(e.batchId,i,n,r)}function Hx(t){const e=Gx(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Gx(t.lastLimboFreeSnapshotVersion):Wv.min();let r;var i;return void 0!==t.query.documents?(Cv(1===(i=t.query).documents.length),r=aw(tw(Rb(i.documents[0])))):r=function(t){return aw(zb(t))}(t.query),new jx(r,t.targetId,0,t.lastListenSequenceNumber,e,n,r_.fromBase64String(t.resumeToken))}function Wx(t,e){const n=$x(e.snapshotVersion),r=$x(e.lastLimboFreeSnapshotVersion);let i;i=L_(e.target)?qb(t.Gt,e.target):Bb(t.Gt,e.target);const s=e.resumeToken.toBase64();return new px(e.targetId,R_(e.target),n,s,e.sequenceNumber,r,i)}function Kx(t){const e=zb({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?uw(e,e.limit,"L"):e}class Yx{getBundleMetadata(t,e){return Qx(t).get(e).next(t=>{if(t)return{id:(e=t).bundleId,createTime:Gx(e.createTime),version:e.version};var e})}saveBundleMetadata(t,e){return Qx(t).put({bundleId:(n=e).id,createTime:$x(Cb(n.createTime)),version:n.version});var n}getNamedQuery(t,e){return Jx(t).get(e).next(t=>{if(t)return{name:(e=t).name,query:Kx(e.bundledQuery),readTime:Gx(e.readTime)};var e})}saveNamedQuery(t,e){return Jx(t).put(function(t){return{name:t.name,readTime:$x(Cb(t.readTime)),bundledQuery:t.bundledQuery}}(e))}}function Qx(t){return Mx(t,_x.store)}function Jx(t){return Mx(t,wx.store)}class Xx{constructor(){this.zt=new tE}addToCollectionParentIndex(t,e){return this.zt.add(e),Tx.resolve()}getCollectionParents(t,e){return Tx.resolve(this.zt.getEntries(e))}}class tE{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new eb(Xv.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new eb(Xv.comparator)).toArray()}}class eE{constructor(){this.Ht=new tE}addToCollectionParentIndex(t,e){if(!this.Ht.has(e)){const n=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.Ht.add(e)});const i={collectionId:n,parent:ex(r)};return nE(t).put(i)}return Tx.resolve()}getCollectionParents(t,e){const n=[],r=IDBKeyRange.bound([e,""],[Zv(e),""],!1,!0);return nE(t).Bt(r).next(t=>{for(const r of t){if(r.collectionId!==e)break;n.push(ix(r.parent))}return n})}}function nE(t){return Mx(t,yx.store)}const rE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class iE{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new iE(t,iE.DEFAULT_COLLECTION_PERCENTILE,iE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function sE(t,e,n){const r=t.store(ux.store),i=t.store(cx.store),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.jt({range:o},(t,e,n)=>(a++,n.delete()));s.push(u.next(()=>{Cv(1===a)}));const c=[];for(const l of n.mutations){const t=cx.key(e,l.key.path,n.batchId);s.push(i.delete(t)),c.push(l.key)}return Tx.waitFor(s).next(()=>c)}function oE(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Iv();e=t.noDocument}return JSON.stringify(e).length}iE.DEFAULT_COLLECTION_PERCENTILE=10,iE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,iE.DEFAULT=new iE(41943040,iE.DEFAULT_COLLECTION_PERCENTILE,iE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),iE.DISABLED=new iE(-1,0,0);class aE{constructor(t,e,n,r){this.userId=t,this.k=e,this.Jt=n,this.referenceDelegate=r,this.Yt={}}static Xt(t,e,n,r){Cv(""!==t.uid);const i=t.isAuthenticated()?t.uid:"";return new aE(i,e,n,r)}checkEmpty(t){let e=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cE(t).jt({index:ux.userMutationsIndex,range:n},(t,n,r)=>{e=!1,r.done()}).next(()=>e)}addMutationBatch(t,e,n,r){const i=lE(t),s=cE(t);return s.add({}).next(o=>{Cv("number"==typeof o);const a=new Lx(o,e,n,r),u=function(t,e,n){const r=n.baseMutations.map(e=>Ub(t.Gt,e)),i=n.mutations.map(e=>Ub(t.Gt,e));return new ux(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(this.k,this.userId,a),c=[];let l=new eb((t,e)=>$v(t.canonicalString(),e.canonicalString()));for(const t of r){const e=cx.key(this.userId,t.key.path,o);l=l.add(t.key.path.popLast()),c.push(s.put(u)),c.push(i.put(e,cx.PLACEHOLDER))}return l.forEach(e=>{c.push(this.Jt.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(()=>{this.Yt[o]=a.keys()}),Tx.waitFor(c).next(()=>a)})}lookupMutationBatch(t,e){return cE(t).get(e).next(t=>t?(Cv(t.userId===this.userId),Zx(this.k,t)):null)}Zt(t,e){return this.Yt[e]?Tx.resolve(this.Yt[e]):this.lookupMutationBatch(t,e).next(t=>{if(t){const n=t.keys();return this.Yt[e]=n,n}return null})}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return cE(t).jt({index:ux.userMutationsIndex,range:r},(t,e,r)=>{e.userId===this.userId&&(Cv(e.batchId>=n),i=Zx(this.k,e)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return cE(t).jt({index:ux.userMutationsIndex,range:e,reverse:!0},(t,e,r)=>{n=e.batchId,r.done()}).next(()=>n)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cE(t).Bt(ux.userMutationsIndex,e).next(t=>t.map(t=>Zx(this.k,t)))}getAllMutationBatchesAffectingDocumentKey(t,e){const n=cx.prefixForPath(this.userId,e.path),r=IDBKeyRange.lowerBound(n),i=[];return lE(t).jt({range:r},(n,r,s)=>{const[o,a,u]=n,c=ix(a);if(o===this.userId&&e.path.isEqual(c))return cE(t).get(u).next(t=>{if(!t)throw Iv();Cv(t.userId===this.userId),i.push(Zx(this.k,t))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new eb($v);const r=[];return e.forEach(e=>{const i=cx.prefixForPath(this.userId,e.path),s=IDBKeyRange.lowerBound(i),o=lE(t).jt({range:s},(t,r,i)=>{const[s,o,a]=t,u=ix(o);s===this.userId&&e.path.isEqual(u)?n=n.add(a):i.done()});r.push(o)}),Tx.waitFor(r).next(()=>this.te(t,n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1,i=cx.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new eb($v);return lE(t).jt({range:s},(t,e,i)=>{const[s,a,u]=t,c=ix(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(u)):i.done()}).next(()=>this.te(t,o))}te(t,e){const n=[],r=[];return e.forEach(e=>{r.push(cE(t).get(e).next(t=>{if(null===t)throw Iv();Cv(t.userId===this.userId),n.push(Zx(this.k,t))}))}),Tx.waitFor(r).next(()=>n)}removeMutationBatch(t,e){return sE(t.Wt,this.userId,e).next(n=>(t.addOnCommittedListener(()=>{this.ee(e.batchId)}),Tx.forEach(n,e=>this.referenceDelegate.markPotentiallyOrphaned(t,e))))}ee(t){delete this.Yt[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return Tx.resolve();const n=IDBKeyRange.lowerBound(cx.prefixForUser(this.userId)),r=[];return lE(t).jt({range:n},(t,e,n)=>{if(t[0]===this.userId){const e=ix(t[1]);r.push(e)}else n.done()}).next(()=>{Cv(0===r.length)})})}containsKey(t,e){return uE(t,this.userId,e)}ne(t){return hE(t).get(this.userId).next(t=>t||new ax(this.userId,-1,""))}}function uE(t,e,n){const r=cx.prefixForPath(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return lE(t).jt({range:s,Kt:!0},(t,n,r)=>{const[s,a,u]=t;s===e&&a===i&&(o=!0),r.done()}).next(()=>o)}function cE(t){return Mx(t,ux.store)}function lE(t){return Mx(t,cx.store)}function hE(t){return Mx(t,ax.store)}class dE{constructor(t){this.se=t}next(){return this.se+=2,this.se}static ie(){return new dE(0)}static re(){return new dE(-1)}}class fE{constructor(t,e){this.referenceDelegate=t,this.k=e}allocateTargetId(t){return this.oe(t).next(e=>{const n=new dE(e.highestTargetId);return e.highestTargetId=n.next(),this.ae(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.oe(t).next(t=>Wv.fromTimestamp(new Hv(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.oe(t).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(t,e,n){return this.oe(t).next(r=>(r.highestListenSequenceNumber=e,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.ae(t,r)))}addTargetData(t,e){return this.ce(t,e).next(()=>this.oe(t).next(n=>(n.targetCount+=1,this.ue(e,n),this.ae(t,n))))}updateTargetData(t,e){return this.ce(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>pE(t).delete(e.targetId)).next(()=>this.oe(t)).next(e=>(Cv(e.targetCount>0),e.targetCount-=1,this.ae(t,e)))}removeTargets(t,e,n){let r=0;const i=[];return pE(t).jt((s,o)=>{const a=Hx(o);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(t,a)))}).next(()=>Tx.waitFor(i)).next(()=>r)}forEachTarget(t,e){return pE(t).jt((t,n)=>{const r=Hx(n);e(r)})}oe(t){return gE(t).get(mx.key).next(t=>(Cv(null!==t),t))}ae(t,e){return gE(t).put(mx.key,e)}ce(t,e){return pE(t).put(Wx(this.k,e))}ue(t,e){let n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.oe(t).next(t=>t.targetCount)}getTargetData(t,e){const n=R_(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return pE(t).jt({range:r,index:px.queryTargetsIndexName},(t,n,r)=>{const s=Hx(n);M_(e,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(t,e,n){const r=[],i=mE(t);return e.forEach(e=>{const s=ex(e.path);r.push(i.put(new gx(n,s))),r.push(this.referenceDelegate.addReference(t,n,e))}),Tx.waitFor(r)}removeMatchingKeys(t,e,n){const r=mE(t);return Tx.forEach(e,e=>{const i=ex(e.path);return Tx.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(t,n,e)])})}removeMatchingKeysForTargetId(t,e){const n=mE(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(t,e){const n=IDBKeyRange.bound([e],[e+1],!1,!0),r=mE(t);let i=lb();return r.jt({range:n,Kt:!0},(t,e,n)=>{const r=ix(t[1]),s=new p_(r);i=i.add(s)}).next(()=>i)}containsKey(t,e){const n=ex(e.path),r=IDBKeyRange.bound([n],[Zv(n)],!1,!0);let i=0;return mE(t).jt({index:gx.documentTargetsIndex,Kt:!0,range:r},([t,e],n,r)=>{0!==t&&(i++,r.done())}).next(()=>i>0)}Et(t,e){return pE(t).get(e).next(t=>t?Hx(t):null)}}function pE(t){return Mx(t,px.store)}function gE(t){return Mx(t,mx.store)}function mE(t){return Mx(t,gx.store)}function yE(t){return vE.apply(this,arguments)}function vE(){return(vE=(0,ap.Z)(function*(t){if(t.code!==Ov.FAILED_PRECONDITION||t.message!==xx)throw t;Ev("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function _E([t,e],[n,r]){const i=$v(t,n);return 0===i?$v(e,r):i}class wE{constructor(t){this.he=t,this.buffer=new eb(_E),this.le=0}fe(){return++this.le}de(t){const e=[t,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();_E(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class bE{constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.we=!1,this._e=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(t)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(t){var e=this;const n=this.we?3e5:6e4;Ev("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,ap.Z)(function*(){e._e=null,e.we=!0;try{yield t.collectGarbage(e.garbageCollector)}catch(t){Ax(t)?Ev("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield yE(t)}yield e.me(t)}))}}class xE{constructor(t,e){this.ge=t,this.params=e}calculateTargetCount(t,e){return this.ge.ye(t).next(t=>Math.floor(e/100*t))}nthSequenceNumber(t,e){if(0===e)return Tx.resolve(qv.I);const n=new wE(e);return this.ge.forEachTarget(t,t=>n.de(t.sequenceNumber)).next(()=>this.ge.pe(t,t=>n.de(t))).next(()=>n.maxValue)}removeTargets(t,e,n){return this.ge.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.ge.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Ev("LruGarbageCollector","Garbage collection skipped; disabled"),Tx.resolve(rE)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ev("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rE):this.Te(t,e))}getCacheSize(t){return this.ge.getCacheSize(t)}Te(t,e){let n,r,i,s,o,a,u;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(e=>(e>this.params.maximumSequenceNumbersToCollect?(Ev("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),r=this.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),this.nthSequenceNumber(t,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(t,n,e))).next(e=>(i=e,a=Date.now(),this.removeOrphanedDocuments(t,n))).next(t=>(u=Date.now(),xv()<=lp.in.DEBUG&&Ev("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${t} documents in `+(u-a)+"ms\n"+`Total Duration: ${u-c}ms`),Tx.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})))}}class EE{constructor(t,e){this.db=t,this.garbageCollector=function(t,e){return new xE(t,e)}(this,e)}ye(t){const e=this.Ee(t);return this.db.getTargetCache().getTargetCount(t).next(t=>e.next(e=>t+e))}Ee(t){let e=0;return this.pe(t,t=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}pe(t,e){return this.Ie(t,(t,n)=>e(n))}addReference(t,e,n){return TE(t,n)}removeReference(t,e,n){return TE(t,n)}removeTargets(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)}markPotentiallyOrphaned(t,e){return TE(t,e)}Ae(t,e){return function(t,e){let n=!1;return hE(t).Qt(r=>uE(t,r,e).next(t=>(t&&(n=!0),Tx.resolve(!t)))).next(()=>n)}(t,e)}removeOrphanedDocuments(t,e){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Ie(t,(s,o)=>{if(o<=e){const e=this.Ae(t,s).next(e=>{if(!e)return i++,n.getEntry(t,s).next(()=>(n.removeEntry(s),mE(t).delete([0,ex(s.path)])))});r.push(e)}}).next(()=>Tx.waitFor(r)).next(()=>n.apply(t)).next(()=>i)}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,e){return TE(t,e)}Ie(t,e){const n=mE(t);let r,i=qv.I;return n.jt({index:gx.documentTargetsIndex},([t,n],{path:s,sequenceNumber:o})=>{0===t?(i!==qv.I&&e(new p_(ix(r)),i),i=o,r=s):i=qv.I}).next(()=>{i!==qv.I&&e(new p_(ix(r)),i)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function TE(t,e){return mE(t).put(function(t,e){return new gx(0,ex(t.path),e)}(e,t.currentSequenceNumber))}class SE{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,t))return i}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],t))return void(r[n]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1}forEach(t){Yv(this.inner,(e,n)=>{for(const[r,i]of n)t(r,i)})}isEmpty(){return Qv(this.inner)}}class kE{constructor(){this.changes=new SE(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}getReadTime(t){const e=this.changes.get(t);return e?e.readTime:Wv.min()}addEntry(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})}removeEntry(t,e=null){this.assertNotApplied(),this.changes.set(t,{document:N_.newInvalidDocument(t),readTime:e})}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Tx.resolve(n.document):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class IE{constructor(t,e){this.k=t,this.Jt=e}addEntry(t,e,n){return OE(t).put(NE(e),n)}removeEntry(t,e){const n=OE(t),r=NE(e);return n.delete(r)}updateMetadata(t,e){return this.getMetadata(t).next(n=>(n.byteSize+=e,this.Re(t,n)))}getEntry(t,e){return OE(t).get(NE(e)).next(t=>this.Pe(e,t))}be(t,e){return OE(t).get(NE(e)).next(t=>({document:this.Pe(e,t),size:oE(t)}))}getEntries(t,e){let n=ib();return this.ve(t,e,(t,e)=>{const r=this.Pe(t,e);n=n.insert(t,r)}).next(()=>n)}Ve(t,e){let n=ib(),r=new Jw(p_.comparator);return this.ve(t,e,(t,e)=>{const i=this.Pe(t,e);n=n.insert(t,i),r=r.insert(t,oE(e))}).next(()=>({documents:n,Se:r}))}ve(t,e,n){if(e.isEmpty())return Tx.resolve();const r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator();let s=i.getNext();return OE(t).jt({range:r},(t,e,r)=>{const o=p_.fromSegments(t);for(;s&&p_.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,e),s=i.hasNext()?i.getNext():null),s?r.Lt(s.path.toArray()):r.done()}).next(()=>{for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(t,e,n){let r=ib();const i=e.path.length+1,s={};if(n.isEqual(Wv.min())){const t=e.path.toArray();s.range=IDBKeyRange.lowerBound(t)}else{const t=e.path.toArray(),r=Bx(n);s.range=IDBKeyRange.lowerBound([t,r],!0),s.index=dx.collectionReadTimeIndex}return OE(t).jt(s,(t,n,s)=>{if(t.length!==i)return;const o=Vx(this.k,n);e.path.isPrefixOf(o.key.path)?dw(e,o)&&(r=r.insert(o.key,o)):s.done()}).next(()=>r)}newChangeBuffer(t){return new CE(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(t=>t.byteSize)}getMetadata(t){return AE(t).get(fx.key).next(t=>(Cv(!!t),t))}Re(t,e){return AE(t).put(fx.key,e)}Pe(t,e){if(e){const t=Vx(this.k,e);if(!t.isNoDocument()||!t.version.isEqual(Wv.min()))return t}return N_.newInvalidDocument(t)}}class CE extends kE{constructor(t,e){super(),this.De=t,this.trackRemovals=e,this.Ce=new SE(t=>t.toString(),(t,e)=>t.isEqual(e))}applyChanges(t){const e=[];let n=0,r=new eb((t,e)=>$v(t.canonicalString(),e.canonicalString()));return this.changes.forEach((i,s)=>{const o=this.Ce.get(i);if(s.document.isValidDocument()){const a=qx(this.De.k,s.document,this.getReadTime(i));r=r.add(i.path.popLast());const u=oE(a);n+=u-o,e.push(this.De.addEntry(t,i,a))}else if(n-=o,this.trackRemovals){const n=qx(this.De.k,N_.newNoDocument(i,Wv.min()),this.getReadTime(i));e.push(this.De.addEntry(t,i,n))}else e.push(this.De.removeEntry(t,i))}),r.forEach(n=>{e.push(this.De.Jt.addToCollectionParentIndex(t,n))}),e.push(this.De.updateMetadata(t,n)),Tx.waitFor(e)}getFromCache(t,e){return this.De.be(t,e).next(t=>(this.Ce.set(e,t.size),t.document))}getAllFromCache(t,e){return this.De.Ve(t,e).next(({documents:t,Se:e})=>(e.forEach((t,e)=>{this.Ce.set(t,e)}),t))}}function AE(t){return Mx(t,fx.store)}function OE(t){return Mx(t,dx.store)}function NE(t){return t.path.toArray()}class DE{constructor(t){this.k=t}Nt(t,e,n,r){Cv(n<r&&n>=0&&r<=11);const i=new Sx("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(ox.store)}(t),function(t){t.createObjectStore(ax.store,{keyPath:ax.keyPath}),t.createObjectStore(ux.store,{keyPath:ux.keyPath,autoIncrement:!0}).createIndex(ux.userMutationsIndex,ux.userMutationsKeyPath,{unique:!0}),t.createObjectStore(cx.store)}(t),PE(t),function(t){t.createObjectStore(dx.store)}(t));let s=Tx.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(gx.store),t.deleteObjectStore(px.store),t.deleteObjectStore(mx.store)}(t),PE(t)),s=s.next(()=>function(t){const e=t.store(mx.store),n=new mx(0,0,Wv.min().toTimestamp(),0);return e.put(mx.key,n)}(i))),n<4&&r>=4&&(0!==n&&(s=s.next(()=>function(t,e){return e.store(ux.store).Bt().next(n=>{t.deleteObjectStore(ux.store),t.createObjectStore(ux.store,{keyPath:ux.keyPath,autoIncrement:!0}).createIndex(ux.userMutationsIndex,ux.userMutationsKeyPath,{unique:!0});const r=e.store(ux.store),i=n.map(t=>r.put(t));return Tx.waitFor(i)})}(t,i))),s=s.next(()=>{!function(t){t.createObjectStore(vx.store,{keyPath:vx.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(()=>this.Ne(i))),n<6&&r>=6&&(s=s.next(()=>(function(t){t.createObjectStore(fx.store)}(t),this.ke(i)))),n<7&&r>=7&&(s=s.next(()=>this.xe(i))),n<8&&r>=8&&(s=s.next(()=>this.$e(t,i))),n<9&&r>=9&&(s=s.next(()=>{!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){const e=t.objectStore(dx.store);e.createIndex(dx.readTimeIndex,dx.readTimeIndexPath,{unique:!1}),e.createIndex(dx.collectionReadTimeIndex,dx.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(()=>this.Fe(i))),n<11&&r>=11&&(s=s.next(()=>{!function(t){t.createObjectStore(_x.store,{keyPath:_x.keyPath})}(t),function(t){t.createObjectStore(wx.store,{keyPath:wx.keyPath})}(t)})),s}ke(t){let e=0;return t.store(dx.store).jt((t,n)=>{e+=oE(n)}).next(()=>{const n=new fx(e);return t.store(fx.store).put(fx.key,n)})}Ne(t){const e=t.store(ax.store),n=t.store(ux.store);return e.Bt().next(e=>Tx.forEach(e,e=>{const r=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return n.Bt(ux.userMutationsIndex,r).next(n=>Tx.forEach(n,n=>{Cv(n.userId===e.userId);const r=Zx(this.k,n);return sE(t,e.userId,r).next(()=>{})}))}))}xe(t){const e=t.store(gx.store),n=t.store(dx.store);return t.store(mx.store).get(mx.key).next(t=>{const r=[];return n.jt((n,i)=>{const s=new Xv(n),o=function(t){return[0,ex(t)]}(s);r.push(e.get(o).next(n=>n?Tx.resolve():(n=>e.put(new gx(0,ex(n),t.highestListenSequenceNumber)))(s)))}).next(()=>Tx.waitFor(r))})}$e(t,e){t.createObjectStore(yx.store,{keyPath:yx.keyPath});const n=e.store(yx.store),r=new tE,i=t=>{if(r.add(t)){const e=t.lastSegment(),r=t.popLast();return n.put({collectionId:e,parent:ex(r)})}};return e.store(dx.store).jt({Kt:!0},(t,e)=>{const n=new Xv(t);return i(n.popLast())}).next(()=>e.store(cx.store).jt({Kt:!0},([t,e,n],r)=>{const s=ix(e);return i(s.popLast())}))}Fe(t){const e=t.store(px.store);return e.jt((t,n)=>{const r=Hx(n),i=Wx(this.k,r);return e.put(i)})}}function PE(t){t.createObjectStore(gx.store,{keyPath:gx.keyPath}).createIndex(gx.documentTargetsIndex,gx.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(px.store,{keyPath:px.keyPath}).createIndex(px.queryTargetsIndexName,px.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(mx.store)}const RE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ME{constructor(t,e,n,r,i,s,o,a,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Oe=i,this.window=s,this.document=o,this.Me=u,this.Le=c,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=t=>Promise.resolve(),!ME.bt())throw new Nv(Ov.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new EE(this,r),this.Ge=e+"main",this.k=new Ux(a),this.ze=new kx(this.Ge,11,new DE(this.k)),this.He=new fE(this.referenceDelegate,this.k),this.Jt=new eE,this.Je=function(t,e){return new IE(t,e)}(this.k,this.Jt),this.Ye=new Yx,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===c&&Tv("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Nv(Ov.FAILED_PRECONDITION,RE);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.He.getHighestSequenceNumber(t))}).then(t=>{this.Be=new qv(t,this.Me)}).then(()=>{this.Ue=!0}).catch(t=>(this.ze&&this.ze.close(),Promise.reject(t)))}sn(t){var e=this;return this.We=function(){var n=(0,ap.Z)(function*(n){if(e.started)return t(n)});return function(t){return n.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ze.xt(function(){var e=(0,ap.Z)(function*(e){null===e.newVersion&&(yield t())});return function(t){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Oe.enqueueAndForget((0,ap.Z)(function*(){e.started&&(yield e.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>FE(t).put(new vx(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(t).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(t)).next(e=>this.isPrimary&&!e?this.an(t).next(()=>!1):!!e&&this.cn(t).next(()=>!0))).catch(t=>{if(Ax(t))return Ev("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Ev("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Oe.enqueueRetryable(()=>this.We(t)),this.isPrimary=t})}rn(t){return LE(t).get(ox.key).next(t=>Tx.resolve(this.un(t)))}hn(t){return FE(t).delete(this.clientId)}ln(){var t=this;return(0,ap.Z)(function*(){if(t.isPrimary&&!t.fn(t.Qe,18e5)){t.Qe=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const n=Mx(e,vx.store);return n.Bt().next(e=>{const r=t.dn(e,18e5),i=e.filter(t=>-1===r.indexOf(t));return Tx.forEach(i,t=>n.delete(t.clientId)).next(()=>i)})}).catch(()=>[]);if(t.Xe)for(const n of e)t.Xe.removeItem(t.wn(n.clientId))}})()}nn(){this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(t){return!!t&&t.ownerId===this.clientId}on(t){return this.Le?Tx.resolve(!0):LE(t).get(ox.key).next(e=>{if(null!==e&&this.fn(e.leaseTimestampMs,5e3)&&!this._n(e.ownerId)){if(this.un(e)&&this.networkEnabled)return!0;if(!this.un(e)){if(!e.allowTabSynchronization)throw new Nv(Ov.FAILED_PRECONDITION,RE);return!1}}return!(!this.networkEnabled||!this.inForeground)||FE(t).Bt().next(t=>void 0===this.dn(t,5e3).find(t=>{if(this.clientId!==t.clientId){const e=!this.inForeground&&t.inForeground,n=this.networkEnabled===t.networkEnabled;if(!this.networkEnabled&&t.networkEnabled||e&&n)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ev("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var t=this;return(0,ap.Z)(function*(){t.Ue=!1,t.mn(),t.je&&(t.je.cancel(),t.je=null),t.gn(),t.yn(),yield t.ze.runTransaction("shutdown","readwrite",[ox.store,vx.store],e=>{const n=new Rx(e,qv.I);return t.an(n).next(()=>t.hn(n))}),t.ze.close(),t.pn()})()}dn(t,e){return t.filter(t=>this.fn(t.updateTimeMs,e)&&!this._n(t.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",t=>FE(t).Bt().next(t=>this.dn(t,18e5).map(t=>t.clientId)))}get started(){return this.Ue}getMutationQueue(t){return aE.Xt(t,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(t,e,n){let r;return Ev("IndexedDbPersistence","Starting transaction:",t),this.ze.runTransaction(t,"readonly"===e?"readonly":"readwrite",bx,i=>(r=new Rx(i,this.Be?this.Be.next():qv.I),"readwrite-primary"===e?this.rn(r).next(t=>!!t||this.on(r)).next(e=>{if(!e)throw Tv(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)),new Nv(Ov.FAILED_PRECONDITION,xx);return n(r)}).next(t=>this.cn(r).next(()=>t)):this.En(r).next(()=>n(r)))).then(t=>(r.raiseOnCommittedEvent(),t))}En(t){return LE(t).get(ox.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)&&!this.un(t)&&!(this.Le||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Nv(Ov.FAILED_PRECONDITION,RE)})}cn(t){const e=new ox(this.clientId,this.allowTabSynchronization,Date.now());return LE(t).put(ox.key,e)}static bt(){return kx.bt()}an(t){const e=LE(t);return e.get(ox.key).next(t=>this.un(t)?(Ev("IndexedDbPersistence","Releasing primary lease."),e.delete(ox.key)):Tx.resolve())}fn(t,e){const n=Date.now();return!(t<n-e||t>n&&(Tv(`Detected an update time that is in the future: ${t} > ${n}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.qe=()=>{this.mn(),(0,hp.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(t){var e;try{const n=null!==(null===(e=this.Xe)||void 0===e?void 0:e.getItem(this.wn(t)));return Ev("IndexedDbPersistence",`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(t){return Tv("IndexedDbPersistence","Failed to get zombied client id.",t),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(Sp){Tv("Failed to set zombie client id.",Sp)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(Sp){}}wn(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function LE(t){return Mx(t,ox.store)}function FE(t){return Mx(t,vx.store)}function jE(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class UE{constructor(t,e){this.progress=t,this.In=e}}class VE{constructor(t,e,n){this.Je=t,this.An=e,this.Jt=n}Rn(t,e){return this.An.getAllMutationBatchesAffectingDocumentKey(t,e).next(n=>this.Pn(t,e,n))}Pn(t,e,n){return this.Je.getEntry(t,e).next(t=>{for(const e of n)e.applyToLocalView(t);return t})}bn(t,e){t.forEach((t,n)=>{for(const r of e)r.applyToLocalView(n)})}vn(t,e){return this.Je.getEntries(t,e).next(e=>this.Vn(t,e).next(()=>e))}Vn(t,e){return this.An.getAllMutationBatchesAffectingDocumentKeys(t,e).next(t=>this.bn(e,t))}getDocumentsMatchingQuery(t,e,n){return function(t){return p_.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Sn(t,e.path):sw(e)?this.Dn(t,e,n):this.Cn(t,e,n)}Sn(t,e){return this.Rn(t,new p_(e)).next(t=>{let e=ob();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})}Dn(t,e,n){const r=e.collectionGroup;let i=ob();return this.Jt.getCollectionParents(t,r).next(s=>Tx.forEach(s,s=>{const o=function(t,e){return new J_(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(r));return this.Cn(t,o,n).next(t=>{t.forEach((t,e)=>{i=i.insert(t,e)})})}).next(()=>i))}Cn(t,e,n){let r,i;return this.Je.getDocumentsMatchingQuery(t,e,n).next(n=>(r=n,this.An.getAllMutationBatchesAffectingQuery(t,e))).next(e=>(i=e,this.Nn(t,i,r).next(t=>{r=t;for(const e of i)for(const t of e.mutations){const n=t.key;let i=r.get(n);null==i&&(i=N_.newInvalidDocument(n),r=r.insert(n,i)),Lw(t,i,e.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))).next(()=>(r.forEach((t,n)=>{dw(e,n)||(r=r.remove(t))}),r))}Nn(t,e,n){let r=lb();for(const s of e)for(const t of s.mutations)t instanceof qw&&null===n.get(t.key)&&(r=r.add(t.key));let i=n;return this.Je.getEntries(t,r).next(t=>(t.forEach((t,e)=>{e.isFoundDocument()&&(i=i.insert(t,e))}),i))}}class qE{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.kn=n,this.xn=r}static $n(t,e){let n=lb(),r=lb();for(const i of e.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new qE(t,e.fromCache,n,r)}}class BE{Fn(t){this.On=t}getDocumentsMatchingQuery(t,e,n,r){return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Wv.min())?this.Mn(t,e):this.On.vn(t,r).next(i=>{const s=this.Ln(e,i);return(ew(e)||nw(e))&&this.Bn(e.limitType,s,r,n)?this.Mn(t,e):(xv()<=lp.in.DEBUG&&Ev("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),hw(e)),this.On.getDocumentsMatchingQuery(t,e,n).next(t=>(s.forEach(e=>{t=t.insert(e.key,e)}),t)))})}Ln(t,e){let n=new eb(fw(t));return e.forEach((e,r)=>{dw(t,r)&&(n=n.add(r))}),n}Bn(t,e,n,r){if(n.size!==e.size)return!0;const i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Mn(t,e){return xv()<=lp.in.DEBUG&&Ev("QueryEngine","Using full collection scan to execute query:",hw(e)),this.On.getDocumentsMatchingQuery(t,e,Wv.min())}}class zE{constructor(t,e,n,r){this.persistence=t,this.Un=e,this.k=r,this.qn=new Jw($v),this.Kn=new SE(t=>R_(t),M_),this.jn=Wv.min(),this.An=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new VE(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.qn))}}function $E(t,e,n,r){return new zE(t,e,n,r)}function GE(t,e){return ZE.apply(this,arguments)}function ZE(){return(ZE=(0,ap.Z)(function*(t,e){const n=Av(t);let r=n.An,i=n.Wn;const s=yield n.persistence.runTransaction("Handle user change","readonly",t=>{let s;return n.An.getAllMutationBatches(t).next(o=>(s=o,r=n.persistence.getMutationQueue(e),i=new VE(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t))).next(e=>{const n=[],r=[];let o=lb();for(const t of s){n.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return i.vn(t,o).next(t=>({Gn:t,removedBatchIds:n,addedBatchIds:r}))})});return n.An=r,n.Wn=i,n.Un.Fn(n.Wn),s})).apply(this,arguments)}function HE(t,e){const n=Av(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",t=>{const r=e.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){const i=n.batch,s=i.keys();let o=Tx.resolve();return s.forEach(t=>{o=o.next(()=>r.getEntry(e,t)).next(e=>{const s=n.docVersions.get(t);Cv(null!==s),e.version.compareTo(s)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),o.next(()=>t.An.removeMutationBatch(e,i))}(n,t,e,i).next(()=>i.apply(t)).next(()=>n.An.performConsistencyCheck(t)).next(()=>n.Wn.vn(t,r))})}function WE(t){const e=Av(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.He.getLastRemoteSnapshotVersion(t))}function KE(t,e){const n=Av(t),r=e.snapshotVersion;let i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",t=>{const s=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;const o=[];e.targetChanges.forEach((e,s)=>{const a=i.get(s);if(!a)return;o.push(n.He.removeMatchingKeys(t,e.removedDocuments,s).next(()=>n.He.addMatchingKeys(t,e.addedDocuments,s)));const u=e.resumeToken;if(u.approximateByteSize()>0){const c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(s,c),function(t,e,n){return Cv(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&o.push(n.He.updateTargetData(t,c))}});let a=ib();if(e.documentUpdates.forEach((r,i)=>{e.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),o.push(YE(t,s,e.documentUpdates,r,void 0).next(t=>{a=t})),!r.isEqual(Wv.min())){const e=n.He.getLastRemoteSnapshotVersion(t).next(e=>n.He.setTargetsMetadata(t,t.currentSequenceNumber,r));o.push(e)}return Tx.waitFor(o).next(()=>s.apply(t)).next(()=>n.Wn.Vn(t,a)).next(()=>a)}).then(t=>(n.qn=i,t))}function YE(t,e,n,r,i){let s=lb();return n.forEach(t=>s=s.add(t)),e.getEntries(t,s).next(t=>{let s=ib();return n.forEach((n,o)=>{const a=t.get(n),u=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(Wv.min())?(e.removeEntry(n,u),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o,u),s=s.insert(n,o)):Ev("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function QE(t,e){const n=Av(t);return n.persistence.runTransaction("Get next mutation batch","readonly",t=>(void 0===e&&(e=-1),n.An.getNextMutationBatchAfterBatchId(t,e)))}function JE(t,e){const n=Av(t);return n.persistence.runTransaction("Allocate target","readwrite",t=>{let r;return n.He.getTargetData(t,e).next(i=>i?(r=i,Tx.resolve(r)):n.He.allocateTargetId(t).next(i=>(r=new jx(e,i,0,t.currentSequenceNumber),n.He.addTargetData(t,r).next(()=>r))))}).then(t=>{const r=n.qn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(t.targetId,t),n.Kn.set(e,t.targetId)),t})}function XE(t,e,n){return tT.apply(this,arguments)}function tT(){return(tT=(0,ap.Z)(function*(t,e,n){const r=Av(t),i=r.qn.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,t=>r.persistence.referenceDelegate.removeTarget(t,i)))}catch(t){if(!Ax(t))throw t;Ev("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}r.qn=r.qn.remove(e),r.Kn.delete(i.target)})).apply(this,arguments)}function eT(t,e,n){const r=Av(t);let i=Wv.min(),s=lb();return r.persistence.runTransaction("Execute query","readonly",t=>function(t,e,n){const r=Av(t),i=r.Kn.get(n);return void 0!==i?Tx.resolve(r.qn.get(i)):r.He.getTargetData(e,n)}(r,t,aw(e)).next(e=>{if(e)return i=e.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(t,e.targetId).next(t=>{s=t})}).next(()=>r.Un.getDocumentsMatchingQuery(t,e,n?i:Wv.min(),n?s:lb())).next(t=>({documents:t,zn:s})))}function nT(t,e){const n=Av(t),r=Av(n.He),i=n.qn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",t=>r.Et(t,e).next(t=>t?t.target:null))}function rT(t){const e=Av(t);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(t,e,n){const r=Av(t);let i=ib(),s=Bx(n);const o=OE(e),a=IDBKeyRange.lowerBound(s,!0);return o.jt({index:dx.readTimeIndex,range:a},(t,e)=>{const n=Vx(r.k,e);i=i.insert(n.key,n),s=e.readTime}).next(()=>({In:i,readTime:zx(s)}))}(e.Qn,t,e.jn)).then(({In:t,readTime:n})=>(e.jn=n,t))}function iT(){return(iT=(0,ap.Z)(function*(t){const e=Av(t);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(t){const e=OE(t);let n=Wv.min();return e.jt({index:dx.readTimeIndex,reverse:!0},(t,e,r)=>{e.readTime&&(n=zx(e.readTime)),r.done()}).next(()=>n)}(t)).then(t=>{e.jn=t})})).apply(this,arguments)}function sT(){return(sT=(0,ap.Z)(function*(t,e,n,r){const i=Av(t);let s=lb(),o=ib(),a=ub();for(const l of n){const t=e.Hn(l.metadata.name);l.document&&(s=s.add(t)),o=o.insert(t,e.Jn(l)),a=a.insert(t,e.Yn(l.metadata.readTime))}const u=i.Qn.newChangeBuffer({trackRemovals:!0}),c=yield JE(i,function(t){return aw(tw(Xv.fromString(`__bundle__/docs/${t}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",t=>YE(t,u,o,Wv.min(),a).next(e=>(u.apply(t),e)).next(e=>i.He.removeMatchingKeysForTargetId(t,c.targetId).next(()=>i.He.addMatchingKeys(t,s,c.targetId)).next(()=>i.Wn.Vn(t,e)).next(()=>e)))})).apply(this,arguments)}function oT(t,e){return aT.apply(this,arguments)}function aT(){return(aT=(0,ap.Z)(function*(t,e,n=lb()){const r=yield JE(t,aw(Kx(e.bundledQuery))),i=Av(t);return i.persistence.runTransaction("Save named query","readwrite",t=>{const s=Cb(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ye.saveNamedQuery(t,e);const o=r.withResumeToken(r_.EMPTY_BYTE_STRING,s);return i.qn=i.qn.insert(o.targetId,o),i.He.updateTargetData(t,o).next(()=>i.He.removeMatchingKeysForTargetId(t,r.targetId)).next(()=>i.He.addMatchingKeys(t,n,r.targetId)).next(()=>i.Ye.saveNamedQuery(t,e))})})).apply(this,arguments)}class uT{constructor(t){this.k=t,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(t,e){return Tx.resolve(this.Xn.get(e))}saveBundleMetadata(t,e){var n;return this.Xn.set(e.id,{id:(n=e).id,version:n.version,createTime:Cb(n.createTime)}),Tx.resolve()}getNamedQuery(t,e){return Tx.resolve(this.Zn.get(e))}saveNamedQuery(t,e){return this.Zn.set(e.name,function(t){return{name:t.name,query:Kx(t.bundledQuery),readTime:Cb(t.readTime)}}(e)),Tx.resolve()}}class cT{constructor(){this.ts=new eb(lT.es),this.ns=new eb(lT.ss)}isEmpty(){return this.ts.isEmpty()}addReference(t,e){const n=new lT(t,e);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}rs(t,e){t.forEach(t=>this.addReference(t,e))}removeReference(t,e){this.os(new lT(t,e))}cs(t,e){t.forEach(t=>this.removeReference(t,e))}us(t){const e=new p_(new Xv([])),n=new lT(e,t),r=new lT(e,t+1),i=[];return this.ns.forEachInRange([n,r],t=>{this.os(t),i.push(t.key)}),i}hs(){this.ts.forEach(t=>this.os(t))}os(t){this.ts=this.ts.delete(t),this.ns=this.ns.delete(t)}ls(t){const e=new p_(new Xv([])),n=new lT(e,t),r=new lT(e,t+1);let i=lb();return this.ns.forEachInRange([n,r],t=>{i=i.add(t.key)}),i}containsKey(t){const e=new lT(t,0),n=this.ts.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class lT{constructor(t,e){this.key=t,this.fs=e}static es(t,e){return p_.comparator(t.key,e.key)||$v(t.fs,e.fs)}static ss(t,e){return $v(t.fs,e.fs)||p_.comparator(t.key,e.key)}}class hT{constructor(t,e){this.Jt=t,this.referenceDelegate=e,this.An=[],this.ds=1,this.ws=new eb(lT.es)}checkEmpty(t){return Tx.resolve(0===this.An.length)}addMutationBatch(t,e,n,r){const i=this.ds;this.ds++;const s=new Lx(i,e,n,r);this.An.push(s);for(const o of r)this.ws=this.ws.add(new lT(o.key,i)),this.Jt.addToCollectionParentIndex(t,o.key.path.popLast());return Tx.resolve(s)}lookupMutationBatch(t,e){return Tx.resolve(this._s(e))}getNextMutationBatchAfterBatchId(t,e){const n=this.gs(e+1),r=n<0?0:n;return Tx.resolve(this.An.length>r?this.An[r]:null)}getHighestUnacknowledgedBatchId(){return Tx.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(t){return Tx.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new lT(e,0),r=new lT(e,Number.POSITIVE_INFINITY),i=[];return this.ws.forEachInRange([n,r],t=>{const e=this._s(t.fs);i.push(e)}),Tx.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new eb($v);return e.forEach(t=>{const e=new lT(t,0),r=new lT(t,Number.POSITIVE_INFINITY);this.ws.forEachInRange([e,r],t=>{n=n.add(t.fs)})}),Tx.resolve(this.ys(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let i=n;p_.isDocumentKey(i)||(i=i.child(""));const s=new lT(new p_(i),0);let o=new eb($v);return this.ws.forEachWhile(t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(o=o.add(t.fs)),!0)},s),Tx.resolve(this.ys(o))}ys(t){const e=[];return t.forEach(t=>{const n=this._s(t);null!==n&&e.push(n)}),e}removeMutationBatch(t,e){Cv(0===this.ps(e.batchId,"removed")),this.An.shift();let n=this.ws;return Tx.forEach(e.mutations,r=>{const i=new lT(r.key,e.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.ws=n})}ee(t){}containsKey(t,e){const n=new lT(e,0),r=this.ws.firstAfterOrEqual(n);return Tx.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return Tx.resolve()}ps(t,e){return this.gs(t)}gs(t){return 0===this.An.length?0:t-this.An[0].batchId}_s(t){const e=this.gs(t);return e<0||e>=this.An.length?null:this.An[e]}}class dT{constructor(t,e){this.Jt=t,this.Ts=e,this.docs=new Jw(p_.comparator),this.size=0}addEntry(t,e,n){const r=e.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ts(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-s,this.Jt.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Tx.resolve(n?n.document.clone():N_.newInvalidDocument(e))}getEntries(t,e){let n=ib();return e.forEach(t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.clone():N_.newInvalidDocument(t))}),Tx.resolve(n)}getDocumentsMatchingQuery(t,e,n){let r=ib();const i=new p_(e.path.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:t,value:{document:i,readTime:o}}=s.getNext();if(!e.path.isPrefixOf(t.path))break;o.compareTo(n)<=0||dw(e,i)&&(r=r.insert(i.key,i.clone()))}return Tx.resolve(r)}Es(t,e){return Tx.forEach(this.docs,t=>e(t))}newChangeBuffer(t){return new fT(this)}getSize(t){return Tx.resolve(this.size)}}class fT extends kE{constructor(t){super(),this.De=t}applyChanges(t){const e=[];return this.changes.forEach((n,r)=>{r.document.isValidDocument()?e.push(this.De.addEntry(t,r.document,this.getReadTime(n))):this.De.removeEntry(n)}),Tx.waitFor(e)}getFromCache(t,e){return this.De.getEntry(t,e)}getAllFromCache(t,e){return this.De.getEntries(t,e)}}class pT{constructor(t){this.persistence=t,this.Is=new SE(t=>R_(t),M_),this.lastRemoteSnapshotVersion=Wv.min(),this.highestTargetId=0,this.As=0,this.Rs=new cT,this.targetCount=0,this.Ps=dE.ie()}forEachTarget(t,e){return this.Is.forEach((t,n)=>e(n)),Tx.resolve()}getLastRemoteSnapshotVersion(t){return Tx.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Tx.resolve(this.As)}allocateTargetId(t){return this.highestTargetId=this.Ps.next(),Tx.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.As&&(this.As=e),Tx.resolve()}ce(t){this.Is.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ps=new dE(e),this.highestTargetId=e),t.sequenceNumber>this.As&&(this.As=t.sequenceNumber)}addTargetData(t,e){return this.ce(e),this.targetCount+=1,Tx.resolve()}updateTargetData(t,e){return this.ce(e),Tx.resolve()}removeTargetData(t,e){return this.Is.delete(e.target),this.Rs.us(e.targetId),this.targetCount-=1,Tx.resolve()}removeTargets(t,e,n){let r=0;const i=[];return this.Is.forEach((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Is.delete(s),i.push(this.removeMatchingKeysForTargetId(t,o.targetId)),r++)}),Tx.waitFor(i).next(()=>r)}getTargetCount(t){return Tx.resolve(this.targetCount)}getTargetData(t,e){const n=this.Is.get(e)||null;return Tx.resolve(n)}addMatchingKeys(t,e,n){return this.Rs.rs(e,n),Tx.resolve()}removeMatchingKeys(t,e,n){this.Rs.cs(e,n);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(e=>{i.push(r.markPotentiallyOrphaned(t,e))}),Tx.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Rs.us(e),Tx.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Rs.ls(e);return Tx.resolve(n)}containsKey(t,e){return Tx.resolve(this.Rs.containsKey(e))}}class gT{constructor(t,e){this.bs={},this.Be=new qv(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new pT(this),this.Jt=new Xx,this.Je=function(t,e){return new dT(t,e)}(this.Jt,t=>this.referenceDelegate.vs(t)),this.k=new Ux(e),this.Ye=new uT(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(t){let e=this.bs[t.toKey()];return e||(e=new hT(this.Jt,this.referenceDelegate),this.bs[t.toKey()]=e),e}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(t,e,n){Ev("MemoryPersistence","Starting transaction:",t);const r=new mT(this.Be.next());return this.referenceDelegate.Vs(),n(r).next(t=>this.referenceDelegate.Ss(r).next(()=>t)).toPromise().then(t=>(r.raiseOnCommittedEvent(),t))}Ds(t,e){return Tx.or(Object.values(this.bs).map(n=>()=>n.containsKey(t,e)))}}class mT extends Ex{constructor(t){super(),this.currentSequenceNumber=t}}class yT{constructor(t){this.persistence=t,this.Cs=new cT,this.Ns=null}static ks(t){return new yT(t)}get xs(){if(this.Ns)return this.Ns;throw Iv()}addReference(t,e,n){return this.Cs.addReference(n,e),this.xs.delete(n.toString()),Tx.resolve()}removeReference(t,e,n){return this.Cs.removeReference(n,e),this.xs.add(n.toString()),Tx.resolve()}markPotentiallyOrphaned(t,e){return this.xs.add(e.toString()),Tx.resolve()}removeTarget(t,e){this.Cs.us(e.targetId).forEach(t=>this.xs.add(t.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(t=>{t.forEach(t=>this.xs.add(t.toString()))}).next(()=>n.removeTargetData(t,e))}Vs(){this.Ns=new Set}Ss(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Tx.forEach(this.xs,n=>{const r=p_.fromPath(n);return this.$s(t,r).next(t=>{t||e.removeEntry(r)})}).next(()=>(this.Ns=null,e.apply(t)))}updateLimboDocument(t,e){return this.$s(t,e).next(t=>{t?this.xs.delete(e.toString()):this.xs.add(e.toString())})}vs(t){return 0}$s(t,e){return Tx.or([()=>Tx.resolve(this.Cs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ds(t,e)])}}function vT(t,e){return`firestore_clients_${t}_${e}`}function _T(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function wT(t,e){return`firestore_targets_${t}_${e}`}class bT{constructor(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}static Fs(t,e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Nv(r.error.code,r.error.message))),s?new bT(t,e,r.state,i):(Tv("SharedClientState",`Failed to parse mutation state for ID '${e}': ${n}`),null)}Os(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class xT{constructor(t,e,n){this.targetId=t,this.state=e,this.error=n}static Fs(t,e){const n=JSON.parse(e);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Nv(n.error.code,n.error.message))),i?new xT(t,n.state,r):(Tv("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}Os(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class ET{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Fs(t,e){const n=JSON.parse(e);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=db();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=f_(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new ET(t,i):(Tv("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class TT{constructor(t,e){this.clientId=t,this.onlineState=e}static Fs(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new TT(e.clientId,e.onlineState):(Tv("SharedClientState",`Failed to parse online state: ${t}`),null)}}class ST{constructor(){this.activeTargetIds=db()}Ms(t){this.activeTargetIds=this.activeTargetIds.add(t)}Ls(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Os(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class kT{constructor(t,e,n,r,i){this.window=t,this.Oe=e,this.persistenceKey=n,this.Bs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new Jw($v),this.started=!1,this.js=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=vT(this.persistenceKey,this.Bs),this.Ws=function(t){return`firestore_sequence_number_${t}`}(this.persistenceKey),this.Ks=this.Ks.insert(this.Bs,new ST),this.Gs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Js=function(t){return`firestore_online_state_${t}`}(this.persistenceKey),this.Ys=function(t){return`firestore_bundle_loaded_${t}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static bt(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,ap.Z)(function*(){const e=yield t.syncEngine.Tn();for(const r of e){if(r===t.Bs)continue;const e=t.getItem(vT(t.persistenceKey,r));if(e){const n=ET.Fs(r,e);n&&(t.Ks=t.Ks.insert(n.clientId,n))}}t.Xs();const n=t.storage.getItem(t.Js);if(n){const e=t.Zs(n);e&&t.ti(e)}for(const r of t.js)t.qs(r);t.js=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.Ws,JSON.stringify(t))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(t){let e=!1;return this.Ks.forEach((n,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.ni(t,"pending")}updateMutationState(t,e,n){this.ni(t,e,n),this.si(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const n=this.storage.getItem(wT(this.persistenceKey,t));if(n){const r=xT.Fs(t,n);r&&(e=r.state)}}return this.ii.Ms(t),this.Xs(),e}removeLocalQueryTarget(t){this.ii.Ls(t),this.Xs()}isLocalQueryTarget(t){return this.ii.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(wT(this.persistenceKey,t))}updateQueryState(t,e,n){this.ri(t,e,n)}handleUserChange(t,e,n){e.forEach(t=>{this.si(t)}),this.currentUser=t,n.forEach(t=>{this.addPendingMutation(t)})}setOnlineState(t){this.oi(t)}notifyBundleLoaded(){this.ai()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Ev("SharedClientState","READ",t,e),e}setItem(t,e){Ev("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Ev("SharedClientState","REMOVE",t),this.storage.removeItem(t)}qs(t){var e=this;const n=t;if(n.storageArea===this.storage){if(Ev("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void Tv("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,ap.Z)(function*(){if(e.started){if(null!==n.key)if(e.Gs.test(n.key)){if(null==n.newValue){const t=e.ci(n.key);return e.ui(t,null)}{const t=e.hi(n.key,n.newValue);if(t)return e.ui(t.clientId,t)}}else if(e.zs.test(n.key)){if(null!==n.newValue){const t=e.li(n.key,n.newValue);if(t)return e.fi(t)}}else if(e.Hs.test(n.key)){if(null!==n.newValue){const t=e.di(n.key,n.newValue);if(t)return e.wi(t)}}else if(n.key===e.Js){if(null!==n.newValue){const t=e.Zs(n.newValue);if(t)return e.ti(t)}}else if(n.key===e.Ws){const t=function(t){let e=qv.I;if(null!=t)try{const n=JSON.parse(t);Cv("number"==typeof n),e=n}catch(t){Tv("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue);t!==qv.I&&e.sequenceNumberHandler(t)}else if(n.key===e.Ys)return e.syncEngine._i()}else e.js.push(n)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Os())}ni(t,e,n){const r=new bT(this.currentUser,t,e,n),i=_T(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Os())}si(t){const e=_T(this.persistenceKey,this.currentUser,t);this.removeItem(e)}oi(t){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:t}))}ri(t,e,n){const r=wT(this.persistenceKey,t),i=new xT(t,e,n);this.setItem(r,i.Os())}ai(){this.setItem(this.Ys,"value-not-used")}ci(t){const e=this.Gs.exec(t);return e?e[1]:null}hi(t,e){const n=this.ci(t);return ET.Fs(n,e)}li(t,e){const n=this.zs.exec(t),r=Number(n[1]);return bT.Fs(new _v(void 0!==n[2]?n[2]:null),r,e)}di(t,e){const n=this.Hs.exec(t),r=Number(n[1]);return xT.Fs(r,e)}Zs(t){return TT.Fs(t)}fi(t){var e=this;return(0,ap.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.mi(t.batchId,t.state,t.error);Ev("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}wi(t){return this.syncEngine.gi(t.targetId,t.state,t.error)}ui(t,e){const n=e?this.Ks.insert(t,e):this.Ks.remove(t),r=this.ei(this.Ks),i=this.ei(n),s=[],o=[];return i.forEach(t=>{r.has(t)||s.push(t)}),r.forEach(t=>{i.has(t)||o.push(t)}),this.syncEngine.yi(s,o).then(()=>{this.Ks=n})}ti(t){this.Ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}ei(t){let e=db();return t.forEach((t,n)=>{e=e.unionWith(n.activeTargetIds)}),e}}class IT{constructor(){this.pi=new ST,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.pi.Ms(t),this.Ti[t]||"not-current"}updateQueryState(t,e,n){this.Ti[t]=e}removeLocalQueryTarget(t){this.pi.Ls(t)}isLocalQueryTarget(t){return this.pi.activeTargetIds.has(t)}clearQueryState(t){delete this.Ti[t]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(t){return this.pi.activeTargetIds.has(t)}start(){return this.pi=new ST,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(){}}class CT{Ei(t){}shutdown(){}}class AT{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(t){this.bi.push(t)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){Ev("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.bi)t(0)}Pi(){Ev("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.bi)t(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const OT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class NT{constructor(t){this.Vi=t.Vi,this.Si=t.Si}Di(t){this.Ci=t}Ni(t){this.ki=t}onMessage(t){this.xi=t}close(){this.Si()}send(t){this.Vi(t)}$i(){this.Ci()}Fi(t){this.ki(t)}Oi(t){this.xi(t)}}class DT extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Mi=(t.ssl?"https":"http")+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(t,e,n,r,i){const s=this.Ui(t,e);Ev("RestConnection","Sending: ",s,n);const o={};return this.qi(o,r,i),this.Ki(t,s,o,n).then(t=>(Ev("RestConnection","Received: ",t),t),e=>{throw Sv("RestConnection",`${t} failed with error: `,e,"url: ",s,"request:",n),e})}ji(t,e,n,r,i){return this.Bi(t,e,n,r,i)}qi(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+wv,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((e,n)=>t[n]=e),n&&n.headers.forEach((e,n)=>t[n]=e)}Ui(t,e){return`${this.Mi}/v1/${e}:${OT[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}Ki(t,e,n,r){return new Promise((i,s)=>{const o=new yv;o.listenOnce(dv.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case hv.NO_ERROR:const e=o.getResponseJson();Ev("Connection","XHR received:",JSON.stringify(e)),i(e);break;case hv.TIMEOUT:Ev("Connection",'RPC "'+t+'" timed out'),s(new Nv(Ov.DEADLINE_EXCEEDED,"Request time out"));break;case hv.HTTP_ERROR:const n=o.getStatus();if(Ev("Connection",'RPC "'+t+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const t=o.getResponseJson().error;if(t&&t.status&&t.message){const e=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ov).indexOf(e)>=0?e:Ov.UNKNOWN}(t.status);s(new Nv(e,t.message))}else s(new Nv(Ov.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Nv(Ov.UNAVAILABLE,"Connection failed."));break;default:Iv()}}finally{Ev("Connection",'RPC "'+t+'" completed.')}});const a=JSON.stringify(r);o.send(e,"POST",a,n,15)})}Qi(t,e,n){const r=[this.Mi,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=cv(),s=lv(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new gv({})),this.qi(o.initMessageHeaders,e,n),(0,hp.uI)()||(0,hp.b$)()||(0,hp.d)()||(0,hp.w1)()||(0,hp.Mn)()||(0,hp.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");const a=r.join("");Ev("Connection","Creating WebChannel: "+a,o);const u=i.createWebChannel(a,o);let c=!1,l=!1;const h=new NT({Vi:t=>{l?Ev("Connection","Not sending because WebChannel is closed:",t):(c||(Ev("Connection","Opening WebChannel transport."),u.open(),c=!0),Ev("Connection","WebChannel sending:",t),u.send(t))},Si:()=>u.close()}),d=(t,e,n)=>{t.listen(e,t=>{try{n(t)}catch(t){setTimeout(()=>{throw t},0)}})};return d(u,mv.EventType.OPEN,()=>{l||Ev("Connection","WebChannel transport opened.")}),d(u,mv.EventType.CLOSE,()=>{l||(l=!0,Ev("Connection","WebChannel transport closed"),h.Fi())}),d(u,mv.EventType.ERROR,t=>{l||(l=!0,Sv("Connection","WebChannel transport errored:",t),h.Fi(new Nv(Ov.UNAVAILABLE,"The operation could not be completed")))}),d(u,mv.EventType.MESSAGE,t=>{var e;if(!l){const n=t.data[0];Cv(!!n);const r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Ev("Connection","WebChannel received error:",i);const t=i.status;let e=function(t){const e=Ww[t];if(void 0!==e)return Qw(e)}(t),n=i.message;void 0===e&&(e=Ov.INTERNAL,n="Unknown error status: "+t+" with message "+i.message),l=!0,h.Fi(new Nv(e,n)),u.close()}else Ev("Connection","WebChannel received:",n),h.Oi(n)}}),d(s,fv.STAT_EVENT,t=>{t.stat===pv.PROXY?Ev("Connection","Detected buffering proxy"):t.stat===pv.NOPROXY&&Ev("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.$i()},0),h}}function PT(){return"undefined"!=typeof window?window:null}function RT(){return"undefined"!=typeof document?document:null}function MT(t){return new Tb(t,!0)}class LT{constructor(t,e,n=1e3,r=1.5,i=6e4){this.Oe=t,this.timerId=e,this.Wi=n,this.Gi=r,this.zi=i,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(t){this.cancel();const e=Math.floor(this.Hi+this.tr()),n=Math.max(0,Date.now()-this.Yi),r=Math.max(0,e-n);r>0&&Ev("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Hi} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,r,()=>(this.Yi=Date.now(),t())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class FT{constructor(t,e,n,r,i,s,o,a){this.Oe=t,this.nr=n,this.sr=r,this.ir=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new LT(t,e)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var t=this;return(0,ap.Z)(function*(){t.hr()&&(yield t.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(t){this.yr(),this.stream.send(t)}mr(){var t=this;return(0,ap.Z)(function*(){if(t.lr())return t.close(0)})()}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(t,e){var n=this;return(0,ap.Z)(function*(){n.yr(),n.pr(),n.ur.cancel(),n.rr++,4!==t?n.ur.reset():e&&e.code===Ov.RESOURCE_EXHAUSTED?(Tv(e.toString()),Tv("Using maximum backoff delay to prevent overloading the backend."),n.ur.Xi()):e&&e.code===Ov.UNAUTHENTICATED&&3!==n.state&&(n.authCredentialsProvider.invalidateToken(),n.appCheckCredentialsProvider.invalidateToken()),null!==n.stream&&(n.Tr(),n.stream.close(),n.stream=null),n.state=t,yield n.listener.Ni(e)})()}Tr(){}auth(){this.state=1;const t=this.Er(this.rr),e=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([t,n])=>{this.rr===e&&this.Ir(t,n)},e=>{t(()=>{const t=new Nv(Ov.UNKNOWN,"Fetching auth token failed: "+e.message);return this.Ar(t)})})}Ir(t,e){const n=this.Er(this.rr);this.stream=this.Rr(t,e),this.stream.Di(()=>{n(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(t=>{n(()=>this.Ar(t))}),this.stream.onMessage(t=>{n(()=>this.onMessage(t))})}dr(){var t=this;this.state=5,this.ur.Zi((0,ap.Z)(function*(){t.state=0,t.start()}))}Ar(t){return Ev("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Er(t){return e=>{this.Oe.enqueueAndForget(()=>this.rr===t?e():(Ev("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jT extends FT{constructor(t,e,n,r,i,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,s),this.k=i}Rr(t,e){return this.ir.Qi("Listen",t,e)}onMessage(t){this.ur.reset();const e=function(t,e){let n;if("targetChange"in e){const r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Iv()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(t,e){return t.C?(Cv(void 0===e||"string"==typeof e),r_.fromBase64String(e||"")):(Cv(void 0===e||e instanceof Uint8Array),r_.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?Ov.UNKNOWN:Qw(t.code);return new Nv(e,t.message||"")}(o);n=new yb(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Db(t,r.document.name),s=Cb(r.document.updateTime),o=new A_({mapValue:{fields:r.document.fields}}),a=N_.newFoundDocument(i,s,o);n=new gb(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in e){const r=e.documentDelete,i=Db(t,r.document),s=r.readTime?Cb(r.readTime):Wv.min(),o=N_.newNoDocument(i,s);n=new gb([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Db(t,r.document);n=new gb([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Iv();{const t=e.filter,r=new Hw(t.count||0);n=new mb(t.targetId,r)}}return n}(this.k,t),n=function(t){if(!("targetChange"in t))return Wv.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?Wv.min():e.readTime?Cb(e.readTime):Wv.min()}(t);return this.listener.Pr(e,n)}br(t){const e={};e.database=Mb(this.k),e.addTarget=function(t,e){let n;const r=e.target;return n=L_(r)?{documents:qb(t,r)}:{query:Bb(t,r)},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=kb(t,e.resumeToken):e.snapshotVersion.compareTo(Wv.min())>0&&(n.readTime=Sb(t,e.snapshotVersion.toTimestamp())),n}(this.k,t);const n=function(t,e){const n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Iv()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.gr(e)}vr(t){const e={};e.database=Mb(this.k),e.removeTarget=t,this.gr(e)}}class UT extends FT{constructor(t,e,n,r,i,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,s),this.k=i,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(t,e){return this.ir.Qi("Write",t,e)}onMessage(t){if(Cv(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Vr){this.ur.reset();const e=function(t,e){return t&&t.length>0?(Cv(void 0!==e),t.map(t=>function(t,e){let n=Cb(t.updateTime?t.updateTime:e);return n.isEqual(Wv.min())&&(n=Cb(e)),new Nw(n,t.transformResults||[])}(t,e))):[]}(t.writeResults,t.commitTime),n=Cb(t.commitTime);return this.listener.Cr(n,e)}return Cv(!t.writeResults||0===t.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const t={};t.database=Mb(this.k),this.gr(t)}Dr(t){const e={streamToken:this.lastStreamToken,writes:t.map(t=>Ub(this.k,t))};this.gr(e)}}class VT extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.ir=n,this.k=r,this.$r=!1}Fr(){if(this.$r)throw new Nv(Ov.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(t,e,n){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.ir.Bi(t,e,n,r,i)).catch(t=>{throw"FirebaseError"===t.name?(t.code===Ov.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Nv(Ov.UNKNOWN,t.toString())})}ji(t,e,n){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.ir.ji(t,e,n,r,i)).catch(t=>{throw"FirebaseError"===t.name?(t.code===Ov.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new Nv(Ov.UNKNOWN,t.toString())})}terminate(){this.$r=!0}}class qT{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(t){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.Ur("Offline")))}set(t){this.jr(),this.Or=0,"Online"===t&&(this.Lr=!1),this.Ur(t)}Ur(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}qr(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(Tv(e),this.Lr=!1):Ev("OnlineStateTracker",e)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class BT{constructor(t,e,n,r,i){var s=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=i,this.Hr.Ei(t=>{n.enqueueAndForget((0,ap.Z)(function*(){var t;XT(s)&&(Ev("RemoteStore","Restarting streams for network reachability change."),yield(t=(0,ap.Z)(function*(t){const e=Av(t);e.Gr.add(4),yield GT(e),e.Jr.set("Unknown"),e.Gr.delete(4),yield zT(e)}),function(e){return t.apply(this,arguments)})(s))}))}),this.Jr=new qT(n,r)}}function zT(t){return $T.apply(this,arguments)}function $T(){return($T=(0,ap.Z)(function*(t){if(XT(t))for(const e of t.zr)yield e(!0)})).apply(this,arguments)}function GT(t){return ZT.apply(this,arguments)}function ZT(){return(ZT=(0,ap.Z)(function*(t){for(const e of t.zr)yield e(!1)})).apply(this,arguments)}function HT(t,e){const n=Av(t);n.Wr.has(e.targetId)||(n.Wr.set(e.targetId,e),JT(n)?QT(n):kS(n).lr()&&KT(n,e))}function WT(t,e){const n=Av(t),r=kS(n);n.Wr.delete(e),r.lr()&&YT(n,e),0===n.Wr.size&&(r.lr()?r._r():XT(n)&&n.Jr.set("Unknown"))}function KT(t,e){t.Yr.X(e.targetId),kS(t).br(e)}function YT(t,e){t.Yr.X(e),kS(t).vr(e)}function QT(t){t.Yr=new _b({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Wr.get(e)||null}),kS(t).start(),t.Jr.Br()}function JT(t){return XT(t)&&!kS(t).hr()&&t.Wr.size>0}function XT(t){return 0===Av(t).Gr.size}function tS(t){t.Yr=void 0}function eS(t){return nS.apply(this,arguments)}function nS(){return(nS=(0,ap.Z)(function*(t){t.Wr.forEach((e,n)=>{KT(t,e)})})).apply(this,arguments)}function rS(t,e){return iS.apply(this,arguments)}function iS(){return(iS=(0,ap.Z)(function*(t,e){tS(t),JT(t)?(t.Jr.Kr(e),QT(t)):t.Jr.set("Unknown")})).apply(this,arguments)}function sS(t,e,n){return oS.apply(this,arguments)}function oS(){return(oS=(0,ap.Z)(function*(t,e,n){if(t.Jr.set("Online"),e instanceof yb&&2===e.state&&e.cause)try{yield(r=(0,ap.Z)(function*(t,e){const n=e.cause;for(const r of e.targetIds)t.Wr.has(r)&&(yield t.remoteSyncer.rejectListen(r,n),t.Wr.delete(r),t.Yr.removeTarget(r))}),function(t,e){return r.apply(this,arguments)})(t,e)}catch(n){Ev("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),yield aS(t,n)}else if(e instanceof gb?t.Yr.ot(e):e instanceof mb?t.Yr.dt(e):t.Yr.ut(e),!n.isEqual(Wv.min()))try{const e=yield WE(t.localStore);n.compareTo(e)>=0&&(yield function(t,e){const n=t.Yr.gt(e);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=t.Wr.get(r);i&&t.Wr.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(e=>{const n=t.Wr.get(e);if(!n)return;t.Wr.set(e,n.withResumeToken(r_.EMPTY_BYTE_STRING,n.snapshotVersion)),YT(t,e);const r=new jx(n.target,e,1,n.sequenceNumber);KT(t,r)}),t.remoteSyncer.applyRemoteEvent(n)}(t,n))}catch(e){Ev("RemoteStore","Failed to raise snapshot:",e),yield aS(t,e)}var r})).apply(this,arguments)}function aS(t,e,n){return uS.apply(this,arguments)}function uS(){return(uS=(0,ap.Z)(function*(t,e,n){if(!Ax(e))throw e;t.Gr.add(1),yield GT(t),t.Jr.set("Offline"),n||(n=()=>WE(t.localStore)),t.asyncQueue.enqueueRetryable((0,ap.Z)(function*(){Ev("RemoteStore","Retrying IndexedDB access"),yield n(),t.Gr.delete(1),yield zT(t)}))})).apply(this,arguments)}function cS(t,e){return e().catch(n=>aS(t,n,e))}function lS(t){return hS.apply(this,arguments)}function hS(){return(hS=(0,ap.Z)(function*(t){const e=Av(t),n=IS(e);let r=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;dS(e);)try{const t=yield QE(e.localStore,r);if(null===t){0===e.Qr.length&&n._r();break}r=t.batchId,fS(e,t)}catch(t){yield aS(e,t)}pS(e)&&gS(e)})).apply(this,arguments)}function dS(t){return XT(t)&&t.Qr.length<10}function fS(t,e){t.Qr.push(e);const n=IS(t);n.lr()&&n.Sr&&n.Dr(e.mutations)}function pS(t){return XT(t)&&!IS(t).hr()&&t.Qr.length>0}function gS(t){IS(t).start()}function mS(t){return yS.apply(this,arguments)}function yS(){return(yS=(0,ap.Z)(function*(t){IS(t).kr()})).apply(this,arguments)}function vS(t){return _S.apply(this,arguments)}function _S(){return(_S=(0,ap.Z)(function*(t){const e=IS(t);for(const n of t.Qr)e.Dr(n.mutations)})).apply(this,arguments)}function wS(t,e,n){return bS.apply(this,arguments)}function bS(){return(bS=(0,ap.Z)(function*(t,e,n){const r=t.Qr.shift(),i=Fx.from(r,e,n);yield cS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield lS(t)})).apply(this,arguments)}function xS(t,e){return ES.apply(this,arguments)}function ES(){return(ES=(0,ap.Z)(function*(t,e){var n;e&&IS(t).Sr&&(yield(n=(0,ap.Z)(function*(t,e){if(Yw(n=e.code)&&n!==Ov.ABORTED){const n=t.Qr.shift();IS(t).wr(),yield cS(t,()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e)),yield lS(t)}var n}),function(t,e){return n.apply(this,arguments)})(t,e)),pS(t)&&gS(t)})).apply(this,arguments)}function TS(t,e){return SS.apply(this,arguments)}function SS(){return(SS=(0,ap.Z)(function*(t,e){const n=Av(t);e?(n.Gr.delete(2),yield zT(n)):e||(n.Gr.add(2),yield GT(n),n.Jr.set("Unknown"))})).apply(this,arguments)}function kS(t){return t.Xr||(t.Xr=function(t,e,n){const r=Av(t);return r.Fr(),new jT(e,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(t.datastore,t.asyncQueue,{Di:eS.bind(null,t),Ni:rS.bind(null,t),Pr:sS.bind(null,t)}),t.zr.push(function(){var e=(0,ap.Z)(function*(e){e?(t.Xr.wr(),JT(t)?QT(t):t.Jr.set("Unknown")):(yield t.Xr.stop(),tS(t))});return function(t){return e.apply(this,arguments)}}())),t.Xr}function IS(t){return t.Zr||(t.Zr=function(t,e,n){const r=Av(t);return r.Fr(),new UT(e,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(t.datastore,t.asyncQueue,{Di:mS.bind(null,t),Ni:xS.bind(null,t),Nr:vS.bind(null,t),Cr:wS.bind(null,t)}),t.zr.push(function(){var e=(0,ap.Z)(function*(e){e?(t.Zr.wr(),yield lS(t)):(yield t.Zr.stop(),t.Qr.length>0&&(Ev("RemoteStore",`Stopping write stream with ${t.Qr.length} pending writes`),t.Qr=[]))});return function(t){return e.apply(this,arguments)}}())),t.Zr}class CS{constructor(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Dv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(t=>{})}static createAndSchedule(t,e,n,r,i){const s=Date.now()+n,o=new CS(t,e,s,r,i);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Nv(Ov.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function AS(t,e){if(Tv("AsyncQueue",`${e}: ${t}`),Ax(t))return new Nv(Ov.UNAVAILABLE,`${e}: ${t}`);throw t}class OS{constructor(t){this.comparator=t?(e,n)=>t(e,n)||p_.comparator(e.key,n.key):(t,e)=>p_.comparator(t.key,e.key),this.keyedMap=ob(),this.sortedSet=new Jw(this.comparator)}static emptySet(t){return new OS(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,n)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof OS))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,r=n.getNext().key;if(!t.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new OS;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}class NS{constructor(){this.eo=new Jw(p_.comparator)}track(t){const e=t.doc.key,n=this.eo.get(e);n?0!==t.type&&3===n.type?this.eo=this.eo.insert(e,t):3===t.type&&1!==n.type?this.eo=this.eo.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.eo=this.eo.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.eo=this.eo.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.eo=this.eo.remove(e):1===t.type&&2===n.type?this.eo=this.eo.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.eo=this.eo.insert(e,{type:2,doc:t.doc}):Iv():this.eo=this.eo.insert(e,t)}no(){const t=[];return this.eo.inorderTraversal((e,n)=>{t.push(n)}),t}}class DS{constructor(t,e,n,r,i,s,o,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(t,e,n,r){const i=[];return e.forEach(t=>{i.push({type:0,doc:t})}),new DS(t,e,OS.emptySet(e),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&cw(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}}class PS{constructor(){this.so=void 0,this.listeners=[]}}class RS{constructor(){this.queries=new SE(t=>lw(t),cw),this.onlineState="Unknown",this.io=new Set}}function MS(t,e){return LS.apply(this,arguments)}function LS(){return(LS=(0,ap.Z)(function*(t,e){const n=Av(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new PS),i)try{s.so=yield n.onListen(r)}catch(t){const n=AS(t,`Initialization of query '${hw(e.query)}' failed`);return void e.onError(n)}n.queries.set(r,s),s.listeners.push(e),e.ro(n.onlineState),s.so&&e.oo(s.so)&&qS(n)})).apply(this,arguments)}function FS(t,e){return jS.apply(this,arguments)}function jS(){return(jS=(0,ap.Z)(function*(t,e){const n=Av(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const t=s.listeners.indexOf(e);t>=0&&(s.listeners.splice(t,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)})).apply(this,arguments)}function US(t,e){const n=Av(t);let r=!1;for(const i of e){const t=n.queries.get(i.query);if(t){for(const e of t.listeners)e.oo(i)&&(r=!0);t.so=i}}r&&qS(n)}function VS(t,e,n){const r=Av(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function qS(t){t.io.forEach(t=>{t.next()})}class BS{constructor(t,e,n){this.query=t,this.ao=e,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=n||{}}oo(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new DS(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.co?this.ho(t)&&(this.ao.next(t),e=!0):this.lo(t,this.onlineState)&&(this.fo(t),e=!0),this.uo=t,e}onError(t){this.ao.error(t)}ro(t){this.onlineState=t;let e=!1;return this.uo&&!this.co&&this.lo(this.uo,t)&&(this.fo(this.uo),e=!0),e}lo(t,e){return!t.fromCache||!(this.options.wo&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}ho(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(t){t=DS.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.co=!0,this.ao.next(t)}}class zS{constructor(t,e){this.payload=t,this.byteLength=e}_o(){return"metadata"in this.payload}}class $S{constructor(t){this.k=t}Hn(t){return Db(this.k,t)}Jn(t){return t.metadata.exists?jb(this.k,t.document,!1):N_.newNoDocument(this.Hn(t.metadata.name),this.Yn(t.metadata.readTime))}Yn(t){return Cb(t)}}class GS{constructor(t,e,n){this.mo=t,this.localStore=e,this.k=n,this.queries=[],this.documents=[],this.progress=ZS(t)}yo(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}po(t){const e=new Map,n=new $S(this.k);for(const r of t)if(r.metadata.queries){const t=n.Hn(r.metadata.name);for(const n of r.metadata.queries){const r=(e.get(n)||lb()).add(t);e.set(n,r)}}return e}complete(){var t=this;return(0,ap.Z)(function*(){const e=yield function(t,e,n,r){return sT.apply(this,arguments)}(t.localStore,new $S(t.k),t.documents,t.mo.id),n=t.po(t.documents);for(const r of t.queries)yield oT(t.localStore,r,n.get(r.name));return t.progress.taskState="Success",new UE(Object.assign({},t.progress),e)})()}}function ZS(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class HS{constructor(t){this.key=t}}class WS{constructor(t){this.key=t}}class KS{constructor(t,e){this.query=t,this.To=e,this.Eo=null,this.current=!1,this.Io=lb(),this.mutatedKeys=lb(),this.Ao=fw(t),this.Ro=new OS(this.Ao)}get Po(){return this.To}bo(t,e){const n=e?e.vo:new NS,r=e?e.Ro:this.Ro;let i=e?e.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=ew(this.query)&&r.size===this.query.limit?r.last():null,u=nw(this.query)&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((t,e)=>{const c=r.get(t),l=dw(this.query,e)?e:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;c&&l?c.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Vo(c,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.Ao(l,a)>0||u&&this.Ao(l,u)<0)&&(o=!0)):!c&&l?(n.track({type:0,doc:l}),f=!0):c&&!l&&(n.track({type:1,doc:c}),f=!0,(a||u)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(t):i.delete(t)):(s=s.delete(t),i=i.delete(t)))}),ew(this.query)||nw(this.query))for(;s.size>this.query.limit;){const t=ew(this.query)?s.last():s.first();s=s.delete(t.key),i=i.delete(t.key),n.track({type:1,doc:t})}return{Ro:s,vo:n,Bn:o,mutatedKeys:i}}Vo(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n){const r=this.Ro;this.Ro=t.Ro,this.mutatedKeys=t.mutatedKeys;const i=t.vo.no();i.sort((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Iv()}};return n(t)-n(e)}(t.type,e.type)||this.Ao(t.doc,e.doc)),this.So(n);const s=e?this.Do():[],o=0===this.Io.size&&this.current?1:0,a=o!==this.Eo;return this.Eo=o,0!==i.length||a?{snapshot:new DS(this.query,t.Ro,r,i,t.mutatedKeys,0===o,a,!1),Co:s}:{Co:s}}ro(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new NS,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(t){return!this.To.has(t)&&!!this.Ro.has(t)&&!this.Ro.get(t).hasLocalMutations}So(t){t&&(t.addedDocuments.forEach(t=>this.To=this.To.add(t)),t.modifiedDocuments.forEach(t=>{}),t.removedDocuments.forEach(t=>this.To=this.To.delete(t)),this.current=t.current)}Do(){if(!this.current)return[];const t=this.Io;this.Io=lb(),this.Ro.forEach(t=>{this.No(t.key)&&(this.Io=this.Io.add(t.key))});const e=[];return t.forEach(t=>{this.Io.has(t)||e.push(new WS(t))}),this.Io.forEach(n=>{t.has(n)||e.push(new HS(n))}),e}ko(t){this.To=t.zn,this.Io=lb();const e=this.bo(t.documents);return this.applyChanges(e,!0)}xo(){return DS.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class YS{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class QS{constructor(t){this.key=t,this.$o=!1}}class JS{constructor(t,e,n,r,i,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Fo={},this.Oo=new SE(t=>lw(t),cw),this.Mo=new Map,this.Lo=new Set,this.Bo=new Jw(p_.comparator),this.Uo=new Map,this.qo=new cT,this.Ko={},this.jo=new Map,this.Qo=dE.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function XS(t,e){return tk.apply(this,arguments)}function tk(){return(tk=(0,ap.Z)(function*(t,e){const n=zk(t);let r,i;const s=n.Oo.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.xo();else{const t=yield JE(n.localStore,aw(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);r=t.targetId,i=yield ek(n,e,r,"current"===s),n.isPrimaryClient&&HT(n.remoteStore,t)}return i})).apply(this,arguments)}function ek(t,e,n,r){return nk.apply(this,arguments)}function nk(){return(nk=(0,ap.Z)(function*(t,e,n,r){t.Go=(e,n,r)=>{return(i=(0,ap.Z)(function*(t,e,n,r){let i=e.view.bo(n);i.Bn&&(i=yield eT(t.localStore,e.query,!1).then(({documents:t})=>e.view.bo(t,i)));const s=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,s);return wk(t,e.targetId,o.Co),o.snapshot}),function(t,e,n,r){return i.apply(this,arguments)})(t,e,n,r);var i};const i=yield eT(t.localStore,e,!0),s=new KS(e,i.zn),o=s.bo(i.documents),a=pb.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=s.applyChanges(o,t.isPrimaryClient,a);wk(t,n,u.Co);const c=new YS(e,n,s);return t.Oo.set(e,c),t.Mo.has(n)?t.Mo.get(n).push(e):t.Mo.set(n,[e]),u.snapshot})).apply(this,arguments)}function rk(t,e){return ik.apply(this,arguments)}function ik(){return(ik=(0,ap.Z)(function*(t,e){const n=Av(t),r=n.Oo.get(e),i=n.Mo.get(r.targetId);if(i.length>1)return n.Mo.set(r.targetId,i.filter(t=>!cw(t,e))),void n.Oo.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield XE(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),WT(n.remoteStore,r.targetId),vk(n,r.targetId)}).catch(yE))):(vk(n,r.targetId),yield XE(n.localStore,r.targetId,!0))})).apply(this,arguments)}function sk(){return(sk=(0,ap.Z)(function*(t,e,n){const r=$k(t);try{const t=yield function(t,e){const n=Av(t),r=Hv.now(),i=e.reduce((t,e)=>t.add(e.key),lb());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",t=>n.Wn.vn(t,i).next(i=>{s=i;const o=[];for(const t of e){const e=Fw(t,s.get(t.key));null!=e&&o.push(new qw(t.key,e,O_(e.value.mapValue),Dw.exists(!0)))}return n.An.addMutationBatch(t,r,o,e)})).then(t=>(t.applyToLocalDocumentSet(s),{batchId:t.batchId,changes:s}))}(r.localStore,e);r.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let r=t.Ko[t.currentUser.toKey()];r||(r=new Jw($v)),r=r.insert(e,n),t.Ko[t.currentUser.toKey()]=r}(r,t.batchId,n),yield Ek(r,t.changes),yield lS(r.remoteStore)}catch(t){const e=AS(t,"Failed to persist write");n.reject(e)}})).apply(this,arguments)}function ok(t,e){return ak.apply(this,arguments)}function ak(){return(ak=(0,ap.Z)(function*(t,e){const n=Av(t);try{const t=yield KE(n.localStore,e);e.targetChanges.forEach((t,e)=>{const r=n.Uo.get(e);r&&(Cv(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.$o=!0:t.modifiedDocuments.size>0?Cv(r.$o):t.removedDocuments.size>0&&(Cv(r.$o),r.$o=!1))}),yield Ek(n,t,e)}catch(t){yield yE(t)}})).apply(this,arguments)}function uk(t,e,n){const r=Av(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const t=[];r.Oo.forEach((n,r)=>{const i=r.view.ro(e);i.snapshot&&t.push(i.snapshot)}),function(t,e){const n=Av(t);n.onlineState=e;let r=!1;n.queries.forEach((t,n)=>{for(const i of n.listeners)i.ro(e)&&(r=!0)}),r&&qS(n)}(r.eventManager,e),t.length&&r.Fo.Pr(t),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ck(t,e,n){return lk.apply(this,arguments)}function lk(){return(lk=(0,ap.Z)(function*(t,e,n){const r=Av(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Uo.get(e),s=i&&i.key;if(s){let t=new Jw(p_.comparator);t=t.insert(s,N_.newNoDocument(s,Wv.min()));const n=lb().add(s),i=new fb(Wv.min(),new Map,new eb($v),t,n);yield ok(r,i),r.Bo=r.Bo.remove(s),r.Uo.delete(e),xk(r)}else yield XE(r.localStore,e,!1).then(()=>vk(r,e,n)).catch(yE)})).apply(this,arguments)}function hk(t,e){return dk.apply(this,arguments)}function dk(){return(dk=(0,ap.Z)(function*(t,e){const n=Av(t),r=e.batch.batchId;try{const t=yield HE(n.localStore,e);yk(n,r,null),mk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ek(n,t)}catch(t){yield yE(t)}})).apply(this,arguments)}function fk(t,e,n){return pk.apply(this,arguments)}function pk(){return(pk=(0,ap.Z)(function*(t,e,n){const r=Av(t);try{const t=yield function(t,e){const n=Av(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",t=>{let r;return n.An.lookupMutationBatch(t,e).next(e=>(Cv(null!==e),r=e.keys(),n.An.removeMutationBatch(t,e))).next(()=>n.An.performConsistencyCheck(t)).next(()=>n.Wn.vn(t,r))})}(r.localStore,e);yk(r,e,n),mk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ek(r,t)}catch(n){yield yE(n)}})).apply(this,arguments)}function gk(){return(gk=(0,ap.Z)(function*(t,e){const n=Av(t);XT(n.remoteStore)||Ev("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const t=yield function(t){const e=Av(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",t=>e.An.getHighestUnacknowledgedBatchId(t))}(n.localStore);if(-1===t)return void e.resolve();const r=n.jo.get(t)||[];r.push(e),n.jo.set(t,r)}catch(t){const n=AS(t,"Initialization of waitForPendingWrites() operation failed");e.reject(n)}})).apply(this,arguments)}function mk(t,e){(t.jo.get(e)||[]).forEach(t=>{t.resolve()}),t.jo.delete(e)}function yk(t,e,n){const r=Av(t);let i=r.Ko[r.currentUser.toKey()];if(i){const t=i.get(e);t&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.Ko[r.currentUser.toKey()]=i}}function vk(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Mo.get(e))t.Oo.delete(r),n&&t.Fo.zo(r,n);t.Mo.delete(e),t.isPrimaryClient&&t.qo.us(e).forEach(e=>{t.qo.containsKey(e)||_k(t,e)})}function _k(t,e){t.Lo.delete(e.path.canonicalString());const n=t.Bo.get(e);null!==n&&(WT(t.remoteStore,n),t.Bo=t.Bo.remove(e),t.Uo.delete(n),xk(t))}function wk(t,e,n){for(const r of n)r instanceof HS?(t.qo.addReference(r.key,e),bk(t,r)):r instanceof WS?(Ev("SyncEngine","Document no longer in limbo: "+r.key),t.qo.removeReference(r.key,e),t.qo.containsKey(r.key)||_k(t,r.key)):Iv()}function bk(t,e){const n=e.key,r=n.path.canonicalString();t.Bo.get(n)||t.Lo.has(r)||(Ev("SyncEngine","New document in limbo: "+n),t.Lo.add(r),xk(t))}function xk(t){for(;t.Lo.size>0&&t.Bo.size<t.maxConcurrentLimboResolutions;){const e=t.Lo.values().next().value;t.Lo.delete(e);const n=new p_(Xv.fromString(e)),r=t.Qo.next();t.Uo.set(r,new QS(n)),t.Bo=t.Bo.insert(n,r),HT(t.remoteStore,new jx(aw(tw(n.path)),r,2,qv.I))}}function Ek(t,e,n){return Tk.apply(this,arguments)}function Tk(){return(Tk=(0,ap.Z)(function*(t,e,n){const r=Av(t),i=[],s=[],o=[];var a;r.Oo.isEmpty()||(r.Oo.forEach((t,a)=>{o.push(r.Go(a,e,n).then(t=>{if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);const e=qE.$n(a.targetId,t);s.push(e)}}))}),yield Promise.all(o),r.Fo.Pr(i),yield(a=(0,ap.Z)(function*(t,e){const n=Av(t);try{yield n.persistence.runTransaction("notifyLocalViewChanges","readwrite",t=>Tx.forEach(e,e=>Tx.forEach(e.kn,r=>n.persistence.referenceDelegate.addReference(t,e.targetId,r)).next(()=>Tx.forEach(e.xn,r=>n.persistence.referenceDelegate.removeReference(t,e.targetId,r)))))}catch(t){if(!Ax(t))throw t;Ev("LocalStore","Failed to update sequence numbers: "+t)}for(const r of e){const t=r.targetId;if(!r.fromCache){const e=n.qn.get(t),r=e.withLastLimboFreeSnapshotVersion(e.snapshotVersion);n.qn=n.qn.insert(t,r)}}}),function(t,e){return a.apply(this,arguments)})(r.localStore,s))})).apply(this,arguments)}function Sk(t,e){return kk.apply(this,arguments)}function kk(){return(kk=(0,ap.Z)(function*(t,e){const n=Av(t);if(!n.currentUser.isEqual(e)){Ev("SyncEngine","User change. New user:",e.toKey());const t=yield GE(n.localStore,e);n.currentUser=e,function(t,e){t.jo.forEach(t=>{t.forEach(t=>{t.reject(new Nv(Ov.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.jo.clear()}(n),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),yield Ek(n,t.Gn)}})).apply(this,arguments)}function Ik(t,e){const n=Av(t),r=n.Uo.get(e);if(r&&r.$o)return lb().add(r.key);{let t=lb();const r=n.Mo.get(e);if(!r)return t;for(const e of r){const r=n.Oo.get(e);t=t.unionWith(r.view.Po)}return t}}function Ck(t,e){return Ak.apply(this,arguments)}function Ak(){return(Ak=(0,ap.Z)(function*(t,e){const n=Av(t),r=yield eT(n.localStore,e.query,!0),i=e.view.ko(r);return n.isPrimaryClient&&wk(n,e.targetId,i.Co),i})).apply(this,arguments)}function Ok(t){return Nk.apply(this,arguments)}function Nk(){return(Nk=(0,ap.Z)(function*(t){const e=Av(t);return rT(e.localStore).then(t=>Ek(e,t))})).apply(this,arguments)}function Dk(t,e,n,r){return Pk.apply(this,arguments)}function Pk(){return(Pk=(0,ap.Z)(function*(t,e,n,r){const i=Av(t),s=yield function(t,e){const n=Av(t),r=Av(n.An);return n.persistence.runTransaction("Lookup mutation documents","readonly",t=>r.Zt(t,e).next(e=>e?n.Wn.vn(t,e):Tx.resolve(null)))}(i.localStore,e);null!==s?("pending"===n?yield lS(i.remoteStore):"acknowledged"===n||"rejected"===n?(yk(i,e,r||null),mk(i,e),function(t,e){Av(Av(t).An).ee(e)}(i.localStore,e)):Iv(),yield Ek(i,s)):Ev("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function Rk(){return(Rk=(0,ap.Z)(function*(t,e){const n=Av(t);if(zk(n),$k(n),!0===e&&!0!==n.Wo){const t=n.sharedClientState.getAllActiveQueryTargets(),e=yield Mk(n,t.toArray());n.Wo=!0,yield TS(n.remoteStore,!0);for(const r of e)HT(n.remoteStore,r)}else if(!1===e&&!1!==n.Wo){const t=[];let e=Promise.resolve();n.Mo.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?t.push(i):e=e.then(()=>(vk(n,i),XE(n.localStore,i,!0))),WT(n.remoteStore,i)}),yield e,yield Mk(n,t),function(t){const e=Av(t);e.Uo.forEach((t,n)=>{WT(e.remoteStore,n)}),e.qo.hs(),e.Uo=new Map,e.Bo=new Jw(p_.comparator)}(n),n.Wo=!1,yield TS(n.remoteStore,!1)}})).apply(this,arguments)}function Mk(t,e,n){return Lk.apply(this,arguments)}function Lk(){return(Lk=(0,ap.Z)(function*(t,e,n){const r=Av(t),i=[],s=[];for(const o of e){let t;const e=r.Mo.get(o);if(e&&0!==e.length){t=yield JE(r.localStore,aw(e[0]));for(const t of e){const e=r.Oo.get(t),n=yield Ck(r,e);n.snapshot&&s.push(n.snapshot)}}else{const e=yield nT(r.localStore,o);t=yield JE(r.localStore,e),yield ek(r,Fk(e),o,!1)}i.push(t)}return r.Fo.Pr(s),i})).apply(this,arguments)}function Fk(t){return X_(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function jk(t){const e=Av(t);return Av(Av(e.localStore).persistence).Tn()}function Uk(t,e,n,r){return Vk.apply(this,arguments)}function Vk(){return(Vk=(0,ap.Z)(function*(t,e,n,r){const i=Av(t);if(i.Wo)Ev("SyncEngine","Ignoring unexpected query state notification.");else if(i.Mo.has(e))switch(n){case"current":case"not-current":{const t=yield rT(i.localStore),r=fb.createSynthesizedRemoteEventForCurrentChange(e,"current"===n);yield Ek(i,t,r);break}case"rejected":yield XE(i.localStore,e,!0),vk(i,e,r);break;default:Iv()}})).apply(this,arguments)}function qk(t,e,n){return Bk.apply(this,arguments)}function Bk(){return(Bk=(0,ap.Z)(function*(t,e,n){const r=zk(t);if(r.Wo){for(const t of e){if(r.Mo.has(t)){Ev("SyncEngine","Adding an already active target "+t);continue}const e=yield nT(r.localStore,t),n=yield JE(r.localStore,e);yield ek(r,Fk(e),n.targetId,!1),HT(r.remoteStore,n)}for(const t of n)r.Mo.has(t)&&(yield XE(r.localStore,t,!1).then(()=>{WT(r.remoteStore,t),vk(r,t)}).catch(yE))}})).apply(this,arguments)}function zk(t){const e=Av(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ok.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ik.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ck.bind(null,e),e.Fo.Pr=US.bind(null,e.eventManager),e.Fo.zo=VS.bind(null,e.eventManager),e}function $k(t){const e=Av(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fk.bind(null,e),e}class Gk{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,ap.Z)(function*(){e.k=MT(t.databaseInfo.databaseId),e.sharedClientState=e.Jo(t),e.persistence=e.Yo(t),yield e.persistence.start(),e.gcScheduler=e.Xo(t),e.localStore=e.Zo(t)})()}Xo(t){return null}Zo(t){return $E(this.persistence,new BE,t.initialUser,this.k)}Yo(t){return new gT(yT.ks,this.k)}Jo(t){return new IT}terminate(){var t=this;return(0,ap.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class Zk extends Gk{constructor(t,e,n){super(),this.ta=t,this.cacheSizeBytes=e,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,n=this;return(0,ap.Z)(function*(){yield e().call(n,t),yield function(t){return iT.apply(this,arguments)}(n.localStore),yield n.ta.initialize(n,t),yield $k(n.ta.syncEngine),yield lS(n.ta.remoteStore),yield n.persistence.sn(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()))})()}Zo(t){return $E(this.persistence,new BE,t.initialUser,this.k)}Xo(t){return new bE(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)}Yo(t){const e=jE(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?iE.withCacheSize(this.cacheSizeBytes):iE.DEFAULT;return new ME(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,PT(),RT(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(t){return new IT}}class Hk extends Zk{constructor(t,e){super(t,e,!1),this.ta=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,n=this;return(0,ap.Z)(function*(){yield e().call(n,t);const r=n.ta.syncEngine;n.sharedClientState instanceof kT&&(n.sharedClientState.syncEngine={mi:Dk.bind(null,r),gi:Uk.bind(null,r),yi:qk.bind(null,r),Tn:jk.bind(null,r),_i:Ok.bind(null,r)},yield n.sharedClientState.start()),yield n.persistence.sn(function(){var t=(0,ap.Z)(function*(t){yield function(t,e){return Rk.apply(this,arguments)}(n.ta.syncEngine,t),n.gcScheduler&&(t&&!n.gcScheduler.started?n.gcScheduler.start(n.localStore):t||n.gcScheduler.stop())});return function(e){return t.apply(this,arguments)}}())})()}Jo(t){const e=PT();if(!kT.bt(e))throw new Nv(Ov.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=jE(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new kT(e,t.asyncQueue,n,t.clientId,t.initialUser)}}class Wk{initialize(t,e){var n=this;return(0,ap.Z)(function*(){n.localStore||(n.localStore=t.localStore,n.sharedClientState=t.sharedClientState,n.datastore=n.createDatastore(e),n.remoteStore=n.createRemoteStore(e),n.eventManager=n.createEventManager(e),n.syncEngine=n.createSyncEngine(e,!t.synchronizeTabs),n.sharedClientState.onlineStateHandler=t=>uk(n.syncEngine,t,1),n.remoteStore.remoteSyncer.handleCredentialChange=Sk.bind(null,n.syncEngine),yield TS(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(t){return new RS}createDatastore(t){const e=MT(t.databaseInfo.databaseId),n=new DT(t.databaseInfo);return function(t,e,n,r){return new VT(t,e,n,r)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=t=>uk(this.syncEngine,t,0),s=AT.bt()?new AT:new CT,new BT(e,n,r,i,s);var e,n,r,i,s}createSyncEngine(t,e){return function(t,e,n,r,i,s,o){const a=new JS(t,e,n,r,i,s);return o&&(a.Wo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,ap.Z)(function*(t){const e=Av(t);Ev("RemoteStore","RemoteStore shutting down."),e.Gr.add(5),yield GT(e),e.Hr.shutdown(),e.Jr.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function Kk(t,e=10240){let n=0;return{read:()=>(0,ap.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,ap.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Yk{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.ea(this.observer.next,t)}error(t){this.observer.error?this.ea(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}na(){this.muted=!0}ea(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class Qk{constructor(t,e){this.sa=t,this.k=e,this.metadata=new Dv,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then(t=>{t&&t._o()?this.metadata.resolve(t.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==t?void 0:t.payload)}`))},t=>this.metadata.reject(t))}close(){return this.sa.cancel()}getMetadata(){var t=this;return(0,ap.Z)(function*(){return t.metadata.promise})()}Ho(){var t=this;return(0,ap.Z)(function*(){return yield t.getMetadata(),t.ra()})()}ra(){var t=this;return(0,ap.Z)(function*(){const e=yield t.oa();if(null===e)return null;const n=t.ia.decode(e),r=Number(n);isNaN(r)&&t.aa(`length string (${n}) is not valid number`);const i=yield t.ca(r);return new zS(JSON.parse(i),e.length+r)})()}ua(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}oa(){var t=this;return(0,ap.Z)(function*(){for(;t.ua()<0&&!(yield t.ha()););if(0===t.buffer.length)return null;const e=t.ua();e<0&&t.aa("Reached the end of bundle when a length string is expected.");const n=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),n})()}ca(t){var e=this;return(0,ap.Z)(function*(){for(;e.buffer.length<t;)(yield e.ha())&&e.aa("Reached the end of bundle when more is expected.");const n=e.ia.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),n})()}aa(t){throw this.sa.cancel(),new Error(`Invalid bundle format: ${t}`)}ha(){var t=this;return(0,ap.Z)(function*(){const e=yield t.sa.read();if(!e.done){const n=new Uint8Array(t.buffer.length+e.value.length);n.set(t.buffer),n.set(e.value,t.buffer.length),t.buffer=n}return e.done})()}}class Jk{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,ap.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Nv(Ov.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(r=(0,ap.Z)(function*(t,e){const n=Av(t),r=Mb(n.k)+"/documents",i={documents:e.map(t=>Nb(n.k,t))},s=yield n.ji("BatchGetDocuments",r,i),o=new Map;s.forEach(t=>{const e=function(t,e){return"found"in e?function(t,e){Cv(!!e.found);const n=Db(t,e.found.name),r=Cb(e.found.updateTime),i=new A_({mapValue:{fields:e.found.fields}});return N_.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Cv(!!e.missing),Cv(!!e.readTime);const n=Db(t,e.missing),r=Cb(e.readTime);return N_.newNoDocument(n,r)}(t,e):Iv()}(n.k,t);o.set(e.key.toString(),e)});const a=[];return e.forEach(t=>{const e=o.get(t.toString());Cv(!!e),a.push(e)}),a}),function(t,e){return r.apply(this,arguments)})(e.datastore,t);var r;return n.forEach(t=>e.recordVersion(t)),n})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())}delete(t){this.write(new Gw(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,ap.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var n;t.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,n)=>{const r=p_.fromPath(n);t.mutations.push(new Zw(r,t.precondition(r)))}),yield(n=(0,ap.Z)(function*(t,e){const n=Av(t),r=Mb(n.k)+"/documents",i={writes:e.map(t=>Ub(n.k,t))};yield n.Bi("Commit",r,i)}),function(t,e){return n.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Iv();e=Wv.min()}const n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Nv(Ov.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Dw.updateTime(e):Dw.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Wv.min()))throw new Nv(Ov.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Dw.updateTime(e)}return Dw.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class Xk{constructor(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.la=5,this.ur=new LT(this.asyncQueue,"transaction_retry")}run(){this.la-=1,this.fa()}fa(){var t=this;this.ur.Zi((0,ap.Z)(function*(){const e=new Jk(t.datastore),n=t.da(e);n&&n.then(n=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(n)}).catch(e=>{t.wa(e)}))}).catch(e=>{t.wa(e)})}))}da(t){try{const e=this.updateFunction(t);return!h_(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}wa(t){this.la>0&&this._a(t)?(this.la-=1,this.asyncQueue.enqueueAndForget(()=>(this.fa(),Promise.resolve()))):this.deferred.reject(t)}_a(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!Yw(e)}return!1}}class tI{constructor(t,e,n,r){var i=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=_v.UNAUTHENTICATED,this.clientId=zv.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,function(){var t=(0,ap.Z)(function*(t){Ev("FirestoreClient","Received user=",t.uid),yield i.authCredentialListener(t),i.user=t});return function(e){return t.apply(this,arguments)}}()),this.appCheckCredentials.start(n,()=>Promise.resolve())}getConfiguration(){var t=this;return(0,ap.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Nv(Ov.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Dv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ap.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(n){const t=AS(n,"Failed to shutdown persistence");e.reject(t)}})),e.promise}}function eI(t,e){return nI.apply(this,arguments)}function nI(){return(nI=(0,ap.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),Ev("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var t=(0,ap.Z)(function*(t){r.isEqual(t)||(yield GE(e.localStore,t),r=t)});return function(e){return t.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e})).apply(this,arguments)}function rI(t,e){return iI.apply(this,arguments)}function iI(){return(iI=(0,ap.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield sI(t);Ev("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(t=>{return(n=(0,ap.Z)(function*(t,e){const n=Av(t);n.asyncQueue.verifyOperationInProgress(),Ev("RemoteStore","RemoteStore received new credentials");const r=XT(n);n.Gr.add(3),yield GT(n),r&&n.Jr.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Gr.delete(3),yield zT(n)}),function(t,e){return n.apply(this,arguments)})(e.remoteStore,t);var n}),t.onlineComponents=e})).apply(this,arguments)}function sI(t){return oI.apply(this,arguments)}function oI(){return(oI=(0,ap.Z)(function*(t){return t.offlineComponents||(Ev("FirestoreClient","Using default OfflineComponentProvider"),yield eI(t,new Gk)),t.offlineComponents})).apply(this,arguments)}function aI(t){return uI.apply(this,arguments)}function uI(){return(uI=(0,ap.Z)(function*(t){return t.onlineComponents||(Ev("FirestoreClient","Using default OnlineComponentProvider"),yield rI(t,new Wk)),t.onlineComponents})).apply(this,arguments)}function cI(t){return sI(t).then(t=>t.persistence)}function lI(t){return sI(t).then(t=>t.localStore)}function hI(t){return aI(t).then(t=>t.remoteStore)}function dI(t){return aI(t).then(t=>t.syncEngine)}function fI(t){return pI.apply(this,arguments)}function pI(){return(pI=(0,ap.Z)(function*(t){const e=yield aI(t),n=e.eventManager;return n.onListen=XS.bind(null,e.syncEngine),n.onUnlisten=rk.bind(null,e.syncEngine),n})).apply(this,arguments)}function gI(t,e,n={}){const r=new Dv;return t.asyncQueue.enqueueAndForget((0,ap.Z)(function*(){return function(t,e,n,r,i){const s=new Yk({next:s=>{e.enqueueAndForget(()=>FS(t,o));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Nv(Ov.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Nv(Ov.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:t=>i.reject(t)}),o=new BS(tw(n.path),s,{includeMetadataChanges:!0,wo:!0});return MS(t,o)}(yield fI(t),t.asyncQueue,e,n,r)})),r.promise}function mI(t,e,n={}){const r=new Dv;return t.asyncQueue.enqueueAndForget((0,ap.Z)(function*(){return function(t,e,n,r,i){const s=new Yk({next:n=>{e.enqueueAndForget(()=>FS(t,o)),n.fromCache&&"server"===r.source?i.reject(new Nv(Ov.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:t=>i.reject(t)}),o=new BS(n,s,{includeMetadataChanges:!0,wo:!0});return MS(t,o)}(yield fI(t),t.asyncQueue,e,n,r)})),r.promise}class yI{constructor(t,e,n,r,i,s,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class vI{constructor(t,e){this.projectId=t,this.database=e||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof vI&&t.projectId===this.projectId&&t.database===this.database}}const _I=new Map;function wI(t,e,n){if(!n)throw new Nv(Ov.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function bI(t,e,n,r){if(!0===e&&!0===r)throw new Nv(Ov.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function xI(t){if(!p_.isDocumentKey(t))throw new Nv(Ov.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function EI(t){if(p_.isDocumentKey(t))throw new Nv(Ov.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function TI(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":Iv()}function SI(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Nv(Ov.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=TI(t);throw new Nv(Ov.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function kI(t,e){if(e<=0)throw new Nv(Ov.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class II{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Nv(Ov.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Nv(Ov.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,bI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class CI{constructor(t,e,n){this._authCredentials=e,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new II({}),this._settingsFrozen=!1,t instanceof vI?this._databaseId=t:(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Nv(Ov.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vI(t.options.projectId)}(t))}get app(){if(!this._app)throw new Nv(Ov.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Nv(Ov.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new II(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new Rv;switch(t.type){case"gapi":const e=t.client;return Cv(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new jv(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Nv(Ov.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=_I.get(t);e&&(Ev("ComponentProvider","Removing Datastore"),_I.delete(t),e.terminate())}(this),Promise.resolve()}}class AI{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new NI(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new AI(this.firestore,t,this._key)}}class OI{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new OI(this.firestore,t,this._query)}}class NI extends OI{constructor(t,e,n){super(t,e,tw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new AI(this.firestore,null,new p_(t))}withConverter(t){return new NI(this.firestore,t,this._path)}}function DI(t,e,...n){if(t=(0,hp.m9)(t),wI("collection","path",e),t instanceof CI){const r=Xv.fromString(e,...n);return EI(r),new NI(t,null,r)}{if(!(t instanceof AI||t instanceof NI))throw new Nv(Ov.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Xv.fromString(e,...n));return EI(r),new NI(t.firestore,null,r)}}function PI(t,e,...n){if(t=(0,hp.m9)(t),1===arguments.length&&(e=zv.A()),wI("doc","path",e),t instanceof CI){const r=Xv.fromString(e,...n);return xI(r),new AI(t,null,new p_(r))}{if(!(t instanceof AI||t instanceof NI))throw new Nv(Ov.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Xv.fromString(e,...n));return xI(r),new AI(t.firestore,t instanceof NI?t.converter:null,new p_(r))}}function RI(t,e){return t=(0,hp.m9)(t),e=(0,hp.m9)(e),(t instanceof AI||t instanceof NI)&&(e instanceof AI||e instanceof NI)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function MI(t,e){return t=(0,hp.m9)(t),e=(0,hp.m9)(e),t instanceof OI&&e instanceof OI&&t.firestore===e.firestore&&cw(t._query,e._query)&&t.converter===e.converter}class LI{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new LT(this,"async_queue_retry"),this.Ra=()=>{const t=RT();t&&Ev("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const t=RT();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pa(),this.ba(t)}enterRestrictedMode(t){if(!this.ya){this.ya=!0,this.Ia=t||!1;const e=RT();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ra)}}enqueue(t){if(this.Pa(),this.ya)return new Promise(()=>{});const e=new Dv;return this.ba(()=>this.ya&&this.Ia?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.ga.push(t),this.va()))}va(){var t=this;return(0,ap.Z)(function*(){if(0!==t.ga.length){try{yield t.ga[0](),t.ga.shift(),t.ur.reset()}catch(Sp){if(!Ax(Sp))throw Sp;Ev("AsyncQueue","Operation failed with retryable error: "+Sp)}t.ga.length>0&&t.ur.Zi(()=>t.va())}})()}ba(t){const e=this.ma.then(()=>(this.Ea=!0,t().catch(t=>{throw this.Ta=t,this.Ea=!1,Tv("INTERNAL UNHANDLED ERROR: ",function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(t=>(this.Ea=!1,t))));return this.ma=e,e}enqueueAfterDelay(t,e,n){this.Pa(),this.Aa.indexOf(t)>-1&&(e=0);const r=CS.createAndSchedule(this,t,e,n,t=>this.Va(t));return this.pa.push(r),r}Pa(){this.Ta&&Iv()}verifyOperationInProgress(){}Sa(){var t=this;return(0,ap.Z)(function*(){let e;do{e=t.ma,yield e}while(e!==t.ma)})()}Da(t){for(const e of this.pa)if(e.timerId===t)return!0;return!1}Ca(t){return this.Sa().then(()=>{this.pa.sort((t,e)=>t.targetTimeMs-e.targetTimeMs);for(const e of this.pa)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Sa()})}Na(t){this.Aa.push(t)}Va(t){const e=this.pa.indexOf(t);this.pa.splice(e,1)}}function FI(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(t)}class jI{constructor(){this._progressObserver={},this._taskCompletionResolver=new Dv,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,n){this._progressObserver={next:t,error:e,complete:n}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class UI extends CI{constructor(t,e,n){super(t,e,n),this.type="firestore",this._queue=new LI,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||qI(this),this._firestoreClient.terminate()}}function VI(t){return t._firestoreClient||qI(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function qI(t){var e;const n=t._freezeSettings(),r=function(t,e,n,r){return new yI(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new tI(t._authCredentials,t._appCheckCredentials,t._queue,r)}function BI(t,e,n){const r=new Dv;return t.asyncQueue.enqueue((0,ap.Z)(function*(){try{yield eI(t,n),yield rI(t,e),r.resolve()}catch(t){if(!function(t){return"FirebaseError"===t.name?t.code===Ov.FAILED_PRECONDITION||t.code===Ov.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(t))throw t;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.reject(t)}})).then(()=>r.promise)}function zI(t){if(t._initialized||t._terminated)throw new Nv(Ov.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class $I{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Nv(Ov.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new e_(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class GI{constructor(t){this._byteString=t}static fromBase64String(t){try{return new GI(r_.fromBase64String(t))}catch(t){throw new Nv(Ov.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new GI(r_.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class ZI{constructor(t){this._methodName=t}}class HI{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Nv(Ov.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Nv(Ov.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return $v(this._lat,t._lat)||$v(this._long,t._long)}}const WI=/^__.*__$/;class KI{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new qw(t,this.data,this.fieldMask,e,this.fieldTransforms):new Vw(t,this.data,e,this.fieldTransforms)}}class YI{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new qw(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function QI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Iv()}}class JI{constructor(t,e,n,r,i,s){this.settings=t,this.databaseId=e,this.k=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ka(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(t){return new JI(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Fa(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.$a({path:n,Oa:!1});return r.Ma(t),r}La(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.$a({path:n,Oa:!1});return r.ka(),r}Ba(t){return this.$a({path:void 0,Oa:!0})}Ua(t){return vC(t,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}ka(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ma(this.path.get(t))}Ma(t){if(0===t.length)throw this.Ua("Document fields must not be empty");if(QI(this.xa)&&WI.test(t))throw this.Ua('Document fields cannot begin and end with "__"')}}class XI{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.k=n||MT(t)}ja(t,e,n,r=!1){return new JI({xa:t,methodName:e,Ka:n,path:e_.emptyPath(),Oa:!1,qa:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function tC(t){const e=t._freezeSettings(),n=MT(t._databaseId);return new XI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function eC(t,e,n,r,i,s={}){const o=t.ja(s.merge||s.mergeFields?2:0,e,n,i);pC("Data must be an object, but it was:",o,r);const a=dC(r,o);let u,c;if(s.merge)u=new n_(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const r of s.mergeFields){const i=gC(e,r,n);if(!o.contains(i))throw new Nv(Ov.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);_C(t,i)||t.push(i)}u=new n_(t),c=o.fieldTransforms.filter(t=>u.covers(t.field))}else u=null,c=o.fieldTransforms;return new KI(new A_(a),u,c)}class nC extends ZI{_toFieldTransform(t){if(2!==t.xa)throw t.Ua(1===t.xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof nC}}function rC(t,e,n){return new JI({xa:3,Ka:e.settings.Ka,methodName:t._methodName,Oa:n},e.databaseId,e.k,e.ignoreUndefinedProperties)}class iC extends ZI{_toFieldTransform(t){return new Ow(t.path,new xw)}isEqual(t){return t instanceof iC}}class sC extends ZI{constructor(t,e){super(t),this.Qa=e}_toFieldTransform(t){const e=rC(this,t,!0),n=this.Qa.map(t=>hC(t,e)),r=new Ew(n);return new Ow(t.path,r)}isEqual(t){return this===t}}class oC extends ZI{constructor(t,e){super(t),this.Qa=e}_toFieldTransform(t){const e=rC(this,t,!0),n=this.Qa.map(t=>hC(t,e)),r=new Sw(n);return new Ow(t.path,r)}isEqual(t){return this===t}}class aC extends ZI{constructor(t,e){super(t),this.Wa=e}_toFieldTransform(t){const e=new Iw(t.k,yw(t.k,this.Wa));return new Ow(t.path,e)}isEqual(t){return this===t}}function uC(t,e,n,r){const i=t.ja(1,e,n);pC("Data must be an object, but it was:",i,r);const s=[],o=A_.empty();Yv(r,(t,r)=>{const a=yC(e,t,n);r=(0,hp.m9)(r);const u=i.La(a);if(r instanceof nC)s.push(a);else{const t=hC(r,u);null!=t&&(s.push(a),o.set(a,t))}});const a=new n_(s);return new YI(o,a,i.fieldTransforms)}function cC(t,e,n,r,i,s){const o=t.ja(1,e,n),a=[gC(e,r,n)],u=[i];if(s.length%2!=0)throw new Nv(Ov.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(gC(e,s[d])),u.push(s[d+1]);const c=[],l=A_.empty();for(let d=a.length-1;d>=0;--d)if(!_C(c,a[d])){const t=a[d];let e=u[d];e=(0,hp.m9)(e);const n=o.La(t);if(e instanceof nC)c.push(t);else{const r=hC(e,n);null!=r&&(c.push(t),l.set(t,r))}}const h=new n_(c);return new YI(l,h,o.fieldTransforms)}function lC(t,e,n,r=!1){return hC(n,t.ja(r?4:3,e))}function hC(t,e){if(fC(t=(0,hp.m9)(t)))return pC("Unsupported field value:",e,t),dC(t,e);if(t instanceof ZI)return function(t,e){if(!QI(e.xa))throw e.Ua(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.Ua(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Oa&&4!==e.xa)throw e.Ua("Nested arrays are not supported");return function(t,e){const n=[];let r=0;for(const i of t){let t=hC(i,e.Ba(r));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,hp.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return yw(e.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Hv.fromDate(t);return{timestampValue:Sb(e.k,n)}}if(t instanceof Hv){const n=new Hv(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Sb(e.k,n)}}if(t instanceof HI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof GI)return{bytesValue:kb(e.k,t._byteString)};if(t instanceof AI){const n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Ua(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Ab(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Ua(`Unsupported field value: ${TI(t)}`)}(t,e)}function dC(t,e){const n={};return Qv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yv(t,(t,r)=>{const i=hC(r,e.Fa(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function fC(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Hv||t instanceof HI||t instanceof GI||t instanceof AI||t instanceof ZI)}function pC(t,e,n){if(!fC(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const r=TI(n);throw e.Ua("an object"===r?t+" a custom object":t+" "+r)}}function gC(t,e,n){if((e=(0,hp.m9)(e))instanceof $I)return e._internalPath;if("string"==typeof e)return yC(t,e);throw vC("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}const mC=new RegExp("[~\\*/\\[\\]]");function yC(t,e,n){if(e.search(mC)>=0)throw vC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $I(...e.split("."))._internalPath}catch(r){throw vC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vC(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Nv(Ov.INVALID_ARGUMENT,a+t+u)}function _C(t,e){return t.some(t=>t.isEqual(e))}class wC{constructor(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new AI(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new bC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(xC("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class bC extends wC{data(){return super.data()}}function xC(t,e){return"string"==typeof e?yC(t,e):e instanceof $I?e._internalPath:e._delegate._internalPath}class EC{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class TC extends wC{constructor(t,e,n,r,i,s){super(t,e,n,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new SC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(xC("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class SC extends TC{data(t={}){return super.data(t)}}class kC{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new EC(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new SC(this._firestore,this._userDataWriter,n.key,n,new EC(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Nv(Ov.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map(n=>({type:"added",doc:new SC(t._firestore,t._userDataWriter,n.doc.key,n.doc,new EC(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:e++}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(t=>e||3!==t.type).map(e=>{const r=new SC(t._firestore,t._userDataWriter,e.doc.key,e.doc,new EC(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let i=-1,s=-1;return 0!==e.type&&(i=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:IC(e.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function IC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Iv()}}function CC(t,e){return t instanceof TC&&e instanceof TC?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof kC&&e instanceof kC&&t._firestore===e._firestore&&MI(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function AC(t){if(nw(t)&&0===t.explicitOrderBy.length)throw new Nv(Ov.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class OC{}function NC(t,...e){for(const n of e)t=n._apply(t);return t}class DC extends OC{constructor(t,e,n){super(),this.Ga=t,this.za=e,this.Ha=n,this.type="where"}_apply(t){const e=tC(t.firestore),n=function(t,e,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Nv(Ov.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on FieldPath.documentId().`);if("in"===s||"not-in"===s){UC(o,s);const e=[];for(const n of o)e.push(jC(r,t,n));a={arrayValue:{values:e}}}else a=jC(r,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||UC(o,s),a=lC(n,"where",o,"in"===s||"not-in"===s);const u=F_.create(i,s,a);return function(t,e){if(e.V()){const n=iw(t);if(null!==n&&!n.isEqual(e.field))throw new Nv(Ov.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${e.field.toString()}'`);const r=rw(t);null!==r&&VC(0,e.field,r)}const n=function(t,e){for(const n of t.filters)if(e.indexOf(n.op)>=0)return n.op;return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new Nv(Ov.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}(t,u),u}(t._query,0,e,t.firestore._databaseId,this.Ga,this.za,this.Ha);return new OI(t.firestore,t.converter,function(t,e){const n=t.filters.concat([e]);return new J_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))}}class PC extends OC{constructor(t,e){super(),this.Ga=t,this.Ja=e,this.type="orderBy"}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new Nv(Ov.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Nv(Ov.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new W_(e,n);return function(t,e){if(null===rw(t)){const n=iw(t);null!==n&&VC(0,n,e.field)}}(t,r),r}(t._query,this.Ga,this.Ja);return new OI(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new J_(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}class RC extends OC{constructor(t,e,n){super(),this.type=t,this.Ya=e,this.Xa=n}_apply(t){return new OI(t.firestore,t.converter,uw(t._query,this.Ya,this.Xa))}}class MC extends OC{constructor(t,e,n){super(),this.type=t,this.Za=e,this.tc=n}_apply(t){const e=FC(t,this.type,this.Za,this.tc);return new OI(t.firestore,t.converter,function(t,e){return new J_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))}}class LC extends OC{constructor(t,e,n){super(),this.type=t,this.Za=e,this.tc=n}_apply(t){const e=FC(t,this.type,this.Za,this.tc);return new OI(t.firestore,t.converter,function(t,e){return new J_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))}}function FC(t,e,n,r){if(n[0]=(0,hp.m9)(n[0]),n[0]instanceof wC)return function(t,e,n,r,i){if(!r)throw new Nv(Ov.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of ow(t))if(o.field.isKeyField())s.push(x_(e,r.key));else{const t=r.data.field(o.field);if(u_(t))throw new Nv(Ov.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===t){const t=o.field.canonicalString();throw new Nv(Ov.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${t}' (used as the orderBy) does not exist.`)}s.push(t)}return new Z_(s,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=tC(t.firestore);return function(t,e,n,r,i,s){const o=t.explicitOrderBy;if(i.length>o.length)throw new Nv(Ov.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let u=0;u<i.length;u++){const s=i[u];if(o[u].field.isKeyField()){if("string"!=typeof s)throw new Nv(Ov.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof s}`);if(!sw(t)&&-1!==s.indexOf("/"))throw new Nv(Ov.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${r}() must be a plain document ID, but '${s}' contains a slash.`);const n=t.path.child(Xv.fromString(s));if(!p_.isDocumentKey(n))throw new Nv(Ov.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new p_(n);a.push(x_(e,i))}else{const t=lC(n,r,s);a.push(t)}}return new Z_(a,s)}(t._query,t.firestore._databaseId,i,e,n,r)}}function jC(t,e,n){if("string"==typeof(n=(0,hp.m9)(n))){if(""===n)throw new Nv(Ov.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!sw(e)&&-1!==n.indexOf("/"))throw new Nv(Ov.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Xv.fromString(n));if(!p_.isDocumentKey(r))throw new Nv(Ov.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return x_(t,new p_(r))}if(n instanceof AI)return x_(t,n._key);throw new Nv(Ov.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${TI(n)}.`)}function UC(t,e){if(!Array.isArray(t)||0===t.length)throw new Nv(Ov.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new Nv(Ov.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function VC(t,e,n){if(!n.isEqual(e))throw new Nv(Ov.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class qC{convertValue(t,e="none"){switch(g_(t)){case 0:return null;case 1:return t.booleanValue;case 2:return o_(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(a_(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Iv()}}convertObject(t,e){const n={};return Yv(t.fields,(t,r)=>{n[t]=this.convertValue(r,e)}),n}convertGeoPoint(t){return new HI(o_(t.latitude),o_(t.longitude))}convertArray(t,e){return(t.values||[]).map(t=>this.convertValue(t,e))}convertServerTimestamp(t,e){switch(e){case"previous":const n=c_(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(l_(t));default:return null}}convertTimestamp(t){const e=s_(t);return new Hv(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Xv.fromString(t);Cv(tx(n));const r=new vI(n.get(1),n.get(3)),i=new p_(n.popFirst(5));return r.isEqual(e)||Tv(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}function BC(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class zC extends qC{constructor(t){super(),this.firestore=t}convertBytes(t){return new GI(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new AI(this.firestore,null,e)}}class $C{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=tC(t)}set(t,e,n){this._verifyNotCommitted();const r=GC(t,this._firestore),i=BC(r.converter,e,n),s=eC(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Dw.none())),this}update(t,e,n,...r){this._verifyNotCommitted();const i=GC(t,this._firestore);let s;return s="string"==typeof(e=(0,hp.m9)(e))||e instanceof $I?cC(this._dataReader,"WriteBatch.update",i._key,e,n,r):uC(this._dataReader,"WriteBatch.update",i._key,e),this._mutations.push(s.toMutation(i._key,Dw.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=GC(t,this._firestore);return this._mutations=this._mutations.concat(new Gw(e._key,Dw.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Nv(Ov.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function GC(t,e){if((t=(0,hp.m9)(t)).firestore!==e)throw new Nv(Ov.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class ZC extends qC{constructor(t){super(),this.firestore=t}convertBytes(t){return new GI(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new AI(this.firestore,null,e)}}function HC(t,e,n){t=SI(t,AI);const r=SI(t.firestore,UI),i=BC(t.converter,e,n);return YC(r,[eC(tC(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Dw.none())])}function WC(t,e,n,...r){t=SI(t,AI);const i=SI(t.firestore,UI),s=tC(i);let o;return o="string"==typeof(e=(0,hp.m9)(e))||e instanceof $I?cC(s,"updateDoc",t._key,e,n,r):uC(s,"updateDoc",t._key,e),YC(i,[o.toMutation(t._key,Dw.exists(!0))])}function KC(t,...e){var n,r,i;t=(0,hp.m9)(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||FI(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(FI(e[o])){const t=e[o];e[o]=null===(n=t.next)||void 0===n?void 0:n.bind(t),e[o+1]=null===(r=t.error)||void 0===r?void 0:r.bind(t),e[o+2]=null===(i=t.complete)||void 0===i?void 0:i.bind(t)}let u,c,l;if(t instanceof AI)c=SI(t.firestore,UI),l=tw(t._key.path),u={next:n=>{e[o]&&e[o](QC(c,t,n))},error:e[o+1],complete:e[o+2]};else{const n=SI(t,OI);c=SI(n.firestore,UI),l=n._query;const r=new ZC(c);u={next:t=>{e[o]&&e[o](new kC(c,r,n,t))},error:e[o+1],complete:e[o+2]},AC(t._query)}return function(t,e,n,r){const i=new Yk(r),s=new BS(e,i,n);return t.asyncQueue.enqueueAndForget((0,ap.Z)(function*(){return MS(yield fI(t),s)})),()=>{i.na(),t.asyncQueue.enqueueAndForget((0,ap.Z)(function*(){return FS(yield fI(t),s)}))}}(VI(c),l,a,u)}function YC(t,e){return function(t,e){const n=new Dv;return t.asyncQueue.enqueueAndForget((0,ap.Z)(function*(){return function(t,e,n){return sk.apply(this,arguments)}(yield dI(t),e,n)})),n.promise}(VI(t),e)}function QC(t,e,n){const r=n.docs.get(e._key),i=new ZC(t);return new TC(t,i,e._key,r,new EC(n.hasPendingWrites,n.fromCache),e.converter)}class JC extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=tC(t)}get(t){const e=GC(t,this._firestore),n=new zC(this._firestore);return this._transaction.lookup([e._key]).then(t=>{if(!t||1!==t.length)return Iv();const r=t[0];if(r.isFoundDocument())return new wC(this._firestore,n,r.key,r,e.converter);if(r.isNoDocument())return new wC(this._firestore,n,e._key,null,e.converter);throw Iv()})}set(t,e,n){const r=GC(t,this._firestore),i=BC(r.converter,e,n),s=eC(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(t,e,n,...r){const i=GC(t,this._firestore);let s;return s="string"==typeof(e=(0,hp.m9)(e))||e instanceof $I?cC(this._dataReader,"Transaction.update",i._key,e,n,r):uC(this._dataReader,"Transaction.update",i._key,e),this._transaction.update(i._key,s),this}delete(t){const e=GC(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=GC(t,this._firestore),n=new ZC(this._firestore);return super.get(t).then(t=>new TC(this._firestore,n,e._key,t._document,new EC(!1,!1),e.converter))}}function XC(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Nv("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function tA(){if("undefined"==typeof Uint8Array)throw new Nv("unimplemented","Uint8Arrays are not available in this environment.")}function eA(){if("undefined"==typeof atob)throw new Nv("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(t,e=!0){!function(t){wv=t}(up.SDK_VERSION),(0,up._registerComponent)(new cp.wA("firestore",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=new UI(r,new Lv(t.getProvider("auth-internal")),new Vv(t.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:e},n),i._setSettings(n),i},"PUBLIC")),(0,up.registerVersion)(vv,"3.4.1",t),(0,up.registerVersion)(vv,"3.4.1","esm2017")}();class nA{constructor(t){this._delegate=t}static fromBase64String(t){return eA(),new nA(GI.fromBase64String(t))}static fromUint8Array(t){return tA(),new nA(GI.fromUint8Array(t))}toBase64(){return eA(),this._delegate.toBase64()}toUint8Array(){return tA(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function rA(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(t)}class iA{enableIndexedDbPersistence(t,e){return function(t,e){zI(t=SI(t,UI));const n=VI(t),r=t._freezeSettings(),i=new Wk;return BI(n,i,new Zk(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function(t){zI(t=SI(t,UI));const e=VI(t),n=t._freezeSettings(),r=new Wk;return BI(e,r,new Hk(r,n.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function(t){if(t._initialized&&!t._terminated)throw new Nv(Ov.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Dv;return t._queue.enqueueAndForgetEvenWhileRestricted((0,ap.Z)(function*(){try{yield(n=(0,ap.Z)(function*(t){if(!kx.bt())return Promise.resolve();const e=t+"main";yield kx.delete(e)}),function(t){return n.apply(this,arguments)})(jE(t._databaseId,t._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var n})),e.promise}(t._delegate)}}class sA{constructor(t,e,n){this._delegate=e,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},t instanceof vI||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();t.merge||e.host===t.host||Sv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,n={}){!function(t,e,n,r={}){var i;const s=(t=SI(t,CI))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&Sv("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let e,n;if("string"==typeof r.mockUserToken)e=r.mockUserToken,n=_v.MOCK_USER;else{e=(0,hp.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Nv(Ov.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new _v(s)}t._authCredentials=new Mv(new Pv(e,n))}}(this._delegate,t,e,n)}enableNetwork(){return function(t){return function(t){return t.asyncQueue.enqueue((0,ap.Z)(function*(){const e=yield cI(t),n=yield hI(t);return e.setNetworkEnabled(!0),function(t){const e=Av(t);return e.Gr.delete(0),zT(e)}(n)}))}(VI(t=SI(t,UI)))}(this._delegate)}disableNetwork(){return function(t){return function(t){return t.asyncQueue.enqueue((0,ap.Z)(function*(){const e=yield cI(t),n=yield hI(t);return e.setNetworkEnabled(!1),(r=(0,ap.Z)(function*(t){const e=Av(t);e.Gr.add(0),yield GT(e),e.Jr.set("Offline")}),function(t){return r.apply(this,arguments)})(n);var r}))}(VI(t=SI(t,UI)))}(this._delegate)}enablePersistence(t){let e=!1,n=!1;return t&&(e=!!t.synchronizeTabs,n=!!t.experimentalForceOwningTab,bI("synchronizeTabs",e,"experimentalForceOwningTab",n)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(t){return function(t){const e=new Dv;return t.asyncQueue.enqueueAndForget((0,ap.Z)(function*(){return function(t,e){return gk.apply(this,arguments)}(yield dI(t),e)})),e.promise}(VI(t=SI(t,UI)))}(this._delegate)}onSnapshotsInSync(t){return function(t,e){return function(t,e){const n=new Yk(e);return t.asyncQueue.enqueueAndForget((0,ap.Z)(function*(){return function(t,e){Av(t).io.add(e),e.next()}(yield fI(t),n)})),()=>{n.na(),t.asyncQueue.enqueueAndForget((0,ap.Z)(function*(){return function(t,e){Av(t).io.delete(e)}(yield fI(t),n)}))}}(VI(t=SI(t,UI)),FI(e)?e:{next:e})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Nv("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new _A(this,DI(this._delegate,t))}catch(e){throw hA(e,"collection()","Firestore.collection()")}}doc(t){try{return new lA(this,PI(this._delegate,t))}catch(e){throw hA(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new mA(this,function(t,e){if(t=SI(t,CI),wI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Nv(Ov.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new OI(t,null,function(t){return new J_(Xv.emptyPath(),t)}(e))}(this._delegate,t))}catch(e){throw hA(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function(t,e){return function(t,e){const n=new Dv;return t.asyncQueue.enqueueAndForget((0,ap.Z)(function*(){const r=yield function(t){return aI(t).then(t=>t.datastore)}(t);new Xk(t.asyncQueue,r,e,n).run()})),n.promise}(VI(t=SI(t,UI)),n=>e(new JC(t,n)))}(this._delegate,e=>t(new aA(this,e)))}batch(){return VI(this._delegate),new uA(new $C(this._delegate,t=>YC(this._delegate,t)))}loadBundle(t){return function(t,e){const n=VI(t=SI(t,UI)),r=new jI;return function(t,e,n,r){const i=function(t,e){let n;return n="string"==typeof t?(new TextEncoder).encode(t):t,function(t,e){return new Qk(t,e)}(function(t,e){if(t instanceof Uint8Array)return Kk(t,e);if(t instanceof ArrayBuffer)return Kk(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),e)}(n,MT(e));t.asyncQueue.enqueueAndForget((0,ap.Z)(function*(){!function(t,e,n){const r=Av(t);var i;(i=(0,ap.Z)(function*(t,e,n){try{const r=yield e.getMetadata();if(yield function(t,e){const n=Av(t),r=Cb(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",t=>n.Ye.getBundleMetadata(t,e.id)).then(t=>!!t&&t.createTime.compareTo(r)>=0)}(t.localStore,r))return yield e.close(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r));n._updateProgress(ZS(r));const i=new GS(r,t.localStore,e.k);let s=yield e.Ho();for(;s;){const t=yield i.yo(s);t&&n._updateProgress(t),s=yield e.Ho()}const o=yield i.complete();yield Ek(t,o.In,void 0),yield function(t,e){const n=Av(t);return n.persistence.runTransaction("Save bundle","readwrite",t=>n.Ye.saveBundleMetadata(t,e))}(t.localStore,r),n._completeWith(o.progress)}catch(t){Sv("SyncEngine",`Loading bundle failed with ${t}`),n._failWith(t)}}),function(t,e,n){return i.apply(this,arguments)})(r,e,n).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield dI(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,t)}namedQuery(t){return function(t,e){return function(t,e){return t.asyncQueue.enqueue((0,ap.Z)(function*(){return function(t,e){const n=Av(t);return n.persistence.runTransaction("Get named query","readonly",t=>n.Ye.getNamedQuery(t,e))}(yield lI(t),e)}))}(VI(t=SI(t,UI)),e).then(e=>e?new OI(t,null,e.query):null)}(this._delegate,t).then(t=>t?new mA(this,t):null)}}class oA extends qC{constructor(t){super(),this.firestore=t}convertBytes(t){return new nA(new GI(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return lA.forKey(e,this.firestore,null)}}class aA{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new oA(t)}get(t){const e=wA(t);return this._delegate.get(e).then(t=>new pA(this._firestore,new TC(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,e.converter)))}set(t,e,n){const r=wA(t);return n?(XC("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this}update(t,e,n,...r){const i=wA(t);return 2===arguments.length?this._delegate.update(i,e):this._delegate.update(i,e,n,...r),this}delete(t){const e=wA(t);return this._delegate.delete(e),this}}class uA{constructor(t){this._delegate=t}set(t,e,n){const r=wA(t);return n?(XC("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this}update(t,e,n,...r){const i=wA(t);return 2===arguments.length?this._delegate.update(i,e):this._delegate.update(i,e,n,...r),this}delete(t){const e=wA(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class cA{constructor(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}fromFirestore(t,e){const n=new SC(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new gA(this._firestore,n),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const n=cA.INSTANCES;let r=n.get(t);r||(r=new WeakMap,n.set(t,r));let i=r.get(e);return i||(i=new cA(t,new oA(t),e),r.set(e,i)),i}}cA.INSTANCES=new WeakMap;class lA{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new oA(t)}static forPath(t,e,n){if(t.length%2!=0)throw new Nv("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new lA(e,new AI(e._delegate,n,new p_(t)))}static forKey(t,e,n){return new lA(e,new AI(e._delegate,n,t))}get id(){return this._delegate.id}get parent(){return new _A(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new _A(this.firestore,DI(this._delegate,t))}catch(e){throw hA(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,hp.m9)(t))instanceof AI&&RI(this._delegate,t)}set(t,e){e=XC("DocumentReference.set",e);try{return e?HC(this._delegate,t,e):HC(this._delegate,t)}catch(n){throw hA(n,"setDoc()","DocumentReference.set()")}}update(t,e,...n){try{return 1===arguments.length?WC(this._delegate,t):WC(this._delegate,t,e,...n)}catch(r){throw hA(r,"updateDoc()","DocumentReference.update()")}}delete(){return function(t){return YC(SI(t.firestore,UI),[new Gw(t._key,Dw.none())])}(this._delegate)}onSnapshot(...t){const e=dA(t),n=fA(t,t=>new pA(this.firestore,new TC(this.firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,this._delegate.converter)));return KC(this._delegate,e,n)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(t){t=SI(t,AI);const e=SI(t.firestore,UI),n=VI(e),r=new ZC(e);return function(t,e){const n=new Dv;return t.asyncQueue.enqueueAndForget((0,ap.Z)(function*(){return(r=(0,ap.Z)(function*(t,e,n){try{const r=yield function(t,e){const n=Av(t);return n.persistence.runTransaction("read document","readonly",t=>n.Wn.Rn(t,e))}(t,e);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Nv(Ov.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(t){const r=AS(t,`Failed to get document '${e} from cache`);n.reject(r)}}),function(t,e,n){return r.apply(this,arguments)})(yield lI(t),e,n);var r})),n.promise}(n,t._key).then(n=>new TC(e,r,t._key,n,new EC(null!==n&&n.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=SI(t,AI);const e=SI(t.firestore,UI);return gI(VI(e),t._key,{source:"server"}).then(n=>QC(e,t,n))}(this._delegate):function(t){t=SI(t,AI);const e=SI(t.firestore,UI);return gI(VI(e),t._key).then(n=>QC(e,t,n))}(this._delegate),e.then(t=>new pA(this.firestore,new TC(this.firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,this._delegate.converter)))}withConverter(t){return new lA(this.firestore,this._delegate.withConverter(t?cA.getInstance(this.firestore,t):null))}}function hA(t,e,n){return t.message=t.message.replace(e,n),t}function dA(t){for(const e of t)if("object"==typeof e&&!rA(e))return e;return{}}function fA(t,e){var n,r;let i;return i=rA(t[0])?t[0]:rA(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:t=>{i.next&&i.next(e(t))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class pA{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new lA(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return CC(this._delegate,t._delegate)}}class gA extends pA{data(t){const e=this._delegate.data(t);return function(t,e){t||Iv()}(void 0!==e),e}}class mA{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new oA(t)}where(t,e,n){try{return new mA(this.firestore,NC(this._delegate,function(t,e,n){const r=e,i=xC("where",t);return new DC(i,r,n)}(t,e,n)))}catch(r){throw hA(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new mA(this.firestore,NC(this._delegate,function(t,e="asc"){const n=e,r=xC("orderBy",t);return new PC(r,n)}(t,e)))}catch(n){throw hA(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new mA(this.firestore,NC(this._delegate,function(t){return kI("limit",t),new RC("limit",t,"F")}(t)))}catch(e){throw hA(e,"limit()","Query.limit()")}}limitToLast(t){try{return new mA(this.firestore,NC(this._delegate,function(t){return kI("limitToLast",t),new RC("limitToLast",t,"L")}(t)))}catch(e){throw hA(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new mA(this.firestore,NC(this._delegate,function(...t){return new MC("startAt",t,!0)}(...t)))}catch(e){throw hA(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new mA(this.firestore,NC(this._delegate,function(...t){return new MC("startAfter",t,!1)}(...t)))}catch(e){throw hA(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new mA(this.firestore,NC(this._delegate,function(...t){return new LC("endBefore",t,!0)}(...t)))}catch(e){throw hA(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new mA(this.firestore,NC(this._delegate,function(...t){return new LC("endAt",t,!1)}(...t)))}catch(e){throw hA(e,"endAt()","Query.endAt()")}}isEqual(t){return MI(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function(t){t=SI(t,OI);const e=SI(t.firestore,UI),n=VI(e),r=new ZC(e);return function(t,e){const n=new Dv;return t.asyncQueue.enqueueAndForget((0,ap.Z)(function*(){return(r=(0,ap.Z)(function*(t,e,n){try{const r=yield eT(t,e,!0),i=new KS(e,r.zn),s=i.bo(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(t){const r=AS(t,`Failed to execute query '${e} against cache`);n.reject(r)}}),function(t,e,n){return r.apply(this,arguments)})(yield lI(t),e,n);var r})),n.promise}(n,t._query).then(n=>new kC(e,r,t,n))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=SI(t,OI);const e=SI(t.firestore,UI),n=VI(e),r=new ZC(e);return mI(n,t._query,{source:"server"}).then(n=>new kC(e,r,t,n))}(this._delegate):function(t){t=SI(t,OI);const e=SI(t.firestore,UI),n=VI(e),r=new ZC(e);return AC(t._query),mI(n,t._query).then(n=>new kC(e,r,t,n))}(this._delegate),e.then(t=>new vA(this.firestore,new kC(this.firestore._delegate,this._userDataWriter,this._delegate,t._snapshot)))}onSnapshot(...t){const e=dA(t),n=fA(t,t=>new vA(this.firestore,new kC(this.firestore._delegate,this._userDataWriter,this._delegate,t._snapshot)));return KC(this._delegate,e,n)}withConverter(t){return new mA(this.firestore,this._delegate.withConverter(t?cA.getInstance(this.firestore,t):null))}}class yA{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new gA(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vA{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new mA(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new gA(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(t=>new yA(this._firestore,t))}forEach(t,e){this._delegate.forEach(n=>{t.call(e,new gA(this._firestore,n))})}isEqual(t){return CC(this._delegate,t._delegate)}}class _A extends mA{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new lA(this.firestore,t):null}doc(t){try{return new lA(this.firestore,void 0===t?PI(this._delegate):PI(this._delegate,t))}catch(e){throw hA(e,"doc()","CollectionReference.doc()")}}add(t){return function(t,e){const n=SI(t.firestore,UI),r=PI(t),i=BC(t.converter,e);return YC(n,[eC(tC(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Dw.exists(!1))]).then(()=>r)}(this._delegate,t).then(t=>new lA(this.firestore,t))}isEqual(t){return RI(this._delegate,t._delegate)}withConverter(t){return new _A(this.firestore,this._delegate.withConverter(t?cA.getInstance(this.firestore,t):null))}}function wA(t){return SI(t,AI)}class bA{constructor(...t){this._delegate=new $I(...t)}static documentId(){return new bA(e_.keyField().canonicalString())}isEqual(t){return(t=(0,hp.m9)(t))instanceof $I&&this._delegate._internalPath.isEqual(t._internalPath)}}class xA{constructor(t){this._delegate=t}static serverTimestamp(){const t=new iC("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new xA(t)}static delete(){const t=new nC("deleteField");return t._methodName="FieldValue.delete",new xA(t)}static arrayUnion(...t){const e=function(...t){return new sC("arrayUnion",t)}(...t);return e._methodName="FieldValue.arrayUnion",new xA(e)}static arrayRemove(...t){const e=function(...t){return new oC("arrayRemove",t)}(...t);return e._methodName="FieldValue.arrayRemove",new xA(e)}static increment(t){const e=function(t){return new aC("increment",t)}(t);return e._methodName="FieldValue.increment",new xA(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const EA={Firestore:sA,GeoPoint:HI,Timestamp:Hv,Blob:nA,Transaction:aA,WriteBatch:uA,DocumentReference:lA,DocumentSnapshot:pA,Query:mA,QueryDocumentSnapshot:gA,QuerySnapshot:vA,CollectionReference:_A,FieldPath:bA,FieldValue:xA,setLogLevel:function(t){!function(t){bv.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};var TA;(TA=op.Z).INTERNAL.registerComponent(new cp.wA("firestore-compat",t=>{return e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("firestore").getImmediate(),new sA(e,n,new iA);var e,n},"PUBLIC").setServiceProps(Object.assign({},EA))),TA.registerVersion("@firebase/firestore-compat","0.1.10");var SA=n(6682),kA=n(309),IA=n(5345);function CA(t,e){return"function"==typeof e?n=>n.pipe(CA((n,r)=>(0,xt.D)(t(n,r)).pipe((0,St.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new AA(t))}class AA{constructor(t){this.project=t}call(t,e){return e.subscribe(new OA(t,this.project))}}class OA extends IA.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new IA.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,IA.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var NA=n(7771),DA=n(7971),PA=n(8858);class RA extends wc.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new MA(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new DA.N;if(this.isStopped||this.hasError?s=bc.w.EMPTY:(this.observers.push(t),s=new PA.W(this,t)),r&&t.add(t=new kA.ht(t,r)),e)for(let o=0;o<i&&!t.closed;o++)t.next(n[o]);else for(let o=0;o<i&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),s}_getNow(){return(this.scheduler||NA.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(t-r[s].time<n);)s++;return i>e&&(s=Math.max(s,i-e)),s>0&&r.splice(0,s),r}}class MA{constructor(t,e){this.time=t,this.value=e}}function LA(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,u=!1;return function(c){let l;o++,!i||a?(a=!1,i=new RA(t,e,r),l=i.subscribe(this),s=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,s=void 0,i.complete()}}),u&&(s=void 0)):l=i.subscribe(this),this.add(()=>{o--,l.unsubscribe(),l=void 0,s&&!u&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}function FA(t,e){return e?CA(()=>t,e):CA(()=>t)}var jA=n(3101);n(2329);const UA=new Map,VA={activated:!1,tokenObservers:[]},qA={initialized:!1,enabled:!1};function BA(t){return UA.get(t)||VA}function zA(t,e){UA.set(t,e)}function $A(){return qA}class GA{constructor(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,ap.Z)(function*(){e.stop();try{e.pending=new hp.BH,yield function(t){return new Promise(e=>{setTimeout(e,t)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new hp.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(n){e.retryPolicy(n)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ZA=new hp.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function HA(t){if(!BA(t).activated)throw ZA.create("use-before-activation",{appName:t.name})}function WA(t,e){return KA.apply(this,arguments)}function KA(){return(KA=(0,ap.Z)(function*({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(t,s)}catch(h){throw ZA.create("fetch-network-error",{originalErrorMessage:h.message})}if(200!==o.status)throw ZA.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(h){throw ZA.create("fetch-parse-error",{originalErrorMessage:h.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw ZA.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=1e3*Number(u[1]),l=Date.now();return{token:a.attestationToken,expireTimeMillis:l+c,issuedAtTimeMillis:l}})).apply(this,arguments)}function YA(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${n}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const QA="firebase-app-check-store";let JA=null;function XA(){return JA||(JA=new Promise((t,e)=>{try{const n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=e=>{t(e.target.result)},n.onerror=t=>{var n;e(ZA.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=t=>{const e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(QA,{keyPath:"compositeKey"})}}}catch(n){e(ZA.create("storage-open",{originalErrorMessage:n.message}))}}),JA)}function tO(){return(tO=(0,ap.Z)(function*(t,e){const n=(yield XA()).transaction(QA,"readwrite"),r=n.objectStore(QA).put({compositeKey:t,value:e});return new Promise((t,e)=>{r.onsuccess=e=>{t()},n.onerror=t=>{var n;e(ZA.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}})})).apply(this,arguments)}const eO=new lp.Yd("@firebase/app-check");function nO(t,e){return(0,hp.hl)()?function(t,e){return function(t,e){return tO.apply(this,arguments)}(function(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(t=>{eO.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function rO(){return $A().enabled}function iO(){return sO.apply(this,arguments)}function sO(){return(sO=(0,ap.Z)(function*(){const t=$A();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const oO={error:"UNKNOWN_ERROR"};function aO(t){return uO.apply(this,arguments)}function uO(){return(uO=(0,ap.Z)(function*(t,e=!1){const n=t.app;HA(n);const r=BA(n);let i,s=r.token;if(!s){const t=yield r.cachedTokenPromise;t&&dO(t)&&(s=t)}if(!e&&s&&dO(s))return{token:s.token};let o,a=!1;if(rO()){r.exchangeTokenPromise||(r.exchangeTokenPromise=WA(YA(n,yield iO()),t.platformLoggerProvider).then(t=>(r.exchangeTokenPromise=void 0,t)),a=!0);const e=yield r.exchangeTokenPromise;return yield nO(n,e),zA(n,Object.assign(Object.assign({},r),{token:e})),{token:e.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(t=>(r.exchangeTokenPromise=void 0,t)),a=!0),s=yield r.exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code?eO.warn(u.message):eO.error(u),i=u}return s?(o={token:s.token},zA(n,Object.assign(Object.assign({},r),{token:s})),yield nO(n,s)):o=fO(i),a&&hO(n,o),o})).apply(this,arguments)}function cO(t,e){const n=BA(t),r=n.tokenObservers.filter(t=>t.next!==e);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),zA(t,Object.assign(Object.assign({},n),{tokenObservers:r}))}function lO(t){const{app:e}=t,n=BA(e);let r=n.tokenRefresher;r||(r=function(t){const{app:e}=t;return new GA((0,ap.Z)(function*(){let n;if(n=BA(e).token?yield aO(t,!0):yield aO(t),n.error)throw n.error}),()=>!0,()=>{const t=BA(e);if(t.token){let e=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return e=Math.min(e,t.token.expireTimeMillis-3e5),Math.max(0,e-Date.now())}return 0},3e4,96e4)}(t),zA(e,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function hO(t,e){const n=BA(t).tokenObservers;for(const i of n)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(r){}}function dO(t){return t.expireTimeMillis-Date.now()>0}function fO(t){return{token:(e=oO,hp.US.encodeString(JSON.stringify(e),!1)),error:t};var e}class pO{constructor(t,e){this.app=t,this.platformLoggerProvider=e}_delete(){const{tokenObservers:t}=BA(this.app);for(const e of t)cO(this.app,e.next);return Promise.resolve()}}const gO="app-check-internal";(0,up._registerComponent)(new cp.wA("app-check",t=>{return e=t.getProvider("app").getImmediate(),n=t.getProvider("platform-logger"),new pO(e,n);var e,n},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(gO).initialize()})),(0,up._registerComponent)(new cp.wA(gO,t=>{return e=t.getProvider("app-check").getImmediate(),{getToken:t=>aO(e,t),addTokenListener:t=>function(t,e,n,r){const{app:i}=t,s=BA(i),o={next:n,error:void 0,type:"INTERNAL"};if(zA(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&dO(s.token)){const e=s.token;Promise.resolve().then(()=>{n({token:e.token}),lO(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>lO(t))}(e,0,t),removeTokenListener:t=>cO(e.app,t)};var e},"PUBLIC").setInstantiationMode("EXPLICIT")),(0,up.registerVersion)("@firebase/app-check","0.5.2");class mO{constructor(){return(0,Zf.vb)("app-check")}}"undefined"!=typeof window&&window;var yO=n(7841);const vO=new o.OlP("angularfire2.auth.use-emulator"),_O=new o.OlP("angularfire2.auth.settings"),wO=new o.OlP("angularfire2.auth.tenant-id"),bO=new o.OlP("angularfire2.auth.langugage-code"),xO=new o.OlP("angularfire2.auth.use-device-language"),EO=new o.OlP("angularfire.auth.persistence"),TO=(t,e,n,r,i,s,o,a)=>(0,Gf.cc)(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[t,e]of Object.entries(o))u.settings[t]=e;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]);let SO=(()=>{class t{constructor(t,e,r,i,s,o,a,u,c,l,h,d){const f=new wc.xQ,p=(0,xc.of)(void 0).pipe((0,kA.QV)(s.outsideAngular),CA(()=>i.runOutsideAngular(()=>Promise.resolve().then(n.bind(n,6094)))),(0,St.U)(()=>(0,Gf.on)(t,i,e)),(0,St.U)(t=>TO(t,i,o,u,c,l,a,h)),LA({bufferSize:1,refCount:!1}));if(U(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,xc.of)(null);else{p.pipe(Vc()).subscribe();const t=p.pipe(CA(t=>t.getRedirectResult().then(t=>t,()=>null)),Zf.iC,LA({bufferSize:1,refCount:!1})),e=p.pipe(CA(t=>new Et.y(e=>({unsubscribe:i.runOutsideAngular(()=>t.onAuthStateChanged(t=>e.next(t),t=>e.error(t),()=>e.complete()))})))),n=p.pipe(CA(t=>new Et.y(e=>({unsubscribe:i.runOutsideAngular(()=>t.onIdTokenChanged(t=>e.next(t),t=>e.error(t),()=>e.complete()))}))));this.authState=t.pipe(FA(e),(0,jA.R)(s.outsideAngular),(0,kA.QV)(s.insideAngular)),this.user=t.pipe(FA(n),(0,jA.R)(s.outsideAngular),(0,kA.QV)(s.insideAngular)),this.idToken=this.user.pipe(CA(t=>t?(0,xt.D)(t.getIdToken()):(0,xc.of)(null))),this.idTokenResult=this.user.pipe(CA(t=>t?(0,xt.D)(t.getIdTokenResult()):(0,xc.of)(null))),this.credential=(0,SA.T)(t,f,this.authState.pipe(Tc(t=>!t))).pipe((0,St.U)(t=>(null==t?void 0:t.user)?t:null),(0,jA.R)(s.outsideAngular),(0,kA.QV)(s.insideAngular))}return(0,Gf.pX)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(Gf.Dh),o.LFG(Gf.xv,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Zf.HU),o.LFG(vO,8),o.LFG(_O,8),o.LFG(wO,8),o.LFG(bO,8),o.LFG(xO,8),o.LFG(EO,8),o.LFG(mO,8))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t})();function kO(t,e){return function(t,e=Ge.z){return new Et.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function IO(t,e){return kO(t,e).pipe((0,St.U)(t=>({payload:t,type:"query"})))}function CO(t,e){return IO(t,e).pipe(Yf(void 0),Qf(),(0,St.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const s=n.find(t=>t.doc.ref.isEqual(e.ref)),o=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(e.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function AO(t,e,n){return CO(t,n).pipe(tp((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return OO(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return OO(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return OO(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new rp(void 0,void 0)),(0,St.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function OO(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function NO(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class DO{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=CO(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,St.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Yf(void 0),Qf(),Tc(([t,e])=>e.length>0||!t),(0,St.U)(([t,e])=>e),Zf.iC)}auditTrail(t){return this.stateChanges(t).pipe(tp((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=NO(t);return AO(this.query,e,this.afs.schedulers.outsideAngular).pipe(Zf.iC)}valueChanges(t={}){return IO(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),Zf.iC)}get(t){return(0,xt.D)(this.query.get(t)).pipe(Zf.iC)}add(t){return this.ref.add(t)}doc(t){return new PO(this.ref.doc(t),this.afs)}}class PO{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=UO(n,e);return new DO(r,i,this.afs)}snapshotChanges(){return kO(this.ref,this.afs.schedulers.outsideAngular).pipe(Yf(void 0),Qf(),(0,St.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(Zf.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,St.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,xt.D)(this.ref.get(t)).pipe(Zf.iC)}}class RO{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?CO(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Tc(t=>t.length>0),Zf.iC):CO(this.query,this.afs.schedulers.outsideAngular).pipe(Zf.iC)}auditTrail(t){return this.stateChanges(t).pipe(tp((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=NO(t);return AO(this.query,e,this.afs.schedulers.outsideAngular).pipe(Zf.iC)}valueChanges(t={}){return IO(this.query,this.afs.schedulers.outsideAngular).pipe((0,St.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),Zf.iC)}get(t){return(0,xt.D)(this.query.get(t)).pipe(Zf.iC)}}const MO=new o.OlP("angularfire2.enableFirestorePersistence"),LO=new o.OlP("angularfire2.firestore.persistenceSettings"),FO=new o.OlP("angularfire2.firestore.settings"),jO=new o.OlP("angularfire2.firestore.use-emulator");function UO(t,e=(t=>t)){return{query:e(t),ref:t}}let VO=(()=>{class t{constructor(t,e,n,r,i,s,o,a,u,c,l,h,d,f,p,g,m){this.schedulers=o;const y=(0,Gf.on)(t,s,e),v=u;c&&TO(y,s,l,d,f,p,h,g),[this.firestore,this.persistenceEnabled$]=(0,Gf.cc)(`${y.name}.firestore`,"AngularFirestore",y.name,()=>{const t=s.runOutsideAngular(()=>y.firestore());if(r&&t.settings(r),v&&t.useEmulator(...v),n&&!U(i)){const e=()=>{try{return(0,xt.D)(t.enablePersistence(a||void 0).then(()=>!0,()=>!1))}catch(e){return"undefined"!=typeof console&&console.warn(e),(0,xc.of)(!1)}};return[t,s.runOutsideAngular(e)]}return[t,(0,xc.of)(!1)]},[r,v,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=UO(n,e),s=this.schedulers.ngZone.run(()=>r);return new DO(s,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new RO(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new PO(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(Gf.Dh),o.LFG(Gf.xv,8),o.LFG(MO,8),o.LFG(FO,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Zf.HU),o.LFG(LO,8),o.LFG(jO,8),o.LFG(SO,8),o.LFG(vO,8),o.LFG(_O,8),o.LFG(wO,8),o.LFG(bO,8),o.LFG(xO,8),o.LFG(EO,8),o.LFG(mO,8))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t})(),qO=(()=>{class t{constructor(){yO.Z.registerVersion("angularfire",Zf.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:t,providers:[{provide:MO,useValue:!0},{provide:LO,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({providers:[VO]}),t})();const BO={apiKey:"AIzaSyBvXiS1H-XSPA0muxaFDul8d3vS2usOWRM",authDomain:"lineage-85cdc.firebaseapp.com",projectId:"lineage-85cdc",storageBucket:"lineage-85cdc.appspot.com",messagingSenderId:"489003351730",appId:"1:489003351730:web:778230ca866145e7c653ab",measurementId:"G-Z195R9NGSQ"};class zO extends wc.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new DA.N;return this._value}next(t){super.next(this._value=t)}}class $O extends $e.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class GO extends $e.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var ZO=n(7444);function HO(t,e,n,r,i=new GO(t,n,r)){if(!i.closed)return e instanceof Et.y?e.subscribe(i):(0,ZO.s)(e)(i)}var WO=n(6693);const KO={};class YO{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new QO(t,this.resultSelector))}}class QO extends $O{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(KO),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(HO(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===KO?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function JO(t){return new Et.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,xt.D)(n):(0,Cc.c)()).subscribe(e)})}var XO=n(2441);function tN(t){return function(e){const n=new eN(t),r=e.lift(n);return n.caught=r}}class eN{constructor(t){this.selector=t}call(t,e){return e.subscribe(new nN(t,this.selector,this.caught))}}class nN extends IA.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new IA.IY(this);this.add(r);const i=(0,IA.ft)(n,r);i!==r&&this.add(i)}}}var rN=n(9773);function iN(t,e){return(0,rN.zg)(t,e,1)}function sN(t){return function(e){return 0===t?(0,Cc.c)():e.lift(new oN(t))}}class oN{constructor(t){if(this.total=t,this.total<0)throw new Ic}call(t,e){return e.subscribe(new aN(t,this.total))}}class aN extends $e.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var uN=n(3342),cN=n(1307);class lN{constructor(t){this.callback=t}call(t,e){return e.subscribe(new hN(t,this.callback))}}class hN extends $e.L{constructor(t,e){super(t),this.add(new bc.w(e))}}class dN{constructor(t,e){this.id=t,this.url=e}}class fN extends dN{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class pN extends dN{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gN extends dN{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class mN extends dN{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class yN extends dN{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vN extends dN{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _N extends dN{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class wN extends dN{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bN extends dN{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xN{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class EN{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class TN{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class SN{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kN{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class IN{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CN{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const AN="primary";class ON{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function NN(t){return new ON(t)}function DN(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function PN(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const e=r[s],n=t[s];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function RN(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!MN(t[i],e[i]))return!1;return!0}function MN(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function LN(t){return Array.prototype.concat.apply([],t)}function FN(t){return t.length>0?t[t.length-1]:null}function jN(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function UN(t){return(0,o.CqO)(t)?t:(0,o.QGY)(t)?(0,xt.D)(Promise.resolve(t)):(0,xc.of)(t)}const VN={exact:function t(e,n,r){if(!KN(e.segments,n.segments))return!1;if(!GN(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:zN},qN={exact:function(t,e){return RN(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>MN(t[n],e[n]))},ignored:()=>!0};function BN(t,e,n){return VN[n.paths](t.root,e.root,n.matrixParams)&&qN[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function zN(t,e,n){return $N(t,e,e.segments,n)}function $N(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!KN(i,n)&&!e.hasChildren()&&!!GN(i,n,r)}if(t.segments.length===n.length){if(!KN(t.segments,n))return!1;if(!GN(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!zN(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!KN(t.segments,i)&&!!GN(t.segments,i,r)&&!!t.children.primary&&$N(t.children.primary,e,s,r)}}function GN(t,e,n){return e.every((e,r)=>qN[n](t[r].parameters,e.parameters))}class ZN{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=NN(this.queryParams)),this._queryParamMap}toString(){return JN.serialize(this)}}class HN{constructor(t,e){this.segments=t,this.children=e,this.parent=null,jN(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return XN(this)}}class WN{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=NN(this.parameters)),this._parameterMap}toString(){return oD(this)}}function KN(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class YN{}class QN{parse(t){const e=new hD(t);return new ZN(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${tD(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${nD(e)}=${nD(t)}`).join("&"):`${nD(e)}=${nD(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const JN=new QN;function XN(t){return t.segments.map(t=>oD(t)).join("/")}function tD(t,e){if(!t.hasChildren())return XN(t);if(e){const e=t.children.primary?tD(t.children.primary,!1):"",n=[];return jN(t.children,(t,e)=>{e!==AN&&n.push(`${e}:${tD(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return jN(t.children,(t,r)=>{r===AN&&(n=n.concat(e(t,r)))}),jN(t.children,(t,r)=>{r!==AN&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===AN?[tD(t.children.primary,!1)]:[`${n}:${tD(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${XN(t)}/${e[0]}`:`${XN(t)}/(${e.join("//")})`}}function eD(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nD(t){return eD(t).replace(/%3B/gi,";")}function rD(t){return eD(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function iD(t){return decodeURIComponent(t)}function sD(t){return iD(t.replace(/\+/g,"%20"))}function oD(t){return`${rD(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${rD(t)}=${rD(e[t])}`).join("")}`;var e}const aD=/^[^\/()?;=#]+/;function uD(t){const e=t.match(aD);return e?e[0]:""}const cD=/^[^=?&#]+/,lD=/^[^?&#]+/;class hD{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new HN([],{}):new HN([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new HN(t,e)),n}parseSegment(){const t=uD(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new WN(iD(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=uD(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=uD(this.remaining);t&&(n=t,this.capture(n))}t[iD(e)]=iD(n)}parseQueryParam(t){const e=function(t){const e=t.match(cD);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(lD);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=sD(e),i=sD(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=uD(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=AN);const s=this.parseChildren();e[i]=1===Object.keys(s).length?s.primary:new HN([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class dD{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=fD(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=fD(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=pD(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return pD(t,this._root).map(t=>t.value)}}function fD(t,e){if(t===e.value)return e;for(const n of e.children){const e=fD(t,n);if(e)return e}return null}function pD(t,e){if(t===e.value)return[e];for(const n of e.children){const r=pD(t,n);if(r.length)return r.unshift(e),r}return[]}class gD{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function mD(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class yD extends dD{constructor(t,e){super(t),this.snapshot=e,ED(this,t)}toString(){return this.snapshot.toString()}}function vD(t,e){const n=function(t,e){const n=new bD([],{},{},"",{},AN,e,null,t.root,-1,{});return new xD("",new gD(n,[]))}(t,e),r=new zO([new WN("",{})]),i=new zO({}),s=new zO({}),o=new zO({}),a=new zO(""),u=new _D(r,i,o,a,s,AN,e,n.root);return u.snapshot=n.root,new yD(new gD(u,[]),n)}class _D{constructor(t,e,n,r,i,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,St.U)(t=>NN(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,St.U)(t=>NN(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function wD(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class bD{constructor(t,e,n,r,i,s,o,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=NN(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=NN(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xD extends dD{constructor(t,e){super(e),this.url=t,ED(this,e)}toString(){return TD(this._root)}}function ED(t,e){e.value._routerState=t,e.children.forEach(e=>ED(t,e))}function TD(t){const e=t.children.length>0?` { ${t.children.map(TD).join(", ")} } `:"";return`${t.value}${e}`}function SD(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,RN(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),RN(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!RN(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),RN(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function kD(t,e){return RN(t.params,e.params)&&function(t,e){return KN(t,e)&&t.every((t,n)=>RN(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||kD(t.parent,e.parent))}function ID(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return ID(t,e,r);return ID(t,e)})}(t,e,n);return new gD(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return CD(e,t),t}}const n=new _D(new zO((r=e.value).url),new zO(r.params),new zO(r.queryParams),new zO(r.fragment),new zO(r.data),r.outlet,r.component,r),i=e.children.map(e=>ID(t,e));return new gD(n,i)}var r}function CD(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)CD(t.children[n],e.children[n])}function AD(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function OD(t){return"object"==typeof t&&null!=t&&t.outlets}function ND(t,e,n,r,i){let s={};return r&&jN(r,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new ZN(n.root===t?e:DD(n.root,t,e),s,i)}function DD(t,e,n){const r={};return jN(t.children,(t,i)=>{r[i]=t===e?n:DD(t,e,n)}),new HN(t.segments,r)}class PD{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&AD(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(OD);if(r&&r!==FN(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class RD{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function MD(t,e,n){if(t||(t=new HN([],{})),0===t.segments.length&&t.hasChildren())return LD(t,e,n);const r=function(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const e=t.segments[i],o=n[r];if(OD(o))break;const a=`${o}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!VD(a,u,e))return s;r+=2}else{if(!VD(a,{},e))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new HN(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new HN(t.segments.slice(r.pathIndex),t.children),LD(e,0,i)}return r.match&&0===i.length?new HN(t.segments,{}):r.match&&!t.hasChildren()?FD(t,e,n):r.match?LD(t,0,i):FD(t,e,n)}function LD(t,e,n){if(0===n.length)return new HN(t.segments,{});{const r=function(t){return OD(t[0])?t[0].outlets:{[AN]:t}}(n),i={};return jN(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=MD(t.children[r],e,n))}),jN(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new HN(t.segments,i)}}function FD(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(OD(s)){const t=jD(s.outlets);return new HN(r,t)}if(0===i&&AD(n[0])){r.push(new WN(t.segments[e].path,UD(n[0]))),i++;continue}const o=OD(s)?s.outlets.primary:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&AD(a)?(r.push(new WN(o,UD(a))),i+=2):(r.push(new WN(o,{})),i++)}return new HN(r,{})}function jD(t){const e={};return jN(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=FD(new HN([],{}),0,t))}),e}function UD(t){const e={};return jN(t,(t,n)=>e[n]=`${t}`),e}function VD(t,e,n){return t==n.path&&RN(e,n.parameters)}class qD{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),SD(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=mD(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),jN(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=mD(t);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=mD(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new IN(t.value.snapshot))}),t.children.length&&this.forwardEvent(new SN(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(SD(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),BD(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function BD(t){SD(t.value),t.children.forEach(BD)}class zD{constructor(t,e){this.routes=t,this.module=e}}function $D(t){return"function"==typeof t}function GD(t){return t instanceof ZN}const ZD=Symbol("INITIAL_VALUE");function HD(){return CA(t=>function(...t){let e,n;return(0,Kf.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,Tt.k)(t[0])&&(t=t[0]),(0,WO.n)(t,n).lift(new YO(e))}(t.map(t=>t.pipe(Ac(1),Yf(ZD)))).pipe(tp((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==ZD)return t;if(r===ZD&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||GD(r))return r}return t},t)},ZD),Tc(t=>t!==ZD),(0,St.U)(t=>GD(t)?t:!0===t),Ac(1)))}let WD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&o._UZ(0,"router-outlet")},directives:function(){return[BP]},encapsulation:2}),t})();function KD(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];YD(r,QD(e,r))}}function YD(t,e){t.children&&KD(t.children,e)}function QD(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function JD(t){const e=t.children&&t.children.map(JD),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==AN&&(n.component=WD),n}function XD(t){return t.outlet||AN}function tP(t,e){const n=t.filter(t=>XD(t)===e);return n.push(...t.filter(t=>XD(t)!==e)),n}const eP={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function nP(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},eP):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||PN)(n,t,e);if(!i)return Object.assign({},eP);const s={};jN(i.posParams,(t,e)=>{s[e]=t.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function rP(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>iP(t,e,n)&&XD(n)!==AN)}(t,n,r)){const i=new HN(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&XD(s)!==AN){const n=new HN([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[XD(s)]=n}return i}(t,e,r,new HN(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>iP(t,e,n))}(t,n,r)){const s=new HN(t.segments,function(t,e,n,r,i,s){const o={};for(const a of r)if(iP(t,n,a)&&!i[XD(a)]){const n=new HN([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[XD(a)]=n}return Object.assign(Object.assign({},i),o)}(t,e,n,r,t.children,i));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new HN(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function iP(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function sP(t,e,n,r){return!!(XD(t)===r||r!==AN&&iP(e,n,t))&&("**"===t.path||nP(e,t,n).matched)}function oP(t,e,n){return 0===e.length&&!t.children[n]}class aP{constructor(t){this.segmentGroup=t||null}}class uP{constructor(t){this.urlTree=t}}function cP(t){return new Et.y(e=>e.error(new aP(t)))}function lP(t){return new Et.y(e=>e.error(new uP(t)))}function hP(t){return new Et.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class dP{constructor(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(o.h0i)}apply(){const t=rP(this.urlTree.root,[],[],this.config).segmentGroup,e=new HN(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,AN).pipe((0,St.U)(t=>this.createUrlTree(fP(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(tN(t=>{if(t instanceof uP)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof aP)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,AN).pipe((0,St.U)(e=>this.createUrlTree(fP(e),t.queryParams,t.fragment))).pipe(tN(t=>{if(t instanceof aP)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new HN([],{[AN]:t}):t;return new ZN(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,St.U)(t=>new HN([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,xt.D)(r).pipe(iN(r=>{const i=n.children[r],s=tP(e,r);return this.expandSegmentGroup(t,s,i,r).pipe((0,St.U)(t=>({segment:t,outlet:r})))}),tp((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Tc((e,n)=>t(e,n,r)):Uc.y,sN(1),n?Dc(e):Mc(()=>new Ec))}())}expandSegment(t,e,n,r,i,s){return(0,xt.D)(n).pipe(iN(o=>this.expandSegmentAgainstRoute(t,e,n,o,r,i,s).pipe(tN(t=>{if(t instanceof aP)return(0,xc.of)(null);throw t}))),Vc(t=>!!t),tN((t,n)=>{if(t instanceof Ec||"EmptyError"===t.name){if(oP(e,r,i))return(0,xc.of)(new HN([],{}));throw new aP(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,s,o){return sP(r,e,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s):cP(e):cP(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?lP(i):this.lineralizeSegments(n,i).pipe((0,rN.zg)(n=>{const i=new HN(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:u,positionalParamSegments:c}=nP(e,r,i);if(!o)return cP(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?lP(l):this.lineralizeSegments(r,l).pipe((0,rN.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),s,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,xc.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,St.U)(t=>(n._loadedConfig=t,new HN(r,{})))):(0,xc.of)(new HN(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=nP(e,n,r);if(!s)return cP(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,rN.zg)(t=>{const r=t.module,s=t.routes,{segmentGroup:a,slicedSegments:c}=rP(e,o,u,s),l=new HN(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,s,l).pipe((0,St.U)(t=>new HN(o,t)));if(0===s.length&&0===c.length)return(0,xc.of)(new HN(o,{}));const h=XD(n)===i;return this.expandSegment(r,l,s,c,h?AN:i,!0).pipe((0,St.U)(t=>new HN(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,xc.of)(new zD(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,xc.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,rN.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,St.U)(t=>(e._loadedConfig=t,t))):function(t){return new Et.y(e=>e.error(DN(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,xc.of)(new zD([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,xc.of)(!0);const i=r.map(r=>{const i=t.get(r);let s;if(function(t){return t&&$D(t.canLoad)}(i))s=i.canLoad(e,n);else{if(!$D(i))throw new Error("Invalid CanLoad guard");s=i(e,n)}return UN(s)});return(0,xc.of)(i).pipe(HD(),(0,uN.b)(t=>{if(!GD(t))return;const e=DN(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,St.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,xc.of)(n);if(r.numberOfChildren>1||!r.children.primary)return hP(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new ZN(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return jN(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let s={};return jN(e.children,(e,i)=>{s[i]=this.createSegmentGroup(t,e,n,r)}),new HN(i,s)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function fP(t){const e={};for(const n of Object.keys(t.children)){const r=fP(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new HN(t.segments.concat(e.segments),e.children)}return t}(new HN(t.segments,e))}class pP{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class gP{constructor(t,e){this.component=t,this.route=e}}function mP(t,e,n){const r=t._root;return vP(r,e?e._root:null,n,[r.value])}function yP(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function vP(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=mD(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!KN(t.url,e.url);case"pathParamsOrQueryParamsChange":return!KN(t.url,e.url)||!RN(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kD(t,e)||!RN(t.queryParams,e.queryParams);case"paramsChange":default:return!kD(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new pP(r)):(s.data=o.data,s._resolvedData=o._resolvedData),vP(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new gP(a.outlet.component,o))}else o&&_P(e,a,i),i.canActivateChecks.push(new pP(r)),vP(t,null,s.component?a?a.children:null:n,r,i)}(t,s[t.value.outlet],n,r.concat([t.value]),i),delete s[t.value.outlet]}),jN(s,(t,e)=>_P(t,n.getContext(e),i)),i}function _P(t,e,n){const r=mD(t),i=t.value;jN(r,(t,r)=>{_P(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new gP(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class wP{}function bP(t){return new Et.y(e=>e.error(t))}class xP{constructor(t,e,n,r,i,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const t=rP(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,AN);if(null===e)return null;const n=new bD([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},AN,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new gD(n,e),i=new xD(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=wD(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],s=tP(t,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=TP(n);return r.sort((t,e)=>t.value.outlet===AN?-1:e.value.outlet===AN?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return oP(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!sP(t,e,n,r))return null;let i,s=[],o=[];if("**"===t.path){const r=n.length>0?FN(n).parameters:{};i=new bD(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,IP(t),XD(t),t.component,t,SP(e),kP(e)+n.length,CP(t))}else{const r=nP(e,t,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new bD(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,IP(t),XD(t),t.component,t,SP(e),kP(e)+s.length,CP(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=rP(e,s,o,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new gD(i,t)]}if(0===a.length&&0===c.length)return[new gD(i,[])];const l=XD(t)===r,h=this.processSegment(a,u,c,l?AN:r);return null===h?null:[new gD(i,h)]}}function EP(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function TP(t){const e=[],n=new Set;for(const r of t){if(!EP(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=TP(r.children);e.push(new gD(r.value,t))}return e.filter(t=>!n.has(t))}function SP(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function kP(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function IP(t){return t.data||{}}function CP(t){return t.resolve||{}}function AP(t){return CA(e=>{const n=t(e);return n?(0,xt.D)(n).pipe((0,St.U)(()=>e)):(0,xc.of)(e)})}class OP extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const NP=new o.OlP("ROUTES");class DP{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,St.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new zD(LN(r.injector.get(NP,void 0,o.XFs.Self|o.XFs.Optional)).map(JD),r)}),tN(t=>{throw e._loader$=void 0,t}));return e._loader$=new XO.c(n,()=>new wc.xQ).pipe((0,cN.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,xt.D)(this.loader.load(t)):UN(t()).pipe((0,rN.zg)(t=>t instanceof o.YKP?(0,xc.of)(t):(0,xt.D)(this.compiler.compileModuleAsync(t))))}}class PP{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new RP,this.attachRef=null}}class RP{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new PP,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class MP{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function LP(t){throw t}function FP(t,e,n){return e.parse("/")}function jP(t,e){return(0,xc.of)(null)}const UP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},VP={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let qP=(()=>{class t{constructor(t,e,n,r,i,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new wc.xQ,this.errorHandler=LP,this.malformedUriErrorHandler=FP,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:jP,afterPreactivation:jP},this.urlHandlingStrategy=new MP,this.routeReuseStrategy=new OP,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=i.get(o.h0i),this.console=i.get(o.c2e);const c=i.get(o.R0b);this.isNgZoneEnabled=c instanceof o.R0b&&o.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new ZN(new HN([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new DP(s,a,t=>this.triggerEvent(new xN(t)),t=>this.triggerEvent(new EN(t))),this.routerState=vD(this.currentUrlTree,this.rootComponentType),this.transitions=new zO({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const e=this.events;return t.pipe(Tc(t=>0!==t.id),(0,St.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),CA(t=>{let n=!1,r=!1;return(0,xc.of)(t).pipe((0,uN.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),CA(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,xc.of)(t).pipe(CA(t=>{const n=this.transitions.getValue();return e.next(new fN(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Cc.E:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,CA(t=>function(t,e,n,r,i){return new dP(t,e,n,r,i).apply()}(r,i,s,t.extractedUrl,o).pipe((0,St.U)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),(0,uN.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,rN.zg)(s=>function(t,e,n,r,i="emptyOnly",s="legacy"){try{const o=new xP(t,e,n,r,i,s).recognize();return null===o?bP(new wP):(0,xc.of)(o)}catch(o){return bP(o)}}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe((0,St.U)(t=>Object.assign(Object.assign({},s),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,uN.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new yN(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=t,a=new fN(n,this.serializeUrl(r),i,s);e.next(a);const u=vD(r,this.rootComponentType).snapshot;return(0,xc.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Cc.E}),AP(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,uN.b)(t=>{const e=new vN(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,St.U)(t=>Object.assign(Object.assign({},t),{guards:mP(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,rN.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,xc.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,xt.D)(t).pipe((0,rN.zg)(t=>function(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,xc.of)(!0);const o=s.map(s=>{const o=yP(s,e,i);let a;if(function(t){return t&&$D(t.canDeactivate)}(o))a=UN(o.canDeactivate(t,e,n,r));else{if(!$D(o))throw new Error("Invalid CanDeactivate guard");a=UN(o(t,e,n,r))}return a.pipe(Vc())});return(0,xc.of)(o).pipe(HD())}(t.component,t.route,n,e,r)),Vc(t=>!0!==t,!0))}(o,r,i,t).pipe((0,rN.zg)(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return(0,xt.D)(e).pipe(iN(e=>Wf(function(t,e){return null!==t&&e&&e(new TN(t)),(0,xc.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new kN(t)),(0,xc.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>JO(()=>{const i=e.guards.map(i=>{const s=yP(i,e.node,n);let o;if(function(t){return t&&$D(t.canActivateChild)}(s))o=UN(s.canActivateChild(r,t));else{if(!$D(s))throw new Error("Invalid CanActivateChild guard");o=UN(s(r,t))}return o.pipe(Vc())});return(0,xc.of)(i).pipe(HD())}));return(0,xc.of)(i).pipe(HD())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,xc.of)(!0);const i=r.map(r=>JO(()=>{const i=yP(r,e,n);let s;if(function(t){return t&&$D(t.canActivate)}(i))s=UN(i.canActivate(e,t));else{if(!$D(i))throw new Error("Invalid CanActivate guard");s=UN(i(e,t))}return s.pipe(Vc())}));return(0,xc.of)(i).pipe(HD())}(t,e.route,n))),Vc(t=>!0!==t,!0))}(r,s,t,e):(0,xc.of)(n)),(0,St.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,uN.b)(t=>{if(GD(t.guardsResult)){const e=DN(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new _N(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Tc(t=>!!t.guardsResult||(this.restoreHistory(t),this.cancelNavigationTransition(t,""),!1)),AP(t=>{if(t.guards.canActivateChecks.length)return(0,xc.of)(t).pipe((0,uN.b)(t=>{const e=new wN(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),CA(t=>{let e=!1;return(0,xc.of)(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,rN.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,xc.of)(t);let s=0;return(0,xt.D)(i).pipe(iN(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,xc.of)({});const s={};return(0,xt.D)(i).pipe((0,rN.zg)(i=>function(t,e,n,r){const i=yP(t,e,r);return UN(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe((0,uN.b)(t=>{s[i]=t}))),sN(1),(0,rN.zg)(()=>Object.keys(s).length===i.length?(0,xc.of)(s):Cc.E))}(t._resolve,t,e,r).pipe((0,St.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),wD(t,n).resolve),null)))}(t.route,e,n,r)),(0,uN.b)(()=>s++),sN(1),(0,rN.zg)(e=>s===i.length?(0,xc.of)(t):Cc.E))})),(0,uN.b)({next:()=>e=!0,complete:()=>{e||(this.restoreHistory(t),this.cancelNavigationTransition(t,"At least one route resolver didn't emit any value."))}}));var n,r}),(0,uN.b)(t=>{const e=new bN(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),AP(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,St.U)(t=>{const e=function(t,e,n){const r=ID(t,e._root,n?n._root:void 0);return new yD(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,uN.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=t=>this.triggerEvent(t),(0,St.U)(t=>(new qD(o,t.targetRouterState,t.currentRouterState,a).activate(s),t))),(0,uN.b)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){const e=`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(t),this.cancelNavigationTransition(t,e)):this.cancelNavigationTransition(t,e)}this.currentNavigation=null},t=>t.lift(new lN(i))),tN(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=GD(n.url);r||(this.navigated=!0,this.restoreHistory(t,!0));const i=new gN(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.restoreHistory(t,!0);const r=new mN(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(j_){t.reject(j_)}}var i;return Cc.E}));var i,s,o,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){KD(t),this.config=t.map(JD),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=e,a=n||this.routerState.root,u=o?this.currentUrlTree.fragment:i;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return ND(e.root,e.root,e,r,i);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new PD(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return jN(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new PD(n,e,r)}(n);if(s.toRoot())return ND(e.root,new HN([],{}),e,r,i);const o=function(t,e,n){if(t.isAbsolute)return new RD(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new RD(t,t===e.root,0)}const r=AD(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new RD(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?LD(o.segmentGroup,o.index,s.commands):MD(o.segmentGroup,o.index,s.commands);return ND(o.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=GD(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},UP):!1===e?Object.assign({},VP):e,GD(t))return BN(this.currentUrlTree,t,n);const r=this.parseUrl(t);return BN(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new pN(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){var s,o;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),u="imperative"!==e&&"imperative"===(null==a?void 0:a.source),c=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===t.toString();if(u&&c)return Promise.resolve(!0);let l,h,d;i?(l=i.resolve,h=i.reject,d=i.promise):d=new Promise((t,e)=>{l=t,h=e});const f=++this.navigationId;let p;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),p=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(s=this.browserPageId)&&void 0!==s?s:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):p=0,this.setTransition({id:f,targetPageId:p,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:l,reject:h,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}restoreHistory(t,e=!1){var n,r;if("computed"===this.canceledNavigationResolution){const e=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)||0===e?this.currentUrlTree===(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)&&0===e&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(e)}else"replace"===this.canceledNavigationResolution&&(e&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,e){const n=new gN(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(o.DyG),o.LFG(YN),o.LFG(RP),o.LFG(T),o.LFG(o.zs3),o.LFG(o.v3s),o.LFG(o.Sil),o.LFG(void 0))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})(),BP=(()=>{class t{constructor(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new o.vpe,this.deactivateEvents=new o.vpe,this.name=r||AN,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new zP(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(RP),o.Y36(o.s_b),o.Y36(o._Vd),o.$8M("name"),o.Y36(o.sBO))},t.\u0275dir=o.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class zP{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===_D?this.route:t===RP?this.childContexts:this.parent.get(t,e)}}class $P{}class GP{preload(t,e){return(0,xc.of)(null)}}let ZP=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new DP(e,n,e=>t.triggerEvent(new xN(e)),e=>t.triggerEvent(new EN(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Tc(t=>t instanceof pN),iN(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(o.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,xt.D)(n).pipe((0,Hf.J)(),(0,St.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,xc.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,rN.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(qP),o.LFG(o.v3s),o.LFG(o.Sil),o.LFG(o.zs3),o.LFG($P))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})(),HP=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof fN?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof pN&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof CN&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new CN(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(qP),o.LFG(V),o.LFG(void 0))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})();const WP=new o.OlP("ROUTER_CONFIGURATION"),KP=new o.OlP("ROUTER_FORROOT_GUARD"),YP=[T,{provide:YN,useClass:QN},{provide:qP,useFactory:function(t,e,n,r,i,s,o,a={},u,c){const l=new qP(null,t,e,n,r,i,s,LN(o));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[YN,RP,T,o.zs3,o.v3s,o.Sil,NP,WP,[class{},new o.FiY],[class{},new o.FiY]]},RP,{provide:_D,useFactory:function(t){return t.routerState.root},deps:[qP]},{provide:o.v3s,useClass:o.EAV},ZP,GP,class{preload(t,e){return e().pipe(tN(()=>(0,xc.of)(null)))}},{provide:WP,useValue:{enableTracing:!1}}];function QP(){return new o.PXZ("Router",qP)}let JP=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[YP,nR(e),{provide:KP,useFactory:eR,deps:[[qP,new o.FiY,new o.tp0]]},{provide:WP,useValue:n||{}},{provide:_,useFactory:tR,deps:[l,[new o.tBr(b),new o.FiY],WP]},{provide:HP,useFactory:XP,deps:[qP,V,WP]},{provide:$P,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:GP},{provide:o.PXZ,multi:!0,useFactory:QP},[rR,{provide:o.ip1,multi:!0,useFactory:iR,deps:[rR]},{provide:oR,useFactory:sR,deps:[rR]},{provide:o.tb,multi:!0,useExisting:oR}]]}}static forChild(e){return{ngModule:t,providers:[nR(e)]}}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(KP,8),o.LFG(qP,8))},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({}),t})();function XP(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new HP(t,e,n)}function tR(t,e,n={}){return n.useHash?new E(t,e):new x(t,e)}function eR(t){return"guarded"}function nR(t){return[{provide:o.deG,multi:!0,useValue:t},{provide:NP,multi:!0,useValue:t}]}let rR=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new wc.xQ}appInitializer(){return this.injector.get(d,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let t=null;const e=new Promise(e=>t=e),n=this.injector.get(qP),r=this.injector.get(WP);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,xc.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(WP),n=this.injector.get(ZP),r=this.injector.get(HP),i=this.injector.get(qP),s=this.injector.get(o.z2F);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(o.zs3))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t})();function iR(t){return t.appInitializer.bind(t)}function sR(t){return t.bootstrapListener.bind(t)}const oR=new o.OlP("Router Initializer");function aR(t,e){if(1&t&&(o.O4$(),o.TgZ(0,"g",10),o.TgZ(1,"svg"),o._UZ(2,"rect",11),o.TgZ(3,"defs"),o.TgZ(4,"clipPath",12),o._UZ(5,"rect",13),o.qZA(),o.qZA(),o._UZ(6,"image",14),o.TgZ(7,"title"),o._uU(8),o.qZA(),o.qZA(),o.qZA()),2&t){const t=e.$implicit;o.xp6(1),o.uIk("width",t.dimension.width)("height",t.dimension.height),o.xp6(5),o.uIk("href",t.image),o.xp6(2),o.Oqu(t.label)}}function uR(t,e){if(1&t&&(o.TgZ(0,"div",15),o._uU(1),o.qZA()),2&t){const t=e.$implicit;o.xp6(1),o.AsE(" ",t.name," - ",t.birthday," ")}}function cR(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"div",16),o.NdJ("click",function(){return o.CHM(t),o.oxw().selectedNode={}}),o.TgZ(1,"div",17),o._UZ(2,"img",18),o.TgZ(3,"span",19),o._uU(4),o.qZA(),o.qZA(),o.qZA()}if(2&t){const t=o.oxw();o.xp6(2),o.uIk("src",t.selectedNode.image,o.LSH),o.xp6(2),o.Oqu(t.selectedNode.name)}}const lR=function(){return{orientation:"TB"}},hR=[{path:"",component:(()=>{class t{constructor(t){this.firestore=t,this.people=[],this.nodes=[],this.edges=[],this.selectedNode={},this.upcomingBirthdays=[],this.update$=new wc.xQ}ngOnInit(){this.firestore.collection("people").valueChanges().subscribe(t=>{this.people=t,this.people.forEach(t=>{this.nodes.push({id:t.id,label:t.name,image:t.image}),t.parent&&t.parent.forEach(e=>{this.edges.push({id:e+"_"+t.id,source:e,target:t.id})})});let e=new Date;this.people.forEach(t=>{let n=new Date(t.birthday);n.setFullYear(e.getFullYear()),""!==t.birthday&&n>e&&this.upcomingBirthdays.push({name:t.name,date:new Date(n).toLocaleDateString("en-us",{weekday:"long",month:"short",day:"numeric"})})}),this.update$.next(!0)})}onNodeSelect(t){let e=this.people.find(e=>e.id===t.id);e&&(this.selectedNode=e)}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(VO))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-home"]],decls:11,vars:8,consts:[[1,"home"],[1,"container"],[1,"graph-container"],[1,"h-100"],[3,"layoutSettings","links","nodes","draggingEnabled","update$","select"],["nodeTemplate",""],[1,"row","birthday-list-container","py-3"],[1,"col-md-8","birthday-list"],["class","birthday-list-item mb-2",4,"ngFor","ngForOf"],["class","node-details-modal-overlay easy-center",3,"click",4,"ngIf"],[1,"node"],["x","0","y","0","rx","20","ry","20","width","80","height","80"],["id","rectView"],["x","10","y","10","rx","10","ry","10","width","60","height","60"],["width","80","height","80","clip-path","url(#rectView)"],[1,"birthday-list-item","mb-2"],[1,"node-details-modal-overlay","easy-center",3,"click"],[1,"node-details-modal","easy-center","p-5"],[1,"node-details-modal-img"],[1,"node-details-modal-text","mt-3"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"ngx-graph",4),o.NdJ("select",function(t){return e.onNodeSelect(t)}),o.YNc(5,aR,9,4,"ng-template",null,5,o.W1O),o.qZA(),o.qZA(),o.qZA(),o.TgZ(7,"div",6),o.TgZ(8,"div",7),o.YNc(9,uR,2,2,"div",8),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(10,cR,5,2,"div",9)),2&t&&(o.xp6(4),o.Q6J("layoutSettings",o.DdM(7,lR))("links",e.edges)("nodes",e.nodes)("draggingEnabled",!1)("update$",e.update$),o.xp6(5),o.Q6J("ngForOf",e.people),o.xp6(1),o.Q6J("ngIf",void 0!==e.selectedNode.id))},directives:[ch,D,R],styles:[".graph-container[_ngcontent-%COMP%]{border-radius:1.5rem;box-shadow:inset 1.5rem 1.5rem 3rem #1b1a1b,inset -1.5rem -1.5rem 3rem #252425;height:80vh;touch-action:none;overflow:hidden}.node[_ngcontent-%COMP%]{filter:drop-shadow(.5rem .5rem .5rem #1b1a1b) drop-shadow(-.5rem -.5rem .5rem #252425);transition:.5s ease}.node[_ngcontent-%COMP%]:hover{cursor:pointer;filter:drop-shadow(.5rem .5rem .5rem #252425) drop-shadow(-.5rem -.5rem .5rem #1b1a1b)}svg[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]{fill:#201f20}svg[_ngcontent-%COMP%]   image[_ngcontent-%COMP%]{filter:grayscale(100%)}.node-details-modal-overlay[_ngcontent-%COMP%]{position:fixed;height:100vh;width:100vw;top:0;left:0;right:0;bottom:0;z-index:9999;background-color:#00000080}.node-details-modal[_ngcontent-%COMP%]{box-shadow:inset .5rem .5rem .5rem #1b1a1b,inset -.5rem -.5rem .5rem #252425;background-color:#201f20;border-radius:1.5rem;max-width:80%;flex-direction:column}.node-details-modal-img[_ngcontent-%COMP%]{box-shadow:.5rem .5rem .5rem #1b1a1b,-.5rem -.5rem .5rem #252425;padding:10px;width:40%;border-radius:1.5rem}.birthday-list-container[_ngcontent-%COMP%]{font-size:smaller;color:#fafafa}.birthday-list-header[_ngcontent-%COMP%]{font-weight:700}"]}),t})()}];let dR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[JP.forRoot(hR)],JP]}),t})();function fR(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"div",1),o.TgZ(1,"div",2),o.TgZ(2,"div",3),o._uU(3," Lineage. "),o.qZA(),o.TgZ(4,"form",4,5),o._UZ(6,"input",6),o.TgZ(7,"button",7),o.NdJ("click",function(){o.CHM(t);const e=o.MAs(5);return o.oxw().onAuth(e)}),o._uU(8," Go "),o.qZA(),o.qZA(),o.qZA(),o.qZA()}}let pR=(()=>{class t{constructor(t){this.cookieService=t,this.enableAuth=!0}ngOnInit(){this.cookieService.check("auth")&&(this.enableAuth=!1)}onAuth(t){t.valid&&"chalil"===t.value.password&&(this.cookieService.set("auth","true",1),this.enableAuth=!1)}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(fh))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-auth"]],decls:1,vars:1,consts:[["class","auth-container easy-center",4,"ngIf"],[1,"auth-container","easy-center"],[1,"auth-card","p-5"],[1,"header","mb-3"],[1,"form"],["authForm","ngForm"],["type","password","required","","ngModel","","name","password","placeholder","Enter password!",1,"py-3","px-4","mb-3"],["type","submit",1,"py-3","px-4",3,"click"]],template:function(t,e){1&t&&o.YNc(0,fR,9,0,"div",0),2&t&&o.Q6J("ngIf",e.enableAuth)},directives:[R,we,Kt,me,Pt,Ee,Wt,_e],styles:[".auth-container[_ngcontent-%COMP%]{position:fixed;height:100vh;width:100vw;top:0;left:0;right:0;bottom:0;z-index:9999;background-color:#201f20}.auth-card[_ngcontent-%COMP%]{box-shadow:.5rem .5rem .5rem #1b1a1b,-.5rem -.5rem .5rem #252425;border-radius:1.5rem}.header[_ngcontent-%COMP%]{font-family:Caveat,sans-serif;font-size:x-large;text-align:center}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{border-radius:1.5rem;background-color:#201f20;border:none;text-align:center}input[_ngcontent-%COMP%]{box-shadow:inset .5rem .5rem .5rem #1b1a1b,inset -.5rem -.5rem .5rem #252425}input[_ngcontent-%COMP%]:focus-visible{outline:none}button[_ngcontent-%COMP%]{box-shadow:.5rem .5rem .5rem #1b1a1b,-.5rem -.5rem .5rem #252425;cursor:pointer}button[_ngcontent-%COMP%]:hover{box-shadow:inset .5rem .5rem .5rem #1b1a1b,inset -.5rem -.5rem .5rem #252425}"]}),t})(),gR=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-header"]],decls:4,vars:0,consts:[[1,"header","easy-center"],[1,"container"],[1,"header-text","py-3"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o._uU(3," Lineage. "),o.qZA(),o.qZA(),o.qZA())},styles:[".header-text[_ngcontent-%COMP%]{font-family:Caveat,sans-serif;font-size:x-large;text-align:center}"]}),t})(),mR=(()=>{class t{constructor(){this.title="lineage"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-root"]],decls:3,vars:0,template:function(t,e){1&t&&(o._UZ(0,"app-auth"),o._UZ(1,"app-header"),o._UZ(2,"router-outlet"))},directives:[pR,gR,BP],styles:[""]}),t})(),yR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t,bootstrap:[mR]}),t.\u0275inj=o.cJS({providers:[fh],imports:[[bt,j,Se,dR,dh,$f,Gf.hO.initializeApp(BO),qO]]}),t})();(0,o.G48)(),_t().bootstrapModule(yR).catch(t=>console.error(t))},6304:(t,e,n)=>{"use strict";function r(t,e,n,r,i,s,o){try{var a=t[s](o),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise(function(i,s){var o=t.apply(e,n);function a(t){r(o,i,s,a,u,"next",t)}function u(t){r(o,i,s,a,u,"throw",t)}a(void 0)})}}n.d(e,{Z:()=>i})},4762:(t,e,n)=>{"use strict";function r(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function i(t,e,n,r){var i,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,n,o):i(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function s(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}n.d(e,{_T:()=>r,gn:()=>i,w6:()=>s})}},t=>{"use strict";t(t.s=9396)}]);